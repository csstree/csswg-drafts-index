var HE=Object.create;var Ql=Object.defineProperty;var WE=Object.getOwnPropertyDescriptor;var UE=Object.getOwnPropertyNames;var $E=Object.getPrototypeOf,GE=Object.prototype.hasOwnProperty;var pn=(t,e)=>()=>(t&&(e=t(t=0)),e);var Y=(t,e)=>()=>(e||t((e={exports:{}}).exports,e),e.exports),Ae=(t,e)=>{for(var r in e)Ql(t,r,{get:e[r],enumerable:!0})},lv=(t,e,r,i)=>{if(e&&typeof e=="object"||typeof e=="function")for(let s of UE(e))!GE.call(t,s)&&s!==r&&Ql(t,s,{get:()=>e[s],enumerable:!(i=WE(e,s))||i.enumerable});return t};var gn=(t,e,r)=>(r=t!=null?HE($E(t)):{},lv(e||!t||!t.__esModule?Ql(r,"default",{value:t,enumerable:!0}):r,t)),mn=t=>lv(Ql({},"__esModule",{value:!0}),t);var Me=Y(Qe=>{"use strict";Qe.AtKeyword=3;Qe.BadString=6;Qe.BadUrl=8;Qe.CDC=15;Qe.CDO=14;Qe.Colon=16;Qe.Comma=18;Qe.Comment=25;Qe.Delim=9;Qe.Dimension=12;Qe.EOF=0;Qe.Function=2;Qe.Hash=4;Qe.Ident=1;Qe.LeftCurlyBracket=23;Qe.LeftParenthesis=21;Qe.LeftSquareBracket=19;Qe.Number=10;Qe.Percentage=11;Qe.RightCurlyBracket=24;Qe.RightParenthesis=22;Qe.RightSquareBracket=20;Qe.Semicolon=17;Qe.String=5;Qe.Url=7;Qe.WhiteSpace=13});var yn=Y(ct=>{"use strict";function Kr(t){return t>=48&&t<=57}function VE(t){return Kr(t)||t>=65&&t<=70||t>=97&&t<=102}function cv(t){return t>=65&&t<=90}function uv(t){return t>=97&&t<=122}function fv(t){return cv(t)||uv(t)}function dv(t){return t>=128}function Rs(t){return fv(t)||dv(t)||t===95}function KE(t){return Rs(t)||Kr(t)||t===45}function hv(t){return t>=0&&t<=8||t===11||t>=14&&t<=31||t===127}function Tf(t){return t===10||t===13||t===12}function pv(t){return Tf(t)||t===32||t===9}function Sf(t,e){return!(t!==92||Tf(e)||e===0)}function YE(t,e,r){return t===45?Rs(e)||e===45||Sf(e,r):Rs(t)?!0:t===92?Sf(t,e):!1}function QE(t,e,r){return t===43||t===45?Kr(e)?2:e===46&&Kr(r)?3:0:t===46?Kr(e)?2:0:Kr(t)?1:0}function XE(t){return t===65279||t===65534?1:0}var Af=new Array(128),gv=128,mv=130,yv=131,Lf=132,vv=133;for(let t=0;t<Af.length;t++)Af[t]=pv(t)&&mv||Kr(t)&&yv||Rs(t)&&Lf||hv(t)&&vv||t||gv;function JE(t){return t<128?Af[t]:Lf}ct.DigitCategory=yv;ct.EofCategory=gv;ct.NameStartCategory=Lf;ct.NonPrintableCategory=vv;ct.WhiteSpaceCategory=mv;ct.charCodeCategory=JE;ct.isBOM=XE;ct.isDigit=Kr;ct.isHexDigit=VE;ct.isIdentifierStart=YE;ct.isLetter=fv;ct.isLowercaseLetter=uv;ct.isName=KE;ct.isNameStart=Rs;ct.isNewline=Tf;ct.isNonAscii=dv;ct.isNonPrintable=hv;ct.isNumberStart=QE;ct.isUppercaseLetter=cv;ct.isValidEscape=Sf;ct.isWhiteSpace=pv});var ir=Y(Tn=>{"use strict";var Jt=yn();function po(t,e){return e<t.length?t.charCodeAt(e):0}function bv(t,e,r){return r===13&&po(t,e+1)===10?2:1}function wv(t,e,r){let i=t.charCodeAt(e);return Jt.isUppercaseLetter(i)&&(i=i|32),i===r}function ZE(t,e,r,i){if(r-e!==i.length||e<0||r>t.length)return!1;for(let s=e;s<r;s++){let a=i.charCodeAt(s-e),f=t.charCodeAt(s);if(Jt.isUppercaseLetter(f)&&(f=f|32),f!==a)return!1}return!0}function eM(t,e){for(;e>=0&&Jt.isWhiteSpace(t.charCodeAt(e));e--);return e+1}function tM(t,e){for(;e<t.length&&Jt.isWhiteSpace(t.charCodeAt(e));e++);return e}function Xl(t,e){for(;e<t.length&&Jt.isDigit(t.charCodeAt(e));e++);return e}function Ef(t,e){if(e+=2,Jt.isHexDigit(po(t,e-1))){for(let i=Math.min(t.length,e+5);e<i&&Jt.isHexDigit(po(t,e));e++);let r=po(t,e);Jt.isWhiteSpace(r)&&(e+=bv(t,e,r))}return e}function nM(t,e){for(;e<t.length;e++){let r=t.charCodeAt(e);if(!Jt.isName(r)){if(Jt.isValidEscape(r,po(t,e+1))){e=Ef(t,e)-1;continue}break}}return e}function rM(t,e){let r=t.charCodeAt(e);if((r===43||r===45)&&(r=t.charCodeAt(e+=1)),Jt.isDigit(r)&&(e=Xl(t,e+1),r=t.charCodeAt(e)),r===46&&Jt.isDigit(t.charCodeAt(e+1))&&(e+=2,e=Xl(t,e)),wv(t,e,101)){let i=0;r=t.charCodeAt(e+1),(r===45||r===43)&&(i=1,r=t.charCodeAt(e+2)),Jt.isDigit(r)&&(e=Xl(t,e+1+i+1))}return e}function iM(t,e){for(;e<t.length;e++){let r=t.charCodeAt(e);if(r===41){e++;break}Jt.isValidEscape(r,po(t,e+1))&&(e=Ef(t,e))}return e}function oM(t){if(t.length===1&&!Jt.isHexDigit(t.charCodeAt(0)))return t[0];let e=parseInt(t,16);return(e===0||e>=55296&&e<=57343||e>1114111)&&(e=65533),String.fromCodePoint(e)}Tn.cmpChar=wv;Tn.cmpStr=ZE;Tn.consumeBadUrlRemnants=iM;Tn.consumeEscaped=Ef;Tn.consumeName=nM;Tn.consumeNumber=rM;Tn.decodeEscaped=oM;Tn.findDecimalNumberEnd=Xl;Tn.findWhiteSpaceEnd=tM;Tn.findWhiteSpaceStart=eM;Tn.getNewlineLength=bv});var Fs=Y((a5,xv)=>{"use strict";var sM=["EOF-token","ident-token","function-token","at-keyword-token","hash-token","string-token","bad-string-token","url-token","bad-url-token","delim-token","number-token","percentage-token","dimension-token","whitespace-token","CDO-token","CDC-token","colon-token","semicolon-token","comma-token","[-token","]-token","(-token",")-token","{-token","}-token"];xv.exports=sM});var Mf=Y(kv=>{"use strict";function aM(t=null,e){return t===null||t.length<e?new Uint32Array(Math.max(e+1024,16384)):t}kv.adoptBuffer=aM});var Nf=Y(Lv=>{"use strict";var Cv=Mf(),lM=yn(),Sv=10,cM=12,Av=13;function Tv(t){let e=t.source,r=e.length,i=e.length>0?lM.isBOM(e.charCodeAt(0)):0,s=Cv.adoptBuffer(t.lines,r),a=Cv.adoptBuffer(t.columns,r),f=t.startLine,d=t.startColumn;for(let p=i;p<r;p++){let g=e.charCodeAt(p);s[p]=f,a[p]=d++,(g===Sv||g===Av||g===cM)&&(g===Av&&p+1<r&&e.charCodeAt(p+1)===Sv&&(p++,s[p]=f,a[p]=d),f++,d=1)}s[r]=f,a[r]=d,t.lines=s,t.columns=a,t.computed=!0}var Df=class{constructor(){this.lines=null,this.columns=null,this.computed=!1}setSource(e,r=0,i=1,s=1){this.source=e,this.startOffset=r,this.startLine=i,this.startColumn=s,this.computed=!1}getLocation(e,r){return this.computed||Tv(this),{source:r,offset:this.startOffset+e,line:this.lines[e],column:this.columns[e]}}getLocationRange(e,r,i){return this.computed||Tv(this),{source:i,start:{offset:this.startOffset+e,line:this.lines[e],column:this.columns[e]},end:{offset:this.startOffset+r,line:this.lines[r],column:this.columns[r]}}}};Lv.OffsetToLocation=Df});var Jl=Y(Mv=>{"use strict";var Ev=Mf(),uM=ir(),fM=Fs(),Tt=Me(),Ln=16777215,Yr=24,dM=new Map([[Tt.Function,Tt.RightParenthesis],[Tt.LeftParenthesis,Tt.RightParenthesis],[Tt.LeftSquareBracket,Tt.RightSquareBracket],[Tt.LeftCurlyBracket,Tt.RightCurlyBracket]]),Of=class{constructor(e,r){this.setSource(e,r)}reset(){this.eof=!1,this.tokenIndex=-1,this.tokenType=0,this.tokenStart=this.firstCharOffset,this.tokenEnd=this.firstCharOffset}setSource(e="",r=()=>{}){e=String(e||"");let i=e.length,s=Ev.adoptBuffer(this.offsetAndType,e.length+1),a=Ev.adoptBuffer(this.balance,e.length+1),f=0,d=0,p=0,g=-1;for(this.offsetAndType=null,this.balance=null,r(e,(y,x,w)=>{switch(y){default:a[f]=i;break;case d:{let k=p&Ln;for(p=a[k],d=p>>Yr,a[f]=k,a[k++]=f;k<f;k++)a[k]===i&&(a[k]=f);break}case Tt.LeftParenthesis:case Tt.Function:case Tt.LeftSquareBracket:case Tt.LeftCurlyBracket:a[f]=p,d=dM.get(y),p=d<<Yr|f;break}s[f++]=y<<Yr|w,g===-1&&(g=x)}),s[f]=Tt.EOF<<Yr|i,a[f]=i,a[i]=i;p!==0;){let y=p&Ln;p=a[y],a[y]=i}this.source=e,this.firstCharOffset=g===-1?0:g,this.tokenCount=f,this.offsetAndType=s,this.balance=a,this.reset(),this.next()}lookupType(e){return e+=this.tokenIndex,e<this.tokenCount?this.offsetAndType[e]>>Yr:Tt.EOF}lookupOffset(e){return e+=this.tokenIndex,e<this.tokenCount?this.offsetAndType[e-1]&Ln:this.source.length}lookupValue(e,r){return e+=this.tokenIndex,e<this.tokenCount?uM.cmpStr(this.source,this.offsetAndType[e-1]&Ln,this.offsetAndType[e]&Ln,r):!1}getTokenStart(e){return e===this.tokenIndex?this.tokenStart:e>0?e<this.tokenCount?this.offsetAndType[e-1]&Ln:this.offsetAndType[this.tokenCount]&Ln:this.firstCharOffset}substrToCursor(e){return this.source.substring(e,this.tokenStart)}isBalanceEdge(e){return this.balance[this.tokenIndex]<e}isDelim(e,r){return r?this.lookupType(r)===Tt.Delim&&this.source.charCodeAt(this.lookupOffset(r))===e:this.tokenType===Tt.Delim&&this.source.charCodeAt(this.tokenStart)===e}skip(e){let r=this.tokenIndex+e;r<this.tokenCount?(this.tokenIndex=r,this.tokenStart=this.offsetAndType[r-1]&Ln,r=this.offsetAndType[r],this.tokenType=r>>Yr,this.tokenEnd=r&Ln):(this.tokenIndex=this.tokenCount,this.next())}next(){let e=this.tokenIndex+1;e<this.tokenCount?(this.tokenIndex=e,this.tokenStart=this.tokenEnd,e=this.offsetAndType[e],this.tokenType=e>>Yr,this.tokenEnd=e&Ln):(this.eof=!0,this.tokenIndex=this.tokenCount,this.tokenType=Tt.EOF,this.tokenStart=this.tokenEnd=this.source.length)}skipSC(){for(;this.tokenType===Tt.WhiteSpace||this.tokenType===Tt.Comment;)this.next()}skipUntilBalanced(e,r){let i=e,s,a;e:for(;i<this.tokenCount;i++){if(s=this.balance[i],s<e)break e;switch(a=i>0?this.offsetAndType[i-1]&Ln:this.firstCharOffset,r(this.source.charCodeAt(a))){case 1:break e;case 2:i++;break e;default:this.balance[s]===i&&(i=s)}}this.skip(i-this.tokenIndex)}forEachToken(e){for(let r=0,i=this.firstCharOffset;r<this.tokenCount;r++){let s=i,a=this.offsetAndType[r],f=a&Ln,d=a>>Yr;i=f,e(d,s,f,r)}}dump(){let e=new Array(this.tokenCount);return this.forEachToken((r,i,s,a)=>{e[a]={idx:a,type:fM[r],chunk:this.source.substring(i,s),balance:this.balance[a]}}),e}};Mv.TokenStream=Of});var _s=Y(Ce=>{"use strict";var Se=Me(),Pe=yn(),Ye=ir(),hM=Fs(),pM=Nf(),gM=Jl();function mM(t,e){function r(x){return x<d?t.charCodeAt(x):0}function i(){if(g=Ye.consumeNumber(t,g),Pe.isIdentifierStart(r(g),r(g+1),r(g+2))){y=Se.Dimension,g=Ye.consumeName(t,g);return}if(r(g)===37){y=Se.Percentage,g++;return}y=Se.Number}function s(){let x=g;if(g=Ye.consumeName(t,g),Ye.cmpStr(t,x,g,"url")&&r(g)===40){if(g=Ye.findWhiteSpaceEnd(t,g+1),r(g)===34||r(g)===39){y=Se.Function,g=x+4;return}f();return}if(r(g)===40){y=Se.Function,g++;return}y=Se.Ident}function a(x){for(x||(x=r(g++)),y=Se.String;g<t.length;g++){let w=t.charCodeAt(g);switch(Pe.charCodeCategory(w)){case x:g++;return;case Pe.WhiteSpaceCategory:if(Pe.isNewline(w)){g+=Ye.getNewlineLength(t,g,w),y=Se.BadString;return}break;case 92:if(g===t.length-1)break;let k=r(g+1);Pe.isNewline(k)?g+=Ye.getNewlineLength(t,g+1,k):Pe.isValidEscape(w,k)&&(g=Ye.consumeEscaped(t,g)-1);break}}}function f(){for(y=Se.Url,g=Ye.findWhiteSpaceEnd(t,g);g<t.length;g++){let x=t.charCodeAt(g);switch(Pe.charCodeCategory(x)){case 41:g++;return;case Pe.WhiteSpaceCategory:if(g=Ye.findWhiteSpaceEnd(t,g),r(g)===41||g>=t.length){g<t.length&&g++;return}g=Ye.consumeBadUrlRemnants(t,g),y=Se.BadUrl;return;case 34:case 39:case 40:case Pe.NonPrintableCategory:g=Ye.consumeBadUrlRemnants(t,g),y=Se.BadUrl;return;case 92:if(Pe.isValidEscape(x,r(g+1))){g=Ye.consumeEscaped(t,g)-1;break}g=Ye.consumeBadUrlRemnants(t,g),y=Se.BadUrl;return}}}t=String(t||"");let d=t.length,p=Pe.isBOM(r(0)),g=p,y;for(;g<d;){let x=t.charCodeAt(g);switch(Pe.charCodeCategory(x)){case Pe.WhiteSpaceCategory:y=Se.WhiteSpace,g=Ye.findWhiteSpaceEnd(t,g+1);break;case 34:a();break;case 35:Pe.isName(r(g+1))||Pe.isValidEscape(r(g+1),r(g+2))?(y=Se.Hash,g=Ye.consumeName(t,g+1)):(y=Se.Delim,g++);break;case 39:a();break;case 40:y=Se.LeftParenthesis,g++;break;case 41:y=Se.RightParenthesis,g++;break;case 43:Pe.isNumberStart(x,r(g+1),r(g+2))?i():(y=Se.Delim,g++);break;case 44:y=Se.Comma,g++;break;case 45:Pe.isNumberStart(x,r(g+1),r(g+2))?i():r(g+1)===45&&r(g+2)===62?(y=Se.CDC,g=g+3):Pe.isIdentifierStart(x,r(g+1),r(g+2))?s():(y=Se.Delim,g++);break;case 46:Pe.isNumberStart(x,r(g+1),r(g+2))?i():(y=Se.Delim,g++);break;case 47:r(g+1)===42?(y=Se.Comment,g=t.indexOf("*/",g+2),g=g===-1?t.length:g+2):(y=Se.Delim,g++);break;case 58:y=Se.Colon,g++;break;case 59:y=Se.Semicolon,g++;break;case 60:r(g+1)===33&&r(g+2)===45&&r(g+3)===45?(y=Se.CDO,g=g+4):(y=Se.Delim,g++);break;case 64:Pe.isIdentifierStart(r(g+1),r(g+2),r(g+3))?(y=Se.AtKeyword,g=Ye.consumeName(t,g+1)):(y=Se.Delim,g++);break;case 91:y=Se.LeftSquareBracket,g++;break;case 92:Pe.isValidEscape(x,r(g+1))?s():(y=Se.Delim,g++);break;case 93:y=Se.RightSquareBracket,g++;break;case 123:y=Se.LeftCurlyBracket,g++;break;case 125:y=Se.RightCurlyBracket,g++;break;case Pe.DigitCategory:i();break;case Pe.NameStartCategory:s();break;default:y=Se.Delim,g++}e(y,p,p=g)}}Ce.AtKeyword=Se.AtKeyword;Ce.BadString=Se.BadString;Ce.BadUrl=Se.BadUrl;Ce.CDC=Se.CDC;Ce.CDO=Se.CDO;Ce.Colon=Se.Colon;Ce.Comma=Se.Comma;Ce.Comment=Se.Comment;Ce.Delim=Se.Delim;Ce.Dimension=Se.Dimension;Ce.EOF=Se.EOF;Ce.Function=Se.Function;Ce.Hash=Se.Hash;Ce.Ident=Se.Ident;Ce.LeftCurlyBracket=Se.LeftCurlyBracket;Ce.LeftParenthesis=Se.LeftParenthesis;Ce.LeftSquareBracket=Se.LeftSquareBracket;Ce.Number=Se.Number;Ce.Percentage=Se.Percentage;Ce.RightCurlyBracket=Se.RightCurlyBracket;Ce.RightParenthesis=Se.RightParenthesis;Ce.RightSquareBracket=Se.RightSquareBracket;Ce.Semicolon=Se.Semicolon;Ce.String=Se.String;Ce.Url=Se.Url;Ce.WhiteSpace=Se.WhiteSpace;Ce.tokenTypes=Se;Ce.DigitCategory=Pe.DigitCategory;Ce.EofCategory=Pe.EofCategory;Ce.NameStartCategory=Pe.NameStartCategory;Ce.NonPrintableCategory=Pe.NonPrintableCategory;Ce.WhiteSpaceCategory=Pe.WhiteSpaceCategory;Ce.charCodeCategory=Pe.charCodeCategory;Ce.isBOM=Pe.isBOM;Ce.isDigit=Pe.isDigit;Ce.isHexDigit=Pe.isHexDigit;Ce.isIdentifierStart=Pe.isIdentifierStart;Ce.isLetter=Pe.isLetter;Ce.isLowercaseLetter=Pe.isLowercaseLetter;Ce.isName=Pe.isName;Ce.isNameStart=Pe.isNameStart;Ce.isNewline=Pe.isNewline;Ce.isNonAscii=Pe.isNonAscii;Ce.isNonPrintable=Pe.isNonPrintable;Ce.isNumberStart=Pe.isNumberStart;Ce.isUppercaseLetter=Pe.isUppercaseLetter;Ce.isValidEscape=Pe.isValidEscape;Ce.isWhiteSpace=Pe.isWhiteSpace;Ce.cmpChar=Ye.cmpChar;Ce.cmpStr=Ye.cmpStr;Ce.consumeBadUrlRemnants=Ye.consumeBadUrlRemnants;Ce.consumeEscaped=Ye.consumeEscaped;Ce.consumeName=Ye.consumeName;Ce.consumeNumber=Ye.consumeNumber;Ce.decodeEscaped=Ye.decodeEscaped;Ce.findDecimalNumberEnd=Ye.findDecimalNumberEnd;Ce.findWhiteSpaceEnd=Ye.findWhiteSpaceEnd;Ce.findWhiteSpaceStart=Ye.findWhiteSpaceStart;Ce.getNewlineLength=Ye.getNewlineLength;Ce.tokenNames=hM;Ce.OffsetToLocation=pM.OffsetToLocation;Ce.TokenStream=gM.TokenStream;Ce.tokenize=mM});var bi=Y(Dv=>{"use strict";var go=null,Pf=class t{static createItem(e){return{prev:null,next:null,data:e}}constructor(){this.head=null,this.tail=null,this.cursor=null}createItem(e){return t.createItem(e)}allocateCursor(e,r){let i;return go!==null?(i=go,go=go.cursor,i.prev=e,i.next=r,i.cursor=this.cursor):i={prev:e,next:r,cursor:this.cursor},this.cursor=i,i}releaseCursor(){let{cursor:e}=this;this.cursor=e.cursor,e.prev=null,e.next=null,e.cursor=go,go=e}updateCursors(e,r,i,s){let{cursor:a}=this;for(;a!==null;)a.prev===e&&(a.prev=r),a.next===i&&(a.next=s),a=a.cursor}*[Symbol.iterator](){for(let e=this.head;e!==null;e=e.next)yield e.data}get size(){let e=0;for(let r=this.head;r!==null;r=r.next)e++;return e}get isEmpty(){return this.head===null}get first(){return this.head&&this.head.data}get last(){return this.tail&&this.tail.data}fromArray(e){let r=null;this.head=null;for(let i of e){let s=t.createItem(i);r!==null?r.next=s:this.head=s,s.prev=r,r=s}return this.tail=r,this}toArray(){return[...this]}toJSON(){return[...this]}forEach(e,r=this){let i=this.allocateCursor(null,this.head);for(;i.next!==null;){let s=i.next;i.next=s.next,e.call(r,s.data,s,this)}this.releaseCursor()}forEachRight(e,r=this){let i=this.allocateCursor(this.tail,null);for(;i.prev!==null;){let s=i.prev;i.prev=s.prev,e.call(r,s.data,s,this)}this.releaseCursor()}reduce(e,r,i=this){let s=this.allocateCursor(null,this.head),a=r,f;for(;s.next!==null;)f=s.next,s.next=f.next,a=e.call(i,a,f.data,f,this);return this.releaseCursor(),a}reduceRight(e,r,i=this){let s=this.allocateCursor(this.tail,null),a=r,f;for(;s.prev!==null;)f=s.prev,s.prev=f.prev,a=e.call(i,a,f.data,f,this);return this.releaseCursor(),a}some(e,r=this){for(let i=this.head;i!==null;i=i.next)if(e.call(r,i.data,i,this))return!0;return!1}map(e,r=this){let i=new t;for(let s=this.head;s!==null;s=s.next)i.appendData(e.call(r,s.data,s,this));return i}filter(e,r=this){let i=new t;for(let s=this.head;s!==null;s=s.next)e.call(r,s.data,s,this)&&i.appendData(s.data);return i}nextUntil(e,r,i=this){if(e===null)return;let s=this.allocateCursor(null,e);for(;s.next!==null;){let a=s.next;if(s.next=a.next,r.call(i,a.data,a,this))break}this.releaseCursor()}prevUntil(e,r,i=this){if(e===null)return;let s=this.allocateCursor(e,null);for(;s.prev!==null;){let a=s.prev;if(s.prev=a.prev,r.call(i,a.data,a,this))break}this.releaseCursor()}clear(){this.head=null,this.tail=null}copy(){let e=new t;for(let r of this)e.appendData(r);return e}prepend(e){return this.updateCursors(null,e,this.head,e),this.head!==null?(this.head.prev=e,e.next=this.head):this.tail=e,this.head=e,this}prependData(e){return this.prepend(t.createItem(e))}append(e){return this.insert(e)}appendData(e){return this.insert(t.createItem(e))}insert(e,r=null){if(r!==null)if(this.updateCursors(r.prev,e,r,e),r.prev===null){if(this.head!==r)throw new Error("before doesn't belong to list");this.head=e,r.prev=e,e.next=r,this.updateCursors(null,e)}else r.prev.next=e,e.prev=r.prev,r.prev=e,e.next=r;else this.updateCursors(this.tail,e,null,e),this.tail!==null?(this.tail.next=e,e.prev=this.tail):this.head=e,this.tail=e;return this}insertData(e,r){return this.insert(t.createItem(e),r)}remove(e){if(this.updateCursors(e,e.prev,e,e.next),e.prev!==null)e.prev.next=e.next;else{if(this.head!==e)throw new Error("item doesn't belong to list");this.head=e.next}if(e.next!==null)e.next.prev=e.prev;else{if(this.tail!==e)throw new Error("item doesn't belong to list");this.tail=e.prev}return e.prev=null,e.next=null,e}push(e){this.insert(t.createItem(e))}pop(){return this.tail!==null?this.remove(this.tail):null}unshift(e){this.prepend(t.createItem(e))}shift(){return this.head!==null?this.remove(this.head):null}prependList(e){return this.insertList(e,this.head)}appendList(e){return this.insertList(e)}insertList(e,r){return e.head===null?this:(r!=null?(this.updateCursors(r.prev,e.tail,r,e.head),r.prev!==null?(r.prev.next=e.head,e.head.prev=r.prev):this.head=e.head,r.prev=e.tail,e.tail.next=r):(this.updateCursors(this.tail,e.tail,null,e.head),this.tail!==null?(this.tail.next=e.head,e.head.prev=this.tail):this.head=e.head,this.tail=e.tail),e.head=null,e.tail=null,this)}replace(e,r){"head"in r?this.insertList(r,e):this.insert(r,e),this.remove(e)}};Dv.List=Pf});var Zl=Y(Nv=>{"use strict";function yM(t,e){let r=Object.create(SyntaxError.prototype),i=new Error;return Object.assign(r,{name:t,message:e,get stack(){return(i.stack||"").replace(/^(.+\n){1,3}/,`${t}: ${e}
`)}})}Nv.createCustomError=yM});var qv=Y(Bv=>{"use strict";var vM=Zl(),If=100,Ov=60,Pv="    ";function Iv({source:t,line:e,column:r},i){function s(y,x){return a.slice(y,x).map((w,k)=>String(y+k+1).padStart(p)+" |"+w).join(`
`)}let a=t.split(/\r\n?|\n|\f/),f=Math.max(1,e-i)-1,d=Math.min(e+i,a.length+1),p=Math.max(4,String(d).length)+1,g=0;r+=(Pv.length-1)*(a[e-1].substr(0,r-1).match(/\t/g)||[]).length,r>If&&(g=r-Ov+3,r=Ov-2);for(let y=f;y<=d;y++)y>=0&&y<a.length&&(a[y]=a[y].replace(/\t/g,Pv),a[y]=(g>0&&a[y].length>g?"\u2026":"")+a[y].substr(g,If-2)+(a[y].length>g+If-1?"\u2026":""));return[s(f,e),new Array(r+p+2).join("-")+"^",s(e,d)].filter(Boolean).join(`
`)}function bM(t,e,r,i,s){return Object.assign(vM.createCustomError("SyntaxError",t),{source:e,offset:r,line:i,column:s,sourceFragment(f){return Iv({source:e,line:i,column:s},isNaN(f)?0:f)},get formattedMessage(){return`Parse error: ${t}
`+Iv({source:e,line:i,column:s},2)}})}Bv.SyntaxError=bM});var Fv=Y(Rv=>{"use strict";var zv=Me();function wM(t){let e=this.createList(),r=!1,i={recognizer:t};for(;!this.eof;){switch(this.tokenType){case zv.Comment:this.next();continue;case zv.WhiteSpace:r=!0,this.next();continue}let s=t.getNode.call(this,i);if(s===void 0)break;r&&(t.onWhiteSpace&&t.onWhiteSpace.call(this,s,e,i),r=!1),e.push(s)}return r&&t.onWhiteSpace&&t.onWhiteSpace.call(this,null,e,i),e}Rv.readSequence=wM});var Gv=Y($v=>{"use strict";var _v=bi(),jv=qv(),xM=_s(),kM=Fv(),CM=Nf(),SM=Jl(),js=ir(),or=Me(),AM=Fs(),Hv=()=>{},TM=33,LM=35,Bf=59,Wv=123,Uv=0;function EM(t){return function(){return this[t]()}}function qf(t){let e=Object.create(null);for(let r in t){let i=t[r],s=i.parse||i;s&&(e[r]=s)}return e}function MM(t){let e={context:Object.create(null),scope:Object.assign(Object.create(null),t.scope),atrule:qf(t.atrule),pseudo:qf(t.pseudo),node:qf(t.node)};for(let r in t.parseContext)switch(typeof t.parseContext[r]){case"function":e.context[r]=t.parseContext[r];break;case"string":e.context[r]=EM(t.parseContext[r]);break}return{config:e,...e,...e.node}}function DM(t){let e="",r="<unknown>",i=!1,s=Hv,a=!1,f=new CM.OffsetToLocation,d=Object.assign(new SM.TokenStream,MM(t||{}),{parseAtrulePrelude:!0,parseRulePrelude:!0,parseValue:!0,parseCustomProperty:!1,readSequence:kM.readSequence,consumeUntilBalanceEnd:()=>0,consumeUntilLeftCurlyBracket(g){return g===Wv?1:0},consumeUntilLeftCurlyBracketOrSemicolon(g){return g===Wv||g===Bf?1:0},consumeUntilExclamationMarkOrSemicolon(g){return g===TM||g===Bf?1:0},consumeUntilSemicolonIncluded(g){return g===Bf?2:0},createList(){return new _v.List},createSingleNodeList(g){return new _v.List().appendData(g)},getFirstListNode(g){return g&&g.first},getLastListNode(g){return g&&g.last},parseWithFallback(g,y){let x=this.tokenIndex;try{return g.call(this)}catch(w){if(a)throw w;let k=y.call(this,x);return a=!0,s(w,k),a=!1,k}},lookupNonWSType(g){let y;do if(y=this.lookupType(g++),y!==or.WhiteSpace)return y;while(y!==Uv);return Uv},charCodeAt(g){return g>=0&&g<e.length?e.charCodeAt(g):0},substring(g,y){return e.substring(g,y)},substrToCursor(g){return this.source.substring(g,this.tokenStart)},cmpChar(g,y){return js.cmpChar(e,g,y)},cmpStr(g,y,x){return js.cmpStr(e,g,y,x)},consume(g){let y=this.tokenStart;return this.eat(g),this.substrToCursor(y)},consumeFunctionName(){let g=e.substring(this.tokenStart,this.tokenEnd-1);return this.eat(or.Function),g},consumeNumber(g){let y=e.substring(this.tokenStart,js.consumeNumber(e,this.tokenStart));return this.eat(g),y},eat(g){if(this.tokenType!==g){let y=AM[g].slice(0,-6).replace(/-/g," ").replace(/^./,k=>k.toUpperCase()),x=`${/[[\](){}]/.test(y)?`"${y}"`:y} is expected`,w=this.tokenStart;switch(g){case or.Ident:this.tokenType===or.Function||this.tokenType===or.Url?(w=this.tokenEnd-1,x="Identifier is expected but function found"):x="Identifier is expected";break;case or.Hash:this.isDelim(LM)&&(this.next(),w++,x="Name is expected");break;case or.Percentage:this.tokenType===or.Number&&(w=this.tokenEnd,x="Percent sign is expected");break}this.error(x,w)}this.next()},eatIdent(g){(this.tokenType!==or.Ident||this.lookupValue(0,g)===!1)&&this.error(`Identifier "${g}" is expected`),this.next()},eatDelim(g){this.isDelim(g)||this.error(`Delim "${String.fromCharCode(g)}" is expected`),this.next()},getLocation(g,y){return i?f.getLocationRange(g,y,r):null},getLocationFromList(g){if(i){let y=this.getFirstListNode(g),x=this.getLastListNode(g);return f.getLocationRange(y!==null?y.loc.start.offset-f.startOffset:this.tokenStart,x!==null?x.loc.end.offset-f.startOffset:this.tokenStart,r)}return null},error(g,y){let x=typeof y<"u"&&y<e.length?f.getLocation(y):this.eof?f.getLocation(js.findWhiteSpaceStart(e,e.length-1)):f.getLocation(this.tokenStart);throw new jv.SyntaxError(g||"Unexpected input",e,x.offset,x.line,x.column)}});return Object.assign(function(g,y){e=g,y=y||{},d.setSource(e,xM.tokenize),f.setSource(e,y.offset,y.line,y.column),r=y.filename||"<unknown>",i=!!y.positions,s=typeof y.onParseError=="function"?y.onParseError:Hv,a=!1,d.parseAtrulePrelude="parseAtrulePrelude"in y?!!y.parseAtrulePrelude:!0,d.parseRulePrelude="parseRulePrelude"in y?!!y.parseRulePrelude:!0,d.parseValue="parseValue"in y?!!y.parseValue:!0,d.parseCustomProperty="parseCustomProperty"in y?!!y.parseCustomProperty:!1;let{context:x="default",onComment:w}=y;if(!(x in d.context))throw new Error("Unknown context `"+x+"`");typeof w=="function"&&d.forEachToken((A,M,D)=>{if(A===or.Comment){let O=d.getLocation(M,D),L=js.cmpStr(e,D-2,D,"*/")?e.slice(M+2,D-2):e.slice(M+2,D);w(L,O)}});let k=d.context[x].call(d,y);return d.eof||d.error(),k},{SyntaxError:jv.SyntaxError,config:d.config})}$v.createParser=DM});var Kv=Y(zf=>{var Vv="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".split("");zf.encode=function(t){if(0<=t&&t<Vv.length)return Vv[t];throw new TypeError("Must be between 0 and 63: "+t)};zf.decode=function(t){var e=65,r=90,i=97,s=122,a=48,f=57,d=43,p=47,g=26,y=52;return e<=t&&t<=r?t-e:i<=t&&t<=s?t-i+g:a<=t&&t<=f?t-a+y:t==d?62:t==p?63:-1}});var Zv=Y(Ff=>{var Yv=Kv(),Rf=5,Qv=1<<Rf,Xv=Qv-1,Jv=Qv;function NM(t){return t<0?(-t<<1)+1:(t<<1)+0}function OM(t){var e=(t&1)===1,r=t>>1;return e?-r:r}Ff.encode=function(e){var r="",i,s=NM(e);do i=s&Xv,s>>>=Rf,s>0&&(i|=Jv),r+=Yv.encode(i);while(s>0);return r};Ff.decode=function(e,r,i){var s=e.length,a=0,f=0,d,p;do{if(r>=s)throw new Error("Expected more digits in base 64 VLQ value.");if(p=Yv.decode(e.charCodeAt(r++)),p===-1)throw new Error("Invalid base64 digit: "+e.charAt(r-1));d=!!(p&Jv),p&=Xv,a=a+(p<<f),f+=Rf}while(d);i.value=OM(a),i.rest=r}});var ec=Y(Mt=>{function PM(t,e,r){if(e in t)return t[e];if(arguments.length===3)return r;throw new Error('"'+e+'" is a required argument.')}Mt.getArg=PM;var eb=/^(?:([\w+\-.]+):)?\/\/(?:(\w+:\w+)@)?([\w.-]*)(?::(\d+))?(.*)$/,IM=/^data:.+\,.+$/;function Hs(t){var e=t.match(eb);return e?{scheme:e[1],auth:e[2],host:e[3],port:e[4],path:e[5]}:null}Mt.urlParse=Hs;function mo(t){var e="";return t.scheme&&(e+=t.scheme+":"),e+="//",t.auth&&(e+=t.auth+"@"),t.host&&(e+=t.host),t.port&&(e+=":"+t.port),t.path&&(e+=t.path),e}Mt.urlGenerate=mo;var BM=32;function qM(t){var e=[];return function(r){for(var i=0;i<e.length;i++)if(e[i].input===r){var s=e[0];return e[0]=e[i],e[i]=s,e[0].result}var a=t(r);return e.unshift({input:r,result:a}),e.length>BM&&e.pop(),a}}var _f=qM(function(e){var r=e,i=Hs(e);if(i){if(!i.path)return e;r=i.path}for(var s=Mt.isAbsolute(r),a=[],f=0,d=0;;)if(f=d,d=r.indexOf("/",f),d===-1){a.push(r.slice(f));break}else for(a.push(r.slice(f,d));d<r.length&&r[d]==="/";)d++;for(var p,g=0,d=a.length-1;d>=0;d--)p=a[d],p==="."?a.splice(d,1):p===".."?g++:g>0&&(p===""?(a.splice(d+1,g),g=0):(a.splice(d,2),g--));return r=a.join("/"),r===""&&(r=s?"/":"."),i?(i.path=r,mo(i)):r});Mt.normalize=_f;function tb(t,e){t===""&&(t="."),e===""&&(e=".");var r=Hs(e),i=Hs(t);if(i&&(t=i.path||"/"),r&&!r.scheme)return i&&(r.scheme=i.scheme),mo(r);if(r||e.match(IM))return e;if(i&&!i.host&&!i.path)return i.host=e,mo(i);var s=e.charAt(0)==="/"?e:_f(t.replace(/\/+$/,"")+"/"+e);return i?(i.path=s,mo(i)):s}Mt.join=tb;Mt.isAbsolute=function(t){return t.charAt(0)==="/"||eb.test(t)};function zM(t,e){t===""&&(t="."),t=t.replace(/\/$/,"");for(var r=0;e.indexOf(t+"/")!==0;){var i=t.lastIndexOf("/");if(i<0||(t=t.slice(0,i),t.match(/^([^\/]+:\/)?\/*$/)))return e;++r}return Array(r+1).join("../")+e.substr(t.length+1)}Mt.relative=zM;var nb=function(){var t=Object.create(null);return!("__proto__"in t)}();function rb(t){return t}function RM(t){return ib(t)?"$"+t:t}Mt.toSetString=nb?rb:RM;function FM(t){return ib(t)?t.slice(1):t}Mt.fromSetString=nb?rb:FM;function ib(t){if(!t)return!1;var e=t.length;if(e<9||t.charCodeAt(e-1)!==95||t.charCodeAt(e-2)!==95||t.charCodeAt(e-3)!==111||t.charCodeAt(e-4)!==116||t.charCodeAt(e-5)!==111||t.charCodeAt(e-6)!==114||t.charCodeAt(e-7)!==112||t.charCodeAt(e-8)!==95||t.charCodeAt(e-9)!==95)return!1;for(var r=e-10;r>=0;r--)if(t.charCodeAt(r)!==36)return!1;return!0}function _M(t,e,r){var i=Cr(t.source,e.source);return i!==0||(i=t.originalLine-e.originalLine,i!==0)||(i=t.originalColumn-e.originalColumn,i!==0||r)||(i=t.generatedColumn-e.generatedColumn,i!==0)||(i=t.generatedLine-e.generatedLine,i!==0)?i:Cr(t.name,e.name)}Mt.compareByOriginalPositions=_M;function jM(t,e,r){var i;return i=t.originalLine-e.originalLine,i!==0||(i=t.originalColumn-e.originalColumn,i!==0||r)||(i=t.generatedColumn-e.generatedColumn,i!==0)||(i=t.generatedLine-e.generatedLine,i!==0)?i:Cr(t.name,e.name)}Mt.compareByOriginalPositionsNoSource=jM;function HM(t,e,r){var i=t.generatedLine-e.generatedLine;return i!==0||(i=t.generatedColumn-e.generatedColumn,i!==0||r)||(i=Cr(t.source,e.source),i!==0)||(i=t.originalLine-e.originalLine,i!==0)||(i=t.originalColumn-e.originalColumn,i!==0)?i:Cr(t.name,e.name)}Mt.compareByGeneratedPositionsDeflated=HM;function WM(t,e,r){var i=t.generatedColumn-e.generatedColumn;return i!==0||r||(i=Cr(t.source,e.source),i!==0)||(i=t.originalLine-e.originalLine,i!==0)||(i=t.originalColumn-e.originalColumn,i!==0)?i:Cr(t.name,e.name)}Mt.compareByGeneratedPositionsDeflatedNoLine=WM;function Cr(t,e){return t===e?0:t===null?1:e===null?-1:t>e?1:-1}function UM(t,e){var r=t.generatedLine-e.generatedLine;return r!==0||(r=t.generatedColumn-e.generatedColumn,r!==0)||(r=Cr(t.source,e.source),r!==0)||(r=t.originalLine-e.originalLine,r!==0)||(r=t.originalColumn-e.originalColumn,r!==0)?r:Cr(t.name,e.name)}Mt.compareByGeneratedPositionsInflated=UM;function $M(t){return JSON.parse(t.replace(/^\)]}'[^\n]*\n/,""))}Mt.parseSourceMapInput=$M;function GM(t,e,r){if(e=e||"",t&&(t[t.length-1]!=="/"&&e[0]!=="/"&&(t+="/"),e=t+e),r){var i=Hs(r);if(!i)throw new Error("sourceMapURL could not be parsed");if(i.path){var s=i.path.lastIndexOf("/");s>=0&&(i.path=i.path.substring(0,s+1))}e=tb(mo(i),e)}return _f(e)}Mt.computeSourceURL=GM});var sb=Y(ob=>{var jf=ec(),Hf=Object.prototype.hasOwnProperty,wi=typeof Map<"u";function Sr(){this._array=[],this._set=wi?new Map:Object.create(null)}Sr.fromArray=function(e,r){for(var i=new Sr,s=0,a=e.length;s<a;s++)i.add(e[s],r);return i};Sr.prototype.size=function(){return wi?this._set.size:Object.getOwnPropertyNames(this._set).length};Sr.prototype.add=function(e,r){var i=wi?e:jf.toSetString(e),s=wi?this.has(e):Hf.call(this._set,i),a=this._array.length;(!s||r)&&this._array.push(e),s||(wi?this._set.set(e,a):this._set[i]=a)};Sr.prototype.has=function(e){if(wi)return this._set.has(e);var r=jf.toSetString(e);return Hf.call(this._set,r)};Sr.prototype.indexOf=function(e){if(wi){var r=this._set.get(e);if(r>=0)return r}else{var i=jf.toSetString(e);if(Hf.call(this._set,i))return this._set[i]}throw new Error('"'+e+'" is not in the set.')};Sr.prototype.at=function(e){if(e>=0&&e<this._array.length)return this._array[e];throw new Error("No element indexed by "+e)};Sr.prototype.toArray=function(){return this._array.slice()};ob.ArraySet=Sr});var cb=Y(lb=>{var ab=ec();function VM(t,e){var r=t.generatedLine,i=e.generatedLine,s=t.generatedColumn,a=e.generatedColumn;return i>r||i==r&&a>=s||ab.compareByGeneratedPositionsInflated(t,e)<=0}function tc(){this._array=[],this._sorted=!0,this._last={generatedLine:-1,generatedColumn:0}}tc.prototype.unsortedForEach=function(e,r){this._array.forEach(e,r)};tc.prototype.add=function(e){VM(this._last,e)?(this._last=e,this._array.push(e)):(this._sorted=!1,this._array.push(e))};tc.prototype.toArray=function(){return this._sorted||(this._array.sort(ab.compareByGeneratedPositionsInflated),this._sorted=!0),this._array};lb.MappingList=tc});var fb=Y(ub=>{var Ws=Zv(),pt=ec(),nc=sb().ArraySet,KM=cb().MappingList;function En(t){t||(t={}),this._file=pt.getArg(t,"file",null),this._sourceRoot=pt.getArg(t,"sourceRoot",null),this._skipValidation=pt.getArg(t,"skipValidation",!1),this._ignoreInvalidMapping=pt.getArg(t,"ignoreInvalidMapping",!1),this._sources=new nc,this._names=new nc,this._mappings=new KM,this._sourcesContents=null}En.prototype._version=3;En.fromSourceMap=function(e,r){var i=e.sourceRoot,s=new En(Object.assign(r||{},{file:e.file,sourceRoot:i}));return e.eachMapping(function(a){var f={generated:{line:a.generatedLine,column:a.generatedColumn}};a.source!=null&&(f.source=a.source,i!=null&&(f.source=pt.relative(i,f.source)),f.original={line:a.originalLine,column:a.originalColumn},a.name!=null&&(f.name=a.name)),s.addMapping(f)}),e.sources.forEach(function(a){var f=a;i!==null&&(f=pt.relative(i,a)),s._sources.has(f)||s._sources.add(f);var d=e.sourceContentFor(a);d!=null&&s.setSourceContent(a,d)}),s};En.prototype.addMapping=function(e){var r=pt.getArg(e,"generated"),i=pt.getArg(e,"original",null),s=pt.getArg(e,"source",null),a=pt.getArg(e,"name",null);!this._skipValidation&&this._validateMapping(r,i,s,a)===!1||(s!=null&&(s=String(s),this._sources.has(s)||this._sources.add(s)),a!=null&&(a=String(a),this._names.has(a)||this._names.add(a)),this._mappings.add({generatedLine:r.line,generatedColumn:r.column,originalLine:i!=null&&i.line,originalColumn:i!=null&&i.column,source:s,name:a}))};En.prototype.setSourceContent=function(e,r){var i=e;this._sourceRoot!=null&&(i=pt.relative(this._sourceRoot,i)),r!=null?(this._sourcesContents||(this._sourcesContents=Object.create(null)),this._sourcesContents[pt.toSetString(i)]=r):this._sourcesContents&&(delete this._sourcesContents[pt.toSetString(i)],Object.keys(this._sourcesContents).length===0&&(this._sourcesContents=null))};En.prototype.applySourceMap=function(e,r,i){var s=r;if(r==null){if(e.file==null)throw new Error(`SourceMapGenerator.prototype.applySourceMap requires either an explicit source file, or the source map's "file" property. Both were omitted.`);s=e.file}var a=this._sourceRoot;a!=null&&(s=pt.relative(a,s));var f=new nc,d=new nc;this._mappings.unsortedForEach(function(p){if(p.source===s&&p.originalLine!=null){var g=e.originalPositionFor({line:p.originalLine,column:p.originalColumn});g.source!=null&&(p.source=g.source,i!=null&&(p.source=pt.join(i,p.source)),a!=null&&(p.source=pt.relative(a,p.source)),p.originalLine=g.line,p.originalColumn=g.column,g.name!=null&&(p.name=g.name))}var y=p.source;y!=null&&!f.has(y)&&f.add(y);var x=p.name;x!=null&&!d.has(x)&&d.add(x)},this),this._sources=f,this._names=d,e.sources.forEach(function(p){var g=e.sourceContentFor(p);g!=null&&(i!=null&&(p=pt.join(i,p)),a!=null&&(p=pt.relative(a,p)),this.setSourceContent(p,g))},this)};En.prototype._validateMapping=function(e,r,i,s){if(r&&typeof r.line!="number"&&typeof r.column!="number"){var a="original.line and original.column are not numbers -- you probably meant to omit the original mapping entirely and only map the generated position. If so, pass null for the original mapping instead of an object with empty or null values.";if(this._ignoreInvalidMapping)return typeof console<"u"&&console.warn&&console.warn(a),!1;throw new Error(a)}if(!(e&&"line"in e&&"column"in e&&e.line>0&&e.column>=0&&!r&&!i&&!s)){if(e&&"line"in e&&"column"in e&&r&&"line"in r&&"column"in r&&e.line>0&&e.column>=0&&r.line>0&&r.column>=0&&i)return;var a="Invalid mapping: "+JSON.stringify({generated:e,source:i,original:r,name:s});if(this._ignoreInvalidMapping)return typeof console<"u"&&console.warn&&console.warn(a),!1;throw new Error(a)}};En.prototype._serializeMappings=function(){for(var e=0,r=1,i=0,s=0,a=0,f=0,d="",p,g,y,x,w=this._mappings.toArray(),k=0,A=w.length;k<A;k++){if(g=w[k],p="",g.generatedLine!==r)for(e=0;g.generatedLine!==r;)p+=";",r++;else if(k>0){if(!pt.compareByGeneratedPositionsInflated(g,w[k-1]))continue;p+=","}p+=Ws.encode(g.generatedColumn-e),e=g.generatedColumn,g.source!=null&&(x=this._sources.indexOf(g.source),p+=Ws.encode(x-f),f=x,p+=Ws.encode(g.originalLine-1-s),s=g.originalLine-1,p+=Ws.encode(g.originalColumn-i),i=g.originalColumn,g.name!=null&&(y=this._names.indexOf(g.name),p+=Ws.encode(y-a),a=y)),d+=p}return d};En.prototype._generateSourcesContent=function(e,r){return e.map(function(i){if(!this._sourcesContents)return null;r!=null&&(i=pt.relative(r,i));var s=pt.toSetString(i);return Object.prototype.hasOwnProperty.call(this._sourcesContents,s)?this._sourcesContents[s]:null},this)};En.prototype.toJSON=function(){var e={version:this._version,sources:this._sources.toArray(),names:this._names.toArray(),mappings:this._serializeMappings()};return this._file!=null&&(e.file=this._file),this._sourceRoot!=null&&(e.sourceRoot=this._sourceRoot),this._sourcesContents&&(e.sourcesContent=this._generateSourcesContent(e.sources,e.sourceRoot)),e};En.prototype.toString=function(){return JSON.stringify(this.toJSON())};ub.SourceMapGenerator=En});var pb=Y(hb=>{"use strict";var YM=fb(),db=new Set(["Atrule","Selector","Declaration"]);function QM(t){let e=new YM.SourceMapGenerator,r={line:1,column:0},i={line:0,column:0},s={line:1,column:0},a={generated:s},f=1,d=0,p=!1,g=t.node;t.node=function(w){if(w.loc&&w.loc.start&&db.has(w.type)){let k=w.loc.start.line,A=w.loc.start.column-1;(i.line!==k||i.column!==A)&&(i.line=k,i.column=A,r.line=f,r.column=d,p&&(p=!1,(r.line!==s.line||r.column!==s.column)&&e.addMapping(a)),p=!0,e.addMapping({source:w.loc.source,original:i,generated:r}))}g.call(this,w),p&&db.has(w.type)&&(s.line=f,s.column=d)};let y=t.emit;t.emit=function(w,k,A){for(let M=0;M<w.length;M++)w.charCodeAt(M)===10?(f++,d=0):d++;y(w,k,A)};let x=t.result;return t.result=function(){return p&&e.addMapping(a),{css:x(),map:e}},t}hb.generateSourceMap=QM});var yb=Y(Uf=>{"use strict";var V=Me(),XM=43,JM=45,Wf=(t,e)=>{if(t===V.Delim&&(t=e),typeof t=="string"){let r=t.charCodeAt(0);return r>127?32768:r<<8}return t},gb=[[V.Ident,V.Ident],[V.Ident,V.Function],[V.Ident,V.Url],[V.Ident,V.BadUrl],[V.Ident,"-"],[V.Ident,V.Number],[V.Ident,V.Percentage],[V.Ident,V.Dimension],[V.Ident,V.CDC],[V.Ident,V.LeftParenthesis],[V.AtKeyword,V.Ident],[V.AtKeyword,V.Function],[V.AtKeyword,V.Url],[V.AtKeyword,V.BadUrl],[V.AtKeyword,"-"],[V.AtKeyword,V.Number],[V.AtKeyword,V.Percentage],[V.AtKeyword,V.Dimension],[V.AtKeyword,V.CDC],[V.Hash,V.Ident],[V.Hash,V.Function],[V.Hash,V.Url],[V.Hash,V.BadUrl],[V.Hash,"-"],[V.Hash,V.Number],[V.Hash,V.Percentage],[V.Hash,V.Dimension],[V.Hash,V.CDC],[V.Dimension,V.Ident],[V.Dimension,V.Function],[V.Dimension,V.Url],[V.Dimension,V.BadUrl],[V.Dimension,"-"],[V.Dimension,V.Number],[V.Dimension,V.Percentage],[V.Dimension,V.Dimension],[V.Dimension,V.CDC],["#",V.Ident],["#",V.Function],["#",V.Url],["#",V.BadUrl],["#","-"],["#",V.Number],["#",V.Percentage],["#",V.Dimension],["#",V.CDC],["-",V.Ident],["-",V.Function],["-",V.Url],["-",V.BadUrl],["-","-"],["-",V.Number],["-",V.Percentage],["-",V.Dimension],["-",V.CDC],[V.Number,V.Ident],[V.Number,V.Function],[V.Number,V.Url],[V.Number,V.BadUrl],[V.Number,V.Number],[V.Number,V.Percentage],[V.Number,V.Dimension],[V.Number,"%"],[V.Number,V.CDC],["@",V.Ident],["@",V.Function],["@",V.Url],["@",V.BadUrl],["@","-"],["@",V.CDC],[".",V.Number],[".",V.Percentage],[".",V.Dimension],["+",V.Number],["+",V.Percentage],["+",V.Dimension],["/","*"]],ZM=gb.concat([[V.Ident,V.Hash],[V.Dimension,V.Hash],[V.Hash,V.Hash],[V.AtKeyword,V.LeftParenthesis],[V.AtKeyword,V.String],[V.AtKeyword,V.Colon],[V.Percentage,V.Percentage],[V.Percentage,V.Dimension],[V.Percentage,V.Function],[V.Percentage,"-"],[V.RightParenthesis,V.Ident],[V.RightParenthesis,V.Function],[V.RightParenthesis,V.Percentage],[V.RightParenthesis,V.Dimension],[V.RightParenthesis,V.Hash],[V.RightParenthesis,"-"]]);function mb(t){let e=new Set(t.map(([r,i])=>Wf(r)<<16|Wf(i)));return function(r,i,s){let a=Wf(i,s),f=s.charCodeAt(0);return(f===JM&&i!==V.Ident&&i!==V.Function&&i!==V.CDC||f===XM?e.has(r<<16|f<<8):e.has(r<<16|a))&&this.emit(" ",V.WhiteSpace,!0),a}}var eD=mb(gb),tD=mb(ZM);Uf.safe=tD;Uf.spec=eD});var wb=Y(bb=>{"use strict";var nD=_s(),rD=pb(),$f=yb(),vb=Me(),iD=92;function oD(t,e){if(typeof e=="function"){let r=null;t.children.forEach(i=>{r!==null&&e.call(this,r),this.node(i),r=i});return}t.children.forEach(this.node,this)}function sD(t){nD.tokenize(t,(e,r,i)=>{this.token(e,t.slice(r,i))})}function aD(t){let e=new Map;for(let r in t.node){let i=t.node[r];typeof(i.generate||i)=="function"&&e.set(r,i.generate||i)}return function(r,i){let s="",a=0,f={node(p){if(e.has(p.type))e.get(p.type).call(d,p);else throw new Error("Unknown node type: "+p.type)},tokenBefore:$f.safe,token(p,g){a=this.tokenBefore(a,p,g),this.emit(g,p,!1),p===vb.Delim&&g.charCodeAt(0)===iD&&this.emit(`
`,vb.WhiteSpace,!0)},emit(p){s+=p},result(){return s}};i&&(typeof i.decorator=="function"&&(f=i.decorator(f)),i.sourceMap&&(f=rD.generateSourceMap(f)),i.mode in $f&&(f.tokenBefore=$f[i.mode]));let d={node:p=>f.node(p),children:oD,token:(p,g)=>f.token(p,g),tokenize:sD};return f.node(r),f.result()}}bb.createGenerator=aD});var kb=Y(xb=>{"use strict";var Gf=bi();function lD(t){return{fromPlainObject(e){return t(e,{enter(r){r.children&&!(r.children instanceof Gf.List)&&(r.children=new Gf.List().fromArray(r.children))}}),e},toPlainObject(e){return t(e,{leave(r){r.children&&r.children instanceof Gf.List&&(r.children=r.children.toArray())}}),e}}}xb.createConvertor=lD});var Eb=Y(Lb=>{"use strict";var{hasOwnProperty:Vf}=Object.prototype,Us=function(){};function Cb(t){return typeof t=="function"?t:Us}function Sb(t,e){return function(r,i,s){r.type===e&&t.call(this,r,i,s)}}function cD(t,e){let r=e.structure,i=[];for(let s in r){if(Vf.call(r,s)===!1)continue;let a=r[s],f={name:s,type:!1,nullable:!1};Array.isArray(a)||(a=[a]);for(let d of a)d===null?f.nullable=!0:typeof d=="string"?f.type="node":Array.isArray(d)&&(f.type="list");f.type&&i.push(f)}return i.length?{context:e.walkContext,fields:i}:null}function uD(t){let e={};for(let r in t.node)if(Vf.call(t.node,r)){let i=t.node[r];if(!i.structure)throw new Error("Missed `structure` field in `"+r+"` node type definition");e[r]=cD(r,i)}return e}function Ab(t,e){let r=t.fields.slice(),i=t.context,s=typeof i=="string";return e&&r.reverse(),function(a,f,d,p){let g;s&&(g=f[i],f[i]=a);for(let y of r){let x=a[y.name];if(!y.nullable||x){if(y.type==="list"){if(e?x.reduceRight(p,!1):x.reduce(p,!1))return!0}else if(d(x))return!0}}s&&(f[i]=g)}}function Tb({StyleSheet:t,Atrule:e,Rule:r,Block:i,DeclarationList:s}){return{Atrule:{StyleSheet:t,Atrule:e,Rule:r,Block:i},Rule:{StyleSheet:t,Atrule:e,Rule:r,Block:i},Declaration:{StyleSheet:t,Atrule:e,Rule:r,Block:i,DeclarationList:s}}}function fD(t){let e=uD(t),r={},i={},s=Symbol("break-walk"),a=Symbol("skip-node");for(let g in e)Vf.call(e,g)&&e[g]!==null&&(r[g]=Ab(e[g],!1),i[g]=Ab(e[g],!0));let f=Tb(r),d=Tb(i),p=function(g,y){function x(O,L,E){let N=w.call(D,O,L,E);return N===s?!0:N===a?!1:!!(A.hasOwnProperty(O.type)&&A[O.type](O,D,x,M)||k.call(D,O,L,E)===s)}let w=Us,k=Us,A=r,M=(O,L,E,N)=>O||x(L,E,N),D={break:s,skip:a,root:g,stylesheet:null,atrule:null,atrulePrelude:null,rule:null,selector:null,block:null,declaration:null,function:null};if(typeof y=="function")w=y;else if(y&&(w=Cb(y.enter),k=Cb(y.leave),y.reverse&&(A=i),y.visit)){if(f.hasOwnProperty(y.visit))A=y.reverse?d[y.visit]:f[y.visit];else if(!e.hasOwnProperty(y.visit))throw new Error("Bad value `"+y.visit+"` for `visit` option (should be: "+Object.keys(e).sort().join(", ")+")");w=Sb(w,y.visit),k=Sb(k,y.visit)}if(w===Us&&k===Us)throw new Error("Neither `enter` nor `leave` walker handler is set or both aren't a function");x(g)};return p.break=s,p.skip=a,p.find=function(g,y){let x=null;return p(g,function(w,k,A){if(y.call(this,w,k,A))return x=w,s}),x},p.findLast=function(g,y){let x=null;return p(g,{reverse:!0,enter(w,k,A){if(y.call(this,w,k,A))return x=w,s}}),x},p.findAll=function(g,y){let x=[];return p(g,function(w,k,A){y.call(this,w,k,A)&&x.push(w)}),x},p}Lb.createWalker=fD});var rc=Y(Mb=>{"use strict";function dD(t){return t}function hD(t){let{min:e,max:r,comma:i}=t;return e===0&&r===0?i?"#?":"*":e===0&&r===1?"?":e===1&&r===0?i?"#":"+":e===1&&r===1?"":(i?"#":"")+(e===r?"{"+e+"}":"{"+e+","+(r!==0?r:"")+"}")}function pD(t){switch(t.type){case"Range":return" ["+(t.min===null?"-\u221E":t.min)+","+(t.max===null?"\u221E":t.max)+"]";default:throw new Error("Unknown node type `"+t.type+"`")}}function gD(t,e,r,i){let s=t.combinator===" "||i?t.combinator:" "+t.combinator+" ",a=t.terms.map(f=>Kf(f,e,r,i)).join(s);return t.explicit||r?(i||a[0]===","?"[":"[ ")+a+(i?"]":" ]"):a}function Kf(t,e,r,i){let s;switch(t.type){case"Group":s=gD(t,e,r,i)+(t.disallowEmpty?"!":"");break;case"Multiplier":return Kf(t.term,e,r,i)+e(hD(t),t);case"Type":s="<"+t.name+(t.opts?e(pD(t.opts),t.opts):"")+">";break;case"Property":s="<'"+t.name+"'>";break;case"Keyword":s=t.name;break;case"AtKeyword":s="@"+t.name;break;case"Function":s=t.name+"(";break;case"String":case"Token":s=t.value;break;case"Comma":s=",";break;default:throw new Error("Unknown node type `"+t.type+"`")}return e(s,t)}function mD(t,e){let r=dD,i=!1,s=!1;return typeof e=="function"?r=e:e&&(i=!!e.forceBraces,s=!!e.compact,typeof e.decorate=="function"&&(r=e.decorate)),Kf(t,r,i,s)}Mb.generate=mD});var Ob=Y(Yf=>{"use strict";var Nb=Zl(),yD=rc(),Db={offset:0,line:1,column:1};function vD(t,e){let r=t.tokens,i=t.longestMatch,s=i<r.length&&r[i].node||null,a=s!==e?s:null,f=0,d=0,p=0,g="",y,x;for(let w=0;w<r.length;w++){let k=r[w].value;w===i&&(d=k.length,f=g.length),a!==null&&r[w].node===a&&(w<=i?p++:p=0),g+=k}return i===r.length||p>1?(y=ic(a||e,"end")||$s(Db,g),x=$s(y)):(y=ic(a,"start")||$s(ic(e,"start")||Db,g.slice(0,f)),x=ic(a,"end")||$s(y,g.substr(f,d))),{css:g,mismatchOffset:f,mismatchLength:d,start:y,end:x}}function ic(t,e){let r=t&&t.loc&&t.loc[e];return r?"line"in r?$s(r):r:null}function $s({offset:t,line:e,column:r},i){let s={offset:t,line:e,column:r};if(i){let a=i.split(/\n|\r\n?|\f/);s.offset+=i.length,s.line+=a.length-1,s.column=a.length===1?s.column+i.length:a.pop().length+1}return s}var bD=function(t,e){let r=Nb.createCustomError("SyntaxReferenceError",t+(e?" `"+e+"`":""));return r.reference=e,r},wD=function(t,e,r,i){let s=Nb.createCustomError("SyntaxMatchError",t),{css:a,mismatchOffset:f,mismatchLength:d,start:p,end:g}=vD(i,r);return s.rawMessage=t,s.syntax=e?yD.generate(e):"<generic>",s.css=a,s.mismatchOffset=f,s.mismatchLength=d,s.message=t+`
  syntax: `+s.syntax+`
   value: `+(a||"<empty string>")+`
  --------`+new Array(s.mismatchOffset+1).join("-")+"^",Object.assign(s,p),s.loc={source:r&&r.loc&&r.loc.source||"<unknown>",start:p,end:g},s};Yf.SyntaxMatchError=wD;Yf.SyntaxReferenceError=bD});var ac=Y(Gs=>{"use strict";var oc=new Map,yo=new Map,sc=45,xD=SD,kD=AD,CD=Xf;function Qf(t,e){return e=e||0,t.length-e>=2&&t.charCodeAt(e)===sc&&t.charCodeAt(e+1)===sc}function Xf(t,e){if(e=e||0,t.length-e>=3&&t.charCodeAt(e)===sc&&t.charCodeAt(e+1)!==sc){let r=t.indexOf("-",e+2);if(r!==-1)return t.substring(e,r+1)}return""}function SD(t){if(oc.has(t))return oc.get(t);let e=t.toLowerCase(),r=oc.get(e);if(r===void 0){let i=Qf(e,0),s=i?"":Xf(e,0);r=Object.freeze({basename:e.substr(s.length),name:e,prefix:s,vendor:s,custom:i})}return oc.set(t,r),r}function AD(t){if(yo.has(t))return yo.get(t);let e=t,r=t[0];r==="/"?r=t[1]==="/"?"//":"/":r!=="_"&&r!=="*"&&r!=="$"&&r!=="#"&&r!=="+"&&r!=="&"&&(r="");let i=Qf(e,r.length);if(!i&&(e=e.toLowerCase(),yo.has(e))){let d=yo.get(e);return yo.set(t,d),d}let s=i?"":Xf(e,r.length),a=e.substr(0,r.length+s.length),f=Object.freeze({basename:e.substr(a.length),name:e.substr(r.length),hack:r,vendor:s,prefix:a,custom:i});return yo.set(t,f),f}Gs.isCustomProperty=Qf;Gs.keyword=xD;Gs.property=kD;Gs.vendorPrefix=CD});var Jf=Y(Pb=>{"use strict";var TD=["initial","inherit","unset","revert","revert-layer"];Pb.cssWideKeywords=TD});var qb=Y((O5,Bb)=>{"use strict";var Ib=yn(),Un=Me(),Zf=ir(),Ks=43,sr=45,ed=110,vo=!0,LD=!1;function nd(t,e){return t!==null&&t.type===Un.Delim&&t.value.charCodeAt(0)===e}function Vs(t,e,r){for(;t!==null&&(t.type===Un.WhiteSpace||t.type===Un.Comment);)t=r(++e);return e}function Qr(t,e,r,i){if(!t)return 0;let s=t.value.charCodeAt(e);if(s===Ks||s===sr){if(r)return 0;e++}for(;e<t.value.length;e++)if(!Ib.isDigit(t.value.charCodeAt(e)))return 0;return i+1}function td(t,e,r){let i=!1,s=Vs(t,e,r);if(t=r(s),t===null)return e;if(t.type!==Un.Number)if(nd(t,Ks)||nd(t,sr)){if(i=!0,s=Vs(r(++s),s,r),t=r(s),t===null||t.type!==Un.Number)return 0}else return e;if(!i){let a=t.value.charCodeAt(0);if(a!==Ks&&a!==sr)return 0}return Qr(t,i?0:1,i,s)}function ED(t,e){let r=0;if(!t)return 0;if(t.type===Un.Number)return Qr(t,0,LD,r);if(t.type===Un.Ident&&t.value.charCodeAt(0)===sr){if(!Zf.cmpChar(t.value,1,ed))return 0;switch(t.value.length){case 2:return td(e(++r),r,e);case 3:return t.value.charCodeAt(2)!==sr?0:(r=Vs(e(++r),r,e),t=e(r),Qr(t,0,vo,r));default:return t.value.charCodeAt(2)!==sr?0:Qr(t,3,vo,r)}}else if(t.type===Un.Ident||nd(t,Ks)&&e(r+1).type===Un.Ident){if(t.type!==Un.Ident&&(t=e(++r)),t===null||!Zf.cmpChar(t.value,0,ed))return 0;switch(t.value.length){case 1:return td(e(++r),r,e);case 2:return t.value.charCodeAt(1)!==sr?0:(r=Vs(e(++r),r,e),t=e(r),Qr(t,0,vo,r));default:return t.value.charCodeAt(1)!==sr?0:Qr(t,2,vo,r)}}else if(t.type===Un.Dimension){let i=t.value.charCodeAt(0),s=i===Ks||i===sr?1:0,a=s;for(;a<t.value.length&&Ib.isDigit(t.value.charCodeAt(a));a++);return a===s||!Zf.cmpChar(t.value,a,ed)?0:a+1===t.value.length?td(e(++r),r,e):t.value.charCodeAt(a+1)!==sr?0:a+2===t.value.length?(r=Vs(e(++r),r,e),t=e(r),Qr(t,0,vo,r)):Qr(t,a+2,vo,r)}return 0}Bb.exports=ED});var _b=Y((P5,Fb)=>{"use strict";var MD=yn(),xi=Me(),DD=ir(),ND=43,zb=45,Rb=63,OD=117;function rd(t,e){return t!==null&&t.type===xi.Delim&&t.value.charCodeAt(0)===e}function PD(t,e){return t.value.charCodeAt(0)===e}function Ys(t,e,r){let i=0;for(let s=e;s<t.value.length;s++){let a=t.value.charCodeAt(s);if(a===zb&&r&&i!==0)return Ys(t,e+i+1,!1),6;if(!MD.isHexDigit(a)||++i>6)return 0}return i}function lc(t,e,r){if(!t)return 0;for(;rd(r(e),Rb);){if(++t>6)return 0;e++}return e}function ID(t,e){let r=0;if(t===null||t.type!==xi.Ident||!DD.cmpChar(t.value,0,OD)||(t=e(++r),t===null))return 0;if(rd(t,ND))return t=e(++r),t===null?0:t.type===xi.Ident?lc(Ys(t,0,!0),++r,e):rd(t,Rb)?lc(1,++r,e):0;if(t.type===xi.Number){let i=Ys(t,1,!0);return i===0?0:(t=e(++r),t===null?r:t.type===xi.Dimension||t.type===xi.Number?!PD(t,zb)||!Ys(t,1,!1)?0:r+1:lc(i,r,e))}return t.type===xi.Dimension?lc(Ys(t,1,!0),++r,e):0}Fb.exports=ID});var Kb=Y(Qs=>{"use strict";var BD=Jf(),qD=qb(),zD=_b(),ve=Me(),cc=yn(),id=ir(),RD=["calc(","-moz-calc(","-webkit-calc("],od=new Map([[ve.Function,ve.RightParenthesis],[ve.LeftParenthesis,ve.RightParenthesis],[ve.LeftSquareBracket,ve.RightSquareBracket],[ve.LeftCurlyBracket,ve.RightCurlyBracket]]);function $n(t,e){return e<t.length?t.charCodeAt(e):0}function jb(t,e){return id.cmpStr(t,0,t.length,e)}function Hb(t,e){for(let r=0;r<e.length;r++)if(jb(t,e[r]))return!0;return!1}function Wb(t,e){return e!==t.length-2?!1:$n(t,e)===92&&cc.isDigit($n(t,e+1))}function uc(t,e,r){if(t&&t.type==="Range"){let i=Number(r!==void 0&&r!==e.length?e.substr(0,r):e);if(isNaN(i)||t.min!==null&&i<t.min&&typeof t.min!="string"||t.max!==null&&i>t.max&&typeof t.max!="string")return!0}return!1}function FD(t,e){let r=0,i=[],s=0;e:do{switch(t.type){case ve.RightCurlyBracket:case ve.RightParenthesis:case ve.RightSquareBracket:if(t.type!==r)break e;if(r=i.pop(),i.length===0){s++;break e}break;case ve.Function:case ve.LeftParenthesis:case ve.LeftSquareBracket:case ve.LeftCurlyBracket:i.push(r),r=od.get(t.type);break}s++}while(t=e(s));return s}function Mn(t){return function(e,r,i){return e===null?0:e.type===ve.Function&&Hb(e.value,RD)?FD(e,r):t(e,r,i)}}function Je(t){return function(e){return e===null||e.type!==t?0:1}}function _D(t){if(t===null||t.type!==ve.Ident)return 0;let e=t.value.toLowerCase();return Hb(e,BD.cssWideKeywords)||jb(e,"default")?0:1}function jD(t){return t===null||t.type!==ve.Ident||$n(t.value,0)!==45||$n(t.value,1)!==45?0:1}function HD(t){if(t===null||t.type!==ve.Hash)return 0;let e=t.value.length;if(e!==4&&e!==5&&e!==7&&e!==9)return 0;for(let r=1;r<e;r++)if(!cc.isHexDigit($n(t.value,r)))return 0;return 1}function WD(t){return t===null||t.type!==ve.Hash||!cc.isIdentifierStart($n(t.value,1),$n(t.value,2),$n(t.value,3))?0:1}function UD(t,e){if(!t)return 0;let r=0,i=[],s=0;e:do{switch(t.type){case ve.BadString:case ve.BadUrl:break e;case ve.RightCurlyBracket:case ve.RightParenthesis:case ve.RightSquareBracket:if(t.type!==r)break e;r=i.pop();break;case ve.Semicolon:if(r===0)break e;break;case ve.Delim:if(r===0&&t.value==="!")break e;break;case ve.Function:case ve.LeftParenthesis:case ve.LeftSquareBracket:case ve.LeftCurlyBracket:i.push(r),r=od.get(t.type);break}s++}while(t=e(s));return s}function $D(t,e){if(!t)return 0;let r=0,i=[],s=0;e:do{switch(t.type){case ve.BadString:case ve.BadUrl:break e;case ve.RightCurlyBracket:case ve.RightParenthesis:case ve.RightSquareBracket:if(t.type!==r)break e;r=i.pop();break;case ve.Function:case ve.LeftParenthesis:case ve.LeftSquareBracket:case ve.LeftCurlyBracket:i.push(r),r=od.get(t.type);break}s++}while(t=e(s));return s}function Ar(t){return t&&(t=new Set(t)),function(e,r,i){if(e===null||e.type!==ve.Dimension)return 0;let s=id.consumeNumber(e.value,0);if(t!==null){let a=e.value.indexOf("\\",s),f=a===-1||!Wb(e.value,a)?e.value.substr(s):e.value.substring(s,a);if(t.has(f.toLowerCase())===!1)return 0}return uc(i,e.value,s)?0:1}}function GD(t,e,r){return t===null||t.type!==ve.Percentage||uc(r,t.value,t.value.length-1)?0:1}function Ub(t){return typeof t!="function"&&(t=function(){return 0}),function(e,r,i){return e!==null&&e.type===ve.Number&&Number(e.value)===0?1:t(e,r,i)}}function VD(t,e,r){if(t===null)return 0;let i=id.consumeNumber(t.value,0);return!(i===t.value.length)&&!Wb(t.value,i)||uc(r,t.value,i)?0:1}function KD(t,e,r){if(t===null||t.type!==ve.Number)return 0;let i=$n(t.value,0)===43||$n(t.value,0)===45?1:0;for(;i<t.value.length;i++)if(!cc.isDigit($n(t.value,i)))return 0;return uc(r,t.value,i)?0:1}var $b={"ident-token":Je(ve.Ident),"function-token":Je(ve.Function),"at-keyword-token":Je(ve.AtKeyword),"hash-token":Je(ve.Hash),"string-token":Je(ve.String),"bad-string-token":Je(ve.BadString),"url-token":Je(ve.Url),"bad-url-token":Je(ve.BadUrl),"delim-token":Je(ve.Delim),"number-token":Je(ve.Number),"percentage-token":Je(ve.Percentage),"dimension-token":Je(ve.Dimension),"whitespace-token":Je(ve.WhiteSpace),"CDO-token":Je(ve.CDO),"CDC-token":Je(ve.CDC),"colon-token":Je(ve.Colon),"semicolon-token":Je(ve.Semicolon),"comma-token":Je(ve.Comma),"[-token":Je(ve.LeftSquareBracket),"]-token":Je(ve.RightSquareBracket),"(-token":Je(ve.LeftParenthesis),")-token":Je(ve.RightParenthesis),"{-token":Je(ve.LeftCurlyBracket),"}-token":Je(ve.RightCurlyBracket)},Gb={string:Je(ve.String),ident:Je(ve.Ident),percentage:Mn(GD),zero:Ub(),number:Mn(VD),integer:Mn(KD),"custom-ident":_D,"custom-property-name":jD,"hex-color":HD,"id-selector":WD,"an-plus-b":qD,urange:zD,"declaration-value":UD,"any-value":$D};function Vb(t){let{angle:e,decibel:r,frequency:i,flex:s,length:a,resolution:f,semitones:d,time:p}=t||{};return{dimension:Mn(Ar(null)),angle:Mn(Ar(e)),decibel:Mn(Ar(r)),frequency:Mn(Ar(i)),flex:Mn(Ar(s)),length:Mn(Ub(Ar(a))),resolution:Mn(Ar(f)),semitones:Mn(Ar(d)),time:Mn(Ar(p))}}function YD(t){return{...$b,...Gb,...Vb(t)}}Qs.createDemensionTypes=Vb;Qs.createGenericTypes=YD;Qs.productionTypes=Gb;Qs.tokenTypes=$b});var Yb=Y(Tr=>{"use strict";var QD=["cm","mm","q","in","pt","pc","px","em","rem","ex","rex","cap","rcap","ch","rch","ic","ric","lh","rlh","vw","svw","lvw","dvw","vh","svh","lvh","dvh","vi","svi","lvi","dvi","vb","svb","lvb","dvb","vmin","svmin","lvmin","dvmin","vmax","svmax","lvmax","dvmax","cqw","cqh","cqi","cqb","cqmin","cqmax"],XD=["deg","grad","rad","turn"],JD=["s","ms"],ZD=["hz","khz"],eN=["dpi","dpcm","dppx","x"],tN=["fr"],nN=["db"],rN=["st"];Tr.angle=XD;Tr.decibel=nN;Tr.flex=tN;Tr.frequency=ZD;Tr.length=QD;Tr.resolution=eN;Tr.semitones=rN;Tr.time=JD});var Xb=Y((q5,Qb)=>{"use strict";var iN=_s(),oN={decorator(t){let e=[],r=null;return{...t,node(i){let s=r;r=i,t.node.call(this,i),r=s},emit(i,s,a){e.push({type:s,value:i,node:a?null:r})},result(){return e}}}};function sN(t){let e=[];return iN.tokenize(t,(r,i,s)=>e.push({type:r,value:t.slice(i,s),node:null})),e}function aN(t,e){return typeof t=="string"?sN(t):e.generate(t,oN)}Qb.exports=aN});var sd=Y(Jb=>{"use strict";var lN=Zl();function cN(t,e,r){return Object.assign(lN.createCustomError("SyntaxError",t),{input:e,offset:r,rawMessage:t,message:t+`
  `+e+`
--`+new Array((r||e.length)+1).join("-")+"^"})}Jb.SyntaxError=cN});var ew=Y(Zb=>{"use strict";var uN=sd(),fN=9,dN=10,hN=12,pN=13,gN=32,ad=class{constructor(e){this.str=e,this.pos=0}charCodeAt(e){return e<this.str.length?this.str.charCodeAt(e):0}charCode(){return this.charCodeAt(this.pos)}nextCharCode(){return this.charCodeAt(this.pos+1)}nextNonWsCode(e){return this.charCodeAt(this.findWsEnd(e))}findWsEnd(e){for(;e<this.str.length;e++){let r=this.str.charCodeAt(e);if(r!==pN&&r!==dN&&r!==hN&&r!==gN&&r!==fN)break}return e}substringToPos(e){return this.str.substring(this.pos,this.pos=e)}eat(e){this.charCode()!==e&&this.error("Expect `"+String.fromCharCode(e)+"`"),this.pos++}peek(){return this.pos<this.str.length?this.str.charAt(this.pos++):""}error(e){throw new uN.SyntaxError(e,this.str,this.pos)}};Zb.Tokenizer=ad});var mc=Y(hw=>{"use strict";var mN=ew(),yN=9,vN=10,bN=12,wN=13,xN=32,lw=33,ud=35,tw=38,fc=39,cw=40,kN=41,uw=42,fd=43,dd=44,nw=45,hd=60,fw=62,cd=63,CN=64,gc=91,pd=93,dc=123,rw=124,iw=125,ow=8734,Xs=new Uint8Array(128).map((t,e)=>/[a-zA-Z0-9\-]/.test(String.fromCharCode(e))?1:0),sw={" ":1,"&&":2,"||":3,"|":4};function hc(t){return t.substringToPos(t.findWsEnd(t.pos))}function bo(t){let e=t.pos;for(;e<t.str.length;e++){let r=t.str.charCodeAt(e);if(r>=128||Xs[r]===0)break}return t.pos===e&&t.error("Expect a keyword"),t.substringToPos(e)}function pc(t){let e=t.pos;for(;e<t.str.length;e++){let r=t.str.charCodeAt(e);if(r<48||r>57)break}return t.pos===e&&t.error("Expect a number"),t.substringToPos(e)}function SN(t){let e=t.str.indexOf("'",t.pos+1);return e===-1&&(t.pos=t.str.length,t.error("Expect an apostrophe")),t.substringToPos(e+1)}function aw(t){let e=null,r=null;return t.eat(dc),e=pc(t),t.charCode()===dd?(t.pos++,t.charCode()!==iw&&(r=pc(t))):r=e,t.eat(iw),{min:Number(e),max:r?Number(r):0}}function AN(t){let e=null,r=!1;switch(t.charCode()){case uw:t.pos++,e={min:0,max:0};break;case fd:t.pos++,e={min:1,max:0};break;case cd:t.pos++,e={min:0,max:1};break;case ud:t.pos++,r=!0,t.charCode()===dc?e=aw(t):t.charCode()===cd?(t.pos++,e={min:0,max:0}):e={min:1,max:0};break;case dc:e=aw(t);break;default:return null}return{type:"Multiplier",comma:r,min:e.min,max:e.max,term:null}}function wo(t,e){let r=AN(t);return r!==null?(r.term=e,t.charCode()===ud&&t.charCodeAt(t.pos-1)===fd?wo(t,r):r):e}function ld(t){let e=t.peek();return e===""?null:{type:"Token",value:e}}function TN(t){let e;return t.eat(hd),t.eat(fc),e=bo(t),t.eat(fc),t.eat(fw),wo(t,{type:"Property",name:e})}function LN(t){let e=null,r=null,i=1;return t.eat(gc),t.charCode()===nw&&(t.peek(),i=-1),i==-1&&t.charCode()===ow?t.peek():(e=i*Number(pc(t)),Xs[t.charCode()]!==0&&(e+=bo(t))),hc(t),t.eat(dd),hc(t),t.charCode()===ow?t.peek():(i=1,t.charCode()===nw&&(t.peek(),i=-1),r=i*Number(pc(t)),Xs[t.charCode()]!==0&&(r+=bo(t))),t.eat(pd),{type:"Range",min:e,max:r}}function EN(t){let e,r=null;return t.eat(hd),e=bo(t),t.charCode()===cw&&t.nextCharCode()===kN&&(t.pos+=2,e+="()"),t.charCodeAt(t.findWsEnd(t.pos))===gc&&(hc(t),r=LN(t)),t.eat(fw),wo(t,{type:"Type",name:e,opts:r})}function MN(t){let e=bo(t);return t.charCode()===cw?(t.pos++,{type:"Function",name:e}):wo(t,{type:"Keyword",name:e})}function DN(t,e){function r(s,a){return{type:"Group",terms:s,combinator:a,disallowEmpty:!1,explicit:!1}}let i;for(e=Object.keys(e).sort((s,a)=>sw[s]-sw[a]);e.length>0;){i=e.shift();let s=0,a=0;for(;s<t.length;s++){let f=t[s];f.type==="Combinator"&&(f.value===i?(a===-1&&(a=s-1),t.splice(s,1),s--):(a!==-1&&s-a>1&&(t.splice(a,s-a,r(t.slice(a,s),i)),s=a+1),a=-1))}a!==-1&&e.length&&t.splice(a,s-a,r(t.slice(a,s),i))}return i}function dw(t){let e=[],r={},i,s=null,a=t.pos;for(;i=ON(t);)i.type!=="Spaces"&&(i.type==="Combinator"?((s===null||s.type==="Combinator")&&(t.pos=a,t.error("Unexpected combinator")),r[i.value]=!0):s!==null&&s.type!=="Combinator"&&(r[" "]=!0,e.push({type:"Combinator",value:" "})),e.push(i),s=i,a=t.pos);return s!==null&&s.type==="Combinator"&&(t.pos-=a,t.error("Unexpected combinator")),{type:"Group",terms:e,combinator:DN(e,r)||" ",disallowEmpty:!1,explicit:!1}}function NN(t){let e;return t.eat(gc),e=dw(t),t.eat(pd),e.explicit=!0,t.charCode()===lw&&(t.pos++,e.disallowEmpty=!0),e}function ON(t){let e=t.charCode();if(e<128&&Xs[e]===1)return MN(t);switch(e){case pd:break;case gc:return wo(t,NN(t));case hd:return t.nextCharCode()===fc?TN(t):EN(t);case rw:return{type:"Combinator",value:t.substringToPos(t.pos+(t.nextCharCode()===rw?2:1))};case tw:return t.pos++,t.eat(tw),{type:"Combinator",value:"&&"};case dd:return t.pos++,{type:"Comma"};case fc:return wo(t,{type:"String",value:SN(t)});case xN:case yN:case vN:case wN:case bN:return{type:"Spaces",value:hc(t)};case CN:return e=t.nextCharCode(),e<128&&Xs[e]===1?(t.pos++,{type:"AtKeyword",name:bo(t)}):ld(t);case uw:case fd:case cd:case ud:case lw:break;case dc:if(e=t.nextCharCode(),e<48||e>57)return ld(t);break;default:return ld(t)}}function PN(t){let e=new mN.Tokenizer(t),r=dw(e);return e.pos!==t.length&&e.error("Unexpected input"),r.terms.length===1&&r.terms[0].type==="Group"?r.terms[0]:r}hw.parse=PN});var vd=Y(Js=>{"use strict";var IN=mc(),gt={type:"Match"},Zt={type:"Mismatch"},md={type:"DisallowEmpty"},BN=40,qN=41;function _t(t,e,r){return e===gt&&r===Zt||t===gt&&e===gt&&r===gt?t:(t.type==="If"&&t.else===Zt&&e===gt&&(e=t.then,t=t.match),{type:"If",match:t,then:e,else:r})}function gw(t){return t.length>2&&t.charCodeAt(t.length-2)===BN&&t.charCodeAt(t.length-1)===qN}function pw(t){return t.type==="Keyword"||t.type==="AtKeyword"||t.type==="Function"||t.type==="Type"&&gw(t.name)}function gd(t,e,r){switch(t){case" ":{let i=gt;for(let s=e.length-1;s>=0;s--){let a=e[s];i=_t(a,i,Zt)}return i}case"|":{let i=Zt,s=null;for(let a=e.length-1;a>=0;a--){let f=e[a];if(pw(f)&&(s===null&&a>0&&pw(e[a-1])&&(s=Object.create(null),i=_t({type:"Enum",map:s},gt,i)),s!==null)){let d=(gw(f.name)?f.name.slice(0,-1):f.name).toLowerCase();if(!(d in s)){s[d]=f;continue}}s=null,i=_t(f,gt,i)}return i}case"&&":{if(e.length>5)return{type:"MatchOnce",terms:e,all:!0};let i=Zt;for(let s=e.length-1;s>=0;s--){let a=e[s],f;e.length>1?f=gd(t,e.filter(function(d){return d!==a}),!1):f=gt,i=_t(a,f,i)}return i}case"||":{if(e.length>5)return{type:"MatchOnce",terms:e,all:!1};let i=r?gt:Zt;for(let s=e.length-1;s>=0;s--){let a=e[s],f;e.length>1?f=gd(t,e.filter(function(d){return d!==a}),!0):f=gt,i=_t(a,f,i)}return i}}}function zN(t){let e=gt,r=yd(t.term);if(t.max===0)r=_t(r,md,Zt),e=_t(r,null,Zt),e.then=_t(gt,gt,e),t.comma&&(e.then.else=_t({type:"Comma",syntax:t},e,Zt));else for(let i=t.min||1;i<=t.max;i++)t.comma&&e!==gt&&(e=_t({type:"Comma",syntax:t},e,Zt)),e=_t(r,_t(gt,gt,e),Zt);if(t.min===0)e=_t(gt,gt,e);else for(let i=0;i<t.min-1;i++)t.comma&&e!==gt&&(e=_t({type:"Comma",syntax:t},e,Zt)),e=_t(r,e,Zt);return e}function yd(t){if(typeof t=="function")return{type:"Generic",fn:t};switch(t.type){case"Group":{let e=gd(t.combinator,t.terms.map(yd),!1);return t.disallowEmpty&&(e=_t(e,md,Zt)),e}case"Multiplier":return zN(t);case"Type":case"Property":return{type:t.type,name:t.name,syntax:t};case"Keyword":return{type:t.type,name:t.name.toLowerCase(),syntax:t};case"AtKeyword":return{type:t.type,name:"@"+t.name.toLowerCase(),syntax:t};case"Function":return{type:t.type,name:t.name.toLowerCase()+"(",syntax:t};case"String":return t.value.length===3?{type:"Token",value:t.value.charAt(1),syntax:t}:{type:t.type,value:t.value.substr(1,t.value.length-2).replace(/\\'/g,"'"),syntax:t};case"Token":return{type:t.type,value:t.value,syntax:t};case"Comma":return{type:t.type,syntax:t};default:throw new Error("Unknown node type:",t.type)}}function RN(t,e){return typeof t=="string"&&(t=IN.parse(t)),{type:"MatchGraph",match:yd(t),syntax:e||null,source:t}}Js.DISALLOW_EMPTY=md;Js.MATCH=gt;Js.MISMATCH=Zt;Js.buildMatchGraph=RN});var Cw=Y(xd=>{"use strict";var Ze=vd(),an=Me(),{hasOwnProperty:mw}=Object.prototype,FN=0,_N=1,yc=2,wd=3,yw="Match",jN="Mismatch",HN="Maximum iteration number exceeded (please fill an issue on https://github.com/csstree/csstree/issues)",vw=15e3;function xw(t){let e=null,r=null,i=t;for(;i!==null;)r=i.prev,i.prev=e,e=i,i=r;return e}function bd(t,e){if(t.length!==e.length)return!1;for(let r=0;r<t.length;r++){let i=e.charCodeAt(r),s=t.charCodeAt(r);if(s>=65&&s<=90&&(s=s|32),s!==i)return!1}return!0}function WN(t){return t.type!==an.Delim?!1:t.value!=="?"}function bw(t){return t===null?!0:t.type===an.Comma||t.type===an.Function||t.type===an.LeftParenthesis||t.type===an.LeftSquareBracket||t.type===an.LeftCurlyBracket||WN(t)}function ww(t){return t===null?!0:t.type===an.RightParenthesis||t.type===an.RightSquareBracket||t.type===an.RightCurlyBracket||t.type===an.Delim&&t.value==="/"}function kw(t,e,r){function i(){do L++,O=L<t.length?t[L]:null;while(O!==null&&(O.type===an.WhiteSpace||O.type===an.Comment))}function s(B){let I=L+B;return I<t.length?t[I]:null}function a(B,I){return{nextState:B,matchStack:N,syntaxStack:x,thenStack:w,tokenIndex:L,prev:I}}function f(B){w={nextState:B,matchStack:N,syntaxStack:x,prev:w}}function d(B){k=a(B,k)}function p(){N={type:_N,syntax:e.syntax,token:O,prev:N},i(),A=null,L>E&&(E=L)}function g(){x={syntax:e.syntax,opts:e.syntax.opts||x!==null&&x.opts||null,prev:x},N={type:yc,syntax:e.syntax,token:N.token,prev:N}}function y(){N.type===yc?N=N.prev:N={type:wd,syntax:x.syntax,token:N.token,prev:N},x=x.prev}let x=null,w=null,k=null,A=null,M=0,D=null,O=null,L=-1,E=0,N={type:FN,syntax:null,token:null,prev:null};for(i();D===null&&++M<vw;)switch(e.type){case"Match":if(w===null){if(O!==null&&(L!==t.length-1||O.value!=="\\0"&&O.value!=="\\9")){e=Ze.MISMATCH;break}D=yw;break}if(e=w.nextState,e===Ze.DISALLOW_EMPTY)if(w.matchStack===N){e=Ze.MISMATCH;break}else e=Ze.MATCH;for(;w.syntaxStack!==x;)y();w=w.prev;break;case"Mismatch":if(A!==null&&A!==!1)(k===null||L>k.tokenIndex)&&(k=A,A=!1);else if(k===null){D=jN;break}e=k.nextState,w=k.thenStack,x=k.syntaxStack,N=k.matchStack,L=k.tokenIndex,O=L<t.length?t[L]:null,k=k.prev;break;case"MatchGraph":e=e.match;break;case"If":e.else!==Ze.MISMATCH&&d(e.else),e.then!==Ze.MATCH&&f(e.then),e=e.match;break;case"MatchOnce":e={type:"MatchOnceBuffer",syntax:e,index:0,mask:0};break;case"MatchOnceBuffer":{let R=e.syntax.terms;if(e.index===R.length){if(e.mask===0||e.syntax.all){e=Ze.MISMATCH;break}e=Ze.MATCH;break}if(e.mask===(1<<R.length)-1){e=Ze.MATCH;break}for(;e.index<R.length;e.index++){let j=1<<e.index;if(!(e.mask&j)){d(e),f({type:"AddMatchOnce",syntax:e.syntax,mask:e.mask|j}),e=R[e.index++];break}}break}case"AddMatchOnce":e={type:"MatchOnceBuffer",syntax:e.syntax,index:0,mask:e.mask};break;case"Enum":if(O!==null){let R=O.value.toLowerCase();if(R.indexOf("\\")!==-1&&(R=R.replace(/\\[09].*$/,"")),mw.call(e.map,R)){e=e.map[R];break}}e=Ze.MISMATCH;break;case"Generic":{let R=x!==null?x.opts:null,j=L+Math.floor(e.fn(O,s,R));if(!isNaN(j)&&j>L){for(;L<j;)p();e=Ze.MATCH}else e=Ze.MISMATCH;break}case"Type":case"Property":{let R=e.type==="Type"?"types":"properties",j=mw.call(r,R)?r[R][e.name]:null;if(!j||!j.match)throw new Error("Bad syntax reference: "+(e.type==="Type"?"<"+e.name+">":"<'"+e.name+"'>"));if(A!==!1&&O!==null&&e.type==="Type"&&(e.name==="custom-ident"&&O.type===an.Ident||e.name==="length"&&O.value==="0")){A===null&&(A=a(e,k)),e=Ze.MISMATCH;break}g(),e=j.match;break}case"Keyword":{let R=e.name;if(O!==null){let j=O.value;if(j.indexOf("\\")!==-1&&(j=j.replace(/\\[09].*$/,"")),bd(j,R)){p(),e=Ze.MATCH;break}}e=Ze.MISMATCH;break}case"AtKeyword":case"Function":if(O!==null&&bd(O.value,e.name)){p(),e=Ze.MATCH;break}e=Ze.MISMATCH;break;case"Token":if(O!==null&&O.value===e.value){p(),e=Ze.MATCH;break}e=Ze.MISMATCH;break;case"Comma":O!==null&&O.type===an.Comma?bw(N.token)?e=Ze.MISMATCH:(p(),e=ww(O)?Ze.MISMATCH:Ze.MATCH):e=bw(N.token)||ww(O)?Ze.MATCH:Ze.MISMATCH;break;case"String":let B="",I=L;for(;I<t.length&&B.length<e.value.length;I++)B+=t[I].value;if(bd(B,e.value)){for(;L<I;)p();e=Ze.MATCH}else e=Ze.MISMATCH;break;default:throw new Error("Unknown node type: "+e.type)}switch(D){case null:console.warn("[csstree-match] BREAK after "+vw+" iterations"),D=HN,N=null;break;case yw:for(;x!==null;)y();break;default:N=null}return{tokens:t,reason:D,iterations:M,match:N,longestMatch:E}}function UN(t,e,r){let i=kw(t,e,r||{});if(i.match!==null){let s=xw(i.match).prev;for(i.match=[];s!==null;){switch(s.type){case yc:case wd:i.match.push({type:s.type,syntax:s.syntax});break;default:i.match.push({token:s.token.value,node:s.token.node});break}s=s.prev}}return i}function $N(t,e,r){let i=kw(t,e,r||{});if(i.match===null)return i;let s=i.match,a=i.match={syntax:e.syntax||null,match:[]},f=[a];for(s=xw(s).prev;s!==null;){switch(s.type){case yc:a.match.push(a={syntax:s.syntax,match:[]}),f.push(a);break;case wd:f.pop(),a=f[f.length-1];break;default:a.match.push({syntax:s.syntax||null,token:s.token.value,node:s.token.node})}s=s.prev}return i}xd.matchAsList=UN;xd.matchAsTree=$N});var Aw=Y(Zs=>{"use strict";function Sw(t){function e(s){return s===null?!1:s.type==="Type"||s.type==="Property"||s.type==="Keyword"}function r(s){if(Array.isArray(s.match)){for(let a=0;a<s.match.length;a++)if(r(s.match[a]))return e(s.syntax)&&i.unshift(s.syntax),!0}else if(s.node===t)return i=e(s.syntax)?[s.syntax]:[],!0;return!1}let i=null;return this.matched!==null&&r(this.matched),i}function GN(t,e){return kd(this,t,r=>r.type==="Type"&&r.name===e)}function VN(t,e){return kd(this,t,r=>r.type==="Property"&&r.name===e)}function KN(t){return kd(this,t,e=>e.type==="Keyword")}function kd(t,e,r){let i=Sw.call(t,e);return i===null?!1:i.some(r)}Zs.getTrace=Sw;Zs.isKeyword=KN;Zs.isProperty=VN;Zs.isType=GN});var Mw=Y(Ew=>{"use strict";var YN=bi();function Tw(t){return"node"in t?t.node:Tw(t.match[0])}function Lw(t){return"node"in t?t.node:Lw(t.match[t.match.length-1])}function QN(t,e,r,i,s){function a(d){if(d.syntax!==null&&d.syntax.type===i&&d.syntax.name===s){let p=Tw(d),g=Lw(d);t.syntax.walk(e,function(y,x,w){if(y===p){let k=new YN.List;do{if(k.appendData(x.data),x.data===g)break;x=x.next}while(x!==null);f.push({parent:w,nodes:k})}})}Array.isArray(d.match)&&d.match.forEach(a)}let f=[];return r.matched!==null&&a(r.matched),f}Ew.matchFragments=QN});var Ow=Y(Nw=>{"use strict";var XN=bi(),{hasOwnProperty:ea}=Object.prototype;function Cd(t){return typeof t=="number"&&isFinite(t)&&Math.floor(t)===t&&t>=0}function Dw(t){return!!t&&Cd(t.offset)&&Cd(t.line)&&Cd(t.column)}function JN(t,e){return function(i,s){if(!i||i.constructor!==Object)return s(i,"Type of node should be an Object");for(let a in i){let f=!0;if(ea.call(i,a)!==!1){if(a==="type")i.type!==t&&s(i,"Wrong node type `"+i.type+"`, expected `"+t+"`");else if(a==="loc"){if(i.loc===null)continue;if(i.loc&&i.loc.constructor===Object)if(typeof i.loc.source!="string")a+=".source";else if(!Dw(i.loc.start))a+=".start";else if(!Dw(i.loc.end))a+=".end";else continue;f=!1}else if(e.hasOwnProperty(a)){f=!1;for(let d=0;!f&&d<e[a].length;d++){let p=e[a][d];switch(p){case String:f=typeof i[a]=="string";break;case Boolean:f=typeof i[a]=="boolean";break;case null:f=i[a]===null;break;default:typeof p=="string"?f=i[a]&&i[a].type===p:Array.isArray(p)&&(f=i[a]instanceof XN.List)}}}else s(i,"Unknown field `"+a+"` for "+t+" node type");f||s(i,"Bad value for `"+t+"."+a+"`")}}for(let a in e)ea.call(e,a)&&ea.call(i,a)===!1&&s(i,"Field `"+t+"."+a+"` is missed")}}function ZN(t,e){let r=e.structure,i={type:String,loc:!0},s={type:'"'+t+'"'};for(let a in r){if(ea.call(r,a)===!1)continue;let f=[],d=i[a]=Array.isArray(r[a])?r[a].slice():[r[a]];for(let p=0;p<d.length;p++){let g=d[p];if(g===String||g===Boolean)f.push(g.name);else if(g===null)f.push("null");else if(typeof g=="string")f.push("<"+g+">");else if(Array.isArray(g))f.push("List");else throw new Error("Wrong value `"+g+"` in `"+t+"."+a+"` structure definition")}s[a]=f.join(" | ")}return{docs:s,check:JN(t,i)}}function eO(t){let e={};if(t.node){for(let r in t.node)if(ea.call(t.node,r)){let i=t.node[r];if(i.structure)e[r]=ZN(r,i);else throw new Error("Missed `structure` field in `"+r+"` node type definition")}}return e}Nw.getStructureFromConfig=eO});var Sd=Y(Iw=>{"use strict";var ta=function(){};function Pw(t){return typeof t=="function"?t:ta}function tO(t,e,r){function i(f){switch(s.call(r,f),f.type){case"Group":f.terms.forEach(i);break;case"Multiplier":i(f.term);break;case"Type":case"Property":case"Keyword":case"AtKeyword":case"Function":case"String":case"Token":case"Comma":break;default:throw new Error("Unknown type: "+f.type)}a.call(r,f)}let s=ta,a=ta;if(typeof e=="function"?s=e:e&&(s=Pw(e.enter),a=Pw(e.leave)),s===ta&&a===ta)throw new Error("Neither `enter` nor `leave` walker handler is set or both aren't a function");i(t)}Iw.walk=tO});var Ed=Y(Fw=>{"use strict";var ko=Ob(),na=ac(),nO=Jf(),rO=Kb(),Bw=Yb(),iO=Xb(),Ad=vd(),qw=Cw(),oO=Aw(),zw=Mw(),sO=Ow(),aO=mc(),Rw=rc(),lO=Sd(),cO=Ad.buildMatchGraph(nO.cssWideKeywords.join(" | "));function Td(t,e,r){let i={};for(let s in t)t[s].syntax&&(i[s]=r?t[s].syntax:Rw.generate(t[s].syntax,{compact:e}));return i}function uO(t,e,r){let i={};for(let[s,a]of Object.entries(t))i[s]={prelude:a.prelude&&(r?a.prelude.syntax:Rw.generate(a.prelude.syntax,{compact:e})),descriptors:a.descriptors&&Td(a.descriptors,e,r)};return i}function fO(t){for(let e=0;e<t.length;e++)if(t[e].value.toLowerCase()==="var(")return!0;return!1}function Gn(t,e,r){return{matched:t,iterations:r,error:e,...oO}}function xo(t,e,r,i){let s=iO(r,t.syntax),a;return fO(s)?Gn(null,new Error("Matching for a tree with var() is not supported")):(i&&(a=qw.matchAsTree(s,t.cssWideKeywordsSyntax,t)),(!i||!a.match)&&(a=qw.matchAsTree(s,e.match,t),!a.match)?Gn(null,new ko.SyntaxMatchError(a.reason,e.syntax,r,a),a.iterations):Gn(a.match,null,a.iterations))}var Ld=class{constructor(e,r,i){if(this.cssWideKeywordsSyntax=cO,this.syntax=r,this.generic=!1,this.units={...Bw},this.atrules=Object.create(null),this.properties=Object.create(null),this.types=Object.create(null),this.structure=i||sO.getStructureFromConfig(e),e){if(e.units)for(let s of Object.keys(Bw))Array.isArray(e.units[s])&&(this.units[s]=e.units[s]);if(e.types)for(let s in e.types)this.addType_(s,e.types[s]);if(e.generic){this.generic=!0;for(let[s,a]of Object.entries(rO.createGenericTypes(this.units)))this.addType_(s,a)}if(e.atrules)for(let s in e.atrules)this.addAtrule_(s,e.atrules[s]);if(e.properties)for(let s in e.properties)this.addProperty_(s,e.properties[s])}}checkStructure(e){function r(a,f){s.push({node:a,message:f})}let i=this.structure,s=[];return this.syntax.walk(e,function(a){i.hasOwnProperty(a.type)?i[a.type].check(a,r):r(a,"Unknown node type `"+a.type+"`")}),s.length?s:!1}createDescriptor(e,r,i,s=null){let a={type:r,name:i},f={type:r,name:i,parent:s,serializable:typeof e=="string"||e&&typeof e.type=="string",syntax:null,match:null};return typeof e=="function"?f.match=Ad.buildMatchGraph(e,a):(typeof e=="string"?Object.defineProperty(f,"syntax",{get(){return Object.defineProperty(f,"syntax",{value:aO.parse(e)}),f.syntax}}):f.syntax=e,Object.defineProperty(f,"match",{get(){return Object.defineProperty(f,"match",{value:Ad.buildMatchGraph(f.syntax,a)}),f.match}})),f}addAtrule_(e,r){r&&(this.atrules[e]={type:"Atrule",name:e,prelude:r.prelude?this.createDescriptor(r.prelude,"AtrulePrelude",e):null,descriptors:r.descriptors?Object.keys(r.descriptors).reduce((i,s)=>(i[s]=this.createDescriptor(r.descriptors[s],"AtruleDescriptor",s,e),i),Object.create(null)):null})}addProperty_(e,r){r&&(this.properties[e]=this.createDescriptor(r,"Property",e))}addType_(e,r){r&&(this.types[e]=this.createDescriptor(r,"Type",e))}checkAtruleName(e){if(!this.getAtrule(e))return new ko.SyntaxReferenceError("Unknown at-rule","@"+e)}checkAtrulePrelude(e,r){let i=this.checkAtruleName(e);if(i)return i;let s=this.getAtrule(e);if(!s.prelude&&r)return new SyntaxError("At-rule `@"+e+"` should not contain a prelude");if(s.prelude&&!r&&!xo(this,s.prelude,"",!1).matched)return new SyntaxError("At-rule `@"+e+"` should contain a prelude")}checkAtruleDescriptorName(e,r){let i=this.checkAtruleName(e);if(i)return i;let s=this.getAtrule(e),a=na.keyword(r);if(!s.descriptors)return new SyntaxError("At-rule `@"+e+"` has no known descriptors");if(!s.descriptors[a.name]&&!s.descriptors[a.basename])return new ko.SyntaxReferenceError("Unknown at-rule descriptor",r)}checkPropertyName(e){if(!this.getProperty(e))return new ko.SyntaxReferenceError("Unknown property",e)}matchAtrulePrelude(e,r){let i=this.checkAtrulePrelude(e,r);if(i)return Gn(null,i);let s=this.getAtrule(e);return s.prelude?xo(this,s.prelude,r||"",!1):Gn(null,null)}matchAtruleDescriptor(e,r,i){let s=this.checkAtruleDescriptorName(e,r);if(s)return Gn(null,s);let a=this.getAtrule(e),f=na.keyword(r);return xo(this,a.descriptors[f.name]||a.descriptors[f.basename],i,!1)}matchDeclaration(e){return e.type!=="Declaration"?Gn(null,new Error("Not a Declaration node")):this.matchProperty(e.property,e.value)}matchProperty(e,r){if(na.property(e).custom)return Gn(null,new Error("Lexer matching doesn't applicable for custom properties"));let i=this.checkPropertyName(e);return i?Gn(null,i):xo(this,this.getProperty(e),r,!0)}matchType(e,r){let i=this.getType(e);return i?xo(this,i,r,!1):Gn(null,new ko.SyntaxReferenceError("Unknown type",e))}match(e,r){return typeof e!="string"&&(!e||!e.type)?Gn(null,new ko.SyntaxReferenceError("Bad syntax")):((typeof e=="string"||!e.match)&&(e=this.createDescriptor(e,"Type","anonymous")),xo(this,e,r,!1))}findValueFragments(e,r,i,s){return zw.matchFragments(this,r,this.matchProperty(e,r),i,s)}findDeclarationValueFragments(e,r,i){return zw.matchFragments(this,e.value,this.matchDeclaration(e),r,i)}findAllFragments(e,r,i){let s=[];return this.syntax.walk(e,{visit:"Declaration",enter:a=>{s.push.apply(s,this.findDeclarationValueFragments(a,r,i))}}),s}getAtrule(e,r=!0){let i=na.keyword(e);return(i.vendor&&r?this.atrules[i.name]||this.atrules[i.basename]:this.atrules[i.name])||null}getAtrulePrelude(e,r=!0){let i=this.getAtrule(e,r);return i&&i.prelude||null}getAtruleDescriptor(e,r){return this.atrules.hasOwnProperty(e)&&this.atrules.declarators&&this.atrules[e].declarators[r]||null}getProperty(e,r=!0){let i=na.property(e);return(i.vendor&&r?this.properties[i.name]||this.properties[i.basename]:this.properties[i.name])||null}getType(e){return hasOwnProperty.call(this.types,e)?this.types[e]:null}validate(){function e(s,a,f,d){if(f.has(a))return f.get(a);f.set(a,!1),d.syntax!==null&&lO.walk(d.syntax,function(p){if(p.type!=="Type"&&p.type!=="Property")return;let g=p.type==="Type"?s.types:s.properties,y=p.type==="Type"?r:i;(!hasOwnProperty.call(g,p.name)||e(s,p.name,y,g[p.name]))&&f.set(a,!0)},this)}let r=new Map,i=new Map;for(let s in this.types)e(this,s,r,this.types[s]);for(let s in this.properties)e(this,s,i,this.properties[s]);return r=[...r.keys()].filter(s=>r.get(s)),i=[...i.keys()].filter(s=>i.get(s)),r.length||i.length?{types:r,properties:i}:null}dump(e,r){return{generic:this.generic,units:this.units,types:Td(this.types,!r,e),properties:Td(this.properties,!r,e),atrules:uO(this.atrules,!r,e)}}toString(){return JSON.stringify(this.dump())}};Fw.Lexer=Ld});var Hw=Y((V5,jw)=>{"use strict";function Md(t,e){return typeof e=="string"&&/^\s*\|/.test(e)?typeof t=="string"?t+e:e.replace(/^\s*\|\s*/,""):e||null}function _w(t,e){let r=Object.create(null);for(let[i,s]of Object.entries(t))if(s){r[i]={};for(let a of Object.keys(s))e.includes(a)&&(r[i][a]=s[a])}return r}function dO(t,e){let r={...t};for(let[i,s]of Object.entries(e))switch(i){case"generic":r[i]=!!s;break;case"units":r[i]={...t[i]};for(let[a,f]of Object.entries(s))r[i][a]=Array.isArray(f)?f:[];break;case"atrules":r[i]={...t[i]};for(let[a,f]of Object.entries(s)){let d=r[i][a]||{},p=r[i][a]={prelude:d.prelude||null,descriptors:{...d.descriptors}};if(f){p.prelude=f.prelude?Md(p.prelude,f.prelude):p.prelude||null;for(let[g,y]of Object.entries(f.descriptors||{}))p.descriptors[g]=y?Md(p.descriptors[g],y):null;Object.keys(p.descriptors).length||(p.descriptors=null)}}break;case"types":case"properties":r[i]={...t[i]};for(let[a,f]of Object.entries(s))r[i][a]=Md(r[i][a],f);break;case"scope":r[i]={...t[i]};for(let[a,f]of Object.entries(s))r[i][a]={...r[i][a],...f};break;case"parseContext":r[i]={...t[i],...s};break;case"atrule":case"pseudo":r[i]={...t[i],..._w(s,["parse"])};break;case"node":r[i]={...t[i],..._w(s,["name","structure","parse","generate","walkContext"])};break}return r}jw.exports=dO});var Nd=Y((K5,$w)=>{"use strict";var hO=_s(),pO=Gv(),gO=wb(),mO=kb(),yO=Eb(),Ww=Ed(),Dd=Hw();function Uw(t){let e=pO.createParser(t),r=yO.createWalker(t),i=gO.createGenerator(t),{fromPlainObject:s,toPlainObject:a}=mO.createConvertor(r),f={lexer:null,createLexer:d=>new Ww.Lexer(d,f,f.lexer.structure),tokenize:hO.tokenize,parse:e,generate:i,walk:r,find:r.find,findLast:r.findLast,findAll:r.findAll,fromPlainObject:s,toPlainObject:a,fork(d){let p=Dd({},t);return Uw(typeof d=="function"?d(p,Object.assign):Dd(p,d))}};return f.lexer=new Ww.Lexer({generic:!0,units:t.units,types:t.types,atrules:t.atrules,properties:t.properties,node:t.node},f),f}var vO=t=>Uw(Dd({},t));$w.exports=vO});var Vw=Y((Y5,Gw)=>{Gw.exports={generic:!0,units:{angle:["deg","grad","rad","turn"],decibel:["db"],flex:["fr"],frequency:["hz","khz"],length:["cm","mm","q","in","pt","pc","px","em","rem","ex","rex","cap","rcap","ch","rch","ic","ric","lh","rlh","vw","svw","lvw","dvw","vh","svh","lvh","dvh","vi","svi","lvi","dvi","vb","svb","lvb","dvb","vmin","svmin","lvmin","dvmin","vmax","svmax","lvmax","dvmax","cqw","cqh","cqi","cqb","cqmin","cqmax"],resolution:["dpi","dpcm","dppx","x"],semitones:["st"],time:["s","ms"]},types:{"abs()":"abs( <calc-sum> )","absolute-size":"xx-small|x-small|small|medium|large|x-large|xx-large|xxx-large","acos()":"acos( <calc-sum> )","alpha-value":"<number>|<percentage>","angle-percentage":"<angle>|<percentage>","angular-color-hint":"<angle-percentage>","angular-color-stop":"<color>&&<color-stop-angle>?","angular-color-stop-list":"[<angular-color-stop> [, <angular-color-hint>]?]# , <angular-color-stop>","animateable-feature":"scroll-position|contents|<custom-ident>","asin()":"asin( <calc-sum> )","atan()":"atan( <calc-sum> )","atan2()":"atan2( <calc-sum> , <calc-sum> )",attachment:"scroll|fixed|local","attr()":"attr( <attr-name> <type-or-unit>? [, <attr-fallback>]? )","attr-matcher":"['~'|'|'|'^'|'$'|'*']? '='","attr-modifier":"i|s","attribute-selector":"'[' <wq-name> ']'|'[' <wq-name> <attr-matcher> [<string-token>|<ident-token>] <attr-modifier>? ']'","auto-repeat":"repeat( [auto-fill|auto-fit] , [<line-names>? <fixed-size>]+ <line-names>? )","auto-track-list":"[<line-names>? [<fixed-size>|<fixed-repeat>]]* <line-names>? <auto-repeat> [<line-names>? [<fixed-size>|<fixed-repeat>]]* <line-names>?",axis:"block|inline|vertical|horizontal","baseline-position":"[first|last]? baseline","basic-shape":"<inset()>|<circle()>|<ellipse()>|<polygon()>|<path()>","bg-image":"none|<image>","bg-layer":"<bg-image>||<bg-position> [/ <bg-size>]?||<repeat-style>||<attachment>||<box>||<box>","bg-position":"[[left|center|right|top|bottom|<length-percentage>]|[left|center|right|<length-percentage>] [top|center|bottom|<length-percentage>]|[center|[left|right] <length-percentage>?]&&[center|[top|bottom] <length-percentage>?]]","bg-size":"[<length-percentage>|auto]{1,2}|cover|contain","blur()":"blur( <length> )","blend-mode":"normal|multiply|screen|overlay|darken|lighten|color-dodge|color-burn|hard-light|soft-light|difference|exclusion|hue|saturation|color|luminosity",box:"border-box|padding-box|content-box","brightness()":"brightness( <number-percentage> )","calc()":"calc( <calc-sum> )","calc-sum":"<calc-product> [['+'|'-'] <calc-product>]*","calc-product":"<calc-value> ['*' <calc-value>|'/' <number>]*","calc-value":"<number>|<dimension>|<percentage>|<calc-constant>|( <calc-sum> )","calc-constant":"e|pi|infinity|-infinity|NaN","cf-final-image":"<image>|<color>","cf-mixing-image":"<percentage>?&&<image>","circle()":"circle( [<shape-radius>]? [at <position>]? )","clamp()":"clamp( <calc-sum>#{3} )","class-selector":"'.' <ident-token>","clip-source":"<url>",color:"<rgb()>|<rgba()>|<hsl()>|<hsla()>|<hwb()>|<lab()>|<lch()>|<hex-color>|<named-color>|currentcolor|<deprecated-system-color>","color-stop":"<color-stop-length>|<color-stop-angle>","color-stop-angle":"<angle-percentage>{1,2}","color-stop-length":"<length-percentage>{1,2}","color-stop-list":"[<linear-color-stop> [, <linear-color-hint>]?]# , <linear-color-stop>",combinator:"'>'|'+'|'~'|['||']","common-lig-values":"[common-ligatures|no-common-ligatures]","compat-auto":"searchfield|textarea|push-button|slider-horizontal|checkbox|radio|square-button|menulist|listbox|meter|progress-bar|button","composite-style":"clear|copy|source-over|source-in|source-out|source-atop|destination-over|destination-in|destination-out|destination-atop|xor","compositing-operator":"add|subtract|intersect|exclude","compound-selector":"[<type-selector>? <subclass-selector>* [<pseudo-element-selector> <pseudo-class-selector>*]*]!","compound-selector-list":"<compound-selector>#","complex-selector":"<compound-selector> [<combinator>? <compound-selector>]*","complex-selector-list":"<complex-selector>#","conic-gradient()":"conic-gradient( [from <angle>]? [at <position>]? , <angular-color-stop-list> )","contextual-alt-values":"[contextual|no-contextual]","content-distribution":"space-between|space-around|space-evenly|stretch","content-list":"[<string>|contents|<image>|<counter>|<quote>|<target>|<leader()>|<attr()>]+","content-position":"center|start|end|flex-start|flex-end","content-replacement":"<image>","contrast()":"contrast( [<number-percentage>] )","cos()":"cos( <calc-sum> )",counter:"<counter()>|<counters()>","counter()":"counter( <counter-name> , <counter-style>? )","counter-name":"<custom-ident>","counter-style":"<counter-style-name>|symbols( )","counter-style-name":"<custom-ident>","counters()":"counters( <counter-name> , <string> , <counter-style>? )","cross-fade()":"cross-fade( <cf-mixing-image> , <cf-final-image>? )","cubic-bezier-timing-function":"ease|ease-in|ease-out|ease-in-out|cubic-bezier( <number [0,1]> , <number> , <number [0,1]> , <number> )","deprecated-system-color":"ActiveBorder|ActiveCaption|AppWorkspace|Background|ButtonFace|ButtonHighlight|ButtonShadow|ButtonText|CaptionText|GrayText|Highlight|HighlightText|InactiveBorder|InactiveCaption|InactiveCaptionText|InfoBackground|InfoText|Menu|MenuText|Scrollbar|ThreeDDarkShadow|ThreeDFace|ThreeDHighlight|ThreeDLightShadow|ThreeDShadow|Window|WindowFrame|WindowText","discretionary-lig-values":"[discretionary-ligatures|no-discretionary-ligatures]","display-box":"contents|none","display-inside":"flow|flow-root|table|flex|grid|ruby","display-internal":"table-row-group|table-header-group|table-footer-group|table-row|table-cell|table-column-group|table-column|table-caption|ruby-base|ruby-text|ruby-base-container|ruby-text-container","display-legacy":"inline-block|inline-list-item|inline-table|inline-flex|inline-grid","display-listitem":"<display-outside>?&&[flow|flow-root]?&&list-item","display-outside":"block|inline|run-in","drop-shadow()":"drop-shadow( <length>{2,3} <color>? )","east-asian-variant-values":"[jis78|jis83|jis90|jis04|simplified|traditional]","east-asian-width-values":"[full-width|proportional-width]","element()":"element( <custom-ident> , [first|start|last|first-except]? )|element( <id-selector> )","ellipse()":"ellipse( [<shape-radius>{2}]? [at <position>]? )","ending-shape":"circle|ellipse","env()":"env( <custom-ident> , <declaration-value>? )","exp()":"exp( <calc-sum> )","explicit-track-list":"[<line-names>? <track-size>]+ <line-names>?","family-name":"<string>|<custom-ident>+","feature-tag-value":"<string> [<integer>|on|off]?","feature-type":"@stylistic|@historical-forms|@styleset|@character-variant|@swash|@ornaments|@annotation","feature-value-block":"<feature-type> '{' <feature-value-declaration-list> '}'","feature-value-block-list":"<feature-value-block>+","feature-value-declaration":"<custom-ident> : <integer>+ ;","feature-value-declaration-list":"<feature-value-declaration>","feature-value-name":"<custom-ident>","fill-rule":"nonzero|evenodd","filter-function":"<blur()>|<brightness()>|<contrast()>|<drop-shadow()>|<grayscale()>|<hue-rotate()>|<invert()>|<opacity()>|<saturate()>|<sepia()>","filter-function-list":"[<filter-function>|<url>]+","final-bg-layer":"<'background-color'>||<bg-image>||<bg-position> [/ <bg-size>]?||<repeat-style>||<attachment>||<box>||<box>","fixed-breadth":"<length-percentage>","fixed-repeat":"repeat( [<integer [1,\u221E]>] , [<line-names>? <fixed-size>]+ <line-names>? )","fixed-size":"<fixed-breadth>|minmax( <fixed-breadth> , <track-breadth> )|minmax( <inflexible-breadth> , <fixed-breadth> )","font-stretch-absolute":"normal|ultra-condensed|extra-condensed|condensed|semi-condensed|semi-expanded|expanded|extra-expanded|ultra-expanded|<percentage>","font-variant-css21":"[normal|small-caps]","font-weight-absolute":"normal|bold|<number [1,1000]>","frequency-percentage":"<frequency>|<percentage>","general-enclosed":"[<function-token> <any-value> )]|( <ident> <any-value> )","generic-family":"serif|sans-serif|cursive|fantasy|monospace|-apple-system","generic-name":"serif|sans-serif|cursive|fantasy|monospace","geometry-box":"<shape-box>|fill-box|stroke-box|view-box",gradient:"<linear-gradient()>|<repeating-linear-gradient()>|<radial-gradient()>|<repeating-radial-gradient()>|<conic-gradient()>|<repeating-conic-gradient()>|<-legacy-gradient>","grayscale()":"grayscale( <number-percentage> )","grid-line":"auto|<custom-ident>|[<integer>&&<custom-ident>?]|[span&&[<integer>||<custom-ident>]]","historical-lig-values":"[historical-ligatures|no-historical-ligatures]","hsl()":"hsl( <hue> <percentage> <percentage> [/ <alpha-value>]? )|hsl( <hue> , <percentage> , <percentage> , <alpha-value>? )","hsla()":"hsla( <hue> <percentage> <percentage> [/ <alpha-value>]? )|hsla( <hue> , <percentage> , <percentage> , <alpha-value>? )",hue:"<number>|<angle>","hue-rotate()":"hue-rotate( <angle> )","hwb()":"hwb( [<hue>|none] [<percentage>|none] [<percentage>|none] [/ [<alpha-value>|none]]? )","hypot()":"hypot( <calc-sum># )",image:"<url>|<image()>|<image-set()>|<element()>|<paint()>|<cross-fade()>|<gradient>","image()":"image( <image-tags>? [<image-src>? , <color>?]! )","image-set()":"image-set( <image-set-option># )","image-set-option":"[<image>|<string>] [<resolution>||type( <string> )]","image-src":"<url>|<string>","image-tags":"ltr|rtl","inflexible-breadth":"<length-percentage>|min-content|max-content|auto","inset()":"inset( <length-percentage>{1,4} [round <'border-radius'>]? )","invert()":"invert( <number-percentage> )","keyframes-name":"<custom-ident>|<string>","keyframe-block":"<keyframe-selector># { <declaration-list> }","keyframe-block-list":"<keyframe-block>+","keyframe-selector":"from|to|<percentage>","lab()":"lab( [<percentage>|<number>|none] [<percentage>|<number>|none] [<percentage>|<number>|none] [/ [<alpha-value>|none]]? )","layer()":"layer( <layer-name> )","layer-name":"<ident> ['.' <ident>]*","lch()":"lch( [<percentage>|<number>|none] [<percentage>|<number>|none] [<hue>|none] [/ [<alpha-value>|none]]? )","leader()":"leader( <leader-type> )","leader-type":"dotted|solid|space|<string>","length-percentage":"<length>|<percentage>","line-names":"'[' <custom-ident>* ']'","line-name-list":"[<line-names>|<name-repeat>]+","line-style":"none|hidden|dotted|dashed|solid|double|groove|ridge|inset|outset","line-width":"<length>|thin|medium|thick","linear-color-hint":"<length-percentage>","linear-color-stop":"<color> <color-stop-length>?","linear-gradient()":"linear-gradient( [<angle>|to <side-or-corner>]? , <color-stop-list> )","log()":"log( <calc-sum> , <calc-sum>? )","mask-layer":"<mask-reference>||<position> [/ <bg-size>]?||<repeat-style>||<geometry-box>||[<geometry-box>|no-clip]||<compositing-operator>||<masking-mode>","mask-position":"[<length-percentage>|left|center|right] [<length-percentage>|top|center|bottom]?","mask-reference":"none|<image>|<mask-source>","mask-source":"<url>","masking-mode":"alpha|luminance|match-source","matrix()":"matrix( <number>#{6} )","matrix3d()":"matrix3d( <number>#{16} )","max()":"max( <calc-sum># )","media-and":"<media-in-parens> [and <media-in-parens>]+","media-condition":"<media-not>|<media-and>|<media-or>|<media-in-parens>","media-condition-without-or":"<media-not>|<media-and>|<media-in-parens>","media-feature":"( [<mf-plain>|<mf-boolean>|<mf-range>] )","media-in-parens":"( <media-condition> )|<media-feature>|<general-enclosed>","media-not":"not <media-in-parens>","media-or":"<media-in-parens> [or <media-in-parens>]+","media-query":"<media-condition>|[not|only]? <media-type> [and <media-condition-without-or>]?","media-query-list":"<media-query>#","media-type":"<ident>","mf-boolean":"<mf-name>","mf-name":"<ident>","mf-plain":"<mf-name> : <mf-value>","mf-range":"<mf-name> ['<'|'>']? '='? <mf-value>|<mf-value> ['<'|'>']? '='? <mf-name>|<mf-value> '<' '='? <mf-name> '<' '='? <mf-value>|<mf-value> '>' '='? <mf-name> '>' '='? <mf-value>","mf-value":"<number>|<dimension>|<ident>|<ratio>","min()":"min( <calc-sum># )","minmax()":"minmax( [<length-percentage>|min-content|max-content|auto] , [<length-percentage>|<flex>|min-content|max-content|auto] )","mod()":"mod( <calc-sum> , <calc-sum> )","name-repeat":"repeat( [<integer [1,\u221E]>|auto-fill] , <line-names>+ )","named-color":"transparent|aliceblue|antiquewhite|aqua|aquamarine|azure|beige|bisque|black|blanchedalmond|blue|blueviolet|brown|burlywood|cadetblue|chartreuse|chocolate|coral|cornflowerblue|cornsilk|crimson|cyan|darkblue|darkcyan|darkgoldenrod|darkgray|darkgreen|darkgrey|darkkhaki|darkmagenta|darkolivegreen|darkorange|darkorchid|darkred|darksalmon|darkseagreen|darkslateblue|darkslategray|darkslategrey|darkturquoise|darkviolet|deeppink|deepskyblue|dimgray|dimgrey|dodgerblue|firebrick|floralwhite|forestgreen|fuchsia|gainsboro|ghostwhite|gold|goldenrod|gray|green|greenyellow|grey|honeydew|hotpink|indianred|indigo|ivory|khaki|lavender|lavenderblush|lawngreen|lemonchiffon|lightblue|lightcoral|lightcyan|lightgoldenrodyellow|lightgray|lightgreen|lightgrey|lightpink|lightsalmon|lightseagreen|lightskyblue|lightslategray|lightslategrey|lightsteelblue|lightyellow|lime|limegreen|linen|magenta|maroon|mediumaquamarine|mediumblue|mediumorchid|mediumpurple|mediumseagreen|mediumslateblue|mediumspringgreen|mediumturquoise|mediumvioletred|midnightblue|mintcream|mistyrose|moccasin|navajowhite|navy|oldlace|olive|olivedrab|orange|orangered|orchid|palegoldenrod|palegreen|paleturquoise|palevioletred|papayawhip|peachpuff|peru|pink|plum|powderblue|purple|rebeccapurple|red|rosybrown|royalblue|saddlebrown|salmon|sandybrown|seagreen|seashell|sienna|silver|skyblue|slateblue|slategray|slategrey|snow|springgreen|steelblue|tan|teal|thistle|tomato|turquoise|violet|wheat|white|whitesmoke|yellow|yellowgreen|<-non-standard-color>","namespace-prefix":"<ident>","ns-prefix":"[<ident-token>|'*']? '|'","number-percentage":"<number>|<percentage>","numeric-figure-values":"[lining-nums|oldstyle-nums]","numeric-fraction-values":"[diagonal-fractions|stacked-fractions]","numeric-spacing-values":"[proportional-nums|tabular-nums]",nth:"<an-plus-b>|even|odd","opacity()":"opacity( [<number-percentage>] )","overflow-position":"unsafe|safe","outline-radius":"<length>|<percentage>","page-body":"<declaration>? [; <page-body>]?|<page-margin-box> <page-body>","page-margin-box":"<page-margin-box-type> '{' <declaration-list> '}'","page-margin-box-type":"@top-left-corner|@top-left|@top-center|@top-right|@top-right-corner|@bottom-left-corner|@bottom-left|@bottom-center|@bottom-right|@bottom-right-corner|@left-top|@left-middle|@left-bottom|@right-top|@right-middle|@right-bottom","page-selector-list":"[<page-selector>#]?","page-selector":"<pseudo-page>+|<ident> <pseudo-page>*","page-size":"A5|A4|A3|B5|B4|JIS-B5|JIS-B4|letter|legal|ledger","path()":"path( [<fill-rule> ,]? <string> )","paint()":"paint( <ident> , <declaration-value>? )","perspective()":"perspective( [<length [0,\u221E]>|none] )","polygon()":"polygon( <fill-rule>? , [<length-percentage> <length-percentage>]# )",position:"[[left|center|right]||[top|center|bottom]|[left|center|right|<length-percentage>] [top|center|bottom|<length-percentage>]?|[[left|right] <length-percentage>]&&[[top|bottom] <length-percentage>]]","pow()":"pow( <calc-sum> , <calc-sum> )","pseudo-class-selector":"':' <ident-token>|':' <function-token> <any-value> ')'","pseudo-element-selector":"':' <pseudo-class-selector>","pseudo-page":": [left|right|first|blank]",quote:"open-quote|close-quote|no-open-quote|no-close-quote","radial-gradient()":"radial-gradient( [<ending-shape>||<size>]? [at <position>]? , <color-stop-list> )",ratio:"<number [0,\u221E]> [/ <number [0,\u221E]>]?","relative-selector":"<combinator>? <complex-selector>","relative-selector-list":"<relative-selector>#","relative-size":"larger|smaller","rem()":"rem( <calc-sum> , <calc-sum> )","repeat-style":"repeat-x|repeat-y|[repeat|space|round|no-repeat]{1,2}","repeating-conic-gradient()":"repeating-conic-gradient( [from <angle>]? [at <position>]? , <angular-color-stop-list> )","repeating-linear-gradient()":"repeating-linear-gradient( [<angle>|to <side-or-corner>]? , <color-stop-list> )","repeating-radial-gradient()":"repeating-radial-gradient( [<ending-shape>||<size>]? [at <position>]? , <color-stop-list> )","reversed-counter-name":"reversed( <counter-name> )","rgb()":"rgb( <percentage>{3} [/ <alpha-value>]? )|rgb( <number>{3} [/ <alpha-value>]? )|rgb( <percentage>#{3} , <alpha-value>? )|rgb( <number>#{3} , <alpha-value>? )","rgba()":"rgba( <percentage>{3} [/ <alpha-value>]? )|rgba( <number>{3} [/ <alpha-value>]? )|rgba( <percentage>#{3} , <alpha-value>? )|rgba( <number>#{3} , <alpha-value>? )","rotate()":"rotate( [<angle>|<zero>] )","rotate3d()":"rotate3d( <number> , <number> , <number> , [<angle>|<zero>] )","rotateX()":"rotateX( [<angle>|<zero>] )","rotateY()":"rotateY( [<angle>|<zero>] )","rotateZ()":"rotateZ( [<angle>|<zero>] )","round()":"round( <rounding-strategy>? , <calc-sum> , <calc-sum> )","rounding-strategy":"nearest|up|down|to-zero","saturate()":"saturate( <number-percentage> )","scale()":"scale( [<number>|<percentage>]#{1,2} )","scale3d()":"scale3d( [<number>|<percentage>]#{3} )","scaleX()":"scaleX( [<number>|<percentage>] )","scaleY()":"scaleY( [<number>|<percentage>] )","scaleZ()":"scaleZ( [<number>|<percentage>] )",scroller:"root|nearest","self-position":"center|start|end|self-start|self-end|flex-start|flex-end","shape-radius":"<length-percentage>|closest-side|farthest-side","sign()":"sign( <calc-sum> )","skew()":"skew( [<angle>|<zero>] , [<angle>|<zero>]? )","skewX()":"skewX( [<angle>|<zero>] )","skewY()":"skewY( [<angle>|<zero>] )","sepia()":"sepia( <number-percentage> )",shadow:"inset?&&<length>{2,4}&&<color>?","shadow-t":"[<length>{2,3}&&<color>?]",shape:"rect( <top> , <right> , <bottom> , <left> )|rect( <top> <right> <bottom> <left> )","shape-box":"<box>|margin-box","side-or-corner":"[left|right]||[top|bottom]","sin()":"sin( <calc-sum> )","single-animation":"<time>||<easing-function>||<time>||<single-animation-iteration-count>||<single-animation-direction>||<single-animation-fill-mode>||<single-animation-play-state>||[none|<keyframes-name>]","single-animation-direction":"normal|reverse|alternate|alternate-reverse","single-animation-fill-mode":"none|forwards|backwards|both","single-animation-iteration-count":"infinite|<number>","single-animation-play-state":"running|paused","single-animation-timeline":"auto|none|<timeline-name>|scroll( <axis>? <scroller>? )","single-transition":"[none|<single-transition-property>]||<time>||<easing-function>||<time>","single-transition-property":"all|<custom-ident>",size:"closest-side|farthest-side|closest-corner|farthest-corner|<length>|<length-percentage>{2}","sqrt()":"sqrt( <calc-sum> )","step-position":"jump-start|jump-end|jump-none|jump-both|start|end","step-timing-function":"step-start|step-end|steps( <integer> [, <step-position>]? )","subclass-selector":"<id-selector>|<class-selector>|<attribute-selector>|<pseudo-class-selector>","supports-condition":"not <supports-in-parens>|<supports-in-parens> [and <supports-in-parens>]*|<supports-in-parens> [or <supports-in-parens>]*","supports-in-parens":"( <supports-condition> )|<supports-feature>|<general-enclosed>","supports-feature":"<supports-decl>|<supports-selector-fn>","supports-decl":"( <declaration> )","supports-selector-fn":"selector( <complex-selector> )",symbol:"<string>|<image>|<custom-ident>","tan()":"tan( <calc-sum> )",target:"<target-counter()>|<target-counters()>|<target-text()>","target-counter()":"target-counter( [<string>|<url>] , <custom-ident> , <counter-style>? )","target-counters()":"target-counters( [<string>|<url>] , <custom-ident> , <string> , <counter-style>? )","target-text()":"target-text( [<string>|<url>] , [content|before|after|first-letter]? )","time-percentage":"<time>|<percentage>","timeline-name":"<custom-ident>|<string>","easing-function":"linear|<cubic-bezier-timing-function>|<step-timing-function>","track-breadth":"<length-percentage>|<flex>|min-content|max-content|auto","track-list":"[<line-names>? [<track-size>|<track-repeat>]]+ <line-names>?","track-repeat":"repeat( [<integer [1,\u221E]>] , [<line-names>? <track-size>]+ <line-names>? )","track-size":"<track-breadth>|minmax( <inflexible-breadth> , <track-breadth> )|fit-content( <length-percentage> )","transform-function":"<matrix()>|<translate()>|<translateX()>|<translateY()>|<scale()>|<scaleX()>|<scaleY()>|<rotate()>|<skew()>|<skewX()>|<skewY()>|<matrix3d()>|<translate3d()>|<translateZ()>|<scale3d()>|<scaleZ()>|<rotate3d()>|<rotateX()>|<rotateY()>|<rotateZ()>|<perspective()>","transform-list":"<transform-function>+","translate()":"translate( <length-percentage> , <length-percentage>? )","translate3d()":"translate3d( <length-percentage> , <length-percentage> , <length> )","translateX()":"translateX( <length-percentage> )","translateY()":"translateY( <length-percentage> )","translateZ()":"translateZ( <length> )","type-or-unit":"string|color|url|integer|number|length|angle|time|frequency|cap|ch|em|ex|ic|lh|rlh|rem|vb|vi|vw|vh|vmin|vmax|mm|Q|cm|in|pt|pc|px|deg|grad|rad|turn|ms|s|Hz|kHz|%","type-selector":"<wq-name>|<ns-prefix>? '*'","var()":"var( <custom-property-name> , <declaration-value>? )","viewport-length":"auto|<length-percentage>","visual-box":"content-box|padding-box|border-box","wq-name":"<ns-prefix>? <ident-token>","-legacy-gradient":"<-webkit-gradient()>|<-legacy-linear-gradient>|<-legacy-repeating-linear-gradient>|<-legacy-radial-gradient>|<-legacy-repeating-radial-gradient>","-legacy-linear-gradient":"-moz-linear-gradient( <-legacy-linear-gradient-arguments> )|-webkit-linear-gradient( <-legacy-linear-gradient-arguments> )|-o-linear-gradient( <-legacy-linear-gradient-arguments> )","-legacy-repeating-linear-gradient":"-moz-repeating-linear-gradient( <-legacy-linear-gradient-arguments> )|-webkit-repeating-linear-gradient( <-legacy-linear-gradient-arguments> )|-o-repeating-linear-gradient( <-legacy-linear-gradient-arguments> )","-legacy-linear-gradient-arguments":"[<angle>|<side-or-corner>]? , <color-stop-list>","-legacy-radial-gradient":"-moz-radial-gradient( <-legacy-radial-gradient-arguments> )|-webkit-radial-gradient( <-legacy-radial-gradient-arguments> )|-o-radial-gradient( <-legacy-radial-gradient-arguments> )","-legacy-repeating-radial-gradient":"-moz-repeating-radial-gradient( <-legacy-radial-gradient-arguments> )|-webkit-repeating-radial-gradient( <-legacy-radial-gradient-arguments> )|-o-repeating-radial-gradient( <-legacy-radial-gradient-arguments> )","-legacy-radial-gradient-arguments":"[<position> ,]? [[[<-legacy-radial-gradient-shape>||<-legacy-radial-gradient-size>]|[<length>|<percentage>]{2}] ,]? <color-stop-list>","-legacy-radial-gradient-size":"closest-side|closest-corner|farthest-side|farthest-corner|contain|cover","-legacy-radial-gradient-shape":"circle|ellipse","-non-standard-font":"-apple-system-body|-apple-system-headline|-apple-system-subheadline|-apple-system-caption1|-apple-system-caption2|-apple-system-footnote|-apple-system-short-body|-apple-system-short-headline|-apple-system-short-subheadline|-apple-system-short-caption1|-apple-system-short-footnote|-apple-system-tall-body","-non-standard-color":"-moz-ButtonDefault|-moz-ButtonHoverFace|-moz-ButtonHoverText|-moz-CellHighlight|-moz-CellHighlightText|-moz-Combobox|-moz-ComboboxText|-moz-Dialog|-moz-DialogText|-moz-dragtargetzone|-moz-EvenTreeRow|-moz-Field|-moz-FieldText|-moz-html-CellHighlight|-moz-html-CellHighlightText|-moz-mac-accentdarkestshadow|-moz-mac-accentdarkshadow|-moz-mac-accentface|-moz-mac-accentlightesthighlight|-moz-mac-accentlightshadow|-moz-mac-accentregularhighlight|-moz-mac-accentregularshadow|-moz-mac-chrome-active|-moz-mac-chrome-inactive|-moz-mac-focusring|-moz-mac-menuselect|-moz-mac-menushadow|-moz-mac-menutextselect|-moz-MenuHover|-moz-MenuHoverText|-moz-MenuBarText|-moz-MenuBarHoverText|-moz-nativehyperlinktext|-moz-OddTreeRow|-moz-win-communicationstext|-moz-win-mediatext|-moz-activehyperlinktext|-moz-default-background-color|-moz-default-color|-moz-hyperlinktext|-moz-visitedhyperlinktext|-webkit-activelink|-webkit-focus-ring-color|-webkit-link|-webkit-text","-non-standard-image-rendering":"optimize-contrast|-moz-crisp-edges|-o-crisp-edges|-webkit-optimize-contrast","-non-standard-overflow":"-moz-scrollbars-none|-moz-scrollbars-horizontal|-moz-scrollbars-vertical|-moz-hidden-unscrollable","-non-standard-width":"fill-available|min-intrinsic|intrinsic|-moz-available|-moz-fit-content|-moz-min-content|-moz-max-content|-webkit-min-content|-webkit-max-content","-webkit-gradient()":"-webkit-gradient( <-webkit-gradient-type> , <-webkit-gradient-point> [, <-webkit-gradient-point>|, <-webkit-gradient-radius> , <-webkit-gradient-point>] [, <-webkit-gradient-radius>]? [, <-webkit-gradient-color-stop>]* )","-webkit-gradient-color-stop":"from( <color> )|color-stop( [<number-zero-one>|<percentage>] , <color> )|to( <color> )","-webkit-gradient-point":"[left|center|right|<length-percentage>] [top|center|bottom|<length-percentage>]","-webkit-gradient-radius":"<length>|<percentage>","-webkit-gradient-type":"linear|radial","-webkit-mask-box-repeat":"repeat|stretch|round","-webkit-mask-clip-style":"border|border-box|padding|padding-box|content|content-box|text","-ms-filter-function-list":"<-ms-filter-function>+","-ms-filter-function":"<-ms-filter-function-progid>|<-ms-filter-function-legacy>","-ms-filter-function-progid":"'progid:' [<ident-token> '.']* [<ident-token>|<function-token> <any-value>? )]","-ms-filter-function-legacy":"<ident-token>|<function-token> <any-value>? )","-ms-filter":"<string>",age:"child|young|old","attr-name":"<wq-name>","attr-fallback":"<any-value>","bg-clip":"<box>|border|text",bottom:"<length>|auto","generic-voice":"[<age>? <gender> <integer>?]",gender:"male|female|neutral",left:"<length>|auto","mask-image":"<mask-reference>#",paint:"none|<color>|<url> [none|<color>]?|context-fill|context-stroke",right:"<length>|auto","scroll-timeline-axis":"block|inline|vertical|horizontal","scroll-timeline-name":"none|<custom-ident>","single-animation-composition":"replace|add|accumulate","svg-length":"<percentage>|<length>|<number>","svg-writing-mode":"lr-tb|rl-tb|tb-rl|lr|rl|tb",top:"<length>|auto",x:"<number>",y:"<number>",declaration:"<ident-token> : <declaration-value>? ['!' important]?","declaration-list":"[<declaration>? ';']* <declaration>?",url:"url( <string> <url-modifier>* )|<url-token>","url-modifier":"<ident>|<function-token> <any-value> )","number-zero-one":"<number [0,1]>","number-one-or-greater":"<number [1,\u221E]>","-non-standard-display":"-ms-inline-flexbox|-ms-grid|-ms-inline-grid|-webkit-flex|-webkit-inline-flex|-webkit-box|-webkit-inline-box|-moz-inline-stack|-moz-box|-moz-inline-box"},properties:{"--*":"<declaration-value>","-ms-accelerator":"false|true","-ms-block-progression":"tb|rl|bt|lr","-ms-content-zoom-chaining":"none|chained","-ms-content-zooming":"none|zoom","-ms-content-zoom-limit":"<'-ms-content-zoom-limit-min'> <'-ms-content-zoom-limit-max'>","-ms-content-zoom-limit-max":"<percentage>","-ms-content-zoom-limit-min":"<percentage>","-ms-content-zoom-snap":"<'-ms-content-zoom-snap-type'>||<'-ms-content-zoom-snap-points'>","-ms-content-zoom-snap-points":"snapInterval( <percentage> , <percentage> )|snapList( <percentage># )","-ms-content-zoom-snap-type":"none|proximity|mandatory","-ms-filter":"<string>","-ms-flow-from":"[none|<custom-ident>]#","-ms-flow-into":"[none|<custom-ident>]#","-ms-grid-columns":"none|<track-list>|<auto-track-list>","-ms-grid-rows":"none|<track-list>|<auto-track-list>","-ms-high-contrast-adjust":"auto|none","-ms-hyphenate-limit-chars":"auto|<integer>{1,3}","-ms-hyphenate-limit-lines":"no-limit|<integer>","-ms-hyphenate-limit-zone":"<percentage>|<length>","-ms-ime-align":"auto|after","-ms-overflow-style":"auto|none|scrollbar|-ms-autohiding-scrollbar","-ms-scrollbar-3dlight-color":"<color>","-ms-scrollbar-arrow-color":"<color>","-ms-scrollbar-base-color":"<color>","-ms-scrollbar-darkshadow-color":"<color>","-ms-scrollbar-face-color":"<color>","-ms-scrollbar-highlight-color":"<color>","-ms-scrollbar-shadow-color":"<color>","-ms-scrollbar-track-color":"<color>","-ms-scroll-chaining":"chained|none","-ms-scroll-limit":"<'-ms-scroll-limit-x-min'> <'-ms-scroll-limit-y-min'> <'-ms-scroll-limit-x-max'> <'-ms-scroll-limit-y-max'>","-ms-scroll-limit-x-max":"auto|<length>","-ms-scroll-limit-x-min":"<length>","-ms-scroll-limit-y-max":"auto|<length>","-ms-scroll-limit-y-min":"<length>","-ms-scroll-rails":"none|railed","-ms-scroll-snap-points-x":"snapInterval( <length-percentage> , <length-percentage> )|snapList( <length-percentage># )","-ms-scroll-snap-points-y":"snapInterval( <length-percentage> , <length-percentage> )|snapList( <length-percentage># )","-ms-scroll-snap-type":"none|proximity|mandatory","-ms-scroll-snap-x":"<'-ms-scroll-snap-type'> <'-ms-scroll-snap-points-x'>","-ms-scroll-snap-y":"<'-ms-scroll-snap-type'> <'-ms-scroll-snap-points-y'>","-ms-scroll-translation":"none|vertical-to-horizontal","-ms-text-autospace":"none|ideograph-alpha|ideograph-numeric|ideograph-parenthesis|ideograph-space","-ms-touch-select":"grippers|none","-ms-user-select":"none|element|text","-ms-wrap-flow":"auto|both|start|end|maximum|clear","-ms-wrap-margin":"<length>","-ms-wrap-through":"wrap|none","-moz-appearance":"none|button|button-arrow-down|button-arrow-next|button-arrow-previous|button-arrow-up|button-bevel|button-focus|caret|checkbox|checkbox-container|checkbox-label|checkmenuitem|dualbutton|groupbox|listbox|listitem|menuarrow|menubar|menucheckbox|menuimage|menuitem|menuitemtext|menulist|menulist-button|menulist-text|menulist-textfield|menupopup|menuradio|menuseparator|meterbar|meterchunk|progressbar|progressbar-vertical|progresschunk|progresschunk-vertical|radio|radio-container|radio-label|radiomenuitem|range|range-thumb|resizer|resizerpanel|scale-horizontal|scalethumbend|scalethumb-horizontal|scalethumbstart|scalethumbtick|scalethumb-vertical|scale-vertical|scrollbarbutton-down|scrollbarbutton-left|scrollbarbutton-right|scrollbarbutton-up|scrollbarthumb-horizontal|scrollbarthumb-vertical|scrollbartrack-horizontal|scrollbartrack-vertical|searchfield|separator|sheet|spinner|spinner-downbutton|spinner-textfield|spinner-upbutton|splitter|statusbar|statusbarpanel|tab|tabpanel|tabpanels|tab-scroll-arrow-back|tab-scroll-arrow-forward|textfield|textfield-multiline|toolbar|toolbarbutton|toolbarbutton-dropdown|toolbargripper|toolbox|tooltip|treeheader|treeheadercell|treeheadersortarrow|treeitem|treeline|treetwisty|treetwistyopen|treeview|-moz-mac-unified-toolbar|-moz-win-borderless-glass|-moz-win-browsertabbar-toolbox|-moz-win-communicationstext|-moz-win-communications-toolbox|-moz-win-exclude-glass|-moz-win-glass|-moz-win-mediatext|-moz-win-media-toolbox|-moz-window-button-box|-moz-window-button-box-maximized|-moz-window-button-close|-moz-window-button-maximize|-moz-window-button-minimize|-moz-window-button-restore|-moz-window-frame-bottom|-moz-window-frame-left|-moz-window-frame-right|-moz-window-titlebar|-moz-window-titlebar-maximized","-moz-binding":"<url>|none","-moz-border-bottom-colors":"<color>+|none","-moz-border-left-colors":"<color>+|none","-moz-border-right-colors":"<color>+|none","-moz-border-top-colors":"<color>+|none","-moz-context-properties":"none|[fill|fill-opacity|stroke|stroke-opacity]#","-moz-float-edge":"border-box|content-box|margin-box|padding-box","-moz-force-broken-image-icon":"0|1","-moz-image-region":"<shape>|auto","-moz-orient":"inline|block|horizontal|vertical","-moz-outline-radius":"<outline-radius>{1,4} [/ <outline-radius>{1,4}]?","-moz-outline-radius-bottomleft":"<outline-radius>","-moz-outline-radius-bottomright":"<outline-radius>","-moz-outline-radius-topleft":"<outline-radius>","-moz-outline-radius-topright":"<outline-radius>","-moz-stack-sizing":"ignore|stretch-to-fit","-moz-text-blink":"none|blink","-moz-user-focus":"ignore|normal|select-after|select-before|select-menu|select-same|select-all|none","-moz-user-input":"auto|none|enabled|disabled","-moz-user-modify":"read-only|read-write|write-only","-moz-window-dragging":"drag|no-drag","-moz-window-shadow":"default|menu|tooltip|sheet|none","-webkit-appearance":"none|button|button-bevel|caps-lock-indicator|caret|checkbox|default-button|inner-spin-button|listbox|listitem|media-controls-background|media-controls-fullscreen-background|media-current-time-display|media-enter-fullscreen-button|media-exit-fullscreen-button|media-fullscreen-button|media-mute-button|media-overlay-play-button|media-play-button|media-seek-back-button|media-seek-forward-button|media-slider|media-sliderthumb|media-time-remaining-display|media-toggle-closed-captions-button|media-volume-slider|media-volume-slider-container|media-volume-sliderthumb|menulist|menulist-button|menulist-text|menulist-textfield|meter|progress-bar|progress-bar-value|push-button|radio|scrollbarbutton-down|scrollbarbutton-left|scrollbarbutton-right|scrollbarbutton-up|scrollbargripper-horizontal|scrollbargripper-vertical|scrollbarthumb-horizontal|scrollbarthumb-vertical|scrollbartrack-horizontal|scrollbartrack-vertical|searchfield|searchfield-cancel-button|searchfield-decoration|searchfield-results-button|searchfield-results-decoration|slider-horizontal|slider-vertical|sliderthumb-horizontal|sliderthumb-vertical|square-button|textarea|textfield|-apple-pay-button","-webkit-border-before":"<'border-width'>||<'border-style'>||<color>","-webkit-border-before-color":"<color>","-webkit-border-before-style":"<'border-style'>","-webkit-border-before-width":"<'border-width'>","-webkit-box-reflect":"[above|below|right|left]? <length>? <image>?","-webkit-line-clamp":"none|<integer>","-webkit-mask":"[<mask-reference>||<position> [/ <bg-size>]?||<repeat-style>||[<box>|border|padding|content|text]||[<box>|border|padding|content]]#","-webkit-mask-attachment":"<attachment>#","-webkit-mask-clip":"[<box>|border|padding|content|text]#","-webkit-mask-composite":"<composite-style>#","-webkit-mask-image":"<mask-reference>#","-webkit-mask-origin":"[<box>|border|padding|content]#","-webkit-mask-position":"<position>#","-webkit-mask-position-x":"[<length-percentage>|left|center|right]#","-webkit-mask-position-y":"[<length-percentage>|top|center|bottom]#","-webkit-mask-repeat":"<repeat-style>#","-webkit-mask-repeat-x":"repeat|no-repeat|space|round","-webkit-mask-repeat-y":"repeat|no-repeat|space|round","-webkit-mask-size":"<bg-size>#","-webkit-overflow-scrolling":"auto|touch","-webkit-tap-highlight-color":"<color>","-webkit-text-fill-color":"<color>","-webkit-text-stroke":"<length>||<color>","-webkit-text-stroke-color":"<color>","-webkit-text-stroke-width":"<length>","-webkit-touch-callout":"default|none","-webkit-user-modify":"read-only|read-write|read-write-plaintext-only","accent-color":"auto|<color>","align-content":"normal|<baseline-position>|<content-distribution>|<overflow-position>? <content-position>","align-items":"normal|stretch|<baseline-position>|[<overflow-position>? <self-position>]","align-self":"auto|normal|stretch|<baseline-position>|<overflow-position>? <self-position>","align-tracks":"[normal|<baseline-position>|<content-distribution>|<overflow-position>? <content-position>]#",all:"initial|inherit|unset|revert|revert-layer",animation:"<single-animation>#","animation-composition":"<single-animation-composition>#","animation-delay":"<time>#","animation-direction":"<single-animation-direction>#","animation-duration":"<time>#","animation-fill-mode":"<single-animation-fill-mode>#","animation-iteration-count":"<single-animation-iteration-count>#","animation-name":"[none|<keyframes-name>]#","animation-play-state":"<single-animation-play-state>#","animation-timing-function":"<easing-function>#","animation-timeline":"<single-animation-timeline>#",appearance:"none|auto|textfield|menulist-button|<compat-auto>","aspect-ratio":"auto|<ratio>",azimuth:"<angle>|[[left-side|far-left|left|center-left|center|center-right|right|far-right|right-side]||behind]|leftwards|rightwards","backdrop-filter":"none|<filter-function-list>","backface-visibility":"visible|hidden",background:"[<bg-layer> ,]* <final-bg-layer>","background-attachment":"<attachment>#","background-blend-mode":"<blend-mode>#","background-clip":"<bg-clip>#","background-color":"<color>","background-image":"<bg-image>#","background-origin":"<box>#","background-position":"<bg-position>#","background-position-x":"[center|[[left|right|x-start|x-end]? <length-percentage>?]!]#","background-position-y":"[center|[[top|bottom|y-start|y-end]? <length-percentage>?]!]#","background-repeat":"<repeat-style>#","background-size":"<bg-size>#","block-overflow":"clip|ellipsis|<string>","block-size":"<'width'>",border:"<line-width>||<line-style>||<color>","border-block":"<'border-top-width'>||<'border-top-style'>||<color>","border-block-color":"<'border-top-color'>{1,2}","border-block-style":"<'border-top-style'>","border-block-width":"<'border-top-width'>","border-block-end":"<'border-top-width'>||<'border-top-style'>||<color>","border-block-end-color":"<'border-top-color'>","border-block-end-style":"<'border-top-style'>","border-block-end-width":"<'border-top-width'>","border-block-start":"<'border-top-width'>||<'border-top-style'>||<color>","border-block-start-color":"<'border-top-color'>","border-block-start-style":"<'border-top-style'>","border-block-start-width":"<'border-top-width'>","border-bottom":"<line-width>||<line-style>||<color>","border-bottom-color":"<'border-top-color'>","border-bottom-left-radius":"<length-percentage>{1,2}","border-bottom-right-radius":"<length-percentage>{1,2}","border-bottom-style":"<line-style>","border-bottom-width":"<line-width>","border-collapse":"collapse|separate","border-color":"<color>{1,4}","border-end-end-radius":"<length-percentage>{1,2}","border-end-start-radius":"<length-percentage>{1,2}","border-image":"<'border-image-source'>||<'border-image-slice'> [/ <'border-image-width'>|/ <'border-image-width'>? / <'border-image-outset'>]?||<'border-image-repeat'>","border-image-outset":"[<length>|<number>]{1,4}","border-image-repeat":"[stretch|repeat|round|space]{1,2}","border-image-slice":"<number-percentage>{1,4}&&fill?","border-image-source":"none|<image>","border-image-width":"[<length-percentage>|<number>|auto]{1,4}","border-inline":"<'border-top-width'>||<'border-top-style'>||<color>","border-inline-end":"<'border-top-width'>||<'border-top-style'>||<color>","border-inline-color":"<'border-top-color'>{1,2}","border-inline-style":"<'border-top-style'>","border-inline-width":"<'border-top-width'>","border-inline-end-color":"<'border-top-color'>","border-inline-end-style":"<'border-top-style'>","border-inline-end-width":"<'border-top-width'>","border-inline-start":"<'border-top-width'>||<'border-top-style'>||<color>","border-inline-start-color":"<'border-top-color'>","border-inline-start-style":"<'border-top-style'>","border-inline-start-width":"<'border-top-width'>","border-left":"<line-width>||<line-style>||<color>","border-left-color":"<color>","border-left-style":"<line-style>","border-left-width":"<line-width>","border-radius":"<length-percentage>{1,4} [/ <length-percentage>{1,4}]?","border-right":"<line-width>||<line-style>||<color>","border-right-color":"<color>","border-right-style":"<line-style>","border-right-width":"<line-width>","border-spacing":"<length> <length>?","border-start-end-radius":"<length-percentage>{1,2}","border-start-start-radius":"<length-percentage>{1,2}","border-style":"<line-style>{1,4}","border-top":"<line-width>||<line-style>||<color>","border-top-color":"<color>","border-top-left-radius":"<length-percentage>{1,2}","border-top-right-radius":"<length-percentage>{1,2}","border-top-style":"<line-style>","border-top-width":"<line-width>","border-width":"<line-width>{1,4}",bottom:"<length>|<percentage>|auto","box-align":"start|center|end|baseline|stretch","box-decoration-break":"slice|clone","box-direction":"normal|reverse|inherit","box-flex":"<number>","box-flex-group":"<integer>","box-lines":"single|multiple","box-ordinal-group":"<integer>","box-orient":"horizontal|vertical|inline-axis|block-axis|inherit","box-pack":"start|center|end|justify","box-shadow":"none|<shadow>#","box-sizing":"content-box|border-box","break-after":"auto|avoid|always|all|avoid-page|page|left|right|recto|verso|avoid-column|column|avoid-region|region","break-before":"auto|avoid|always|all|avoid-page|page|left|right|recto|verso|avoid-column|column|avoid-region|region","break-inside":"auto|avoid|avoid-page|avoid-column|avoid-region","caption-side":"top|bottom|block-start|block-end|inline-start|inline-end",caret:"<'caret-color'>||<'caret-shape'>","caret-color":"auto|<color>","caret-shape":"auto|bar|block|underscore",clear:"none|left|right|both|inline-start|inline-end",clip:"<shape>|auto","clip-path":"<clip-source>|[<basic-shape>||<geometry-box>]|none",color:"<color>","print-color-adjust":"economy|exact","color-scheme":"normal|[light|dark|<custom-ident>]+&&only?","column-count":"<integer>|auto","column-fill":"auto|balance|balance-all","column-gap":"normal|<length-percentage>","column-rule":"<'column-rule-width'>||<'column-rule-style'>||<'column-rule-color'>","column-rule-color":"<color>","column-rule-style":"<'border-style'>","column-rule-width":"<'border-width'>","column-span":"none|all","column-width":"<length>|auto",columns:"<'column-width'>||<'column-count'>",contain:"none|strict|content|[[size||inline-size]||layout||style||paint]","contain-intrinsic-size":"[none|<length>|auto <length>]{1,2}","contain-intrinsic-block-size":"none|<length>|auto <length>","contain-intrinsic-height":"none|<length>|auto <length>","contain-intrinsic-inline-size":"none|<length>|auto <length>","contain-intrinsic-width":"none|<length>|auto <length>",content:"normal|none|[<content-replacement>|<content-list>] [/ [<string>|<counter>]+]?","content-visibility":"visible|auto|hidden","counter-increment":"[<counter-name> <integer>?]+|none","counter-reset":"[<counter-name> <integer>?|<reversed-counter-name> <integer>?]+|none","counter-set":"[<counter-name> <integer>?]+|none",cursor:"[[<url> [<x> <y>]? ,]* [auto|default|none|context-menu|help|pointer|progress|wait|cell|crosshair|text|vertical-text|alias|copy|move|no-drop|not-allowed|e-resize|n-resize|ne-resize|nw-resize|s-resize|se-resize|sw-resize|w-resize|ew-resize|ns-resize|nesw-resize|nwse-resize|col-resize|row-resize|all-scroll|zoom-in|zoom-out|grab|grabbing|hand|-webkit-grab|-webkit-grabbing|-webkit-zoom-in|-webkit-zoom-out|-moz-grab|-moz-grabbing|-moz-zoom-in|-moz-zoom-out]]",direction:"ltr|rtl",display:"[<display-outside>||<display-inside>]|<display-listitem>|<display-internal>|<display-box>|<display-legacy>|<-non-standard-display>","empty-cells":"show|hide",filter:"none|<filter-function-list>|<-ms-filter-function-list>",flex:"none|[<'flex-grow'> <'flex-shrink'>?||<'flex-basis'>]","flex-basis":"content|<'width'>","flex-direction":"row|row-reverse|column|column-reverse","flex-flow":"<'flex-direction'>||<'flex-wrap'>","flex-grow":"<number>","flex-shrink":"<number>","flex-wrap":"nowrap|wrap|wrap-reverse",float:"left|right|none|inline-start|inline-end",font:"[[<'font-style'>||<font-variant-css21>||<'font-weight'>||<'font-stretch'>]? <'font-size'> [/ <'line-height'>]? <'font-family'>]|caption|icon|menu|message-box|small-caption|status-bar","font-family":"[<family-name>|<generic-family>]#","font-feature-settings":"normal|<feature-tag-value>#","font-kerning":"auto|normal|none","font-language-override":"normal|<string>","font-optical-sizing":"auto|none","font-variation-settings":"normal|[<string> <number>]#","font-size":"<absolute-size>|<relative-size>|<length-percentage>","font-size-adjust":"none|[ex-height|cap-height|ch-width|ic-width|ic-height]? [from-font|<number>]","font-smooth":"auto|never|always|<absolute-size>|<length>","font-stretch":"<font-stretch-absolute>","font-style":"normal|italic|oblique <angle>?","font-synthesis":"none|[weight||style||small-caps]","font-variant":"normal|none|[<common-lig-values>||<discretionary-lig-values>||<historical-lig-values>||<contextual-alt-values>||stylistic( <feature-value-name> )||historical-forms||styleset( <feature-value-name># )||character-variant( <feature-value-name># )||swash( <feature-value-name> )||ornaments( <feature-value-name> )||annotation( <feature-value-name> )||[small-caps|all-small-caps|petite-caps|all-petite-caps|unicase|titling-caps]||<numeric-figure-values>||<numeric-spacing-values>||<numeric-fraction-values>||ordinal||slashed-zero||<east-asian-variant-values>||<east-asian-width-values>||ruby]","font-variant-alternates":"normal|[stylistic( <feature-value-name> )||historical-forms||styleset( <feature-value-name># )||character-variant( <feature-value-name># )||swash( <feature-value-name> )||ornaments( <feature-value-name> )||annotation( <feature-value-name> )]","font-variant-caps":"normal|small-caps|all-small-caps|petite-caps|all-petite-caps|unicase|titling-caps","font-variant-east-asian":"normal|[<east-asian-variant-values>||<east-asian-width-values>||ruby]","font-variant-ligatures":"normal|none|[<common-lig-values>||<discretionary-lig-values>||<historical-lig-values>||<contextual-alt-values>]","font-variant-numeric":"normal|[<numeric-figure-values>||<numeric-spacing-values>||<numeric-fraction-values>||ordinal||slashed-zero]","font-variant-position":"normal|sub|super","font-weight":"<font-weight-absolute>|bolder|lighter","forced-color-adjust":"auto|none",gap:"<'row-gap'> <'column-gap'>?",grid:"<'grid-template'>|<'grid-template-rows'> / [auto-flow&&dense?] <'grid-auto-columns'>?|[auto-flow&&dense?] <'grid-auto-rows'>? / <'grid-template-columns'>","grid-area":"<grid-line> [/ <grid-line>]{0,3}","grid-auto-columns":"<track-size>+","grid-auto-flow":"[row|column]||dense","grid-auto-rows":"<track-size>+","grid-column":"<grid-line> [/ <grid-line>]?","grid-column-end":"<grid-line>","grid-column-gap":"<length-percentage>","grid-column-start":"<grid-line>","grid-gap":"<'grid-row-gap'> <'grid-column-gap'>?","grid-row":"<grid-line> [/ <grid-line>]?","grid-row-end":"<grid-line>","grid-row-gap":"<length-percentage>","grid-row-start":"<grid-line>","grid-template":"none|[<'grid-template-rows'> / <'grid-template-columns'>]|[<line-names>? <string> <track-size>? <line-names>?]+ [/ <explicit-track-list>]?","grid-template-areas":"none|<string>+","grid-template-columns":"none|<track-list>|<auto-track-list>|subgrid <line-name-list>?","grid-template-rows":"none|<track-list>|<auto-track-list>|subgrid <line-name-list>?","hanging-punctuation":"none|[first||[force-end|allow-end]||last]",height:"auto|<length>|<percentage>|min-content|max-content|fit-content|fit-content( <length-percentage> )","hyphenate-character":"auto|<string>",hyphens:"none|manual|auto","image-orientation":"from-image|<angle>|[<angle>? flip]","image-rendering":"auto|crisp-edges|pixelated|optimizeSpeed|optimizeQuality|<-non-standard-image-rendering>","image-resolution":"[from-image||<resolution>]&&snap?","ime-mode":"auto|normal|active|inactive|disabled","initial-letter":"normal|[<number> <integer>?]","initial-letter-align":"[auto|alphabetic|hanging|ideographic]","inline-size":"<'width'>","input-security":"auto|none",inset:"<'top'>{1,4}","inset-block":"<'top'>{1,2}","inset-block-end":"<'top'>","inset-block-start":"<'top'>","inset-inline":"<'top'>{1,2}","inset-inline-end":"<'top'>","inset-inline-start":"<'top'>",isolation:"auto|isolate","justify-content":"normal|<content-distribution>|<overflow-position>? [<content-position>|left|right]","justify-items":"normal|stretch|<baseline-position>|<overflow-position>? [<self-position>|left|right]|legacy|legacy&&[left|right|center]","justify-self":"auto|normal|stretch|<baseline-position>|<overflow-position>? [<self-position>|left|right]","justify-tracks":"[normal|<content-distribution>|<overflow-position>? [<content-position>|left|right]]#",left:"<length>|<percentage>|auto","letter-spacing":"normal|<length-percentage>","line-break":"auto|loose|normal|strict|anywhere","line-clamp":"none|<integer>","line-height":"normal|<number>|<length>|<percentage>","line-height-step":"<length>","list-style":"<'list-style-type'>||<'list-style-position'>||<'list-style-image'>","list-style-image":"<image>|none","list-style-position":"inside|outside","list-style-type":"<counter-style>|<string>|none",margin:"[<length>|<percentage>|auto]{1,4}","margin-block":"<'margin-left'>{1,2}","margin-block-end":"<'margin-left'>","margin-block-start":"<'margin-left'>","margin-bottom":"<length>|<percentage>|auto","margin-inline":"<'margin-left'>{1,2}","margin-inline-end":"<'margin-left'>","margin-inline-start":"<'margin-left'>","margin-left":"<length>|<percentage>|auto","margin-right":"<length>|<percentage>|auto","margin-top":"<length>|<percentage>|auto","margin-trim":"none|in-flow|all",mask:"<mask-layer>#","mask-border":"<'mask-border-source'>||<'mask-border-slice'> [/ <'mask-border-width'>? [/ <'mask-border-outset'>]?]?||<'mask-border-repeat'>||<'mask-border-mode'>","mask-border-mode":"luminance|alpha","mask-border-outset":"[<length>|<number>]{1,4}","mask-border-repeat":"[stretch|repeat|round|space]{1,2}","mask-border-slice":"<number-percentage>{1,4} fill?","mask-border-source":"none|<image>","mask-border-width":"[<length-percentage>|<number>|auto]{1,4}","mask-clip":"[<geometry-box>|no-clip]#","mask-composite":"<compositing-operator>#","mask-image":"<mask-reference>#","mask-mode":"<masking-mode>#","mask-origin":"<geometry-box>#","mask-position":"<position>#","mask-repeat":"<repeat-style>#","mask-size":"<bg-size>#","mask-type":"luminance|alpha","masonry-auto-flow":"[pack|next]||[definite-first|ordered]","math-depth":"auto-add|add( <integer> )|<integer>","math-shift":"normal|compact","math-style":"normal|compact","max-block-size":"<'max-width'>","max-height":"none|<length-percentage>|min-content|max-content|fit-content|fit-content( <length-percentage> )","max-inline-size":"<'max-width'>","max-lines":"none|<integer>","max-width":"none|<length-percentage>|min-content|max-content|fit-content|fit-content( <length-percentage> )|<-non-standard-width>","min-block-size":"<'min-width'>","min-height":"auto|<length>|<percentage>|min-content|max-content|fit-content|fit-content( <length-percentage> )","min-inline-size":"<'min-width'>","min-width":"auto|<length>|<percentage>|min-content|max-content|fit-content|fit-content( <length-percentage> )|<-non-standard-width>","mix-blend-mode":"<blend-mode>|plus-lighter","object-fit":"fill|contain|cover|none|scale-down","object-position":"<position>",offset:"[<'offset-position'>? [<'offset-path'> [<'offset-distance'>||<'offset-rotate'>]?]?]! [/ <'offset-anchor'>]?","offset-anchor":"auto|<position>","offset-distance":"<length-percentage>","offset-path":"none|ray( [<angle>&&<size>&&contain?] )|<path()>|<url>|[<basic-shape>||<geometry-box>]","offset-position":"auto|<position>","offset-rotate":"[auto|reverse]||<angle>",opacity:"<alpha-value>",order:"<integer>",orphans:"<integer>",outline:"[<'outline-color'>||<'outline-style'>||<'outline-width'>]","outline-color":"<color>|invert","outline-offset":"<length>","outline-style":"auto|<'border-style'>","outline-width":"<line-width>",overflow:"[visible|hidden|clip|scroll|auto]{1,2}|<-non-standard-overflow>","overflow-anchor":"auto|none","overflow-block":"visible|hidden|clip|scroll|auto","overflow-clip-box":"padding-box|content-box","overflow-clip-margin":"<visual-box>||<length [0,\u221E]>","overflow-inline":"visible|hidden|clip|scroll|auto","overflow-wrap":"normal|break-word|anywhere","overflow-x":"visible|hidden|clip|scroll|auto","overflow-y":"visible|hidden|clip|scroll|auto","overscroll-behavior":"[contain|none|auto]{1,2}","overscroll-behavior-block":"contain|none|auto","overscroll-behavior-inline":"contain|none|auto","overscroll-behavior-x":"contain|none|auto","overscroll-behavior-y":"contain|none|auto",padding:"[<length>|<percentage>]{1,4}","padding-block":"<'padding-left'>{1,2}","padding-block-end":"<'padding-left'>","padding-block-start":"<'padding-left'>","padding-bottom":"<length>|<percentage>","padding-inline":"<'padding-left'>{1,2}","padding-inline-end":"<'padding-left'>","padding-inline-start":"<'padding-left'>","padding-left":"<length>|<percentage>","padding-right":"<length>|<percentage>","padding-top":"<length>|<percentage>","page-break-after":"auto|always|avoid|left|right|recto|verso","page-break-before":"auto|always|avoid|left|right|recto|verso","page-break-inside":"auto|avoid","paint-order":"normal|[fill||stroke||markers]",perspective:"none|<length>","perspective-origin":"<position>","place-content":"<'align-content'> <'justify-content'>?","place-items":"<'align-items'> <'justify-items'>?","place-self":"<'align-self'> <'justify-self'>?","pointer-events":"auto|none|visiblePainted|visibleFill|visibleStroke|visible|painted|fill|stroke|all|inherit",position:"static|relative|absolute|sticky|fixed|-webkit-sticky",quotes:"none|auto|[<string> <string>]+",resize:"none|both|horizontal|vertical|block|inline",right:"<length>|<percentage>|auto",rotate:"none|<angle>|[x|y|z|<number>{3}]&&<angle>","row-gap":"normal|<length-percentage>","ruby-align":"start|center|space-between|space-around","ruby-merge":"separate|collapse|auto","ruby-position":"[alternate||[over|under]]|inter-character",scale:"none|<number>{1,3}","scrollbar-color":"auto|<color>{2}","scrollbar-gutter":"auto|stable&&both-edges?","scrollbar-width":"auto|thin|none","scroll-behavior":"auto|smooth","scroll-margin":"<length>{1,4}","scroll-margin-block":"<length>{1,2}","scroll-margin-block-start":"<length>","scroll-margin-block-end":"<length>","scroll-margin-bottom":"<length>","scroll-margin-inline":"<length>{1,2}","scroll-margin-inline-start":"<length>","scroll-margin-inline-end":"<length>","scroll-margin-left":"<length>","scroll-margin-right":"<length>","scroll-margin-top":"<length>","scroll-padding":"[auto|<length-percentage>]{1,4}","scroll-padding-block":"[auto|<length-percentage>]{1,2}","scroll-padding-block-start":"auto|<length-percentage>","scroll-padding-block-end":"auto|<length-percentage>","scroll-padding-bottom":"auto|<length-percentage>","scroll-padding-inline":"[auto|<length-percentage>]{1,2}","scroll-padding-inline-start":"auto|<length-percentage>","scroll-padding-inline-end":"auto|<length-percentage>","scroll-padding-left":"auto|<length-percentage>","scroll-padding-right":"auto|<length-percentage>","scroll-padding-top":"auto|<length-percentage>","scroll-snap-align":"[none|start|end|center]{1,2}","scroll-snap-coordinate":"none|<position>#","scroll-snap-destination":"<position>","scroll-snap-points-x":"none|repeat( <length-percentage> )","scroll-snap-points-y":"none|repeat( <length-percentage> )","scroll-snap-stop":"normal|always","scroll-snap-type":"none|[x|y|block|inline|both] [mandatory|proximity]?","scroll-snap-type-x":"none|mandatory|proximity","scroll-snap-type-y":"none|mandatory|proximity","scroll-timeline":"<scroll-timeline-name>||<scroll-timeline-axis>","scroll-timeline-axis":"block|inline|vertical|horizontal","scroll-timeline-name":"none|<custom-ident>","shape-image-threshold":"<alpha-value>","shape-margin":"<length-percentage>","shape-outside":"none|[<shape-box>||<basic-shape>]|<image>","tab-size":"<integer>|<length>","table-layout":"auto|fixed","text-align":"start|end|left|right|center|justify|match-parent","text-align-last":"auto|start|end|left|right|center|justify","text-combine-upright":"none|all|[digits <integer>?]","text-decoration":"<'text-decoration-line'>||<'text-decoration-style'>||<'text-decoration-color'>||<'text-decoration-thickness'>","text-decoration-color":"<color>","text-decoration-line":"none|[underline||overline||line-through||blink]|spelling-error|grammar-error","text-decoration-skip":"none|[objects||[spaces|[leading-spaces||trailing-spaces]]||edges||box-decoration]","text-decoration-skip-ink":"auto|all|none","text-decoration-style":"solid|double|dotted|dashed|wavy","text-decoration-thickness":"auto|from-font|<length>|<percentage>","text-emphasis":"<'text-emphasis-style'>||<'text-emphasis-color'>","text-emphasis-color":"<color>","text-emphasis-position":"[over|under]&&[right|left]","text-emphasis-style":"none|[[filled|open]||[dot|circle|double-circle|triangle|sesame]]|<string>","text-indent":"<length-percentage>&&hanging?&&each-line?","text-justify":"auto|inter-character|inter-word|none","text-orientation":"mixed|upright|sideways","text-overflow":"[clip|ellipsis|<string>]{1,2}","text-rendering":"auto|optimizeSpeed|optimizeLegibility|geometricPrecision","text-shadow":"none|<shadow-t>#","text-size-adjust":"none|auto|<percentage>","text-transform":"none|capitalize|uppercase|lowercase|full-width|full-size-kana","text-underline-offset":"auto|<length>|<percentage>","text-underline-position":"auto|from-font|[under||[left|right]]",top:"<length>|<percentage>|auto","touch-action":"auto|none|[[pan-x|pan-left|pan-right]||[pan-y|pan-up|pan-down]||pinch-zoom]|manipulation",transform:"none|<transform-list>","transform-box":"content-box|border-box|fill-box|stroke-box|view-box","transform-origin":"[<length-percentage>|left|center|right|top|bottom]|[[<length-percentage>|left|center|right]&&[<length-percentage>|top|center|bottom]] <length>?","transform-style":"flat|preserve-3d",transition:"<single-transition>#","transition-delay":"<time>#","transition-duration":"<time>#","transition-property":"none|<single-transition-property>#","transition-timing-function":"<easing-function>#",translate:"none|<length-percentage> [<length-percentage> <length>?]?","unicode-bidi":"normal|embed|isolate|bidi-override|isolate-override|plaintext|-moz-isolate|-moz-isolate-override|-moz-plaintext|-webkit-isolate|-webkit-isolate-override|-webkit-plaintext","user-select":"auto|text|none|contain|all","vertical-align":"baseline|sub|super|text-top|text-bottom|middle|top|bottom|<percentage>|<length>",visibility:"visible|hidden|collapse","white-space":"normal|pre|nowrap|pre-wrap|pre-line|break-spaces",widows:"<integer>",width:"auto|<length>|<percentage>|min-content|max-content|fit-content|fit-content( <length-percentage> )|fill|stretch|intrinsic|-moz-max-content|-webkit-max-content|-moz-fit-content|-webkit-fit-content","will-change":"auto|<animateable-feature>#","word-break":"normal|break-all|keep-all|break-word","word-spacing":"normal|<length>","word-wrap":"normal|break-word","writing-mode":"horizontal-tb|vertical-rl|vertical-lr|sideways-rl|sideways-lr|<svg-writing-mode>","z-index":"auto|<integer>",zoom:"normal|reset|<number>|<percentage>","-moz-background-clip":"padding|border","-moz-border-radius-bottomleft":"<'border-bottom-left-radius'>","-moz-border-radius-bottomright":"<'border-bottom-right-radius'>","-moz-border-radius-topleft":"<'border-top-left-radius'>","-moz-border-radius-topright":"<'border-bottom-right-radius'>","-moz-control-character-visibility":"visible|hidden","-moz-osx-font-smoothing":"auto|grayscale","-moz-user-select":"none|text|all|-moz-none","-ms-flex-align":"start|end|center|baseline|stretch","-ms-flex-item-align":"auto|start|end|center|baseline|stretch","-ms-flex-line-pack":"start|end|center|justify|distribute|stretch","-ms-flex-negative":"<'flex-shrink'>","-ms-flex-pack":"start|end|center|justify|distribute","-ms-flex-order":"<integer>","-ms-flex-positive":"<'flex-grow'>","-ms-flex-preferred-size":"<'flex-basis'>","-ms-interpolation-mode":"nearest-neighbor|bicubic","-ms-grid-column-align":"start|end|center|stretch","-ms-grid-row-align":"start|end|center|stretch","-ms-hyphenate-limit-last":"none|always|column|page|spread","-webkit-background-clip":"[<box>|border|padding|content|text]#","-webkit-column-break-after":"always|auto|avoid","-webkit-column-break-before":"always|auto|avoid","-webkit-column-break-inside":"always|auto|avoid","-webkit-font-smoothing":"auto|none|antialiased|subpixel-antialiased","-webkit-mask-box-image":"[<url>|<gradient>|none] [<length-percentage>{4} <-webkit-mask-box-repeat>{2}]?","-webkit-print-color-adjust":"economy|exact","-webkit-text-security":"none|circle|disc|square","-webkit-user-drag":"none|element|auto","-webkit-user-select":"auto|none|text|all","alignment-baseline":"auto|baseline|before-edge|text-before-edge|middle|central|after-edge|text-after-edge|ideographic|alphabetic|hanging|mathematical","baseline-shift":"baseline|sub|super|<svg-length>",behavior:"<url>+","clip-rule":"nonzero|evenodd",cue:"<'cue-before'> <'cue-after'>?","cue-after":"<url> <decibel>?|none","cue-before":"<url> <decibel>?|none","dominant-baseline":"auto|use-script|no-change|reset-size|ideographic|alphabetic|hanging|mathematical|central|middle|text-after-edge|text-before-edge",fill:"<paint>","fill-opacity":"<number-zero-one>","fill-rule":"nonzero|evenodd","glyph-orientation-horizontal":"<angle>","glyph-orientation-vertical":"<angle>",kerning:"auto|<svg-length>",marker:"none|<url>","marker-end":"none|<url>","marker-mid":"none|<url>","marker-start":"none|<url>",pause:"<'pause-before'> <'pause-after'>?","pause-after":"<time>|none|x-weak|weak|medium|strong|x-strong","pause-before":"<time>|none|x-weak|weak|medium|strong|x-strong",rest:"<'rest-before'> <'rest-after'>?","rest-after":"<time>|none|x-weak|weak|medium|strong|x-strong","rest-before":"<time>|none|x-weak|weak|medium|strong|x-strong","shape-rendering":"auto|optimizeSpeed|crispEdges|geometricPrecision",src:"[<url> [format( <string># )]?|local( <family-name> )]#",speak:"auto|none|normal","speak-as":"normal|spell-out||digits||[literal-punctuation|no-punctuation]",stroke:"<paint>","stroke-dasharray":"none|[<svg-length>+]#","stroke-dashoffset":"<svg-length>","stroke-linecap":"butt|round|square","stroke-linejoin":"miter|round|bevel","stroke-miterlimit":"<number-one-or-greater>","stroke-opacity":"<number-zero-one>","stroke-width":"<svg-length>","text-anchor":"start|middle|end","unicode-range":"<urange>#","voice-balance":"<number>|left|center|right|leftwards|rightwards","voice-duration":"auto|<time>","voice-family":"[[<family-name>|<generic-voice>] ,]* [<family-name>|<generic-voice>]|preserve","voice-pitch":"<frequency>&&absolute|[[x-low|low|medium|high|x-high]||[<frequency>|<semitones>|<percentage>]]","voice-range":"<frequency>&&absolute|[[x-low|low|medium|high|x-high]||[<frequency>|<semitones>|<percentage>]]","voice-rate":"[normal|x-slow|slow|medium|fast|x-fast]||<percentage>","voice-stress":"normal|strong|moderate|none|reduced","voice-volume":"silent|[[x-soft|soft|medium|loud|x-loud]||<decibel>]"},atrules:{charset:{prelude:"<string>",descriptors:null},"counter-style":{prelude:"<counter-style-name>",descriptors:{"additive-symbols":"[<integer>&&<symbol>]#",fallback:"<counter-style-name>",negative:"<symbol> <symbol>?",pad:"<integer>&&<symbol>",prefix:"<symbol>",range:"[[<integer>|infinite]{2}]#|auto","speak-as":"auto|bullets|numbers|words|spell-out|<counter-style-name>",suffix:"<symbol>",symbols:"<symbol>+",system:"cyclic|numeric|alphabetic|symbolic|additive|[fixed <integer>?]|[extends <counter-style-name>]"}},document:{prelude:"[<url>|url-prefix( <string> )|domain( <string> )|media-document( <string> )|regexp( <string> )]#",descriptors:null},"font-face":{prelude:null,descriptors:{"ascent-override":"normal|<percentage>","descent-override":"normal|<percentage>","font-display":"[auto|block|swap|fallback|optional]","font-family":"<family-name>","font-feature-settings":"normal|<feature-tag-value>#","font-variation-settings":"normal|[<string> <number>]#","font-stretch":"<font-stretch-absolute>{1,2}","font-style":"normal|italic|oblique <angle>{0,2}","font-weight":"<font-weight-absolute>{1,2}","font-variant":"normal|none|[<common-lig-values>||<discretionary-lig-values>||<historical-lig-values>||<contextual-alt-values>||stylistic( <feature-value-name> )||historical-forms||styleset( <feature-value-name># )||character-variant( <feature-value-name># )||swash( <feature-value-name> )||ornaments( <feature-value-name> )||annotation( <feature-value-name> )||[small-caps|all-small-caps|petite-caps|all-petite-caps|unicase|titling-caps]||<numeric-figure-values>||<numeric-spacing-values>||<numeric-fraction-values>||ordinal||slashed-zero||<east-asian-variant-values>||<east-asian-width-values>||ruby]","line-gap-override":"normal|<percentage>","size-adjust":"<percentage>",src:"[<url> [format( <string># )]?|local( <family-name> )]#","unicode-range":"<urange>#"}},"font-feature-values":{prelude:"<family-name>#",descriptors:null},import:{prelude:"[<string>|<url>] [layer|layer( <layer-name> )]? [supports( [<supports-condition>|<declaration>] )]? <media-query-list>?",descriptors:null},keyframes:{prelude:"<keyframes-name>",descriptors:null},layer:{prelude:"[<layer-name>#|<layer-name>?]",descriptors:null},media:{prelude:"<media-query-list>",descriptors:null},namespace:{prelude:"<namespace-prefix>? [<string>|<url>]",descriptors:null},page:{prelude:"<page-selector-list>",descriptors:{bleed:"auto|<length>",marks:"none|[crop||cross]",size:"<length>{1,2}|auto|[<page-size>||[portrait|landscape]]"}},property:{prelude:"<custom-property-name>",descriptors:{syntax:"<string>",inherits:"true|false","initial-value":"<string>"}},"scroll-timeline":{prelude:"<timeline-name>",descriptors:null},supports:{prelude:"<supports-condition>",descriptors:null},viewport:{prelude:null,descriptors:{height:"<viewport-length>{1,2}","max-height":"<viewport-length>","max-width":"<viewport-length>","max-zoom":"auto|<number>|<percentage>","min-height":"<viewport-length>","min-width":"<viewport-length>","min-zoom":"auto|<number>|<percentage>",orientation:"auto|portrait|landscape","user-zoom":"zoom|fixed","viewport-fit":"auto|contain|cover",width:"<viewport-length>{1,2}",zoom:"auto|<number>|<percentage>"}},nest:{prelude:"<complex-selector-list>",descriptors:null}}}});var Pd=Y(ra=>{"use strict";var Bt=Me(),Kw=yn(),ar=43,vn=45,vc=110,ki=!0,bO=!1;function bc(t,e){let r=this.tokenStart+t,i=this.charCodeAt(r);for((i===ar||i===vn)&&(e&&this.error("Number sign is not allowed"),r++);r<this.tokenEnd;r++)Kw.isDigit(this.charCodeAt(r))||this.error("Integer is expected",r)}function Co(t){return bc.call(this,0,t)}function Xr(t,e){if(!this.cmpChar(this.tokenStart+t,e)){let r="";switch(e){case vc:r="N is expected";break;case vn:r="HyphenMinus is expected";break}this.error(r,this.tokenStart+t)}}function Od(){let t=0,e=0,r=this.tokenType;for(;r===Bt.WhiteSpace||r===Bt.Comment;)r=this.lookupType(++t);if(r!==Bt.Number)if(this.isDelim(ar,t)||this.isDelim(vn,t)){e=this.isDelim(ar,t)?ar:vn;do r=this.lookupType(++t);while(r===Bt.WhiteSpace||r===Bt.Comment);r!==Bt.Number&&(this.skip(t),Co.call(this,ki))}else return null;return t>0&&this.skip(t),e===0&&(r=this.charCodeAt(this.tokenStart),r!==ar&&r!==vn&&this.error("Number sign is expected")),Co.call(this,e!==0),e===vn?"-"+this.consume(Bt.Number):this.consume(Bt.Number)}var wO="AnPlusB",xO={a:[String,null],b:[String,null]};function kO(){let t=this.tokenStart,e=null,r=null;if(this.tokenType===Bt.Number)Co.call(this,bO),r=this.consume(Bt.Number);else if(this.tokenType===Bt.Ident&&this.cmpChar(this.tokenStart,vn))switch(e="-1",Xr.call(this,1,vc),this.tokenEnd-this.tokenStart){case 2:this.next(),r=Od.call(this);break;case 3:Xr.call(this,2,vn),this.next(),this.skipSC(),Co.call(this,ki),r="-"+this.consume(Bt.Number);break;default:Xr.call(this,2,vn),bc.call(this,3,ki),this.next(),r=this.substrToCursor(t+2)}else if(this.tokenType===Bt.Ident||this.isDelim(ar)&&this.lookupType(1)===Bt.Ident){let i=0;switch(e="1",this.isDelim(ar)&&(i=1,this.next()),Xr.call(this,0,vc),this.tokenEnd-this.tokenStart){case 1:this.next(),r=Od.call(this);break;case 2:Xr.call(this,1,vn),this.next(),this.skipSC(),Co.call(this,ki),r="-"+this.consume(Bt.Number);break;default:Xr.call(this,1,vn),bc.call(this,2,ki),this.next(),r=this.substrToCursor(t+i+1)}}else if(this.tokenType===Bt.Dimension){let i=this.charCodeAt(this.tokenStart),s=i===ar||i===vn,a=this.tokenStart+s;for(;a<this.tokenEnd&&Kw.isDigit(this.charCodeAt(a));a++);a===this.tokenStart+s&&this.error("Integer is expected",this.tokenStart+s),Xr.call(this,a-this.tokenStart,vc),e=this.substring(t,a),a+1===this.tokenEnd?(this.next(),r=Od.call(this)):(Xr.call(this,a-this.tokenStart+1,vn),a+2===this.tokenEnd?(this.next(),this.skipSC(),Co.call(this,ki),r="-"+this.consume(Bt.Number)):(bc.call(this,a-this.tokenStart+2,ki),this.next(),r=this.substrToCursor(a+1)))}else this.error();return e!==null&&e.charCodeAt(0)===ar&&(e=e.substr(1)),r!==null&&r.charCodeAt(0)===ar&&(r=r.substr(1)),{type:"AnPlusB",loc:this.getLocation(t,this.tokenStart),a:e,b:r}}function CO(t){if(t.a){let e=t.a==="+1"&&"n"||t.a==="1"&&"n"||t.a==="-1"&&"-n"||t.a+"n";if(t.b){let r=t.b[0]==="-"||t.b[0]==="+"?t.b:"+"+t.b;this.tokenize(e+r)}else this.tokenize(e)}else this.tokenize(t.b)}ra.generate=CO;ra.name=wO;ra.parse=kO;ra.structure=xO});var Id=Y(So=>{"use strict";var lr=Me();function Yw(t){return this.Raw(t,this.consumeUntilLeftCurlyBracketOrSemicolon,!0)}function SO(){for(let t=1,e;e=this.lookupType(t);t++){if(e===lr.RightCurlyBracket)return!0;if(e===lr.LeftCurlyBracket||e===lr.AtKeyword)return!1}return!1}var AO="Atrule",TO="atrule",LO={name:String,prelude:["AtrulePrelude","Raw",null],block:["Block",null]};function EO(t=!1){let e=this.tokenStart,r,i,s=null,a=null;switch(this.eat(lr.AtKeyword),r=this.substrToCursor(e+1),i=r.toLowerCase(),this.skipSC(),this.eof===!1&&this.tokenType!==lr.LeftCurlyBracket&&this.tokenType!==lr.Semicolon&&(this.parseAtrulePrelude?s=this.parseWithFallback(this.AtrulePrelude.bind(this,r,t),Yw):s=Yw.call(this,this.tokenIndex),this.skipSC()),this.tokenType){case lr.Semicolon:this.next();break;case lr.LeftCurlyBracket:hasOwnProperty.call(this.atrule,i)&&typeof this.atrule[i].block=="function"?a=this.atrule[i].block.call(this,t):a=this.Block(SO.call(this));break}return{type:"Atrule",loc:this.getLocation(e,this.tokenStart),name:r,prelude:s,block:a}}function MO(t){this.token(lr.AtKeyword,"@"+t.name),t.prelude!==null&&this.node(t.prelude),t.block?this.node(t.block):this.token(lr.Semicolon,";")}So.generate=MO;So.name=AO;So.parse=EO;So.structure=LO;So.walkContext=TO});var Bd=Y(Ao=>{"use strict";var Qw=Me(),DO="AtrulePrelude",NO="atrulePrelude",OO={children:[[]]};function PO(t){let e=null;return t!==null&&(t=t.toLowerCase()),this.skipSC(),hasOwnProperty.call(this.atrule,t)&&typeof this.atrule[t].prelude=="function"?e=this.atrule[t].prelude.call(this):e=this.readSequence(this.scope.AtrulePrelude),this.skipSC(),this.eof!==!0&&this.tokenType!==Qw.LeftCurlyBracket&&this.tokenType!==Qw.Semicolon&&this.error("Semicolon or block is expected"),{type:"AtrulePrelude",loc:this.getLocationFromList(e),children:e}}function IO(t){this.children(t)}Ao.generate=IO;Ao.name=DO;Ao.parse=PO;Ao.structure=OO;Ao.walkContext=NO});var zd=Y(ia=>{"use strict";var Dn=Me(),BO=36,Xw=42,wc=61,qO=94,qd=124,zO=126;function RO(){this.eof&&this.error("Unexpected end of input");let t=this.tokenStart,e=!1;return this.isDelim(Xw)?(e=!0,this.next()):this.isDelim(qd)||this.eat(Dn.Ident),this.isDelim(qd)?this.charCodeAt(this.tokenStart+1)!==wc?(this.next(),this.eat(Dn.Ident)):e&&this.error("Identifier is expected",this.tokenEnd):e&&this.error("Vertical line is expected"),{type:"Identifier",loc:this.getLocation(t,this.tokenStart),name:this.substrToCursor(t)}}function FO(){let t=this.tokenStart,e=this.charCodeAt(t);return e!==wc&&e!==zO&&e!==qO&&e!==BO&&e!==Xw&&e!==qd&&this.error("Attribute selector (=, ~=, ^=, $=, *=, |=) is expected"),this.next(),e!==wc&&(this.isDelim(wc)||this.error("Equal sign is expected"),this.next()),this.substrToCursor(t)}var _O="AttributeSelector",jO={name:"Identifier",matcher:[String,null],value:["String","Identifier",null],flags:[String,null]};function HO(){let t=this.tokenStart,e,r=null,i=null,s=null;return this.eat(Dn.LeftSquareBracket),this.skipSC(),e=RO.call(this),this.skipSC(),this.tokenType!==Dn.RightSquareBracket&&(this.tokenType!==Dn.Ident&&(r=FO.call(this),this.skipSC(),i=this.tokenType===Dn.String?this.String():this.Identifier(),this.skipSC()),this.tokenType===Dn.Ident&&(s=this.consume(Dn.Ident),this.skipSC())),this.eat(Dn.RightSquareBracket),{type:"AttributeSelector",loc:this.getLocation(t,this.tokenStart),name:e,matcher:r,value:i,flags:s}}function WO(t){this.token(Dn.Delim,"["),this.node(t.name),t.matcher!==null&&(this.tokenize(t.matcher),this.node(t.value)),t.flags!==null&&this.token(Dn.Ident,t.flags),this.token(Dn.Delim,"]")}ia.generate=WO;ia.name=_O;ia.parse=HO;ia.structure=jO});var Rd=Y(To=>{"use strict";var Vn=Me(),UO=38;function ex(t){return this.Raw(t,null,!0)}function Jw(){return this.parseWithFallback(this.Rule,ex)}function Zw(t){return this.Raw(t,this.consumeUntilSemicolonIncluded,!0)}function $O(){if(this.tokenType===Vn.Semicolon)return Zw.call(this,this.tokenIndex);let t=this.parseWithFallback(this.Declaration,Zw);return this.tokenType===Vn.Semicolon&&this.next(),t}var GO="Block",VO="block",KO={children:[["Atrule","Rule","Declaration"]]};function YO(t){let e=t?$O:Jw,r=this.tokenStart,i=this.createList();this.eat(Vn.LeftCurlyBracket);e:for(;!this.eof;)switch(this.tokenType){case Vn.RightCurlyBracket:break e;case Vn.WhiteSpace:case Vn.Comment:this.next();break;case Vn.AtKeyword:i.push(this.parseWithFallback(this.Atrule.bind(this,t),ex));break;default:t&&this.isDelim(UO)?i.push(Jw.call(this)):i.push(e.call(this))}return this.eof||this.eat(Vn.RightCurlyBracket),{type:"Block",loc:this.getLocation(r,this.tokenStart),children:i}}function QO(t){this.token(Vn.LeftCurlyBracket,"{"),this.children(t,e=>{e.type==="Declaration"&&this.token(Vn.Semicolon,";")}),this.token(Vn.RightCurlyBracket,"}")}To.generate=QO;To.name=GO;To.parse=YO;To.structure=KO;To.walkContext=VO});var Fd=Y(oa=>{"use strict";var xc=Me(),XO="Brackets",JO={children:[[]]};function ZO(t,e){let r=this.tokenStart,i=null;return this.eat(xc.LeftSquareBracket),i=t.call(this,e),this.eof||this.eat(xc.RightSquareBracket),{type:"Brackets",loc:this.getLocation(r,this.tokenStart),children:i}}function eP(t){this.token(xc.Delim,"["),this.children(t),this.token(xc.Delim,"]")}oa.generate=eP;oa.name=XO;oa.parse=ZO;oa.structure=JO});var _d=Y(sa=>{"use strict";var tx=Me(),tP="CDC",nP=[];function rP(){let t=this.tokenStart;return this.eat(tx.CDC),{type:"CDC",loc:this.getLocation(t,this.tokenStart)}}function iP(){this.token(tx.CDC,"-->")}sa.generate=iP;sa.name=tP;sa.parse=rP;sa.structure=nP});var jd=Y(aa=>{"use strict";var nx=Me(),oP="CDO",sP=[];function aP(){let t=this.tokenStart;return this.eat(nx.CDO),{type:"CDO",loc:this.getLocation(t,this.tokenStart)}}function lP(){this.token(nx.CDO,"<!--")}aa.generate=lP;aa.name=oP;aa.parse=aP;aa.structure=sP});var Wd=Y(la=>{"use strict";var Hd=Me(),cP=46,uP="ClassSelector",fP={name:String};function dP(){return this.eatDelim(cP),{type:"ClassSelector",loc:this.getLocation(this.tokenStart-1,this.tokenEnd),name:this.consume(Hd.Ident)}}function hP(t){this.token(Hd.Delim,"."),this.token(Hd.Ident,t.name)}la.generate=hP;la.name=uP;la.parse=dP;la.structure=fP});var Ud=Y(ca=>{"use strict";var rx=Me(),pP=43,ix=47,gP=62,mP=126,yP="Combinator",vP={name:String};function bP(){let t=this.tokenStart,e;switch(this.tokenType){case rx.WhiteSpace:e=" ";break;case rx.Delim:switch(this.charCodeAt(this.tokenStart)){case gP:case pP:case mP:this.next();break;case ix:this.next(),this.eatIdent("deep"),this.eatDelim(ix);break;default:this.error("Combinator is expected")}e=this.substrToCursor(t);break}return{type:"Combinator",loc:this.getLocation(t,this.tokenStart),name:e}}function wP(t){this.tokenize(t.name)}ca.generate=wP;ca.name=yP;ca.parse=bP;ca.structure=vP});var $d=Y(ua=>{"use strict";var ox=Me(),xP=42,kP=47,CP="Comment",SP={value:String};function AP(){let t=this.tokenStart,e=this.tokenEnd;return this.eat(ox.Comment),e-t+2>=2&&this.charCodeAt(e-2)===xP&&this.charCodeAt(e-1)===kP&&(e-=2),{type:"Comment",loc:this.getLocation(t,this.tokenStart),value:this.substring(t+2,e)}}function TP(t){this.token(ox.Comment,"/*"+t.value+"*/")}ua.generate=TP;ua.name=CP;ua.parse=AP;ua.structure=SP});var Gd=Y(Lo=>{"use strict";var LP=ac(),ln=Me(),ax=33,EP=35,MP=36,DP=38,NP=42,OP=43,sx=47;function PP(t){return this.Raw(t,this.consumeUntilExclamationMarkOrSemicolon,!0)}function IP(t){return this.Raw(t,this.consumeUntilExclamationMarkOrSemicolon,!1)}function BP(){let t=this.tokenIndex,e=this.Value();return e.type!=="Raw"&&this.eof===!1&&this.tokenType!==ln.Semicolon&&this.isDelim(ax)===!1&&this.isBalanceEdge(t)===!1&&this.error(),e}var qP="Declaration",zP="declaration",RP={important:[Boolean,String],property:String,value:["Value","Raw"]};function FP(){let t=this.tokenStart,e=this.tokenIndex,r=jP.call(this),i=LP.isCustomProperty(r),s=i?this.parseCustomProperty:this.parseValue,a=i?IP:PP,f=!1,d;this.skipSC(),this.eat(ln.Colon);let p=this.tokenIndex;if(i||this.skipSC(),s?d=this.parseWithFallback(BP,a):d=a.call(this,this.tokenIndex),i&&d.type==="Value"&&d.children.isEmpty){for(let g=p-this.tokenIndex;g<=0;g++)if(this.lookupType(g)===ln.WhiteSpace){d.children.appendData({type:"WhiteSpace",loc:null,value:" "});break}}return this.isDelim(ax)&&(f=HP.call(this),this.skipSC()),this.eof===!1&&this.tokenType!==ln.Semicolon&&this.isBalanceEdge(e)===!1&&this.error(),{type:"Declaration",loc:this.getLocation(t,this.tokenStart),important:f,property:r,value:d}}function _P(t){this.token(ln.Ident,t.property),this.token(ln.Colon,":"),this.node(t.value),t.important&&(this.token(ln.Delim,"!"),this.token(ln.Ident,t.important===!0?"important":t.important))}function jP(){let t=this.tokenStart;if(this.tokenType===ln.Delim)switch(this.charCodeAt(this.tokenStart)){case NP:case MP:case OP:case EP:case DP:this.next();break;case sx:this.next(),this.isDelim(sx)&&this.next();break}return this.tokenType===ln.Hash?this.eat(ln.Hash):this.eat(ln.Ident),this.substrToCursor(t)}function HP(){this.eat(ln.Delim),this.skipSC();let t=this.consume(ln.Ident);return t==="important"?!0:t}Lo.generate=_P;Lo.name=qP;Lo.parse=FP;Lo.structure=RP;Lo.walkContext=zP});var Kd=Y(da=>{"use strict";var fa=Me(),WP=38;function Vd(t){return this.Raw(t,this.consumeUntilSemicolonIncluded,!0)}var UP="DeclarationList",$P={children:[["Declaration","Atrule","Rule"]]};function GP(){let t=this.createList();for(;!this.eof;)switch(this.tokenType){case fa.WhiteSpace:case fa.Comment:case fa.Semicolon:this.next();break;case fa.AtKeyword:t.push(this.parseWithFallback(this.Atrule.bind(this,!0),Vd));break;default:this.isDelim(WP)?t.push(this.parseWithFallback(this.Rule,Vd)):t.push(this.parseWithFallback(this.Declaration,Vd))}return{type:"DeclarationList",loc:this.getLocationFromList(t),children:t}}function VP(t){this.children(t,e=>{e.type==="Declaration"&&this.token(fa.Semicolon,";")})}da.generate=VP;da.name=UP;da.parse=GP;da.structure=$P});var Yd=Y(ha=>{"use strict";var lx=Me(),KP="Dimension",YP={value:String,unit:String};function QP(){let t=this.tokenStart,e=this.consumeNumber(lx.Dimension);return{type:"Dimension",loc:this.getLocation(t,this.tokenStart),value:e,unit:this.substring(t+e.length,this.tokenStart)}}function XP(t){this.token(lx.Dimension,t.value+t.unit)}ha.generate=XP;ha.name=KP;ha.parse=QP;ha.structure=YP});var Xd=Y(Eo=>{"use strict";var Qd=Me(),JP="Function",ZP="function",eI={name:String,children:[[]]};function tI(t,e){let r=this.tokenStart,i=this.consumeFunctionName(),s=i.toLowerCase(),a;return a=e.hasOwnProperty(s)?e[s].call(this,e):t.call(this,e),this.eof||this.eat(Qd.RightParenthesis),{type:"Function",loc:this.getLocation(r,this.tokenStart),name:i,children:a}}function nI(t){this.token(Qd.Function,t.name+"("),this.children(t),this.token(Qd.RightParenthesis,")")}Eo.generate=nI;Eo.name=JP;Eo.parse=tI;Eo.structure=eI;Eo.walkContext=ZP});var Jd=Y(Mo=>{"use strict";var cx=Me(),rI="XXX",iI="Hash",oI={value:String};function sI(){let t=this.tokenStart;return this.eat(cx.Hash),{type:"Hash",loc:this.getLocation(t,this.tokenStart),value:this.substrToCursor(t+1)}}function aI(t){this.token(cx.Hash,"#"+t.value)}Mo.generate=aI;Mo.name=iI;Mo.parse=sI;Mo.structure=oI;Mo.xxx=rI});var Zd=Y(pa=>{"use strict";var ux=Me(),lI="Identifier",cI={name:String};function uI(){return{type:"Identifier",loc:this.getLocation(this.tokenStart,this.tokenEnd),name:this.consume(ux.Ident)}}function fI(t){this.token(ux.Ident,t.name)}pa.generate=fI;pa.name=lI;pa.parse=uI;pa.structure=cI});var eh=Y(ga=>{"use strict";var fx=Me(),dI="IdSelector",hI={name:String};function pI(){let t=this.tokenStart;return this.eat(fx.Hash),{type:"IdSelector",loc:this.getLocation(t,this.tokenStart),name:this.substrToCursor(t+1)}}function gI(t){this.token(fx.Delim,"#"+t.name)}ga.generate=gI;ga.name=dI;ga.parse=pI;ga.structure=hI});var th=Y(ma=>{"use strict";var bn=Me(),mI="MediaFeature",yI={name:String,value:["Identifier","Number","Dimension","Ratio",null]};function vI(){let t=this.tokenStart,e,r=null;if(this.eat(bn.LeftParenthesis),this.skipSC(),e=this.consume(bn.Ident),this.skipSC(),this.tokenType!==bn.RightParenthesis){switch(this.eat(bn.Colon),this.skipSC(),this.tokenType){case bn.Number:this.lookupNonWSType(1)===bn.Delim?r=this.Ratio():r=this.Number();break;case bn.Dimension:r=this.Dimension();break;case bn.Ident:r=this.Identifier();break;default:this.error("Number, dimension, ratio or identifier is expected")}this.skipSC()}return this.eat(bn.RightParenthesis),{type:"MediaFeature",loc:this.getLocation(t,this.tokenStart),name:e,value:r}}function bI(t){this.token(bn.LeftParenthesis,"("),this.token(bn.Ident,t.name),t.value!==null&&(this.token(bn.Colon,":"),this.node(t.value)),this.token(bn.RightParenthesis,")")}ma.generate=bI;ma.name=mI;ma.parse=vI;ma.structure=yI});var nh=Y(ya=>{"use strict";var kc=Me(),wI="MediaQuery",xI={children:[["Identifier","MediaFeature","WhiteSpace"]]};function kI(){let t=this.createList(),e=null;this.skipSC();e:for(;!this.eof;){switch(this.tokenType){case kc.Comment:case kc.WhiteSpace:this.next();continue;case kc.Ident:e=this.Identifier();break;case kc.LeftParenthesis:e=this.MediaFeature();break;default:break e}t.push(e)}return e===null&&this.error("Identifier or parenthesis is expected"),{type:"MediaQuery",loc:this.getLocationFromList(t),children:t}}function CI(t){this.children(t)}ya.generate=CI;ya.name=wI;ya.parse=kI;ya.structure=xI});var rh=Y(va=>{"use strict";var dx=Me(),SI="MediaQueryList",AI={children:[["MediaQuery"]]};function TI(){let t=this.createList();for(this.skipSC();!this.eof&&(t.push(this.MediaQuery()),this.tokenType===dx.Comma);)this.next();return{type:"MediaQueryList",loc:this.getLocationFromList(t),children:t}}function LI(t){this.children(t,()=>this.token(dx.Comma,","))}va.generate=LI;va.name=SI;va.parse=TI;va.structure=AI});var ih=Y(ba=>{"use strict";var EI=Me(),MI=38,DI="NestingSelector",NI={};function OI(){let t=this.tokenStart;return this.eatDelim(MI),{type:"NestingSelector",loc:this.getLocation(t,this.tokenStart)}}function PI(){this.token(EI.Delim,"&")}ba.generate=PI;ba.name=DI;ba.parse=OI;ba.structure=NI});var oh=Y(wa=>{"use strict";var II=Me(),BI="Nth",qI={nth:["AnPlusB","Identifier"],selector:["SelectorList",null]};function zI(){this.skipSC();let t=this.tokenStart,e=t,r=null,i;return this.lookupValue(0,"odd")||this.lookupValue(0,"even")?i=this.Identifier():i=this.AnPlusB(),e=this.tokenStart,this.skipSC(),this.lookupValue(0,"of")&&(this.next(),r=this.SelectorList(),e=this.tokenStart),{type:"Nth",loc:this.getLocation(t,e),nth:i,selector:r}}function RI(t){this.node(t.nth),t.selector!==null&&(this.token(II.Ident,"of"),this.node(t.selector))}wa.generate=RI;wa.name=BI;wa.parse=zI;wa.structure=qI});var sh=Y(xa=>{"use strict";var hx=Me(),FI="Number",_I={value:String};function jI(){return{type:"Number",loc:this.getLocation(this.tokenStart,this.tokenEnd),value:this.consume(hx.Number)}}function HI(t){this.token(hx.Number,t.value)}xa.generate=HI;xa.name=FI;xa.parse=jI;xa.structure=_I});var ah=Y(ka=>{"use strict";var WI="Operator",UI={value:String};function $I(){let t=this.tokenStart;return this.next(),{type:"Operator",loc:this.getLocation(t,this.tokenStart),value:this.substrToCursor(t)}}function GI(t){this.tokenize(t.value)}ka.generate=GI;ka.name=WI;ka.parse=$I;ka.structure=UI});var lh=Y(Ca=>{"use strict";var Cc=Me(),VI="Parentheses",KI={children:[[]]};function YI(t,e){let r=this.tokenStart,i=null;return this.eat(Cc.LeftParenthesis),i=t.call(this,e),this.eof||this.eat(Cc.RightParenthesis),{type:"Parentheses",loc:this.getLocation(r,this.tokenStart),children:i}}function QI(t){this.token(Cc.LeftParenthesis,"("),this.children(t),this.token(Cc.RightParenthesis,")")}Ca.generate=QI;Ca.name=VI;Ca.parse=YI;Ca.structure=KI});var ch=Y(Sa=>{"use strict";var px=Me(),XI="Percentage",JI={value:String};function ZI(){return{type:"Percentage",loc:this.getLocation(this.tokenStart,this.tokenEnd),value:this.consumeNumber(px.Percentage)}}function e2(t){this.token(px.Percentage,t.value+"%")}Sa.generate=e2;Sa.name=XI;Sa.parse=ZI;Sa.structure=JI});var uh=Y(Do=>{"use strict";var Jr=Me(),t2="PseudoClassSelector",n2="function",r2={name:String,children:[["Raw"],null]};function i2(){let t=this.tokenStart,e=null,r,i;return this.eat(Jr.Colon),this.tokenType===Jr.Function?(r=this.consumeFunctionName(),i=r.toLowerCase(),hasOwnProperty.call(this.pseudo,i)?(this.skipSC(),e=this.pseudo[i].call(this),this.skipSC()):(e=this.createList(),e.push(this.Raw(this.tokenIndex,null,!1))),this.eat(Jr.RightParenthesis)):r=this.consume(Jr.Ident),{type:"PseudoClassSelector",loc:this.getLocation(t,this.tokenStart),name:r,children:e}}function o2(t){this.token(Jr.Colon,":"),t.children===null?this.token(Jr.Ident,t.name):(this.token(Jr.Function,t.name+"("),this.children(t),this.token(Jr.RightParenthesis,")"))}Do.generate=o2;Do.name=t2;Do.parse=i2;Do.structure=r2;Do.walkContext=n2});var fh=Y(No=>{"use strict";var cr=Me(),s2="PseudoElementSelector",a2="function",l2={name:String,children:[["Raw"],null]};function c2(){let t=this.tokenStart,e=null,r,i;return this.eat(cr.Colon),this.eat(cr.Colon),this.tokenType===cr.Function?(r=this.consumeFunctionName(),i=r.toLowerCase(),hasOwnProperty.call(this.pseudo,i)?(this.skipSC(),e=this.pseudo[i].call(this),this.skipSC()):(e=this.createList(),e.push(this.Raw(this.tokenIndex,null,!1))),this.eat(cr.RightParenthesis)):r=this.consume(cr.Ident),{type:"PseudoElementSelector",loc:this.getLocation(t,this.tokenStart),name:r,children:e}}function u2(t){this.token(cr.Colon,":"),this.token(cr.Colon,":"),t.children===null?this.token(cr.Ident,t.name):(this.token(cr.Function,t.name+"("),this.children(t),this.token(cr.RightParenthesis,")"))}No.generate=u2;No.name=s2;No.parse=c2;No.structure=l2;No.walkContext=a2});var dh=Y(Aa=>{"use strict";var Sc=Me(),f2=yn(),d2=47,h2=46;function gx(){this.skipSC();let t=this.consume(Sc.Number);for(let e=0;e<t.length;e++){let r=t.charCodeAt(e);!f2.isDigit(r)&&r!==h2&&this.error("Unsigned number is expected",this.tokenStart-t.length+e)}return Number(t)===0&&this.error("Zero number is not allowed",this.tokenStart-t.length),t}var p2="Ratio",g2={left:String,right:String};function m2(){let t=this.tokenStart,e=gx.call(this),r;return this.skipSC(),this.eatDelim(d2),r=gx.call(this),{type:"Ratio",loc:this.getLocation(t,this.tokenStart),left:e,right:r}}function y2(t){this.token(Sc.Number,t.left),this.token(Sc.Delim,"/"),this.token(Sc.Number,t.right)}Aa.generate=y2;Aa.name=p2;Aa.parse=m2;Aa.structure=g2});var hh=Y(Ta=>{"use strict";var v2=Me();function b2(){return this.tokenIndex>0&&this.lookupType(-1)===v2.WhiteSpace?this.tokenIndex>1?this.getTokenStart(this.tokenIndex-1):this.firstCharOffset:this.tokenStart}var w2="Raw",x2={value:String};function k2(t,e,r){let i=this.getTokenStart(t),s;return this.skipUntilBalanced(t,e||this.consumeUntilBalanceEnd),r&&this.tokenStart>i?s=b2.call(this):s=this.tokenStart,{type:"Raw",loc:this.getLocation(i,s),value:this.substring(i,s)}}function C2(t){this.tokenize(t.value)}Ta.generate=C2;Ta.name=w2;Ta.parse=k2;Ta.structure=x2});var ph=Y(Oo=>{"use strict";var S2=Me();function mx(t){return this.Raw(t,this.consumeUntilLeftCurlyBracket,!0)}function A2(){let t=this.SelectorList();return t.type!=="Raw"&&this.eof===!1&&this.tokenType!==S2.LeftCurlyBracket&&this.error(),t}var T2="Rule",L2="rule",E2={prelude:["SelectorList","Raw"],block:["Block"]};function M2(){let t=this.tokenIndex,e=this.tokenStart,r,i;return this.parseRulePrelude?r=this.parseWithFallback(A2,mx):r=mx.call(this,t),i=this.Block(!0),{type:"Rule",loc:this.getLocation(e,this.tokenStart),prelude:r,block:i}}function D2(t){this.node(t.prelude),this.node(t.block)}Oo.generate=D2;Oo.name=T2;Oo.parse=M2;Oo.structure=E2;Oo.walkContext=L2});var gh=Y(La=>{"use strict";var N2="Selector",O2={children:[["TypeSelector","IdSelector","ClassSelector","AttributeSelector","PseudoClassSelector","PseudoElementSelector","Combinator","WhiteSpace"]]};function P2(){let t=this.readSequence(this.scope.Selector);return this.getFirstListNode(t)===null&&this.error("Selector is expected"),{type:"Selector",loc:this.getLocationFromList(t),children:t}}function I2(t){this.children(t)}La.generate=I2;La.name=N2;La.parse=P2;La.structure=O2});var mh=Y(Po=>{"use strict";var yx=Me(),B2="SelectorList",q2="selector",z2={children:[["Selector","Raw"]]};function R2(){let t=this.createList();for(;!this.eof;){if(t.push(this.Selector()),this.tokenType===yx.Comma){this.next();continue}break}return{type:"SelectorList",loc:this.getLocationFromList(t),children:t}}function F2(t){this.children(t,()=>this.token(yx.Comma,","))}Po.generate=F2;Po.name=B2;Po.parse=R2;Po.structure=z2;Po.walkContext=q2});var Ac=Y(bh=>{"use strict";var yh=yn(),vx=ir(),vh=92,bx=34,wx=39;function _2(t){let e=t.length,r=t.charCodeAt(0),i=r===bx||r===wx?1:0,s=i===1&&e>1&&t.charCodeAt(e-1)===r?e-2:e-1,a="";for(let f=i;f<=s;f++){let d=t.charCodeAt(f);if(d===vh){if(f===s){f!==e-1&&(a=t.substr(f+1));break}if(d=t.charCodeAt(++f),yh.isValidEscape(vh,d)){let p=f-1,g=vx.consumeEscaped(t,p);f=g-1,a+=vx.decodeEscaped(t.substring(p+1,g))}else d===13&&t.charCodeAt(f+1)===10&&f++}else a+=t[f]}return a}function j2(t,e){let r=e?"'":'"',i=e?wx:bx,s="",a=!1;for(let f=0;f<t.length;f++){let d=t.charCodeAt(f);if(d===0){s+="\uFFFD";continue}if(d<=31||d===127){s+="\\"+d.toString(16),a=!0;continue}d===i||d===vh?(s+="\\"+t.charAt(f),a=!1):(a&&(yh.isHexDigit(d)||yh.isWhiteSpace(d))&&(s+=" "),s+=t.charAt(f),a=!1)}return r+s+r}bh.decode=_2;bh.encode=j2});var wh=Y(Ea=>{"use strict";var xx=Ac(),kx=Me(),H2="String",W2={value:String};function U2(){return{type:"String",loc:this.getLocation(this.tokenStart,this.tokenEnd),value:xx.decode(this.consume(kx.String))}}function $2(t){this.token(kx.String,xx.encode(t.value))}Ea.generate=$2;Ea.name=H2;Ea.parse=U2;Ea.structure=W2});var xh=Y(Io=>{"use strict";var Ma=Me(),G2=33;function Cx(t){return this.Raw(t,null,!1)}var V2="StyleSheet",K2="stylesheet",Y2={children:[["Comment","CDO","CDC","Atrule","Rule","Raw"]]};function Q2(){let t=this.tokenStart,e=this.createList(),r;for(;!this.eof;){switch(this.tokenType){case Ma.WhiteSpace:this.next();continue;case Ma.Comment:if(this.charCodeAt(this.tokenStart+2)!==G2){this.next();continue}r=this.Comment();break;case Ma.CDO:r=this.CDO();break;case Ma.CDC:r=this.CDC();break;case Ma.AtKeyword:r=this.parseWithFallback(this.Atrule,Cx);break;default:r=this.parseWithFallback(this.Rule,Cx)}e.push(r)}return{type:"StyleSheet",loc:this.getLocation(t,this.tokenStart),children:e}}function X2(t){this.children(t)}Io.generate=X2;Io.name=V2;Io.parse=Q2;Io.structure=Y2;Io.walkContext=K2});var Ch=Y(Da=>{"use strict";var J2=Me(),Z2=42,Sx=124;function kh(){this.tokenType!==J2.Ident&&this.isDelim(Z2)===!1&&this.error("Identifier or asterisk is expected"),this.next()}var eB="TypeSelector",tB={name:String};function nB(){let t=this.tokenStart;return this.isDelim(Sx)?(this.next(),kh.call(this)):(kh.call(this),this.isDelim(Sx)&&(this.next(),kh.call(this))),{type:"TypeSelector",loc:this.getLocation(t,this.tokenStart),name:this.substrToCursor(t)}}function rB(t){this.tokenize(t.name)}Da.generate=rB;Da.name=eB;Da.parse=nB;Da.structure=tB});var Ah=Y(Pa=>{"use strict";var Na=Me(),iB=yn(),Ax=43,Tx=45,Sh=63;function Oa(t,e){let r=0;for(let i=this.tokenStart+t;i<this.tokenEnd;i++){let s=this.charCodeAt(i);if(s===Tx&&e&&r!==0)return Oa.call(this,t+r+1,!1),-1;iB.isHexDigit(s)||this.error(e&&r!==0?"Hyphen minus"+(r<6?" or hex digit":"")+" is expected":r<6?"Hex digit is expected":"Unexpected input",i),++r>6&&this.error("Too many hex digits",i)}return this.next(),r}function Tc(t){let e=0;for(;this.isDelim(Sh);)++e>t&&this.error("Too many question marks"),this.next()}function oB(t){this.charCodeAt(this.tokenStart)!==t&&this.error((t===Ax?"Plus sign":"Hyphen minus")+" is expected")}function sB(){let t=0;switch(this.tokenType){case Na.Number:if(t=Oa.call(this,1,!0),this.isDelim(Sh)){Tc.call(this,6-t);break}if(this.tokenType===Na.Dimension||this.tokenType===Na.Number){oB.call(this,Tx),Oa.call(this,1,!1);break}break;case Na.Dimension:t=Oa.call(this,1,!0),t>0&&Tc.call(this,6-t);break;default:if(this.eatDelim(Ax),this.tokenType===Na.Ident){t=Oa.call(this,0,!0),t>0&&Tc.call(this,6-t);break}if(this.isDelim(Sh)){this.next(),Tc.call(this,5);break}this.error("Hex digit or question mark is expected")}}var aB="UnicodeRange",lB={value:String};function cB(){let t=this.tokenStart;return this.eatIdent("u"),sB.call(this),{type:"UnicodeRange",loc:this.getLocation(t,this.tokenStart),value:this.substrToCursor(t)}}function uB(t){this.tokenize(t.value)}Pa.generate=uB;Pa.name=aB;Pa.parse=cB;Pa.structure=lB});var Eh=Y(Lh=>{"use strict";var Lc=yn(),Lx=ir(),fB=32,Th=92,dB=34,hB=39,pB=40,Ex=41;function gB(t){let e=t.length,r=4,i=t.charCodeAt(e-1)===Ex?e-2:e-1,s="";for(;r<i&&Lc.isWhiteSpace(t.charCodeAt(r));)r++;for(;r<i&&Lc.isWhiteSpace(t.charCodeAt(i));)i--;for(let a=r;a<=i;a++){let f=t.charCodeAt(a);if(f===Th){if(a===i){a!==e-1&&(s=t.substr(a+1));break}if(f=t.charCodeAt(++a),Lc.isValidEscape(Th,f)){let d=a-1,p=Lx.consumeEscaped(t,d);a=p-1,s+=Lx.decodeEscaped(t.substring(d+1,p))}else f===13&&t.charCodeAt(a+1)===10&&a++}else s+=t[a]}return s}function mB(t){let e="",r=!1;for(let i=0;i<t.length;i++){let s=t.charCodeAt(i);if(s===0){e+="\uFFFD";continue}if(s<=31||s===127){e+="\\"+s.toString(16),r=!0;continue}s===fB||s===Th||s===dB||s===hB||s===pB||s===Ex?(e+="\\"+t.charAt(i),r=!1):(r&&Lc.isHexDigit(s)&&(e+=" "),e+=t.charAt(i),r=!1)}return"url("+e+")"}Lh.decode=gB;Lh.encode=mB});var Mh=Y(Ia=>{"use strict";var Mx=Eh(),yB=Ac(),Ci=Me(),vB="Url",bB={value:String};function wB(){let t=this.tokenStart,e;switch(this.tokenType){case Ci.Url:e=Mx.decode(this.consume(Ci.Url));break;case Ci.Function:this.cmpStr(this.tokenStart,this.tokenEnd,"url(")||this.error("Function name must be `url`"),this.eat(Ci.Function),this.skipSC(),e=yB.decode(this.consume(Ci.String)),this.skipSC(),this.eof||this.eat(Ci.RightParenthesis);break;default:this.error("Url or Function is expected")}return{type:"Url",loc:this.getLocation(t,this.tokenStart),value:e}}function xB(t){this.token(Ci.Url,Mx.encode(t.value))}Ia.generate=xB;Ia.name=vB;Ia.parse=wB;Ia.structure=bB});var Dh=Y(Ba=>{"use strict";var kB="Value",CB={children:[[]]};function SB(){let t=this.tokenStart,e=this.readSequence(this.scope.Value);return{type:"Value",loc:this.getLocation(t,this.tokenStart),children:e}}function AB(t){this.children(t)}Ba.generate=AB;Ba.name=kB;Ba.parse=SB;Ba.structure=CB});var Nh=Y(qa=>{"use strict";var Dx=Me(),TB=Object.freeze({type:"WhiteSpace",loc:null,value:" "}),LB="WhiteSpace",EB={value:String};function MB(){return this.eat(Dx.WhiteSpace),TB}function DB(t){this.token(Dx.WhiteSpace,t.value)}qa.generate=DB;qa.name=LB;qa.parse=MB;qa.structure=EB});var Oh=Y(Be=>{"use strict";var NB=Pd(),OB=Id(),PB=Bd(),IB=zd(),BB=Rd(),qB=Fd(),zB=_d(),RB=jd(),FB=Wd(),_B=Ud(),jB=$d(),HB=Gd(),WB=Kd(),UB=Yd(),$B=Xd(),GB=Jd(),VB=Zd(),KB=eh(),YB=th(),QB=nh(),XB=rh(),JB=ih(),ZB=oh(),eq=sh(),tq=ah(),nq=lh(),rq=ch(),iq=uh(),oq=fh(),sq=dh(),aq=hh(),lq=ph(),cq=gh(),uq=mh(),fq=wh(),dq=xh(),hq=Ch(),pq=Ah(),gq=Mh(),mq=Dh(),yq=Nh();Be.AnPlusB=NB;Be.Atrule=OB;Be.AtrulePrelude=PB;Be.AttributeSelector=IB;Be.Block=BB;Be.Brackets=qB;Be.CDC=zB;Be.CDO=RB;Be.ClassSelector=FB;Be.Combinator=_B;Be.Comment=jB;Be.Declaration=HB;Be.DeclarationList=WB;Be.Dimension=UB;Be.Function=$B;Be.Hash=GB;Be.Identifier=VB;Be.IdSelector=KB;Be.MediaFeature=YB;Be.MediaQuery=QB;Be.MediaQueryList=XB;Be.NestingSelector=JB;Be.Nth=ZB;Be.Number=eq;Be.Operator=tq;Be.Parentheses=nq;Be.Percentage=rq;Be.PseudoClassSelector=iq;Be.PseudoElementSelector=oq;Be.Ratio=sq;Be.Raw=aq;Be.Rule=lq;Be.Selector=cq;Be.SelectorList=uq;Be.String=fq;Be.StyleSheet=dq;Be.TypeSelector=hq;Be.UnicodeRange=pq;Be.Url=gq;Be.Value=mq;Be.WhiteSpace=yq});var Ox=Y((_U,Nx)=>{"use strict";var vq=Vw(),bq=Oh(),wq={generic:!0,...vq,node:bq};Nx.exports=wq});var Ph=Y((jU,Ix)=>{"use strict";var Nn=Me(),xq=35,kq=42,Px=43,Cq=45,Sq=47,Aq=117;function Tq(t){switch(this.tokenType){case Nn.Hash:return this.Hash();case Nn.Comma:return this.Operator();case Nn.LeftParenthesis:return this.Parentheses(this.readSequence,t.recognizer);case Nn.LeftSquareBracket:return this.Brackets(this.readSequence,t.recognizer);case Nn.String:return this.String();case Nn.Dimension:return this.Dimension();case Nn.Percentage:return this.Percentage();case Nn.Number:return this.Number();case Nn.Function:return this.cmpStr(this.tokenStart,this.tokenEnd,"url(")?this.Url():this.Function(this.readSequence,t.recognizer);case Nn.Url:return this.Url();case Nn.Ident:return this.cmpChar(this.tokenStart,Aq)&&this.cmpChar(this.tokenStart+1,Px)?this.UnicodeRange():this.Identifier();case Nn.Delim:{let e=this.charCodeAt(this.tokenStart);if(e===Sq||e===kq||e===Px||e===Cq)return this.Operator();e===xq&&this.error("Hex or identifier is expected",this.tokenStart+1);break}}}Ix.exports=Tq});var qx=Y((HU,Bx)=>{"use strict";var Lq=Ph(),Eq={getNode:Lq};Bx.exports=Eq});var Fx=Y((WU,Rx)=>{"use strict";var Lr=Me(),Mq=35,Dq=38,Nq=42,Oq=43,Pq=47,zx=46,Iq=62,Bq=124,qq=126;function zq(t,e){e.last!==null&&e.last.type!=="Combinator"&&t!==null&&t.type!=="Combinator"&&e.push({type:"Combinator",loc:null,name:" "})}function Rq(){switch(this.tokenType){case Lr.LeftSquareBracket:return this.AttributeSelector();case Lr.Hash:return this.IdSelector();case Lr.Colon:return this.lookupType(1)===Lr.Colon?this.PseudoElementSelector():this.PseudoClassSelector();case Lr.Ident:return this.TypeSelector();case Lr.Number:case Lr.Percentage:return this.Percentage();case Lr.Dimension:this.charCodeAt(this.tokenStart)===zx&&this.error("Identifier is expected",this.tokenStart+1);break;case Lr.Delim:{switch(this.charCodeAt(this.tokenStart)){case Oq:case Iq:case qq:case Pq:return this.Combinator();case zx:return this.ClassSelector();case Nq:case Bq:return this.TypeSelector();case Mq:return this.IdSelector();case Dq:return this.NestingSelector()}break}}}var Fq={onWhiteSpace:zq,getNode:Rq};Rx.exports=Fq});var jx=Y((UU,_x)=>{"use strict";function _q(){return this.createSingleNodeList(this.Raw(this.tokenIndex,null,!1))}_x.exports=_q});var Ux=Y(($U,Wx)=>{"use strict";var Hx=Me();function jq(){let t=this.createList();if(this.skipSC(),t.push(this.Identifier()),this.skipSC(),this.tokenType===Hx.Comma){t.push(this.Operator());let e=this.tokenIndex,r=this.parseCustomProperty?this.Value(null):this.Raw(this.tokenIndex,this.consumeUntilExclamationMarkOrSemicolon,!1);if(r.type==="Value"&&r.children.isEmpty){for(let i=e-this.tokenIndex;i<=0;i++)if(this.lookupType(i)===Hx.WhiteSpace){r.children.appendData({type:"WhiteSpace",loc:null,value:" "});break}}t.push(r)}return t}Wx.exports=jq});var Vx=Y((GU,Gx)=>{"use strict";var Hq=Ph(),Wq=jx(),Uq=Ux();function $x(t){return t!==null&&t.type==="Operator"&&(t.value[t.value.length-1]==="-"||t.value[t.value.length-1]==="+")}var $q={getNode:Hq,onWhiteSpace(t,e){$x(t)&&(t.value=" "+t.value),$x(e.last)&&(e.last.value+=" ")},expression:Wq,var:Uq};Gx.exports=$q});var Kx=Y(Ec=>{"use strict";var Gq=qx(),Vq=Fx(),Kq=Vx();Ec.AtrulePrelude=Gq;Ec.Selector=Vq;Ec.Value=Kq});var Qx=Y((KU,Yx)=>{"use strict";var Yq={parse:{prelude:null,block(){return this.Block(!0)}}};Yx.exports=Yq});var Jx=Y((YU,Xx)=>{"use strict";var za=Me(),Qq={parse:{prelude(){let t=this.createList();switch(this.skipSC(),this.tokenType){case za.String:t.push(this.String());break;case za.Url:case za.Function:t.push(this.Url());break;default:this.error("String or url() is expected")}return(this.lookupNonWSType(0)===za.Ident||this.lookupNonWSType(0)===za.LeftParenthesis)&&t.push(this.MediaQueryList()),t},block:null}};Xx.exports=Qq});var e0=Y((QU,Zx)=>{"use strict";var Xq={parse:{prelude(){return this.createSingleNodeList(this.MediaQueryList())},block(t=!1){return this.Block(t)}}};Zx.exports=Xq});var n0=Y((XU,t0)=>{"use strict";var Jq={parse:{prelude(){return this.createSingleNodeList(this.SelectorList())},block(){return this.Block(!0)}}};t0.exports=Jq});var i0=Y((JU,r0)=>{"use strict";var Zq={parse:{prelude(){return this.createSingleNodeList(this.SelectorList())},block(){return this.Block(!0)}}};r0.exports=Zq});var a0=Y((ZU,s0)=>{"use strict";var Si=Me();function ez(){return this.createSingleNodeList(this.Raw(this.tokenIndex,null,!1))}function tz(){return this.skipSC(),this.tokenType===Si.Ident&&this.lookupNonWSType(1)===Si.Colon?this.createSingleNodeList(this.Declaration()):o0.call(this)}function o0(){let t=this.createList(),e;this.skipSC();e:for(;!this.eof;){switch(this.tokenType){case Si.Comment:case Si.WhiteSpace:this.next();continue;case Si.Function:e=this.Function(ez,this.scope.AtrulePrelude);break;case Si.Ident:e=this.Identifier();break;case Si.LeftParenthesis:e=this.Parentheses(tz,this.scope.AtrulePrelude);break;default:break e}t.push(e)}return t}var nz={parse:{prelude(){let t=o0.call(this);return this.getFirstListNode(t)===null&&this.error("Condition is expected"),t},block(t=!1){return this.Block(t)}}};s0.exports=nz});var c0=Y((e6,l0)=>{"use strict";var rz=Qx(),iz=Jx(),oz=e0(),sz=n0(),az=i0(),lz=a0(),cz={"font-face":rz,import:iz,media:oz,nest:sz,page:az,supports:lz};l0.exports=cz});var d0=Y((t6,f0)=>{"use strict";var Ai={parse(){return this.createSingleNodeList(this.SelectorList())}},Ih={parse(){return this.createSingleNodeList(this.Selector())}},u0={parse(){return this.createSingleNodeList(this.Identifier())}},Mc={parse(){return this.createSingleNodeList(this.Nth())}},uz={dir:u0,has:Ai,lang:u0,matches:Ai,is:Ai,"-moz-any":Ai,"-webkit-any":Ai,where:Ai,not:Ai,"nth-child":Mc,"nth-last-child":Mc,"nth-last-of-type":Mc,"nth-of-type":Mc,slotted:Ih,host:Ih,"host-context":Ih};f0.exports=uz});var h0=Y(qe=>{"use strict";var fz=Pd(),dz=Id(),hz=Bd(),pz=zd(),gz=Rd(),mz=Fd(),yz=_d(),vz=jd(),bz=Wd(),wz=Ud(),xz=$d(),kz=Gd(),Cz=Kd(),Sz=Yd(),Az=Xd(),Tz=Jd(),Lz=Zd(),Ez=eh(),Mz=th(),Dz=nh(),Nz=rh(),Oz=ih(),Pz=oh(),Iz=sh(),Bz=ah(),qz=lh(),zz=ch(),Rz=uh(),Fz=fh(),_z=dh(),jz=hh(),Hz=ph(),Wz=gh(),Uz=mh(),$z=wh(),Gz=xh(),Vz=Ch(),Kz=Ah(),Yz=Mh(),Qz=Dh(),Xz=Nh();qe.AnPlusB=fz.parse;qe.Atrule=dz.parse;qe.AtrulePrelude=hz.parse;qe.AttributeSelector=pz.parse;qe.Block=gz.parse;qe.Brackets=mz.parse;qe.CDC=yz.parse;qe.CDO=vz.parse;qe.ClassSelector=bz.parse;qe.Combinator=wz.parse;qe.Comment=xz.parse;qe.Declaration=kz.parse;qe.DeclarationList=Cz.parse;qe.Dimension=Sz.parse;qe.Function=Az.parse;qe.Hash=Tz.parse;qe.Identifier=Lz.parse;qe.IdSelector=Ez.parse;qe.MediaFeature=Mz.parse;qe.MediaQuery=Dz.parse;qe.MediaQueryList=Nz.parse;qe.NestingSelector=Oz.parse;qe.Nth=Pz.parse;qe.Number=Iz.parse;qe.Operator=Bz.parse;qe.Parentheses=qz.parse;qe.Percentage=zz.parse;qe.PseudoClassSelector=Rz.parse;qe.PseudoElementSelector=Fz.parse;qe.Ratio=_z.parse;qe.Raw=jz.parse;qe.Rule=Hz.parse;qe.Selector=Wz.parse;qe.SelectorList=Uz.parse;qe.String=$z.parse;qe.StyleSheet=Gz.parse;qe.TypeSelector=Vz.parse;qe.UnicodeRange=Kz.parse;qe.Url=Yz.parse;qe.Value=Qz.parse;qe.WhiteSpace=Xz.parse});var g0=Y((r6,p0)=>{"use strict";var Jz=Kx(),Zz=c0(),eR=d0(),tR=h0(),nR={parseContext:{default:"StyleSheet",stylesheet:"StyleSheet",atrule:"Atrule",atrulePrelude(t){return this.AtrulePrelude(t.atrule?String(t.atrule):null)},mediaQueryList:"MediaQueryList",mediaQuery:"MediaQuery",rule:"Rule",selectorList:"SelectorList",selector:"Selector",block(){return this.Block(!0)},declarationList:"DeclarationList",declaration:"Declaration",value:"Value"},scope:Jz,atrule:Zz,pseudo:eR,node:tR};p0.exports=nR});var y0=Y((i6,m0)=>{"use strict";var rR=Oh(),iR={node:rR};m0.exports=iR});var b0=Y((o6,v0)=>{"use strict";var oR=Nd(),sR=Ox(),aR=g0(),lR=y0(),cR=oR({...sR,...aR,...lR});v0.exports=cR});var x0=Y((s6,w0)=>{w0.exports="2.3.1"});var k0=Y(Ra=>{"use strict";var uR=sd(),fR=rc(),dR=mc(),hR=Sd();Ra.SyntaxError=uR.SyntaxError;Ra.generate=fR.generate;Ra.parse=dR.parse;Ra.walk=hR.walk});var S0=Y(C0=>{"use strict";var pR=bi();function Bh(t){let e={};for(let r in t){let i=t[r];i&&(Array.isArray(i)||i instanceof pR.List?i=i.map(Bh):i.constructor===Object&&(i=Bh(i))),e[r]=i}return e}C0.clone=Bh});var E0=Y(qh=>{"use strict";var L0=yn(),A0=ir(),T0=92;function gR(t){let e=t.length-1,r="";for(let i=0;i<t.length;i++){let s=t.charCodeAt(i);if(s===T0){if(i===e)break;if(s=t.charCodeAt(++i),L0.isValidEscape(T0,s)){let a=i-1,f=A0.consumeEscaped(t,a);i=f-1,r+=A0.decodeEscaped(t.substring(a+1,f))}else s===13&&t.charCodeAt(i+1)===10&&i++}else r+=t[i]}return r}function mR(t){let e="";if(t.length===1&&t.charCodeAt(0)===45)return"\\-";for(let r=0;r<t.length;r++){let i=t.charCodeAt(r);if(i===0){e+="\uFFFD";continue}if(i<=31||i===127||i>=48&&i<=57&&(r===0||r===1&&t.charCodeAt(0)===45)){e+="\\"+i.toString(16)+" ";continue}L0.isName(i)?e+=t.charAt(r):e+="\\"+t.charAt(r)}return e}qh.decode=gR;qh.encode=mR});var zh=Y(Ge=>{"use strict";var yR=b0(),vR=x0(),bR=Nd(),wR=bi(),xR=Ed(),kR=k0(),CR=S0(),Dc=ac(),SR=E0(),AR=Ac(),TR=Eh(),LR=Me(),ER=Fs(),MR=Jl(),{tokenize:DR,parse:NR,generate:OR,lexer:PR,createLexer:IR,walk:BR,find:qR,findLast:zR,findAll:RR,toPlainObject:FR,fromPlainObject:_R,fork:jR}=yR;Ge.version=vR.version;Ge.createSyntax=bR;Ge.List=wR.List;Ge.Lexer=xR.Lexer;Ge.definitionSyntax=kR;Ge.clone=CR.clone;Ge.isCustomProperty=Dc.isCustomProperty;Ge.keyword=Dc.keyword;Ge.property=Dc.property;Ge.vendorPrefix=Dc.vendorPrefix;Ge.ident=SR;Ge.string=AR;Ge.url=TR;Ge.tokenTypes=LR;Ge.tokenNames=ER;Ge.TokenStream=MR.TokenStream;Ge.createLexer=IR;Ge.find=qR;Ge.findAll=RR;Ge.findLast=zR;Ge.fork=jR;Ge.fromPlainObject=_R;Ge.generate=OR;Ge.lexer=PR;Ge.parse=NR;Ge.toPlainObject=FR;Ge.tokenize=DR;Ge.walk=BR});var I0={};Ae(I0,{default:()=>$R});function $R(t){t.page.define("default",[{view:"page-header",content:["h1:#.model.name",{view:"block",className:"source",content:['text:"Source: "','link:{ href: source.home, text: "w3c/csswg-drafts" }','text:" commit "',{view:"link",data:"{ text: source.commitShort, href: `${source.home}commit/${source.commit}` }"},{view:"text",when:"source.commitDate",data:'" on " + source.commitDate.datetime()'},"text:` (last check at ${source.checkDate.datetime()})`"]}]},{view:"context",data:[{title:"Specs",query:"specs.sort(props.title asc)"},{title:"Definitions",query:"defs"},{title:"Productions",query:"prods"},{title:"IDL sections",query:"idls"},{title:"Problem syntaxes",query:`defs.[definitionSyntax.value.error or definitionSyntax.newValues.error] +
prods.[definitionSyntax.error]`}],content:{view:"inline-list",item:"indicator",data:`.({
                label: title,
                value: query.query(#.data, #).size(),
                href: href or pageLink('discovery', { title, query, view })
            })`}},'html:"<br><br>"',{view:"ul",item:'link:{ text: title, href: pageLink("discovery", { ..., noedit: true }) }',data:[{title:"Specs and statuses",query:"specs.sort(props.title ascN)",view:`{
    view: 'ol',
    limit: false,
    item: [
        'auto-link',
        'badge:{ text: props.status or "?", color: props.status.color() }'
    ]
}`},{title:"Problem syntaxes",query:`(defs + prods)
.group(=> definitionSyntax.error or definitionSyntax.value.error).[key]
`,view:`{
    view: 'list',
    item: {
        view: 'expand',
        expanded: true,
        header: 'pre:key',
        content: {
            view: 'list',
            data: 'value',
            item: ['def', 'source:{ content: value or props.value }']
        }
    }
}`},{title:"Missed productions",query:`$knownProds: prods.name + genericProds;

(defs.definitionSyntax.value.syntax + prods.definitionSyntax.syntax)
..(syntaxChildren()).[type="Type" and name not in $knownProds].name`,view:`{
    view: 'ol',
    limit: false,
    item: 'text:"<"+$+">"'
}`},{title:"IDL sections by spec",query:"idls.group(=>source.spec).sort(key.props.title ascN)",view:`{
    view: 'list',
    item: [
        'h2:key.props.title',
        {
            view: 'list',
            data: 'value',
            item: {
                view: 'definition',
                content: 'source:{content}'
            }
        }
    ]
}`}]}])}var B0=pn(()=>{});var q0={};Ae(q0,{default:()=>GR});function GR(t){let e={view:"definition",content:{view:"key-value",data:"props",value:{view:"switch",content:[{when:'key in ["value", "newValues"]',content:"syntax:value"},{content:"pre:value"}]}}};t.page.define("def",{view:"context",data:"defs[=>id = #.id]",content:[{view:"page-header",prelude:`badge:{
                text: source.spec.props.title,
                href: source.spec.id.pageLink("spec"),
                color: "rgba(237, 177, 9, 0.35)"
            }`,content:"h1:props.name"},e,{view:"context",data:"#.data.defs.[props.name = @.props.name and $ != @]",whenData:!0,content:['h2:"Also defined in:"',{view:"list",item:e}]}]})}var z0=pn(()=>{});var R0={};Ae(R0,{default:()=>VR});function VR(t){t.page.define("defs",{view:"context",data:"(defs + prods).[name = #.id]",content:["h1:name",{view:"list",item:{view:"definition",content:[{view:"key-value",when:"props",data:"props",value:{view:"switch",content:[{when:'key in ["value", "newValues"]',content:"syntax:value"},{content:"pre:value"}]}},{view:"syntax",when:'type="prod"',data:"value"}]}}]})}var F0=pn(()=>{});var _0={};Ae(_0,{default:()=>KR});function KR(t){t.page.define("prod",{view:"context",data:"prods[=>id = #.id]",content:[{view:"page-header",prelude:`badge:{
                text: source.spec.props.title,
                href: source.spec.id.pageLink("spec"),
                color: "rgba(237, 177, 9, 0.35)"
            }`,content:"h1:`<${name}>`"},"syntax:value",'h5:"Defined in: " + source.spec.file + " on line " + source.line',{view:"context",data:"#.data.prods.[name = @.name and $ != @].source.spec",content:{view:"context",when:"size()",content:['h5:"Also defined in:"',{view:"ul",item:"auto-link"}]}}]})}var j0=pn(()=>{});var H0={};Ae(H0,{default:()=>YR});function YR(t){t.page.define("spec",{view:"context",data:`specs[=>id = #.id].({
        $spec:$;

        ...,
        defs: @.defs.[source.spec = $spec],
        idls: @.idls.[source.spec = $spec]
    })`,content:[{view:"page-header",prelude:"badge:props | { text: status, color: status.color() }",content:"h1:props.title"},{view:"definition",content:{view:"key-value",data:"props",limit:"=size() > 13 and 10",value:{view:"switch",content:[{when:'key="status"',content:"badge:{ text: value, color: value.color() }"},{when:'key in ["ed", "tr"]',content:{view:"pre",content:"link:{ href: value, external: true }"}},{when:"value.isArray() and value",content:{view:"ul",data:"value",item:"pre"}},{content:"pre:value"}]}}},'h2:"Properties"',{view:"table",when:"defs",data:"defs.props",cols:{el:!1,type:!1,source:!1,id:!1,name:"auto-link",value:"syntax:value"}},{view:"context",data:"idls",whenData:!0,content:['h2:"Interfaces"',{view:"list",item:{view:"definition",content:"source:{content}"}}]}]})}var W0=pn(()=>{});var U0={};Ae(U0,{default:()=>QR});function QR(t){t.view.define("def",[{view:"block",className:"header",content:["auto-link","badge:{ text: type }"]},"spec-location:source"])}var $0=pn(()=>{});var G0={};Ae(G0,{default:()=>XR});function XR(t){t.view.define("definition",function(e,r,i,s){return t.view.render(e,[{view:"header",content:["spec-location:source or $",{view:"badge",when:"type",data:'{ text: type, color: "#d0dde4" }'}]}].concat(r.content||[]),i,s)})}var V0=pn(()=>{});var K0={};Ae(K0,{default:()=>JR});function JR(t){t.view.define("github-link",{view:"link",className:"github-link",data:`{
        external: true,
        href: #.data.source.home + "blob/" + #.data.source.commit + "/" + (spec.file or file) + (line ? "#L" + line : ''),
        text: ' ' // spec.file + ":" + line
    }`},{tag:!1})}var Y0=pn(()=>{});var Q0={};Ae(Q0,{default:()=>ZR});function ZR(t){t.view.define("key-value-item",function(e,r,i,s){let{key:a="text:key",value:f="struct:value"}=r,d=e.appendChild(document.createElement("span")),p=e.appendChild(document.createElement("span"));d.className="view-key-value-item-key",this.render(d,a,i,s),p.className="view-key-value-item-value",this.render(p,f,i,s)},{tag:null}),t.view.define("key-value",function(e,r,i,s){let{itemConfig:a,key:f,value:d,limit:p}=r,g=null;if(Array.isArray(i))g=i;else{g=[];for(let y in i)hasOwnProperty.call(i,y)&&g.push({key:y,value:i[y]})}this.renderList(e,this.composeConfig({view:"key-value-item",key:f,value:d},a),g,s,0,t.view.listLimit(p,25))})}var X0=pn(()=>{});var J0={};Ae(J0,{default:()=>eF});function eF(t){t.view.define("pre",function(e,r,i,s){let{content:a}=r;a?this.render(e,a,i,s):e.textContent=i},{tag:"span"})}var Z0=pn(()=>{});var ek={};Ae(ek,{default:()=>tF});function tF(t){t.view.define("sidebar",{view:"tabs",name:"splitBy",beforeTabs:'text:"Definitions"',tabs:[{value:"byspec",text:"By spec"},{value:"byentry",text:"Alphabetically"}],content:{view:"content-filter",content:[{view:"switch",content:[{when:'#.splitBy="byspec"',content:{view:"list",emptyText:"No matches",data:`
                                specs
                                .sort(props.title asc)
                                .($spec: $;{
                                    ...,
                                    defs: @.defs
                                        .[source.spec = $spec and (no #.filter or name ~= #.filter)]
                                        .sort(name asc, type desc)
                                })
                                .[no #.filter or defs.size() or (#.filter and props.title ~= #.filter)]
                            `,item:{view:"toc-section",className:e=>e.defs.length?"":"empty",header:[{view:"auto-link",content:"text-match:{ text, match: #.filter }"},{view:"pill-badge",when:"defs",data:"{ text: defs.size() }"}],content:{view:"list",emptyText:!1,limit:"= size() | $ % 15 > 3 ? 15 : $",data:"defs",item:[{view:"auto-link",content:"text-match:{ text, match: #.filter }"},"badge:type"]}}}},{when:'#.splitBy="byentry"',content:{view:"list",limit:100,data:`
                                (defs + prods)
                                    .[name ~= #.filter]
                                    .group(=>name)
                                    .({
                                        id: key,
                                        type: value.type,
                                        name: value.name[],
                                        count: value.size()
                                    })
                                    .sort(name asc)
                            `,item:[{view:"link",data:`{
                                        text: name,
                                        href: name.pageLink("defs"),
                                        match: #.filter
                                    }`,content:"text-match"},{view:"block",className:"variants",when:"count > 1",content:"text:`x ${count}`"},{view:"inline-list",data:"type",item:"badge"}]}}]}]}},{tag:!1})}var tk=pn(()=>{});var nk={};Ae(nk,{default:()=>nF});function nF(t){t.view.define("spec-location",[{view:"auto-link",data:"spec",whenData:'$ and (#.page != "spec" or id != #.id)'},"github-link"])}var rk=pn(()=>{});var ik={};Ae(ik,{default:()=>rF});function rF(t){let e=zh();function r(s){return s.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;")}function i(s,a,f){return e.definitionSyntax.generate(s,function(d,p){if(p.type==="Type"||p.type==="Property"){let g=p.type==="Type"?a.prods.find(w=>w.name===p.name):a.defs.find(w=>w.props.name===p.name),y=!g&&a.genericProds.indexOf(p.name)===-1,x=g?p.type==="Type"?`#prod:${g.id}`:`#defs:${g.name}`:!1;d=x?`<a href="${x}" class="view-link${y?" error":""}">${r(d)}</a>`:y?`<span class="error">${r(d)}</span>`:r(d)}return f&&f.type===p.type&&f.name===p.name&&(d=`<span class="match">${d}</span>`),d})}t.view.define("syntax",function(s,a,f,d){let{type:p,match:g,matchType:y,matchName:x}=f||{},{syntax:w}=f||{},k="";if(typeof f=="string"&&(w=f),w){if(typeof w=="string")try{w=e.definitionSyntax.parse(w)}catch(A){s.textContent=A.message,s.classList.add("parse-error");return}k=i(w,d.data,{type:y,name:x})}else g&&(k="generic");s.innerHTML=k},{tag:"span"})}var ok=pn(()=>{});var fr=Y((ig,og)=>{(function(t,e){typeof ig=="object"&&typeof og<"u"?og.exports=e():typeof define=="function"&&define.amd?define(e):(t=t||self,t.CodeMirror=e())})(ig,function(){"use strict";var t=navigator.userAgent,e=navigator.platform,r=/gecko\/\d/i.test(t),i=/MSIE \d/.test(t),s=/Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(t),a=/Edge\/(\d+)/.exec(t),f=i||s||a,d=f&&(i?document.documentMode||6:+(a||s)[1]),p=!a&&/WebKit\//.test(t),g=p&&/Qt\/\d+\.\d+/.test(t),y=!a&&/Chrome\/(\d+)/.exec(t),x=y&&+y[1],w=/Opera\//.test(t),k=/Apple Computer/.test(navigator.vendor),A=/Mac OS X 1\d\D([8-9]|\d\d)\D/.test(t),M=/PhantomJS/.test(t),D=k&&(/Mobile\/\w+/.test(t)||navigator.maxTouchPoints>2),O=/Android/.test(t),L=D||O||/webOS|BlackBerry|Opera Mini|Opera Mobi|IEMobile/i.test(t),E=D||/Mac/.test(e),N=/\bCrOS\b/.test(t),B=/win/i.test(e),I=w&&t.match(/Version\/(\d*\.\d*)/);I&&(I=Number(I[1])),I&&I>=15&&(w=!1,p=!0);var R=E&&(g||w&&(I==null||I<12.11)),j=r||f&&d>=9;function F(n){return new RegExp("(^|\\s)"+n+"(?:$|\\s)\\s*")}var se=function(n,o){var c=n.className,l=F(o).exec(c);if(l){var u=c.slice(l.index+l[0].length);n.className=c.slice(0,l.index)+(u?l[1]+u:"")}};function W(n){for(var o=n.childNodes.length;o>0;--o)n.removeChild(n.firstChild);return n}function J(n,o){return W(n).appendChild(o)}function T(n,o,c,l){var u=document.createElement(n);if(c&&(u.className=c),l&&(u.style.cssText=l),typeof o=="string")u.appendChild(document.createTextNode(o));else if(o)for(var h=0;h<o.length;++h)u.appendChild(o[h]);return u}function ne(n,o,c,l){var u=T(n,o,c,l);return u.setAttribute("role","presentation"),u}var ee;document.createRange?ee=function(n,o,c,l){var u=document.createRange();return u.setEnd(l||n,c),u.setStart(n,o),u}:ee=function(n,o,c){var l=document.body.createTextRange();try{l.moveToElementText(n.parentNode)}catch{return l}return l.collapse(!0),l.moveEnd("character",c),l.moveStart("character",o),l};function be(n,o){if(o.nodeType==3&&(o=o.parentNode),n.contains)return n.contains(o);do if(o.nodeType==11&&(o=o.host),o==n)return!0;while(o=o.parentNode)}function Re(n){var o=n.ownerDocument||n,c;try{c=n.activeElement}catch{c=o.body||null}for(;c&&c.shadowRoot&&c.shadowRoot.activeElement;)c=c.shadowRoot.activeElement;return c}function Ve(n,o){var c=n.className;F(o).test(c)||(n.className+=(c?" ":"")+o)}function mt(n,o){for(var c=n.split(" "),l=0;l<c.length;l++)c[l]&&!F(c[l]).test(o)&&(o+=" "+c[l]);return o}var Cn=function(n){n.select()};D?Cn=function(n){n.selectionStart=0,n.selectionEnd=n.value.length}:f&&(Cn=function(n){try{n.select()}catch{}});function Lt(n){return n.display.wrapper.ownerDocument}function te(n){return le(n.display.wrapper)}function le(n){return n.getRootNode?n.getRootNode():n.ownerDocument}function ae(n){return Lt(n).defaultView}function fe(n){var o=Array.prototype.slice.call(arguments,1);return function(){return n.apply(null,o)}}function we(n,o,c){o||(o={});for(var l in n)n.hasOwnProperty(l)&&(c!==!1||!o.hasOwnProperty(l))&&(o[l]=n[l]);return o}function ge(n,o,c,l,u){o==null&&(o=n.search(/[^\s\u00a0]/),o==-1&&(o=n.length));for(var h=l||0,m=u||0;;){var v=n.indexOf("	",h);if(v<0||v>=o)return m+(o-h);m+=v-h,m+=c-m%c,h=v+1}}var he=function(){this.id=null,this.f=null,this.time=0,this.handler=fe(this.onTimeout,this)};he.prototype.onTimeout=function(n){n.id=0,n.time<=+new Date?n.f():setTimeout(n.handler,n.time-+new Date)},he.prototype.set=function(n,o){this.f=o;var c=+new Date+n;(!this.id||c<this.time)&&(clearTimeout(this.id),this.id=setTimeout(this.handler,n),this.time=c)};function ye(n,o){for(var c=0;c<n.length;++c)if(n[c]==o)return c;return-1}var rt=50,zt={toString:function(){return"CodeMirror.Pass"}},bt={scroll:!1},yt={origin:"*mouse"},je={origin:"+move"};function ut(n,o,c){for(var l=0,u=0;;){var h=n.indexOf("	",l);h==-1&&(h=n.length);var m=h-l;if(h==n.length||u+m>=o)return l+Math.min(m,o-u);if(u+=h-l,u+=c-u%c,l=h+1,u>=o)return l}}var Ut=[""];function fn(n){for(;Ut.length<=n;)Ut.push(Fe(Ut)+" ");return Ut[n]}function Fe(n){return n[n.length-1]}function $e(n,o){for(var c=[],l=0;l<n.length;l++)c[l]=o(n[l],l);return c}function $(n,o,c){for(var l=0,u=c(o);l<n.length&&c(n[l])<=u;)l++;n.splice(l,0,o)}function oe(){}function Q(n,o){var c;return Object.create?c=Object.create(n):(oe.prototype=n,c=new oe),o&&we(o,c),c}var _e=/[\u00df\u0587\u0590-\u05f4\u0600-\u06ff\u3040-\u309f\u30a0-\u30ff\u3400-\u4db5\u4e00-\u9fcc\uac00-\ud7af]/;function Dt(n){return/\w/.test(n)||n>"\x80"&&(n.toUpperCase()!=n.toLowerCase()||_e.test(n))}function hr(n,o){return o?o.source.indexOf("\\w")>-1&&Dt(n)?!0:o.test(n):Dt(n)}function ml(n){for(var o in n)if(n.hasOwnProperty(o)&&n[o])return!1;return!0}var pr=/[\u0300-\u036f\u0483-\u0489\u0591-\u05bd\u05bf\u05c1\u05c2\u05c4\u05c5\u05c7\u0610-\u061a\u064b-\u065e\u0670\u06d6-\u06dc\u06de-\u06e4\u06e7\u06e8\u06ea-\u06ed\u0711\u0730-\u074a\u07a6-\u07b0\u07eb-\u07f3\u0816-\u0819\u081b-\u0823\u0825-\u0827\u0829-\u082d\u0900-\u0902\u093c\u0941-\u0948\u094d\u0951-\u0955\u0962\u0963\u0981\u09bc\u09be\u09c1-\u09c4\u09cd\u09d7\u09e2\u09e3\u0a01\u0a02\u0a3c\u0a41\u0a42\u0a47\u0a48\u0a4b-\u0a4d\u0a51\u0a70\u0a71\u0a75\u0a81\u0a82\u0abc\u0ac1-\u0ac5\u0ac7\u0ac8\u0acd\u0ae2\u0ae3\u0b01\u0b3c\u0b3e\u0b3f\u0b41-\u0b44\u0b4d\u0b56\u0b57\u0b62\u0b63\u0b82\u0bbe\u0bc0\u0bcd\u0bd7\u0c3e-\u0c40\u0c46-\u0c48\u0c4a-\u0c4d\u0c55\u0c56\u0c62\u0c63\u0cbc\u0cbf\u0cc2\u0cc6\u0ccc\u0ccd\u0cd5\u0cd6\u0ce2\u0ce3\u0d3e\u0d41-\u0d44\u0d4d\u0d57\u0d62\u0d63\u0dca\u0dcf\u0dd2-\u0dd4\u0dd6\u0ddf\u0e31\u0e34-\u0e3a\u0e47-\u0e4e\u0eb1\u0eb4-\u0eb9\u0ebb\u0ebc\u0ec8-\u0ecd\u0f18\u0f19\u0f35\u0f37\u0f39\u0f71-\u0f7e\u0f80-\u0f84\u0f86\u0f87\u0f90-\u0f97\u0f99-\u0fbc\u0fc6\u102d-\u1030\u1032-\u1037\u1039\u103a\u103d\u103e\u1058\u1059\u105e-\u1060\u1071-\u1074\u1082\u1085\u1086\u108d\u109d\u135f\u1712-\u1714\u1732-\u1734\u1752\u1753\u1772\u1773\u17b7-\u17bd\u17c6\u17c9-\u17d3\u17dd\u180b-\u180d\u18a9\u1920-\u1922\u1927\u1928\u1932\u1939-\u193b\u1a17\u1a18\u1a56\u1a58-\u1a5e\u1a60\u1a62\u1a65-\u1a6c\u1a73-\u1a7c\u1a7f\u1b00-\u1b03\u1b34\u1b36-\u1b3a\u1b3c\u1b42\u1b6b-\u1b73\u1b80\u1b81\u1ba2-\u1ba5\u1ba8\u1ba9\u1c2c-\u1c33\u1c36\u1c37\u1cd0-\u1cd2\u1cd4-\u1ce0\u1ce2-\u1ce8\u1ced\u1dc0-\u1de6\u1dfd-\u1dff\u200c\u200d\u20d0-\u20f0\u2cef-\u2cf1\u2de0-\u2dff\u302a-\u302f\u3099\u309a\ua66f-\ua672\ua67c\ua67d\ua6f0\ua6f1\ua802\ua806\ua80b\ua825\ua826\ua8c4\ua8e0-\ua8f1\ua926-\ua92d\ua947-\ua951\ua980-\ua982\ua9b3\ua9b6-\ua9b9\ua9bc\uaa29-\uaa2e\uaa31\uaa32\uaa35\uaa36\uaa43\uaa4c\uaab0\uaab2-\uaab4\uaab7\uaab8\uaabe\uaabf\uaac1\uabe5\uabe8\uabed\udc00-\udfff\ufb1e\ufe00-\ufe0f\ufe20-\ufe26\uff9e\uff9f]/;function ft(n){return n.charCodeAt(0)>=768&&pr.test(n)}function Or(n,o,c){for(;(c<0?o>0:o<n.length)&&ft(n.charAt(o));)o+=c;return o}function Jn(n,o,c){for(var l=o>c?-1:1;;){if(o==c)return o;var u=(o+c)/2,h=l<0?Math.ceil(u):Math.floor(u);if(h==o)return n(h)?o:c;n(h)?c=h:o=h+l}}function Pr(n,o,c,l){if(!n)return l(o,c,"ltr",0);for(var u=!1,h=0;h<n.length;++h){var m=n[h];(m.from<c&&m.to>o||o==c&&m.to==o)&&(l(Math.max(m.from,o),Math.min(m.to,c),m.level==1?"rtl":"ltr",h),u=!0)}u||l(o,c,"ltr")}var ai=null;function Ir(n,o,c){var l;ai=null;for(var u=0;u<n.length;++u){var h=n[u];if(h.from<o&&h.to>o)return u;h.to==o&&(h.from!=h.to&&c=="before"?l=u:ai=u),h.from==o&&(h.from!=h.to&&c!="before"?l=u:ai=u)}return l??ai}var Lu=function(){var n="bbbbbbbbbtstwsbbbbbbbbbbbbbbssstwNN%%%NNNNNN,N,N1111111111NNNNNNNLLLLLLLLLLLLLLLLLLLLLLLLLLNNNNNNLLLLLLLLLLLLLLLLLLLLLLLLLLNNNNbbbbbbsbbbbbbbbbbbbbbbbbbbbbbbbbb,N%%%%NNNNLNNNNN%%11NLNNN1LNNNNNLLLLLLLLLLLLLLLLLLLLLLLNLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLN",o="nnnnnnNNr%%r,rNNmmmmmmmmmmmrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrmmmmmmmmmmmmmmmmmmmmmnnnnnnnnnn%nnrrrmrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrmmmmmmmnNmmmmmmrrmmNmmmmrr1111111111";function c(C){return C<=247?n.charAt(C):1424<=C&&C<=1524?"R":1536<=C&&C<=1785?o.charAt(C-1536):1774<=C&&C<=2220?"r":8192<=C&&C<=8203?"w":C==8204?"b":"L"}var l=/[\u0590-\u05f4\u0600-\u06ff\u0700-\u08ac]/,u=/[stwN]/,h=/[LRr]/,m=/[Lb1n]/,v=/[1n]/;function b(C,P,z){this.level=C,this.from=P,this.to=z}return function(C,P){var z=P=="ltr"?"L":"R";if(C.length==0||P=="ltr"&&!l.test(C))return!1;for(var H=C.length,_=[],K=0;K<H;++K)_.push(c(C.charCodeAt(K)));for(var Z=0,ie=z;Z<H;++Z){var ce=_[Z];ce=="m"?_[Z]=ie:ie=ce}for(var pe=0,ue=z;pe<H;++pe){var me=_[pe];me=="1"&&ue=="r"?_[pe]="n":h.test(me)&&(ue=me,me=="r"&&(_[pe]="R"))}for(var Ee=1,Te=_[0];Ee<H-1;++Ee){var Ie=_[Ee];Ie=="+"&&Te=="1"&&_[Ee+1]=="1"?_[Ee]="1":Ie==","&&Te==_[Ee+1]&&(Te=="1"||Te=="n")&&(_[Ee]=Te),Te=Ie}for(var Ke=0;Ke<H;++Ke){var St=_[Ke];if(St==",")_[Ke]="N";else if(St=="%"){var tt=void 0;for(tt=Ke+1;tt<H&&_[tt]=="%";++tt);for(var sn=Ke&&_[Ke-1]=="!"||tt<H&&_[tt]=="1"?"1":"N",Yt=Ke;Yt<tt;++Yt)_[Yt]=sn;Ke=tt-1}}for(var dt=0,Qt=z;dt<H;++dt){var Et=_[dt];Qt=="L"&&Et=="1"?_[dt]="L":h.test(Et)&&(Qt=Et)}for(var vt=0;vt<H;++vt)if(u.test(_[vt])){var ht=void 0;for(ht=vt+1;ht<H&&u.test(_[ht]);++ht);for(var at=(vt?_[vt-1]:z)=="L",Xt=(ht<H?_[ht]:z)=="L",fo=at==Xt?at?"L":"R":z,Vr=vt;Vr<ht;++Vr)_[Vr]=fo;vt=ht-1}for(var It=[],rr,At=0;At<H;)if(m.test(_[At])){var kf=At;for(++At;At<H&&m.test(_[At]);++At);It.push(new b(0,kf,At))}else{var kr=At,yi=It.length,vi=P=="rtl"?1:0;for(++At;At<H&&_[At]!="L";++At);for(var Ft=kr;Ft<At;)if(v.test(_[Ft])){kr<Ft&&(It.splice(yi,0,new b(1,kr,Ft)),yi+=vi);var ho=Ft;for(++Ft;Ft<At&&v.test(_[Ft]);++Ft);It.splice(yi,0,new b(2,ho,Ft)),yi+=vi,kr=Ft}else++Ft;kr<At&&It.splice(yi,0,new b(1,kr,At))}return P=="ltr"&&(It[0].level==1&&(rr=C.match(/^\s+/))&&(It[0].from=rr[0].length,It.unshift(new b(0,0,rr[0].length))),Fe(It).level==1&&(rr=C.match(/\s+$/))&&(Fe(It).to-=rr[0].length,It.push(new b(0,H-rr[0].length,H)))),P=="rtl"?It.reverse():It}}();function ze(n,o){var c=n.order;return c==null&&(c=n.order=Lu(n.text,o)),c}var yl=[],Le=function(n,o,c){if(n.addEventListener)n.addEventListener(o,c,!1);else if(n.attachEvent)n.attachEvent("on"+o,c);else{var l=n._handlers||(n._handlers={});l[o]=(l[o]||yl).concat(c)}};function gr(n,o){return n._handlers&&n._handlers[o]||yl}function Nt(n,o,c){if(n.removeEventListener)n.removeEventListener(o,c,!1);else if(n.detachEvent)n.detachEvent("on"+o,c);else{var l=n._handlers,u=l&&l[o];if(u){var h=ye(u,c);h>-1&&(l[o]=u.slice(0,h).concat(u.slice(h+1)))}}}function it(n,o){var c=gr(n,o);if(c.length)for(var l=Array.prototype.slice.call(arguments,2),u=0;u<c.length;++u)c[u].apply(null,l)}function ot(n,o,c){return typeof o=="string"&&(o={type:o,preventDefault:function(){this.defaultPrevented=!0}}),it(n,c||o.type,n,o),$t(o)||o.codemirrorIgnore}function Sn(n){var o=n._handlers&&n._handlers.cursorActivity;if(o)for(var c=n.curOp.cursorActivityHandlers||(n.curOp.cursorActivityHandlers=[]),l=0;l<o.length;++l)ye(c,o[l])==-1&&c.push(o[l])}function rn(n,o){return gr(n,o).length>0}function Bn(n){n.prototype.on=function(o,c){Le(this,o,c)},n.prototype.off=function(o,c){Nt(this,o,c)}}function Ot(n){n.preventDefault?n.preventDefault():n.returnValue=!1}function _i(n){n.stopPropagation?n.stopPropagation():n.cancelBubble=!0}function $t(n){return n.defaultPrevented!=null?n.defaultPrevented:n.returnValue==!1}function Br(n){Ot(n),_i(n)}function as(n){return n.target||n.srcElement}function qn(n){var o=n.which;return o==null&&(n.button&1?o=1:n.button&2?o=3:n.button&4&&(o=2)),E&&n.ctrlKey&&o==1&&(o=3),o}var Eu=function(){if(f&&d<9)return!1;var n=T("div");return"draggable"in n||"dragDrop"in n}(),ji;function vl(n){if(ji==null){var o=T("span","\u200B");J(n,T("span",[o,document.createTextNode("x")])),n.firstChild.offsetHeight!=0&&(ji=o.offsetWidth<=1&&o.offsetHeight>2&&!(f&&d<8))}var c=ji?T("span","\u200B"):T("span","\xA0",null,"display: inline-block; width: 1px; margin-right: -1px");return c.setAttribute("cm-text",""),c}var ls;function qr(n){if(ls!=null)return ls;var o=J(n,document.createTextNode("A\u062EA")),c=ee(o,0,1).getBoundingClientRect(),l=ee(o,1,2).getBoundingClientRect();return W(n),!c||c.left==c.right?!1:ls=l.right-c.right<3}var An=`

b`.split(/\n/).length!=3?function(n){for(var o=0,c=[],l=n.length;o<=l;){var u=n.indexOf(`
`,o);u==-1&&(u=n.length);var h=n.slice(o,n.charAt(u-1)=="\r"?u-1:u),m=h.indexOf("\r");m!=-1?(c.push(h.slice(0,m)),o+=m+1):(c.push(h),o=u+1)}return c}:function(n){return n.split(/\r\n?|\n/)},zr=window.getSelection?function(n){try{return n.selectionStart!=n.selectionEnd}catch{return!1}}:function(n){var o;try{o=n.ownerDocument.selection.createRange()}catch{}return!o||o.parentElement()!=n?!1:o.compareEndPoints("StartToEnd",o)!=0},bl=function(){var n=T("div");return"oncopy"in n?!0:(n.setAttribute("oncopy","return;"),typeof n.oncopy=="function")}(),zn=null;function Mu(n){if(zn!=null)return zn;var o=J(n,T("span","x")),c=o.getBoundingClientRect(),l=ee(o,0,1).getBoundingClientRect();return zn=Math.abs(c.left-l.left)>1}var Hi={},Rn={};function Fn(n,o){arguments.length>2&&(o.dependencies=Array.prototype.slice.call(arguments,2)),Hi[n]=o}function li(n,o){Rn[n]=o}function Wi(n){if(typeof n=="string"&&Rn.hasOwnProperty(n))n=Rn[n];else if(n&&typeof n.name=="string"&&Rn.hasOwnProperty(n.name)){var o=Rn[n.name];typeof o=="string"&&(o={name:o}),n=Q(o,n),n.name=o.name}else{if(typeof n=="string"&&/^[\w\-]+\/[\w\-]+\+xml$/.test(n))return Wi("application/xml");if(typeof n=="string"&&/^[\w\-]+\/[\w\-]+\+json$/.test(n))return Wi("application/json")}return typeof n=="string"?{name:n}:n||{name:"null"}}function Ui(n,o){o=Wi(o);var c=Hi[o.name];if(!c)return Ui(n,"text/plain");var l=c(n,o);if(Rr.hasOwnProperty(o.name)){var u=Rr[o.name];for(var h in u)u.hasOwnProperty(h)&&(l.hasOwnProperty(h)&&(l["_"+h]=l[h]),l[h]=u[h])}if(l.name=o.name,o.helperType&&(l.helperType=o.helperType),o.modeProps)for(var m in o.modeProps)l[m]=o.modeProps[m];return l}var Rr={};function $i(n,o){var c=Rr.hasOwnProperty(n)?Rr[n]:Rr[n]={};we(o,c)}function Zn(n,o){if(o===!0)return o;if(n.copyState)return n.copyState(o);var c={};for(var l in o){var u=o[l];u instanceof Array&&(u=u.concat([])),c[l]=u}return c}function cs(n,o){for(var c;n.innerMode&&(c=n.innerMode(o),!(!c||c.mode==n));)o=c.state,n=c.mode;return c||{mode:n,state:o}}function Gi(n,o,c){return n.startState?n.startState(o,c):!0}var st=function(n,o,c){this.pos=this.start=0,this.string=n,this.tabSize=o||8,this.lastColumnPos=this.lastColumnValue=0,this.lineStart=0,this.lineOracle=c};st.prototype.eol=function(){return this.pos>=this.string.length},st.prototype.sol=function(){return this.pos==this.lineStart},st.prototype.peek=function(){return this.string.charAt(this.pos)||void 0},st.prototype.next=function(){if(this.pos<this.string.length)return this.string.charAt(this.pos++)},st.prototype.eat=function(n){var o=this.string.charAt(this.pos),c;if(typeof n=="string"?c=o==n:c=o&&(n.test?n.test(o):n(o)),c)return++this.pos,o},st.prototype.eatWhile=function(n){for(var o=this.pos;this.eat(n););return this.pos>o},st.prototype.eatSpace=function(){for(var n=this.pos;/[\s\u00a0]/.test(this.string.charAt(this.pos));)++this.pos;return this.pos>n},st.prototype.skipToEnd=function(){this.pos=this.string.length},st.prototype.skipTo=function(n){var o=this.string.indexOf(n,this.pos);if(o>-1)return this.pos=o,!0},st.prototype.backUp=function(n){this.pos-=n},st.prototype.column=function(){return this.lastColumnPos<this.start&&(this.lastColumnValue=ge(this.string,this.start,this.tabSize,this.lastColumnPos,this.lastColumnValue),this.lastColumnPos=this.start),this.lastColumnValue-(this.lineStart?ge(this.string,this.lineStart,this.tabSize):0)},st.prototype.indentation=function(){return ge(this.string,null,this.tabSize)-(this.lineStart?ge(this.string,this.lineStart,this.tabSize):0)},st.prototype.match=function(n,o,c){if(typeof n=="string"){var l=function(m){return c?m.toLowerCase():m},u=this.string.substr(this.pos,n.length);if(l(u)==l(n))return o!==!1&&(this.pos+=n.length),!0}else{var h=this.string.slice(this.pos).match(n);return h&&h.index>0?null:(h&&o!==!1&&(this.pos+=h[0].length),h)}},st.prototype.current=function(){return this.string.slice(this.start,this.pos)},st.prototype.hideFirstChars=function(n,o){this.lineStart+=n;try{return o()}finally{this.lineStart-=n}},st.prototype.lookAhead=function(n){var o=this.lineOracle;return o&&o.lookAhead(n)},st.prototype.baseToken=function(){var n=this.lineOracle;return n&&n.baseToken(this.pos)};function ke(n,o){if(o-=n.first,o<0||o>=n.size)throw new Error("There is no line "+(o+n.first)+" in the document.");for(var c=n;!c.lines;)for(var l=0;;++l){var u=c.children[l],h=u.chunkSize();if(o<h){c=u;break}o-=h}return c.lines[o]}function mr(n,o,c){var l=[],u=o.line;return n.iter(o.line,c.line+1,function(h){var m=h.text;u==c.line&&(m=m.slice(0,c.ch)),u==o.line&&(m=m.slice(o.ch)),l.push(m),++u}),l}function us(n,o,c){var l=[];return n.iter(o,c,function(u){l.push(u.text)}),l}function dn(n,o){var c=o-n.height;if(c)for(var l=n;l;l=l.parent)l.height+=c}function S(n){if(n.parent==null)return null;for(var o=n.parent,c=ye(o.lines,n),l=o.parent;l;o=l,l=l.parent)for(var u=0;l.children[u]!=o;++u)c+=l.children[u].chunkSize();return c+o.first}function q(n,o){var c=n.first;e:do{for(var l=0;l<n.children.length;++l){var u=n.children[l],h=u.height;if(o<h){n=u;continue e}o-=h,c+=u.chunkSize()}return c}while(!n.lines);for(var m=0;m<n.lines.length;++m){var v=n.lines[m],b=v.height;if(o<b)break;o-=b}return c+m}function X(n,o){return o>=n.first&&o<n.first+n.size}function re(n,o){return String(n.lineNumberFormatter(o+n.firstLineNumber))}function G(n,o,c){if(c===void 0&&(c=null),!(this instanceof G))return new G(n,o,c);this.line=n,this.ch=o,this.sticky=c}function de(n,o){return n.line-o.line||n.ch-o.ch}function He(n,o){return n.sticky==o.sticky&&de(n,o)==0}function wt(n){return G(n.line,n.ch)}function Gt(n,o){return de(n,o)<0?o:n}function Vi(n,o){return de(n,o)<0?n:o}function cm(n,o){return Math.max(n.first,Math.min(o,n.first+n.size-1))}function Oe(n,o){if(o.line<n.first)return G(n.first,0);var c=n.first+n.size-1;return o.line>c?G(c,ke(n,c).text.length):WT(o,ke(n,o.line).text.length)}function WT(n,o){var c=n.ch;return c==null||c>o?G(n.line,o):c<0?G(n.line,0):n}function um(n,o){for(var c=[],l=0;l<o.length;l++)c[l]=Oe(n,o[l]);return c}var wl=function(n,o){this.state=n,this.lookAhead=o},er=function(n,o,c,l){this.state=o,this.doc=n,this.line=c,this.maxLookAhead=l||0,this.baseTokens=null,this.baseTokenPos=1};er.prototype.lookAhead=function(n){var o=this.doc.getLine(this.line+n);return o!=null&&n>this.maxLookAhead&&(this.maxLookAhead=n),o},er.prototype.baseToken=function(n){if(!this.baseTokens)return null;for(;this.baseTokens[this.baseTokenPos]<=n;)this.baseTokenPos+=2;var o=this.baseTokens[this.baseTokenPos+1];return{type:o&&o.replace(/( |^)overlay .*/,""),size:this.baseTokens[this.baseTokenPos]-n}},er.prototype.nextLine=function(){this.line++,this.maxLookAhead>0&&this.maxLookAhead--},er.fromSaved=function(n,o,c){return o instanceof wl?new er(n,Zn(n.mode,o.state),c,o.lookAhead):new er(n,Zn(n.mode,o),c)},er.prototype.save=function(n){var o=n!==!1?Zn(this.doc.mode,this.state):this.state;return this.maxLookAhead>0?new wl(o,this.maxLookAhead):o};function fm(n,o,c,l){var u=[n.state.modeGen],h={};ym(n,o.text,n.doc.mode,c,function(C,P){return u.push(C,P)},h,l);for(var m=c.state,v=function(C){c.baseTokens=u;var P=n.state.overlays[C],z=1,H=0;c.state=!0,ym(n,o.text,P.mode,c,function(_,K){for(var Z=z;H<_;){var ie=u[z];ie>_&&u.splice(z,1,_,u[z+1],ie),z+=2,H=Math.min(_,ie)}if(K)if(P.opaque)u.splice(Z,z-Z,_,"overlay "+K),z=Z+2;else for(;Z<z;Z+=2){var ce=u[Z+1];u[Z+1]=(ce?ce+" ":"")+"overlay "+K}},h),c.state=m,c.baseTokens=null,c.baseTokenPos=1},b=0;b<n.state.overlays.length;++b)v(b);return{styles:u,classes:h.bgClass||h.textClass?h:null}}function dm(n,o,c){if(!o.styles||o.styles[0]!=n.state.modeGen){var l=fs(n,S(o)),u=o.text.length>n.options.maxHighlightLength&&Zn(n.doc.mode,l.state),h=fm(n,o,l);u&&(l.state=u),o.stateAfter=l.save(!u),o.styles=h.styles,h.classes?o.styleClasses=h.classes:o.styleClasses&&(o.styleClasses=null),c===n.doc.highlightFrontier&&(n.doc.modeFrontier=Math.max(n.doc.modeFrontier,++n.doc.highlightFrontier))}return o.styles}function fs(n,o,c){var l=n.doc,u=n.display;if(!l.mode.startState)return new er(l,!0,o);var h=UT(n,o,c),m=h>l.first&&ke(l,h-1).stateAfter,v=m?er.fromSaved(l,m,h):new er(l,Gi(l.mode),h);return l.iter(h,o,function(b){Du(n,b.text,v);var C=v.line;b.stateAfter=C==o-1||C%5==0||C>=u.viewFrom&&C<u.viewTo?v.save():null,v.nextLine()}),c&&(l.modeFrontier=v.line),v}function Du(n,o,c,l){var u=n.doc.mode,h=new st(o,n.options.tabSize,c);for(h.start=h.pos=l||0,o==""&&hm(u,c.state);!h.eol();)Nu(u,h,c.state),h.start=h.pos}function hm(n,o){if(n.blankLine)return n.blankLine(o);if(n.innerMode){var c=cs(n,o);if(c.mode.blankLine)return c.mode.blankLine(c.state)}}function Nu(n,o,c,l){for(var u=0;u<10;u++){l&&(l[0]=cs(n,c).mode);var h=n.token(o,c);if(o.pos>o.start)return h}throw new Error("Mode "+n.name+" failed to advance stream.")}var pm=function(n,o,c){this.start=n.start,this.end=n.pos,this.string=n.current(),this.type=o||null,this.state=c};function gm(n,o,c,l){var u=n.doc,h=u.mode,m;o=Oe(u,o);var v=ke(u,o.line),b=fs(n,o.line,c),C=new st(v.text,n.options.tabSize,b),P;for(l&&(P=[]);(l||C.pos<o.ch)&&!C.eol();)C.start=C.pos,m=Nu(h,C,b.state),l&&P.push(new pm(C,m,Zn(u.mode,b.state)));return l?P:new pm(C,m,b.state)}function mm(n,o){if(n)for(;;){var c=n.match(/(?:^|\s+)line-(background-)?(\S+)/);if(!c)break;n=n.slice(0,c.index)+n.slice(c.index+c[0].length);var l=c[1]?"bgClass":"textClass";o[l]==null?o[l]=c[2]:new RegExp("(?:^|\\s)"+c[2]+"(?:$|\\s)").test(o[l])||(o[l]+=" "+c[2])}return n}function ym(n,o,c,l,u,h,m){var v=c.flattenSpans;v==null&&(v=n.options.flattenSpans);var b=0,C=null,P=new st(o,n.options.tabSize,l),z,H=n.options.addModeClass&&[null];for(o==""&&mm(hm(c,l.state),h);!P.eol();){if(P.pos>n.options.maxHighlightLength?(v=!1,m&&Du(n,o,l,P.pos),P.pos=o.length,z=null):z=mm(Nu(c,P,l.state,H),h),H){var _=H[0].name;_&&(z="m-"+(z?_+" "+z:_))}if(!v||C!=z){for(;b<P.start;)b=Math.min(P.start,b+5e3),u(b,C);C=z}P.start=P.pos}for(;b<P.pos;){var K=Math.min(P.pos,b+5e3);u(K,C),b=K}}function UT(n,o,c){for(var l,u,h=n.doc,m=c?-1:o-(n.doc.mode.innerMode?1e3:100),v=o;v>m;--v){if(v<=h.first)return h.first;var b=ke(h,v-1),C=b.stateAfter;if(C&&(!c||v+(C instanceof wl?C.lookAhead:0)<=h.modeFrontier))return v;var P=ge(b.text,null,n.options.tabSize);(u==null||l>P)&&(u=v-1,l=P)}return u}function $T(n,o){if(n.modeFrontier=Math.min(n.modeFrontier,o),!(n.highlightFrontier<o-10)){for(var c=n.first,l=o-1;l>c;l--){var u=ke(n,l).stateAfter;if(u&&(!(u instanceof wl)||l+u.lookAhead<o)){c=l+1;break}}n.highlightFrontier=Math.min(n.highlightFrontier,c)}}var vm=!1,yr=!1;function GT(){vm=!0}function VT(){yr=!0}function xl(n,o,c){this.marker=n,this.from=o,this.to=c}function ds(n,o){if(n)for(var c=0;c<n.length;++c){var l=n[c];if(l.marker==o)return l}}function KT(n,o){for(var c,l=0;l<n.length;++l)n[l]!=o&&(c||(c=[])).push(n[l]);return c}function YT(n,o,c){var l=c&&window.WeakSet&&(c.markedSpans||(c.markedSpans=new WeakSet));l&&n.markedSpans&&l.has(n.markedSpans)?n.markedSpans.push(o):(n.markedSpans=n.markedSpans?n.markedSpans.concat([o]):[o],l&&l.add(n.markedSpans)),o.marker.attachLine(n)}function QT(n,o,c){var l;if(n)for(var u=0;u<n.length;++u){var h=n[u],m=h.marker,v=h.from==null||(m.inclusiveLeft?h.from<=o:h.from<o);if(v||h.from==o&&m.type=="bookmark"&&(!c||!h.marker.insertLeft)){var b=h.to==null||(m.inclusiveRight?h.to>=o:h.to>o);(l||(l=[])).push(new xl(m,h.from,b?null:h.to))}}return l}function XT(n,o,c){var l;if(n)for(var u=0;u<n.length;++u){var h=n[u],m=h.marker,v=h.to==null||(m.inclusiveRight?h.to>=o:h.to>o);if(v||h.from==o&&m.type=="bookmark"&&(!c||h.marker.insertLeft)){var b=h.from==null||(m.inclusiveLeft?h.from<=o:h.from<o);(l||(l=[])).push(new xl(m,b?null:h.from-o,h.to==null?null:h.to-o))}}return l}function Ou(n,o){if(o.full)return null;var c=X(n,o.from.line)&&ke(n,o.from.line).markedSpans,l=X(n,o.to.line)&&ke(n,o.to.line).markedSpans;if(!c&&!l)return null;var u=o.from.ch,h=o.to.ch,m=de(o.from,o.to)==0,v=QT(c,u,m),b=XT(l,h,m),C=o.text.length==1,P=Fe(o.text).length+(C?u:0);if(v)for(var z=0;z<v.length;++z){var H=v[z];if(H.to==null){var _=ds(b,H.marker);_?C&&(H.to=_.to==null?null:_.to+P):H.to=u}}if(b)for(var K=0;K<b.length;++K){var Z=b[K];if(Z.to!=null&&(Z.to+=P),Z.from==null){var ie=ds(v,Z.marker);ie||(Z.from=P,C&&(v||(v=[])).push(Z))}else Z.from+=P,C&&(v||(v=[])).push(Z)}v&&(v=bm(v)),b&&b!=v&&(b=bm(b));var ce=[v];if(!C){var pe=o.text.length-2,ue;if(pe>0&&v)for(var me=0;me<v.length;++me)v[me].to==null&&(ue||(ue=[])).push(new xl(v[me].marker,null,null));for(var Ee=0;Ee<pe;++Ee)ce.push(ue);ce.push(b)}return ce}function bm(n){for(var o=0;o<n.length;++o){var c=n[o];c.from!=null&&c.from==c.to&&c.marker.clearWhenEmpty!==!1&&n.splice(o--,1)}return n.length?n:null}function JT(n,o,c){var l=null;if(n.iter(o.line,c.line+1,function(_){if(_.markedSpans)for(var K=0;K<_.markedSpans.length;++K){var Z=_.markedSpans[K].marker;Z.readOnly&&(!l||ye(l,Z)==-1)&&(l||(l=[])).push(Z)}}),!l)return null;for(var u=[{from:o,to:c}],h=0;h<l.length;++h)for(var m=l[h],v=m.find(0),b=0;b<u.length;++b){var C=u[b];if(!(de(C.to,v.from)<0||de(C.from,v.to)>0)){var P=[b,1],z=de(C.from,v.from),H=de(C.to,v.to);(z<0||!m.inclusiveLeft&&!z)&&P.push({from:C.from,to:v.from}),(H>0||!m.inclusiveRight&&!H)&&P.push({from:v.to,to:C.to}),u.splice.apply(u,P),b+=P.length-3}}return u}function wm(n){var o=n.markedSpans;if(o){for(var c=0;c<o.length;++c)o[c].marker.detachLine(n);n.markedSpans=null}}function xm(n,o){if(o){for(var c=0;c<o.length;++c)o[c].marker.attachLine(n);n.markedSpans=o}}function kl(n){return n.inclusiveLeft?-1:0}function Cl(n){return n.inclusiveRight?1:0}function Pu(n,o){var c=n.lines.length-o.lines.length;if(c!=0)return c;var l=n.find(),u=o.find(),h=de(l.from,u.from)||kl(n)-kl(o);if(h)return-h;var m=de(l.to,u.to)||Cl(n)-Cl(o);return m||o.id-n.id}function km(n,o){var c=yr&&n.markedSpans,l;if(c)for(var u=void 0,h=0;h<c.length;++h)u=c[h],u.marker.collapsed&&(o?u.from:u.to)==null&&(!l||Pu(l,u.marker)<0)&&(l=u.marker);return l}function Cm(n){return km(n,!0)}function Sl(n){return km(n,!1)}function ZT(n,o){var c=yr&&n.markedSpans,l;if(c)for(var u=0;u<c.length;++u){var h=c[u];h.marker.collapsed&&(h.from==null||h.from<o)&&(h.to==null||h.to>o)&&(!l||Pu(l,h.marker)<0)&&(l=h.marker)}return l}function Sm(n,o,c,l,u){var h=ke(n,o),m=yr&&h.markedSpans;if(m)for(var v=0;v<m.length;++v){var b=m[v];if(b.marker.collapsed){var C=b.marker.find(0),P=de(C.from,c)||kl(b.marker)-kl(u),z=de(C.to,l)||Cl(b.marker)-Cl(u);if(!(P>=0&&z<=0||P<=0&&z>=0)&&(P<=0&&(b.marker.inclusiveRight&&u.inclusiveLeft?de(C.to,c)>=0:de(C.to,c)>0)||P>=0&&(b.marker.inclusiveRight&&u.inclusiveLeft?de(C.from,l)<=0:de(C.from,l)<0)))return!0}}}function _n(n){for(var o;o=Cm(n);)n=o.find(-1,!0).line;return n}function eL(n){for(var o;o=Sl(n);)n=o.find(1,!0).line;return n}function tL(n){for(var o,c;o=Sl(n);)n=o.find(1,!0).line,(c||(c=[])).push(n);return c}function Iu(n,o){var c=ke(n,o),l=_n(c);return c==l?o:S(l)}function Am(n,o){if(o>n.lastLine())return o;var c=ke(n,o),l;if(!Fr(n,c))return o;for(;l=Sl(c);)c=l.find(1,!0).line;return S(c)+1}function Fr(n,o){var c=yr&&o.markedSpans;if(c){for(var l=void 0,u=0;u<c.length;++u)if(l=c[u],!!l.marker.collapsed){if(l.from==null)return!0;if(!l.marker.widgetNode&&l.from==0&&l.marker.inclusiveLeft&&Bu(n,o,l))return!0}}}function Bu(n,o,c){if(c.to==null){var l=c.marker.find(1,!0);return Bu(n,l.line,ds(l.line.markedSpans,c.marker))}if(c.marker.inclusiveRight&&c.to==o.text.length)return!0;for(var u=void 0,h=0;h<o.markedSpans.length;++h)if(u=o.markedSpans[h],u.marker.collapsed&&!u.marker.widgetNode&&u.from==c.to&&(u.to==null||u.to!=c.from)&&(u.marker.inclusiveLeft||c.marker.inclusiveRight)&&Bu(n,o,u))return!0}function vr(n){n=_n(n);for(var o=0,c=n.parent,l=0;l<c.lines.length;++l){var u=c.lines[l];if(u==n)break;o+=u.height}for(var h=c.parent;h;c=h,h=c.parent)for(var m=0;m<h.children.length;++m){var v=h.children[m];if(v==c)break;o+=v.height}return o}function Al(n){if(n.height==0)return 0;for(var o=n.text.length,c,l=n;c=Cm(l);){var u=c.find(0,!0);l=u.from.line,o+=u.from.ch-u.to.ch}for(l=n;c=Sl(l);){var h=c.find(0,!0);o-=l.text.length-h.from.ch,l=h.to.line,o+=l.text.length-h.to.ch}return o}function qu(n){var o=n.display,c=n.doc;o.maxLine=ke(c,c.first),o.maxLineLength=Al(o.maxLine),o.maxLineChanged=!0,c.iter(function(l){var u=Al(l);u>o.maxLineLength&&(o.maxLineLength=u,o.maxLine=l)})}var Ki=function(n,o,c){this.text=n,xm(this,o),this.height=c?c(this):1};Ki.prototype.lineNo=function(){return S(this)},Bn(Ki);function nL(n,o,c,l){n.text=o,n.stateAfter&&(n.stateAfter=null),n.styles&&(n.styles=null),n.order!=null&&(n.order=null),wm(n),xm(n,c);var u=l?l(n):1;u!=n.height&&dn(n,u)}function rL(n){n.parent=null,wm(n)}var iL={},oL={};function Tm(n,o){if(!n||/^\s*$/.test(n))return null;var c=o.addModeClass?oL:iL;return c[n]||(c[n]=n.replace(/\S+/g,"cm-$&"))}function Lm(n,o){var c=ne("span",null,null,p?"padding-right: .1px":null),l={pre:ne("pre",[c],"CodeMirror-line"),content:c,col:0,pos:0,cm:n,trailingSpace:!1,splitSpaces:n.getOption("lineWrapping")};o.measure={};for(var u=0;u<=(o.rest?o.rest.length:0);u++){var h=u?o.rest[u-1]:o.line,m=void 0;l.pos=0,l.addToken=aL,qr(n.display.measure)&&(m=ze(h,n.doc.direction))&&(l.addToken=cL(l.addToken,m)),l.map=[];var v=o!=n.display.externalMeasured&&S(h);uL(h,l,dm(n,h,v)),h.styleClasses&&(h.styleClasses.bgClass&&(l.bgClass=mt(h.styleClasses.bgClass,l.bgClass||"")),h.styleClasses.textClass&&(l.textClass=mt(h.styleClasses.textClass,l.textClass||""))),l.map.length==0&&l.map.push(0,0,l.content.appendChild(vl(n.display.measure))),u==0?(o.measure.map=l.map,o.measure.cache={}):((o.measure.maps||(o.measure.maps=[])).push(l.map),(o.measure.caches||(o.measure.caches=[])).push({}))}if(p){var b=l.content.lastChild;(/\bcm-tab\b/.test(b.className)||b.querySelector&&b.querySelector(".cm-tab"))&&(l.content.className="cm-tab-wrap-hack")}return it(n,"renderLine",n,o.line,l.pre),l.pre.className&&(l.textClass=mt(l.pre.className,l.textClass||"")),l}function sL(n){var o=T("span","\u2022","cm-invalidchar");return o.title="\\u"+n.charCodeAt(0).toString(16),o.setAttribute("aria-label",o.title),o}function aL(n,o,c,l,u,h,m){if(o){var v=n.splitSpaces?lL(o,n.trailingSpace):o,b=n.cm.state.specialChars,C=!1,P;if(!b.test(o))n.col+=o.length,P=document.createTextNode(v),n.map.push(n.pos,n.pos+o.length,P),f&&d<9&&(C=!0),n.pos+=o.length;else{P=document.createDocumentFragment();for(var z=0;;){b.lastIndex=z;var H=b.exec(o),_=H?H.index-z:o.length-z;if(_){var K=document.createTextNode(v.slice(z,z+_));f&&d<9?P.appendChild(T("span",[K])):P.appendChild(K),n.map.push(n.pos,n.pos+_,K),n.col+=_,n.pos+=_}if(!H)break;z+=_+1;var Z=void 0;if(H[0]=="	"){var ie=n.cm.options.tabSize,ce=ie-n.col%ie;Z=P.appendChild(T("span",fn(ce),"cm-tab")),Z.setAttribute("role","presentation"),Z.setAttribute("cm-text","	"),n.col+=ce}else H[0]=="\r"||H[0]==`
`?(Z=P.appendChild(T("span",H[0]=="\r"?"\u240D":"\u2424","cm-invalidchar")),Z.setAttribute("cm-text",H[0]),n.col+=1):(Z=n.cm.options.specialCharPlaceholder(H[0]),Z.setAttribute("cm-text",H[0]),f&&d<9?P.appendChild(T("span",[Z])):P.appendChild(Z),n.col+=1);n.map.push(n.pos,n.pos+1,Z),n.pos++}}if(n.trailingSpace=v.charCodeAt(o.length-1)==32,c||l||u||C||h||m){var pe=c||"";l&&(pe+=l),u&&(pe+=u);var ue=T("span",[P],pe,h);if(m)for(var me in m)m.hasOwnProperty(me)&&me!="style"&&me!="class"&&ue.setAttribute(me,m[me]);return n.content.appendChild(ue)}n.content.appendChild(P)}}function lL(n,o){if(n.length>1&&!/  /.test(n))return n;for(var c=o,l="",u=0;u<n.length;u++){var h=n.charAt(u);h==" "&&c&&(u==n.length-1||n.charCodeAt(u+1)==32)&&(h="\xA0"),l+=h,c=h==" "}return l}function cL(n,o){return function(c,l,u,h,m,v,b){u=u?u+" cm-force-border":"cm-force-border";for(var C=c.pos,P=C+l.length;;){for(var z=void 0,H=0;H<o.length&&(z=o[H],!(z.to>C&&z.from<=C));H++);if(z.to>=P)return n(c,l,u,h,m,v,b);n(c,l.slice(0,z.to-C),u,h,null,v,b),h=null,l=l.slice(z.to-C),C=z.to}}}function Em(n,o,c,l){var u=!l&&c.widgetNode;u&&n.map.push(n.pos,n.pos+o,u),!l&&n.cm.display.input.needsContentAttribute&&(u||(u=n.content.appendChild(document.createElement("span"))),u.setAttribute("cm-marker",c.id)),u&&(n.cm.display.input.setUneditable(u),n.content.appendChild(u)),n.pos+=o,n.trailingSpace=!1}function uL(n,o,c){var l=n.markedSpans,u=n.text,h=0;if(!l){for(var m=1;m<c.length;m+=2)o.addToken(o,u.slice(h,h=c[m]),Tm(c[m+1],o.cm.options));return}for(var v=u.length,b=0,C=1,P="",z,H,_=0,K,Z,ie,ce,pe;;){if(_==b){K=Z=ie=H="",pe=null,ce=null,_=1/0;for(var ue=[],me=void 0,Ee=0;Ee<l.length;++Ee){var Te=l[Ee],Ie=Te.marker;if(Ie.type=="bookmark"&&Te.from==b&&Ie.widgetNode)ue.push(Ie);else if(Te.from<=b&&(Te.to==null||Te.to>b||Ie.collapsed&&Te.to==b&&Te.from==b)){if(Te.to!=null&&Te.to!=b&&_>Te.to&&(_=Te.to,Z=""),Ie.className&&(K+=" "+Ie.className),Ie.css&&(H=(H?H+";":"")+Ie.css),Ie.startStyle&&Te.from==b&&(ie+=" "+Ie.startStyle),Ie.endStyle&&Te.to==_&&(me||(me=[])).push(Ie.endStyle,Te.to),Ie.title&&((pe||(pe={})).title=Ie.title),Ie.attributes)for(var Ke in Ie.attributes)(pe||(pe={}))[Ke]=Ie.attributes[Ke];Ie.collapsed&&(!ce||Pu(ce.marker,Ie)<0)&&(ce=Te)}else Te.from>b&&_>Te.from&&(_=Te.from)}if(me)for(var St=0;St<me.length;St+=2)me[St+1]==_&&(Z+=" "+me[St]);if(!ce||ce.from==b)for(var tt=0;tt<ue.length;++tt)Em(o,0,ue[tt]);if(ce&&(ce.from||0)==b){if(Em(o,(ce.to==null?v+1:ce.to)-b,ce.marker,ce.from==null),ce.to==null)return;ce.to==b&&(ce=!1)}}if(b>=v)break;for(var sn=Math.min(v,_);;){if(P){var Yt=b+P.length;if(!ce){var dt=Yt>sn?P.slice(0,sn-b):P;o.addToken(o,dt,z?z+K:K,ie,b+dt.length==_?Z:"",H,pe)}if(Yt>=sn){P=P.slice(sn-b),b=sn;break}b=Yt,ie=""}P=u.slice(h,h=c[C++]),z=Tm(c[C++],o.cm.options)}}}function Mm(n,o,c){this.line=o,this.rest=tL(o),this.size=this.rest?S(Fe(this.rest))-c+1:1,this.node=this.text=null,this.hidden=Fr(n,o)}function Tl(n,o,c){for(var l=[],u,h=o;h<c;h=u){var m=new Mm(n.doc,ke(n.doc,h),h);u=h+m.size,l.push(m)}return l}var Yi=null;function fL(n){Yi?Yi.ops.push(n):n.ownsGroup=Yi={ops:[n],delayedCallbacks:[]}}function dL(n){var o=n.delayedCallbacks,c=0;do{for(;c<o.length;c++)o[c].call(null);for(var l=0;l<n.ops.length;l++){var u=n.ops[l];if(u.cursorActivityHandlers)for(;u.cursorActivityCalled<u.cursorActivityHandlers.length;)u.cursorActivityHandlers[u.cursorActivityCalled++].call(null,u.cm)}}while(c<o.length)}function hL(n,o){var c=n.ownsGroup;if(c)try{dL(c)}finally{Yi=null,o(c)}}var hs=null;function xt(n,o){var c=gr(n,o);if(c.length){var l=Array.prototype.slice.call(arguments,2),u;Yi?u=Yi.delayedCallbacks:hs?u=hs:(u=hs=[],setTimeout(pL,0));for(var h=function(v){u.push(function(){return c[v].apply(null,l)})},m=0;m<c.length;++m)h(m)}}function pL(){var n=hs;hs=null;for(var o=0;o<n.length;++o)n[o]()}function Dm(n,o,c,l){for(var u=0;u<o.changes.length;u++){var h=o.changes[u];h=="text"?mL(n,o):h=="gutter"?Om(n,o,c,l):h=="class"?zu(n,o):h=="widget"&&yL(n,o,l)}o.changes=null}function ps(n){return n.node==n.text&&(n.node=T("div",null,null,"position: relative"),n.text.parentNode&&n.text.parentNode.replaceChild(n.node,n.text),n.node.appendChild(n.text),f&&d<8&&(n.node.style.zIndex=2)),n.node}function gL(n,o){var c=o.bgClass?o.bgClass+" "+(o.line.bgClass||""):o.line.bgClass;if(c&&(c+=" CodeMirror-linebackground"),o.background)c?o.background.className=c:(o.background.parentNode.removeChild(o.background),o.background=null);else if(c){var l=ps(o);o.background=l.insertBefore(T("div",null,c),l.firstChild),n.display.input.setUneditable(o.background)}}function Nm(n,o){var c=n.display.externalMeasured;return c&&c.line==o.line?(n.display.externalMeasured=null,o.measure=c.measure,c.built):Lm(n,o)}function mL(n,o){var c=o.text.className,l=Nm(n,o);o.text==o.node&&(o.node=l.pre),o.text.parentNode.replaceChild(l.pre,o.text),o.text=l.pre,l.bgClass!=o.bgClass||l.textClass!=o.textClass?(o.bgClass=l.bgClass,o.textClass=l.textClass,zu(n,o)):c&&(o.text.className=c)}function zu(n,o){gL(n,o),o.line.wrapClass?ps(o).className=o.line.wrapClass:o.node!=o.text&&(o.node.className="");var c=o.textClass?o.textClass+" "+(o.line.textClass||""):o.line.textClass;o.text.className=c||""}function Om(n,o,c,l){if(o.gutter&&(o.node.removeChild(o.gutter),o.gutter=null),o.gutterBackground&&(o.node.removeChild(o.gutterBackground),o.gutterBackground=null),o.line.gutterClass){var u=ps(o);o.gutterBackground=T("div",null,"CodeMirror-gutter-background "+o.line.gutterClass,"left: "+(n.options.fixedGutter?l.fixedPos:-l.gutterTotalWidth)+"px; width: "+l.gutterTotalWidth+"px"),n.display.input.setUneditable(o.gutterBackground),u.insertBefore(o.gutterBackground,o.text)}var h=o.line.gutterMarkers;if(n.options.lineNumbers||h){var m=ps(o),v=o.gutter=T("div",null,"CodeMirror-gutter-wrapper","left: "+(n.options.fixedGutter?l.fixedPos:-l.gutterTotalWidth)+"px");if(v.setAttribute("aria-hidden","true"),n.display.input.setUneditable(v),m.insertBefore(v,o.text),o.line.gutterClass&&(v.className+=" "+o.line.gutterClass),n.options.lineNumbers&&(!h||!h["CodeMirror-linenumbers"])&&(o.lineNumber=v.appendChild(T("div",re(n.options,c),"CodeMirror-linenumber CodeMirror-gutter-elt","left: "+l.gutterLeft["CodeMirror-linenumbers"]+"px; width: "+n.display.lineNumInnerWidth+"px"))),h)for(var b=0;b<n.display.gutterSpecs.length;++b){var C=n.display.gutterSpecs[b].className,P=h.hasOwnProperty(C)&&h[C];P&&v.appendChild(T("div",[P],"CodeMirror-gutter-elt","left: "+l.gutterLeft[C]+"px; width: "+l.gutterWidth[C]+"px"))}}}function yL(n,o,c){o.alignable&&(o.alignable=null);for(var l=F("CodeMirror-linewidget"),u=o.node.firstChild,h=void 0;u;u=h)h=u.nextSibling,l.test(u.className)&&o.node.removeChild(u);Pm(n,o,c)}function vL(n,o,c,l){var u=Nm(n,o);return o.text=o.node=u.pre,u.bgClass&&(o.bgClass=u.bgClass),u.textClass&&(o.textClass=u.textClass),zu(n,o),Om(n,o,c,l),Pm(n,o,l),o.node}function Pm(n,o,c){if(Im(n,o.line,o,c,!0),o.rest)for(var l=0;l<o.rest.length;l++)Im(n,o.rest[l],o,c,!1)}function Im(n,o,c,l,u){if(o.widgets)for(var h=ps(c),m=0,v=o.widgets;m<v.length;++m){var b=v[m],C=T("div",[b.node],"CodeMirror-linewidget"+(b.className?" "+b.className:""));b.handleMouseEvents||C.setAttribute("cm-ignore-events","true"),bL(b,C,c,l),n.display.input.setUneditable(C),u&&b.above?h.insertBefore(C,c.gutter||c.text):h.appendChild(C),xt(b,"redraw")}}function bL(n,o,c,l){if(n.noHScroll){(c.alignable||(c.alignable=[])).push(o);var u=l.wrapperWidth;o.style.left=l.fixedPos+"px",n.coverGutter||(u-=l.gutterTotalWidth,o.style.paddingLeft=l.gutterTotalWidth+"px"),o.style.width=u+"px"}n.coverGutter&&(o.style.zIndex=5,o.style.position="relative",n.noHScroll||(o.style.marginLeft=-l.gutterTotalWidth+"px"))}function gs(n){if(n.height!=null)return n.height;var o=n.doc.cm;if(!o)return 0;if(!be(document.body,n.node)){var c="position: relative;";n.coverGutter&&(c+="margin-left: -"+o.display.gutters.offsetWidth+"px;"),n.noHScroll&&(c+="width: "+o.display.wrapper.clientWidth+"px;"),J(o.display.measure,T("div",[n.node],null,c))}return n.height=n.node.parentNode.offsetHeight}function br(n,o){for(var c=as(o);c!=n.wrapper;c=c.parentNode)if(!c||c.nodeType==1&&c.getAttribute("cm-ignore-events")=="true"||c.parentNode==n.sizer&&c!=n.mover)return!0}function Ll(n){return n.lineSpace.offsetTop}function Ru(n){return n.mover.offsetHeight-n.lineSpace.offsetHeight}function Bm(n){if(n.cachedPaddingH)return n.cachedPaddingH;var o=J(n.measure,T("pre","x","CodeMirror-line-like")),c=window.getComputedStyle?window.getComputedStyle(o):o.currentStyle,l={left:parseInt(c.paddingLeft),right:parseInt(c.paddingRight)};return!isNaN(l.left)&&!isNaN(l.right)&&(n.cachedPaddingH=l),l}function tr(n){return rt-n.display.nativeBarWidth}function ci(n){return n.display.scroller.clientWidth-tr(n)-n.display.barWidth}function Fu(n){return n.display.scroller.clientHeight-tr(n)-n.display.barHeight}function wL(n,o,c){var l=n.options.lineWrapping,u=l&&ci(n);if(!o.measure.heights||l&&o.measure.width!=u){var h=o.measure.heights=[];if(l){o.measure.width=u;for(var m=o.text.firstChild.getClientRects(),v=0;v<m.length-1;v++){var b=m[v],C=m[v+1];Math.abs(b.bottom-C.bottom)>2&&h.push((b.bottom+C.top)/2-c.top)}}h.push(c.bottom-c.top)}}function qm(n,o,c){if(n.line==o)return{map:n.measure.map,cache:n.measure.cache};if(n.rest){for(var l=0;l<n.rest.length;l++)if(n.rest[l]==o)return{map:n.measure.maps[l],cache:n.measure.caches[l]};for(var u=0;u<n.rest.length;u++)if(S(n.rest[u])>c)return{map:n.measure.maps[u],cache:n.measure.caches[u],before:!0}}}function xL(n,o){o=_n(o);var c=S(o),l=n.display.externalMeasured=new Mm(n.doc,o,c);l.lineN=c;var u=l.built=Lm(n,l);return l.text=u.pre,J(n.display.lineMeasure,u.pre),l}function zm(n,o,c,l){return nr(n,Qi(n,o),c,l)}function _u(n,o){if(o>=n.display.viewFrom&&o<n.display.viewTo)return n.display.view[di(n,o)];var c=n.display.externalMeasured;if(c&&o>=c.lineN&&o<c.lineN+c.size)return c}function Qi(n,o){var c=S(o),l=_u(n,c);l&&!l.text?l=null:l&&l.changes&&(Dm(n,l,c,$u(n)),n.curOp.forceUpdate=!0),l||(l=xL(n,o));var u=qm(l,o,c);return{line:o,view:l,rect:null,map:u.map,cache:u.cache,before:u.before,hasHeights:!1}}function nr(n,o,c,l,u){o.before&&(c=-1);var h=c+(l||""),m;return o.cache.hasOwnProperty(h)?m=o.cache[h]:(o.rect||(o.rect=o.view.text.getBoundingClientRect()),o.hasHeights||(wL(n,o.view,o.rect),o.hasHeights=!0),m=CL(n,o,c,l),m.bogus||(o.cache[h]=m)),{left:m.left,right:m.right,top:u?m.rtop:m.top,bottom:u?m.rbottom:m.bottom}}var Rm={left:0,right:0,top:0,bottom:0};function Fm(n,o,c){for(var l,u,h,m,v,b,C=0;C<n.length;C+=3)if(v=n[C],b=n[C+1],o<v?(u=0,h=1,m="left"):o<b?(u=o-v,h=u+1):(C==n.length-3||o==b&&n[C+3]>o)&&(h=b-v,u=h-1,o>=b&&(m="right")),u!=null){if(l=n[C+2],v==b&&c==(l.insertLeft?"left":"right")&&(m=c),c=="left"&&u==0)for(;C&&n[C-2]==n[C-3]&&n[C-1].insertLeft;)l=n[(C-=3)+2],m="left";if(c=="right"&&u==b-v)for(;C<n.length-3&&n[C+3]==n[C+4]&&!n[C+5].insertLeft;)l=n[(C+=3)+2],m="right";break}return{node:l,start:u,end:h,collapse:m,coverStart:v,coverEnd:b}}function kL(n,o){var c=Rm;if(o=="left")for(var l=0;l<n.length&&(c=n[l]).left==c.right;l++);else for(var u=n.length-1;u>=0&&(c=n[u]).left==c.right;u--);return c}function CL(n,o,c,l){var u=Fm(o.map,c,l),h=u.node,m=u.start,v=u.end,b=u.collapse,C;if(h.nodeType==3){for(var P=0;P<4;P++){for(;m&&ft(o.line.text.charAt(u.coverStart+m));)--m;for(;u.coverStart+v<u.coverEnd&&ft(o.line.text.charAt(u.coverStart+v));)++v;if(f&&d<9&&m==0&&v==u.coverEnd-u.coverStart?C=h.parentNode.getBoundingClientRect():C=kL(ee(h,m,v).getClientRects(),l),C.left||C.right||m==0)break;v=m,m=m-1,b="right"}f&&d<11&&(C=SL(n.display.measure,C))}else{m>0&&(b=l="right");var z;n.options.lineWrapping&&(z=h.getClientRects()).length>1?C=z[l=="right"?z.length-1:0]:C=h.getBoundingClientRect()}if(f&&d<9&&!m&&(!C||!C.left&&!C.right)){var H=h.parentNode.getClientRects()[0];H?C={left:H.left,right:H.left+Ji(n.display),top:H.top,bottom:H.bottom}:C=Rm}for(var _=C.top-o.rect.top,K=C.bottom-o.rect.top,Z=(_+K)/2,ie=o.view.measure.heights,ce=0;ce<ie.length-1&&!(Z<ie[ce]);ce++);var pe=ce?ie[ce-1]:0,ue=ie[ce],me={left:(b=="right"?C.right:C.left)-o.rect.left,right:(b=="left"?C.left:C.right)-o.rect.left,top:pe,bottom:ue};return!C.left&&!C.right&&(me.bogus=!0),n.options.singleCursorHeightPerLine||(me.rtop=_,me.rbottom=K),me}function SL(n,o){if(!window.screen||screen.logicalXDPI==null||screen.logicalXDPI==screen.deviceXDPI||!Mu(n))return o;var c=screen.logicalXDPI/screen.deviceXDPI,l=screen.logicalYDPI/screen.deviceYDPI;return{left:o.left*c,right:o.right*c,top:o.top*l,bottom:o.bottom*l}}function _m(n){if(n.measure&&(n.measure.cache={},n.measure.heights=null,n.rest))for(var o=0;o<n.rest.length;o++)n.measure.caches[o]={}}function jm(n){n.display.externalMeasure=null,W(n.display.lineMeasure);for(var o=0;o<n.display.view.length;o++)_m(n.display.view[o])}function ms(n){jm(n),n.display.cachedCharWidth=n.display.cachedTextHeight=n.display.cachedPaddingH=null,n.options.lineWrapping||(n.display.maxLineChanged=!0),n.display.lineNumChars=null}function Hm(n){return y&&O?-(n.body.getBoundingClientRect().left-parseInt(getComputedStyle(n.body).marginLeft)):n.defaultView.pageXOffset||(n.documentElement||n.body).scrollLeft}function Wm(n){return y&&O?-(n.body.getBoundingClientRect().top-parseInt(getComputedStyle(n.body).marginTop)):n.defaultView.pageYOffset||(n.documentElement||n.body).scrollTop}function ju(n){var o=_n(n),c=o.widgets,l=0;if(c)for(var u=0;u<c.length;++u)c[u].above&&(l+=gs(c[u]));return l}function El(n,o,c,l,u){if(!u){var h=ju(o);c.top+=h,c.bottom+=h}if(l=="line")return c;l||(l="local");var m=vr(o);if(l=="local"?m+=Ll(n.display):m-=n.display.viewOffset,l=="page"||l=="window"){var v=n.display.lineSpace.getBoundingClientRect();m+=v.top+(l=="window"?0:Wm(Lt(n)));var b=v.left+(l=="window"?0:Hm(Lt(n)));c.left+=b,c.right+=b}return c.top+=m,c.bottom+=m,c}function Um(n,o,c){if(c=="div")return o;var l=o.left,u=o.top;if(c=="page")l-=Hm(Lt(n)),u-=Wm(Lt(n));else if(c=="local"||!c){var h=n.display.sizer.getBoundingClientRect();l+=h.left,u+=h.top}var m=n.display.lineSpace.getBoundingClientRect();return{left:l-m.left,top:u-m.top}}function Ml(n,o,c,l,u){return l||(l=ke(n.doc,o.line)),El(n,l,zm(n,l,o.ch,u),c)}function jn(n,o,c,l,u,h){l=l||ke(n.doc,o.line),u||(u=Qi(n,l));function m(K,Z){var ie=nr(n,u,K,Z?"right":"left",h);return Z?ie.left=ie.right:ie.right=ie.left,El(n,l,ie,c)}var v=ze(l,n.doc.direction),b=o.ch,C=o.sticky;if(b>=l.text.length?(b=l.text.length,C="before"):b<=0&&(b=0,C="after"),!v)return m(C=="before"?b-1:b,C=="before");function P(K,Z,ie){var ce=v[Z],pe=ce.level==1;return m(ie?K-1:K,pe!=ie)}var z=Ir(v,b,C),H=ai,_=P(b,z,C=="before");return H!=null&&(_.other=P(b,H,C!="before")),_}function $m(n,o){var c=0;o=Oe(n.doc,o),n.options.lineWrapping||(c=Ji(n.display)*o.ch);var l=ke(n.doc,o.line),u=vr(l)+Ll(n.display);return{left:c,right:c,top:u,bottom:u+l.height}}function Hu(n,o,c,l,u){var h=G(n,o,c);return h.xRel=u,l&&(h.outside=l),h}function Wu(n,o,c){var l=n.doc;if(c+=n.display.viewOffset,c<0)return Hu(l.first,0,null,-1,-1);var u=q(l,c),h=l.first+l.size-1;if(u>h)return Hu(l.first+l.size-1,ke(l,h).text.length,null,1,1);o<0&&(o=0);for(var m=ke(l,u);;){var v=AL(n,m,u,o,c),b=ZT(m,v.ch+(v.xRel>0||v.outside>0?1:0));if(!b)return v;var C=b.find(1);if(C.line==u)return C;m=ke(l,u=C.line)}}function Gm(n,o,c,l){l-=ju(o);var u=o.text.length,h=Jn(function(m){return nr(n,c,m-1).bottom<=l},u,0);return u=Jn(function(m){return nr(n,c,m).top>l},h,u),{begin:h,end:u}}function Vm(n,o,c,l){c||(c=Qi(n,o));var u=El(n,o,nr(n,c,l),"line").top;return Gm(n,o,c,u)}function Uu(n,o,c,l){return n.bottom<=c?!1:n.top>c?!0:(l?n.left:n.right)>o}function AL(n,o,c,l,u){u-=vr(o);var h=Qi(n,o),m=ju(o),v=0,b=o.text.length,C=!0,P=ze(o,n.doc.direction);if(P){var z=(n.options.lineWrapping?LL:TL)(n,o,c,h,P,l,u);C=z.level!=1,v=C?z.from:z.to-1,b=C?z.to:z.from-1}var H=null,_=null,K=Jn(function(Ee){var Te=nr(n,h,Ee);return Te.top+=m,Te.bottom+=m,Uu(Te,l,u,!1)?(Te.top<=u&&Te.left<=l&&(H=Ee,_=Te),!0):!1},v,b),Z,ie,ce=!1;if(_){var pe=l-_.left<_.right-l,ue=pe==C;K=H+(ue?0:1),ie=ue?"after":"before",Z=pe?_.left:_.right}else{!C&&(K==b||K==v)&&K++,ie=K==0?"after":K==o.text.length?"before":nr(n,h,K-(C?1:0)).bottom+m<=u==C?"after":"before";var me=jn(n,G(c,K,ie),"line",o,h);Z=me.left,ce=u<me.top?-1:u>=me.bottom?1:0}return K=Or(o.text,K,1),Hu(c,K,ie,ce,l-Z)}function TL(n,o,c,l,u,h,m){var v=Jn(function(z){var H=u[z],_=H.level!=1;return Uu(jn(n,G(c,_?H.to:H.from,_?"before":"after"),"line",o,l),h,m,!0)},0,u.length-1),b=u[v];if(v>0){var C=b.level!=1,P=jn(n,G(c,C?b.from:b.to,C?"after":"before"),"line",o,l);Uu(P,h,m,!0)&&P.top>m&&(b=u[v-1])}return b}function LL(n,o,c,l,u,h,m){var v=Gm(n,o,l,m),b=v.begin,C=v.end;/\s/.test(o.text.charAt(C-1))&&C--;for(var P=null,z=null,H=0;H<u.length;H++){var _=u[H];if(!(_.from>=C||_.to<=b)){var K=_.level!=1,Z=nr(n,l,K?Math.min(C,_.to)-1:Math.max(b,_.from)).right,ie=Z<h?h-Z+1e9:Z-h;(!P||z>ie)&&(P=_,z=ie)}}return P||(P=u[u.length-1]),P.from<b&&(P={from:b,to:P.to,level:P.level}),P.to>C&&(P={from:P.from,to:C,level:P.level}),P}var ui;function Xi(n){if(n.cachedTextHeight!=null)return n.cachedTextHeight;if(ui==null){ui=T("pre",null,"CodeMirror-line-like");for(var o=0;o<49;++o)ui.appendChild(document.createTextNode("x")),ui.appendChild(T("br"));ui.appendChild(document.createTextNode("x"))}J(n.measure,ui);var c=ui.offsetHeight/50;return c>3&&(n.cachedTextHeight=c),W(n.measure),c||1}function Ji(n){if(n.cachedCharWidth!=null)return n.cachedCharWidth;var o=T("span","xxxxxxxxxx"),c=T("pre",[o],"CodeMirror-line-like");J(n.measure,c);var l=o.getBoundingClientRect(),u=(l.right-l.left)/10;return u>2&&(n.cachedCharWidth=u),u||10}function $u(n){for(var o=n.display,c={},l={},u=o.gutters.clientLeft,h=o.gutters.firstChild,m=0;h;h=h.nextSibling,++m){var v=n.display.gutterSpecs[m].className;c[v]=h.offsetLeft+h.clientLeft+u,l[v]=h.clientWidth}return{fixedPos:Gu(o),gutterTotalWidth:o.gutters.offsetWidth,gutterLeft:c,gutterWidth:l,wrapperWidth:o.wrapper.clientWidth}}function Gu(n){return n.scroller.getBoundingClientRect().left-n.sizer.getBoundingClientRect().left}function Km(n){var o=Xi(n.display),c=n.options.lineWrapping,l=c&&Math.max(5,n.display.scroller.clientWidth/Ji(n.display)-3);return function(u){if(Fr(n.doc,u))return 0;var h=0;if(u.widgets)for(var m=0;m<u.widgets.length;m++)u.widgets[m].height&&(h+=u.widgets[m].height);return c?h+(Math.ceil(u.text.length/l)||1)*o:h+o}}function Vu(n){var o=n.doc,c=Km(n);o.iter(function(l){var u=c(l);u!=l.height&&dn(l,u)})}function fi(n,o,c,l){var u=n.display;if(!c&&as(o).getAttribute("cm-not-content")=="true")return null;var h,m,v=u.lineSpace.getBoundingClientRect();try{h=o.clientX-v.left,m=o.clientY-v.top}catch{return null}var b=Wu(n,h,m),C;if(l&&b.xRel>0&&(C=ke(n.doc,b.line).text).length==b.ch){var P=ge(C,C.length,n.options.tabSize)-C.length;b=G(b.line,Math.max(0,Math.round((h-Bm(n.display).left)/Ji(n.display))-P))}return b}function di(n,o){if(o>=n.display.viewTo||(o-=n.display.viewFrom,o<0))return null;for(var c=n.display.view,l=0;l<c.length;l++)if(o-=c[l].size,o<0)return l}function Vt(n,o,c,l){o==null&&(o=n.doc.first),c==null&&(c=n.doc.first+n.doc.size),l||(l=0);var u=n.display;if(l&&c<u.viewTo&&(u.updateLineNumbers==null||u.updateLineNumbers>o)&&(u.updateLineNumbers=o),n.curOp.viewChanged=!0,o>=u.viewTo)yr&&Iu(n.doc,o)<u.viewTo&&jr(n);else if(c<=u.viewFrom)yr&&Am(n.doc,c+l)>u.viewFrom?jr(n):(u.viewFrom+=l,u.viewTo+=l);else if(o<=u.viewFrom&&c>=u.viewTo)jr(n);else if(o<=u.viewFrom){var h=Dl(n,c,c+l,1);h?(u.view=u.view.slice(h.index),u.viewFrom=h.lineN,u.viewTo+=l):jr(n)}else if(c>=u.viewTo){var m=Dl(n,o,o,-1);m?(u.view=u.view.slice(0,m.index),u.viewTo=m.lineN):jr(n)}else{var v=Dl(n,o,o,-1),b=Dl(n,c,c+l,1);v&&b?(u.view=u.view.slice(0,v.index).concat(Tl(n,v.lineN,b.lineN)).concat(u.view.slice(b.index)),u.viewTo+=l):jr(n)}var C=u.externalMeasured;C&&(c<C.lineN?C.lineN+=l:o<C.lineN+C.size&&(u.externalMeasured=null))}function _r(n,o,c){n.curOp.viewChanged=!0;var l=n.display,u=n.display.externalMeasured;if(u&&o>=u.lineN&&o<u.lineN+u.size&&(l.externalMeasured=null),!(o<l.viewFrom||o>=l.viewTo)){var h=l.view[di(n,o)];if(h.node!=null){var m=h.changes||(h.changes=[]);ye(m,c)==-1&&m.push(c)}}}function jr(n){n.display.viewFrom=n.display.viewTo=n.doc.first,n.display.view=[],n.display.viewOffset=0}function Dl(n,o,c,l){var u=di(n,o),h,m=n.display.view;if(!yr||c==n.doc.first+n.doc.size)return{index:u,lineN:c};for(var v=n.display.viewFrom,b=0;b<u;b++)v+=m[b].size;if(v!=o){if(l>0){if(u==m.length-1)return null;h=v+m[u].size-o,u++}else h=v-o;o+=h,c+=h}for(;Iu(n.doc,c)!=c;){if(u==(l<0?0:m.length-1))return null;c+=l*m[u-(l<0?1:0)].size,u+=l}return{index:u,lineN:c}}function EL(n,o,c){var l=n.display,u=l.view;u.length==0||o>=l.viewTo||c<=l.viewFrom?(l.view=Tl(n,o,c),l.viewFrom=o):(l.viewFrom>o?l.view=Tl(n,o,l.viewFrom).concat(l.view):l.viewFrom<o&&(l.view=l.view.slice(di(n,o))),l.viewFrom=o,l.viewTo<c?l.view=l.view.concat(Tl(n,l.viewTo,c)):l.viewTo>c&&(l.view=l.view.slice(0,di(n,c)))),l.viewTo=c}function Ym(n){for(var o=n.display.view,c=0,l=0;l<o.length;l++){var u=o[l];!u.hidden&&(!u.node||u.changes)&&++c}return c}function ys(n){n.display.input.showSelection(n.display.input.prepareSelection())}function Qm(n,o){o===void 0&&(o=!0);var c=n.doc,l={},u=l.cursors=document.createDocumentFragment(),h=l.selection=document.createDocumentFragment(),m=n.options.$customCursor;m&&(o=!0);for(var v=0;v<c.sel.ranges.length;v++)if(!(!o&&v==c.sel.primIndex)){var b=c.sel.ranges[v];if(!(b.from().line>=n.display.viewTo||b.to().line<n.display.viewFrom)){var C=b.empty();if(m){var P=m(n,b);P&&Ku(n,P,u)}else(C||n.options.showCursorWhenSelecting)&&Ku(n,b.head,u);C||ML(n,b,h)}}return l}function Ku(n,o,c){var l=jn(n,o,"div",null,null,!n.options.singleCursorHeightPerLine),u=c.appendChild(T("div","\xA0","CodeMirror-cursor"));if(u.style.left=l.left+"px",u.style.top=l.top+"px",u.style.height=Math.max(0,l.bottom-l.top)*n.options.cursorHeight+"px",/\bcm-fat-cursor\b/.test(n.getWrapperElement().className)){var h=Ml(n,o,"div",null,null),m=h.right-h.left;u.style.width=(m>0?m:n.defaultCharWidth())+"px"}if(l.other){var v=c.appendChild(T("div","\xA0","CodeMirror-cursor CodeMirror-secondarycursor"));v.style.display="",v.style.left=l.other.left+"px",v.style.top=l.other.top+"px",v.style.height=(l.other.bottom-l.other.top)*.85+"px"}}function Nl(n,o){return n.top-o.top||n.left-o.left}function ML(n,o,c){var l=n.display,u=n.doc,h=document.createDocumentFragment(),m=Bm(n.display),v=m.left,b=Math.max(l.sizerWidth,ci(n)-l.sizer.offsetLeft)-m.right,C=u.direction=="ltr";function P(ue,me,Ee,Te){me<0&&(me=0),me=Math.round(me),Te=Math.round(Te),h.appendChild(T("div",null,"CodeMirror-selected","position: absolute; left: "+ue+`px;
                             top: `+me+"px; width: "+(Ee??b-ue)+`px;
                             height: `+(Te-me)+"px"))}function z(ue,me,Ee){var Te=ke(u,ue),Ie=Te.text.length,Ke,St;function tt(dt,Qt){return Ml(n,G(ue,dt),"div",Te,Qt)}function sn(dt,Qt,Et){var vt=Vm(n,Te,null,dt),ht=Qt=="ltr"==(Et=="after")?"left":"right",at=Et=="after"?vt.begin:vt.end-(/\s/.test(Te.text.charAt(vt.end-1))?2:1);return tt(at,ht)[ht]}var Yt=ze(Te,u.direction);return Pr(Yt,me||0,Ee??Ie,function(dt,Qt,Et,vt){var ht=Et=="ltr",at=tt(dt,ht?"left":"right"),Xt=tt(Qt-1,ht?"right":"left"),fo=me==null&&dt==0,Vr=Ee==null&&Qt==Ie,It=vt==0,rr=!Yt||vt==Yt.length-1;if(Xt.top-at.top<=3){var At=(C?fo:Vr)&&It,kf=(C?Vr:fo)&&rr,kr=At?v:(ht?at:Xt).left,yi=kf?b:(ht?Xt:at).right;P(kr,at.top,yi-kr,at.bottom)}else{var vi,Ft,ho,Cf;ht?(vi=C&&fo&&It?v:at.left,Ft=C?b:sn(dt,Et,"before"),ho=C?v:sn(Qt,Et,"after"),Cf=C&&Vr&&rr?b:Xt.right):(vi=C?sn(dt,Et,"before"):v,Ft=!C&&fo&&It?b:at.right,ho=!C&&Vr&&rr?v:Xt.left,Cf=C?sn(Qt,Et,"after"):b),P(vi,at.top,Ft-vi,at.bottom),at.bottom<Xt.top&&P(v,at.bottom,null,Xt.top),P(ho,Xt.top,Cf-ho,Xt.bottom)}(!Ke||Nl(at,Ke)<0)&&(Ke=at),Nl(Xt,Ke)<0&&(Ke=Xt),(!St||Nl(at,St)<0)&&(St=at),Nl(Xt,St)<0&&(St=Xt)}),{start:Ke,end:St}}var H=o.from(),_=o.to();if(H.line==_.line)z(H.line,H.ch,_.ch);else{var K=ke(u,H.line),Z=ke(u,_.line),ie=_n(K)==_n(Z),ce=z(H.line,H.ch,ie?K.text.length+1:null).end,pe=z(_.line,ie?0:null,_.ch).start;ie&&(ce.top<pe.top-2?(P(ce.right,ce.top,null,ce.bottom),P(v,pe.top,pe.left,pe.bottom)):P(ce.right,ce.top,pe.left-ce.right,ce.bottom)),ce.bottom<pe.top&&P(v,ce.bottom,null,pe.top)}c.appendChild(h)}function Yu(n){if(n.state.focused){var o=n.display;clearInterval(o.blinker);var c=!0;o.cursorDiv.style.visibility="",n.options.cursorBlinkRate>0?o.blinker=setInterval(function(){n.hasFocus()||Zi(n),o.cursorDiv.style.visibility=(c=!c)?"":"hidden"},n.options.cursorBlinkRate):n.options.cursorBlinkRate<0&&(o.cursorDiv.style.visibility="hidden")}}function Xm(n){n.hasFocus()||(n.display.input.focus(),n.state.focused||Xu(n))}function Qu(n){n.state.delayingBlurEvent=!0,setTimeout(function(){n.state.delayingBlurEvent&&(n.state.delayingBlurEvent=!1,n.state.focused&&Zi(n))},100)}function Xu(n,o){n.state.delayingBlurEvent&&!n.state.draggingText&&(n.state.delayingBlurEvent=!1),n.options.readOnly!="nocursor"&&(n.state.focused||(it(n,"focus",n,o),n.state.focused=!0,Ve(n.display.wrapper,"CodeMirror-focused"),!n.curOp&&n.display.selForContextMenu!=n.doc.sel&&(n.display.input.reset(),p&&setTimeout(function(){return n.display.input.reset(!0)},20)),n.display.input.receivedFocus()),Yu(n))}function Zi(n,o){n.state.delayingBlurEvent||(n.state.focused&&(it(n,"blur",n,o),n.state.focused=!1,se(n.display.wrapper,"CodeMirror-focused")),clearInterval(n.display.blinker),setTimeout(function(){n.state.focused||(n.display.shift=!1)},150))}function Ol(n){for(var o=n.display,c=o.lineDiv.offsetTop,l=Math.max(0,o.scroller.getBoundingClientRect().top),u=o.lineDiv.getBoundingClientRect().top,h=0,m=0;m<o.view.length;m++){var v=o.view[m],b=n.options.lineWrapping,C=void 0,P=0;if(!v.hidden){if(u+=v.line.height,f&&d<8){var z=v.node.offsetTop+v.node.offsetHeight;C=z-c,c=z}else{var H=v.node.getBoundingClientRect();C=H.bottom-H.top,!b&&v.text.firstChild&&(P=v.text.firstChild.getBoundingClientRect().right-H.left-1)}var _=v.line.height-C;if((_>.005||_<-.005)&&(u<l&&(h-=_),dn(v.line,C),Jm(v.line),v.rest))for(var K=0;K<v.rest.length;K++)Jm(v.rest[K]);if(P>n.display.sizerWidth){var Z=Math.ceil(P/Ji(n.display));Z>n.display.maxLineLength&&(n.display.maxLineLength=Z,n.display.maxLine=v.line,n.display.maxLineChanged=!0)}}}Math.abs(h)>2&&(o.scroller.scrollTop+=h)}function Jm(n){if(n.widgets)for(var o=0;o<n.widgets.length;++o){var c=n.widgets[o],l=c.node.parentNode;l&&(c.height=l.offsetHeight)}}function Pl(n,o,c){var l=c&&c.top!=null?Math.max(0,c.top):n.scroller.scrollTop;l=Math.floor(l-Ll(n));var u=c&&c.bottom!=null?c.bottom:l+n.wrapper.clientHeight,h=q(o,l),m=q(o,u);if(c&&c.ensure){var v=c.ensure.from.line,b=c.ensure.to.line;v<h?(h=v,m=q(o,vr(ke(o,v))+n.wrapper.clientHeight)):Math.min(b,o.lastLine())>=m&&(h=q(o,vr(ke(o,b))-n.wrapper.clientHeight),m=b)}return{from:h,to:Math.max(m,h+1)}}function DL(n,o){if(!ot(n,"scrollCursorIntoView")){var c=n.display,l=c.sizer.getBoundingClientRect(),u=null,h=c.wrapper.ownerDocument;if(o.top+l.top<0?u=!0:o.bottom+l.top>(h.defaultView.innerHeight||h.documentElement.clientHeight)&&(u=!1),u!=null&&!M){var m=T("div","\u200B",null,`position: absolute;
                         top: `+(o.top-c.viewOffset-Ll(n.display))+`px;
                         height: `+(o.bottom-o.top+tr(n)+c.barHeight)+`px;
                         left: `+o.left+"px; width: "+Math.max(2,o.right-o.left)+"px;");n.display.lineSpace.appendChild(m),m.scrollIntoView(u),n.display.lineSpace.removeChild(m)}}}function NL(n,o,c,l){l==null&&(l=0);var u;!n.options.lineWrapping&&o==c&&(c=o.sticky=="before"?G(o.line,o.ch+1,"before"):o,o=o.ch?G(o.line,o.sticky=="before"?o.ch-1:o.ch,"after"):o);for(var h=0;h<5;h++){var m=!1,v=jn(n,o),b=!c||c==o?v:jn(n,c);u={left:Math.min(v.left,b.left),top:Math.min(v.top,b.top)-l,right:Math.max(v.left,b.left),bottom:Math.max(v.bottom,b.bottom)+l};var C=Ju(n,u),P=n.doc.scrollTop,z=n.doc.scrollLeft;if(C.scrollTop!=null&&(bs(n,C.scrollTop),Math.abs(n.doc.scrollTop-P)>1&&(m=!0)),C.scrollLeft!=null&&(hi(n,C.scrollLeft),Math.abs(n.doc.scrollLeft-z)>1&&(m=!0)),!m)break}return u}function OL(n,o){var c=Ju(n,o);c.scrollTop!=null&&bs(n,c.scrollTop),c.scrollLeft!=null&&hi(n,c.scrollLeft)}function Ju(n,o){var c=n.display,l=Xi(n.display);o.top<0&&(o.top=0);var u=n.curOp&&n.curOp.scrollTop!=null?n.curOp.scrollTop:c.scroller.scrollTop,h=Fu(n),m={};o.bottom-o.top>h&&(o.bottom=o.top+h);var v=n.doc.height+Ru(c),b=o.top<l,C=o.bottom>v-l;if(o.top<u)m.scrollTop=b?0:o.top;else if(o.bottom>u+h){var P=Math.min(o.top,(C?v:o.bottom)-h);P!=u&&(m.scrollTop=P)}var z=n.options.fixedGutter?0:c.gutters.offsetWidth,H=n.curOp&&n.curOp.scrollLeft!=null?n.curOp.scrollLeft:c.scroller.scrollLeft-z,_=ci(n)-c.gutters.offsetWidth,K=o.right-o.left>_;return K&&(o.right=o.left+_),o.left<10?m.scrollLeft=0:o.left<H?m.scrollLeft=Math.max(0,o.left+z-(K?0:10)):o.right>_+H-3&&(m.scrollLeft=o.right+(K?0:10)-_),m}function Zu(n,o){o!=null&&(Il(n),n.curOp.scrollTop=(n.curOp.scrollTop==null?n.doc.scrollTop:n.curOp.scrollTop)+o)}function eo(n){Il(n);var o=n.getCursor();n.curOp.scrollToPos={from:o,to:o,margin:n.options.cursorScrollMargin}}function vs(n,o,c){(o!=null||c!=null)&&Il(n),o!=null&&(n.curOp.scrollLeft=o),c!=null&&(n.curOp.scrollTop=c)}function PL(n,o){Il(n),n.curOp.scrollToPos=o}function Il(n){var o=n.curOp.scrollToPos;if(o){n.curOp.scrollToPos=null;var c=$m(n,o.from),l=$m(n,o.to);Zm(n,c,l,o.margin)}}function Zm(n,o,c,l){var u=Ju(n,{left:Math.min(o.left,c.left),top:Math.min(o.top,c.top)-l,right:Math.max(o.right,c.right),bottom:Math.max(o.bottom,c.bottom)+l});vs(n,u.scrollLeft,u.scrollTop)}function bs(n,o){Math.abs(n.doc.scrollTop-o)<2||(r||tf(n,{top:o}),ey(n,o,!0),r&&tf(n),ks(n,100))}function ey(n,o,c){o=Math.max(0,Math.min(n.display.scroller.scrollHeight-n.display.scroller.clientHeight,o)),!(n.display.scroller.scrollTop==o&&!c)&&(n.doc.scrollTop=o,n.display.scrollbars.setScrollTop(o),n.display.scroller.scrollTop!=o&&(n.display.scroller.scrollTop=o))}function hi(n,o,c,l){o=Math.max(0,Math.min(o,n.display.scroller.scrollWidth-n.display.scroller.clientWidth)),!((c?o==n.doc.scrollLeft:Math.abs(n.doc.scrollLeft-o)<2)&&!l)&&(n.doc.scrollLeft=o,oy(n),n.display.scroller.scrollLeft!=o&&(n.display.scroller.scrollLeft=o),n.display.scrollbars.setScrollLeft(o))}function ws(n){var o=n.display,c=o.gutters.offsetWidth,l=Math.round(n.doc.height+Ru(n.display));return{clientHeight:o.scroller.clientHeight,viewHeight:o.wrapper.clientHeight,scrollWidth:o.scroller.scrollWidth,clientWidth:o.scroller.clientWidth,viewWidth:o.wrapper.clientWidth,barLeft:n.options.fixedGutter?c:0,docHeight:l,scrollHeight:l+tr(n)+o.barHeight,nativeBarWidth:o.nativeBarWidth,gutterWidth:c}}var pi=function(n,o,c){this.cm=c;var l=this.vert=T("div",[T("div",null,null,"min-width: 1px")],"CodeMirror-vscrollbar"),u=this.horiz=T("div",[T("div",null,null,"height: 100%; min-height: 1px")],"CodeMirror-hscrollbar");l.tabIndex=u.tabIndex=-1,n(l),n(u),Le(l,"scroll",function(){l.clientHeight&&o(l.scrollTop,"vertical")}),Le(u,"scroll",function(){u.clientWidth&&o(u.scrollLeft,"horizontal")}),this.checkedZeroWidth=!1,f&&d<8&&(this.horiz.style.minHeight=this.vert.style.minWidth="18px")};pi.prototype.update=function(n){var o=n.scrollWidth>n.clientWidth+1,c=n.scrollHeight>n.clientHeight+1,l=n.nativeBarWidth;if(c){this.vert.style.display="block",this.vert.style.bottom=o?l+"px":"0";var u=n.viewHeight-(o?l:0);this.vert.firstChild.style.height=Math.max(0,n.scrollHeight-n.clientHeight+u)+"px"}else this.vert.scrollTop=0,this.vert.style.display="",this.vert.firstChild.style.height="0";if(o){this.horiz.style.display="block",this.horiz.style.right=c?l+"px":"0",this.horiz.style.left=n.barLeft+"px";var h=n.viewWidth-n.barLeft-(c?l:0);this.horiz.firstChild.style.width=Math.max(0,n.scrollWidth-n.clientWidth+h)+"px"}else this.horiz.style.display="",this.horiz.firstChild.style.width="0";return!this.checkedZeroWidth&&n.clientHeight>0&&(l==0&&this.zeroWidthHack(),this.checkedZeroWidth=!0),{right:c?l:0,bottom:o?l:0}},pi.prototype.setScrollLeft=function(n){this.horiz.scrollLeft!=n&&(this.horiz.scrollLeft=n),this.disableHoriz&&this.enableZeroWidthBar(this.horiz,this.disableHoriz,"horiz")},pi.prototype.setScrollTop=function(n){this.vert.scrollTop!=n&&(this.vert.scrollTop=n),this.disableVert&&this.enableZeroWidthBar(this.vert,this.disableVert,"vert")},pi.prototype.zeroWidthHack=function(){var n=E&&!A?"12px":"18px";this.horiz.style.height=this.vert.style.width=n,this.horiz.style.visibility=this.vert.style.visibility="hidden",this.disableHoriz=new he,this.disableVert=new he},pi.prototype.enableZeroWidthBar=function(n,o,c){n.style.visibility="";function l(){var u=n.getBoundingClientRect(),h=c=="vert"?document.elementFromPoint(u.right-1,(u.top+u.bottom)/2):document.elementFromPoint((u.right+u.left)/2,u.bottom-1);h!=n?n.style.visibility="hidden":o.set(1e3,l)}o.set(1e3,l)},pi.prototype.clear=function(){var n=this.horiz.parentNode;n.removeChild(this.horiz),n.removeChild(this.vert)};var xs=function(){};xs.prototype.update=function(){return{bottom:0,right:0}},xs.prototype.setScrollLeft=function(){},xs.prototype.setScrollTop=function(){},xs.prototype.clear=function(){};function to(n,o){o||(o=ws(n));var c=n.display.barWidth,l=n.display.barHeight;ty(n,o);for(var u=0;u<4&&c!=n.display.barWidth||l!=n.display.barHeight;u++)c!=n.display.barWidth&&n.options.lineWrapping&&Ol(n),ty(n,ws(n)),c=n.display.barWidth,l=n.display.barHeight}function ty(n,o){var c=n.display,l=c.scrollbars.update(o);c.sizer.style.paddingRight=(c.barWidth=l.right)+"px",c.sizer.style.paddingBottom=(c.barHeight=l.bottom)+"px",c.heightForcer.style.borderBottom=l.bottom+"px solid transparent",l.right&&l.bottom?(c.scrollbarFiller.style.display="block",c.scrollbarFiller.style.height=l.bottom+"px",c.scrollbarFiller.style.width=l.right+"px"):c.scrollbarFiller.style.display="",l.bottom&&n.options.coverGutterNextToScrollbar&&n.options.fixedGutter?(c.gutterFiller.style.display="block",c.gutterFiller.style.height=l.bottom+"px",c.gutterFiller.style.width=o.gutterWidth+"px"):c.gutterFiller.style.display=""}var ny={native:pi,null:xs};function ry(n){n.display.scrollbars&&(n.display.scrollbars.clear(),n.display.scrollbars.addClass&&se(n.display.wrapper,n.display.scrollbars.addClass)),n.display.scrollbars=new ny[n.options.scrollbarStyle](function(o){n.display.wrapper.insertBefore(o,n.display.scrollbarFiller),Le(o,"mousedown",function(){n.state.focused&&setTimeout(function(){return n.display.input.focus()},0)}),o.setAttribute("cm-not-content","true")},function(o,c){c=="horizontal"?hi(n,o):bs(n,o)},n),n.display.scrollbars.addClass&&Ve(n.display.wrapper,n.display.scrollbars.addClass)}var IL=0;function gi(n){n.curOp={cm:n,viewChanged:!1,startHeight:n.doc.height,forceUpdate:!1,updateInput:0,typing:!1,changeObjs:null,cursorActivityHandlers:null,cursorActivityCalled:0,selectionChanged:!1,updateMaxLine:!1,scrollLeft:null,scrollTop:null,scrollToPos:null,focus:!1,id:++IL,markArrays:null},fL(n.curOp)}function mi(n){var o=n.curOp;o&&hL(o,function(c){for(var l=0;l<c.ops.length;l++)c.ops[l].cm.curOp=null;BL(c)})}function BL(n){for(var o=n.ops,c=0;c<o.length;c++)qL(o[c]);for(var l=0;l<o.length;l++)zL(o[l]);for(var u=0;u<o.length;u++)RL(o[u]);for(var h=0;h<o.length;h++)FL(o[h]);for(var m=0;m<o.length;m++)_L(o[m])}function qL(n){var o=n.cm,c=o.display;HL(o),n.updateMaxLine&&qu(o),n.mustUpdate=n.viewChanged||n.forceUpdate||n.scrollTop!=null||n.scrollToPos&&(n.scrollToPos.from.line<c.viewFrom||n.scrollToPos.to.line>=c.viewTo)||c.maxLineChanged&&o.options.lineWrapping,n.update=n.mustUpdate&&new Bl(o,n.mustUpdate&&{top:n.scrollTop,ensure:n.scrollToPos},n.forceUpdate)}function zL(n){n.updatedDisplay=n.mustUpdate&&ef(n.cm,n.update)}function RL(n){var o=n.cm,c=o.display;n.updatedDisplay&&Ol(o),n.barMeasure=ws(o),c.maxLineChanged&&!o.options.lineWrapping&&(n.adjustWidthTo=zm(o,c.maxLine,c.maxLine.text.length).left+3,o.display.sizerWidth=n.adjustWidthTo,n.barMeasure.scrollWidth=Math.max(c.scroller.clientWidth,c.sizer.offsetLeft+n.adjustWidthTo+tr(o)+o.display.barWidth),n.maxScrollLeft=Math.max(0,c.sizer.offsetLeft+n.adjustWidthTo-ci(o))),(n.updatedDisplay||n.selectionChanged)&&(n.preparedSelection=c.input.prepareSelection())}function FL(n){var o=n.cm;n.adjustWidthTo!=null&&(o.display.sizer.style.minWidth=n.adjustWidthTo+"px",n.maxScrollLeft<o.doc.scrollLeft&&hi(o,Math.min(o.display.scroller.scrollLeft,n.maxScrollLeft),!0),o.display.maxLineChanged=!1);var c=n.focus&&n.focus==Re(te(o));n.preparedSelection&&o.display.input.showSelection(n.preparedSelection,c),(n.updatedDisplay||n.startHeight!=o.doc.height)&&to(o,n.barMeasure),n.updatedDisplay&&rf(o,n.barMeasure),n.selectionChanged&&Yu(o),o.state.focused&&n.updateInput&&o.display.input.reset(n.typing),c&&Xm(n.cm)}function _L(n){var o=n.cm,c=o.display,l=o.doc;if(n.updatedDisplay&&iy(o,n.update),c.wheelStartX!=null&&(n.scrollTop!=null||n.scrollLeft!=null||n.scrollToPos)&&(c.wheelStartX=c.wheelStartY=null),n.scrollTop!=null&&ey(o,n.scrollTop,n.forceScroll),n.scrollLeft!=null&&hi(o,n.scrollLeft,!0,!0),n.scrollToPos){var u=NL(o,Oe(l,n.scrollToPos.from),Oe(l,n.scrollToPos.to),n.scrollToPos.margin);DL(o,u)}var h=n.maybeHiddenMarkers,m=n.maybeUnhiddenMarkers;if(h)for(var v=0;v<h.length;++v)h[v].lines.length||it(h[v],"hide");if(m)for(var b=0;b<m.length;++b)m[b].lines.length&&it(m[b],"unhide");c.wrapper.offsetHeight&&(l.scrollTop=o.display.scroller.scrollTop),n.changeObjs&&it(o,"changes",o,n.changeObjs),n.update&&n.update.finish()}function on(n,o){if(n.curOp)return o();gi(n);try{return o()}finally{mi(n)}}function kt(n,o){return function(){if(n.curOp)return o.apply(n,arguments);gi(n);try{return o.apply(n,arguments)}finally{mi(n)}}}function Rt(n){return function(){if(this.curOp)return n.apply(this,arguments);gi(this);try{return n.apply(this,arguments)}finally{mi(this)}}}function Ct(n){return function(){var o=this.cm;if(!o||o.curOp)return n.apply(this,arguments);gi(o);try{return n.apply(this,arguments)}finally{mi(o)}}}function ks(n,o){n.doc.highlightFrontier<n.display.viewTo&&n.state.highlight.set(o,fe(jL,n))}function jL(n){var o=n.doc;if(!(o.highlightFrontier>=n.display.viewTo)){var c=+new Date+n.options.workTime,l=fs(n,o.highlightFrontier),u=[];o.iter(l.line,Math.min(o.first+o.size,n.display.viewTo+500),function(h){if(l.line>=n.display.viewFrom){var m=h.styles,v=h.text.length>n.options.maxHighlightLength?Zn(o.mode,l.state):null,b=fm(n,h,l,!0);v&&(l.state=v),h.styles=b.styles;var C=h.styleClasses,P=b.classes;P?h.styleClasses=P:C&&(h.styleClasses=null);for(var z=!m||m.length!=h.styles.length||C!=P&&(!C||!P||C.bgClass!=P.bgClass||C.textClass!=P.textClass),H=0;!z&&H<m.length;++H)z=m[H]!=h.styles[H];z&&u.push(l.line),h.stateAfter=l.save(),l.nextLine()}else h.text.length<=n.options.maxHighlightLength&&Du(n,h.text,l),h.stateAfter=l.line%5==0?l.save():null,l.nextLine();if(+new Date>c)return ks(n,n.options.workDelay),!0}),o.highlightFrontier=l.line,o.modeFrontier=Math.max(o.modeFrontier,l.line),u.length&&on(n,function(){for(var h=0;h<u.length;h++)_r(n,u[h],"text")})}}var Bl=function(n,o,c){var l=n.display;this.viewport=o,this.visible=Pl(l,n.doc,o),this.editorIsHidden=!l.wrapper.offsetWidth,this.wrapperHeight=l.wrapper.clientHeight,this.wrapperWidth=l.wrapper.clientWidth,this.oldDisplayWidth=ci(n),this.force=c,this.dims=$u(n),this.events=[]};Bl.prototype.signal=function(n,o){rn(n,o)&&this.events.push(arguments)},Bl.prototype.finish=function(){for(var n=0;n<this.events.length;n++)it.apply(null,this.events[n])};function HL(n){var o=n.display;!o.scrollbarsClipped&&o.scroller.offsetWidth&&(o.nativeBarWidth=o.scroller.offsetWidth-o.scroller.clientWidth,o.heightForcer.style.height=tr(n)+"px",o.sizer.style.marginBottom=-o.nativeBarWidth+"px",o.sizer.style.borderRightWidth=tr(n)+"px",o.scrollbarsClipped=!0)}function WL(n){if(n.hasFocus())return null;var o=Re(te(n));if(!o||!be(n.display.lineDiv,o))return null;var c={activeElt:o};if(window.getSelection){var l=ae(n).getSelection();l.anchorNode&&l.extend&&be(n.display.lineDiv,l.anchorNode)&&(c.anchorNode=l.anchorNode,c.anchorOffset=l.anchorOffset,c.focusNode=l.focusNode,c.focusOffset=l.focusOffset)}return c}function UL(n){if(!(!n||!n.activeElt||n.activeElt==Re(le(n.activeElt)))&&(n.activeElt.focus(),!/^(INPUT|TEXTAREA)$/.test(n.activeElt.nodeName)&&n.anchorNode&&be(document.body,n.anchorNode)&&be(document.body,n.focusNode))){var o=n.activeElt.ownerDocument,c=o.defaultView.getSelection(),l=o.createRange();l.setEnd(n.anchorNode,n.anchorOffset),l.collapse(!1),c.removeAllRanges(),c.addRange(l),c.extend(n.focusNode,n.focusOffset)}}function ef(n,o){var c=n.display,l=n.doc;if(o.editorIsHidden)return jr(n),!1;if(!o.force&&o.visible.from>=c.viewFrom&&o.visible.to<=c.viewTo&&(c.updateLineNumbers==null||c.updateLineNumbers>=c.viewTo)&&c.renderedView==c.view&&Ym(n)==0)return!1;sy(n)&&(jr(n),o.dims=$u(n));var u=l.first+l.size,h=Math.max(o.visible.from-n.options.viewportMargin,l.first),m=Math.min(u,o.visible.to+n.options.viewportMargin);c.viewFrom<h&&h-c.viewFrom<20&&(h=Math.max(l.first,c.viewFrom)),c.viewTo>m&&c.viewTo-m<20&&(m=Math.min(u,c.viewTo)),yr&&(h=Iu(n.doc,h),m=Am(n.doc,m));var v=h!=c.viewFrom||m!=c.viewTo||c.lastWrapHeight!=o.wrapperHeight||c.lastWrapWidth!=o.wrapperWidth;EL(n,h,m),c.viewOffset=vr(ke(n.doc,c.viewFrom)),n.display.mover.style.top=c.viewOffset+"px";var b=Ym(n);if(!v&&b==0&&!o.force&&c.renderedView==c.view&&(c.updateLineNumbers==null||c.updateLineNumbers>=c.viewTo))return!1;var C=WL(n);return b>4&&(c.lineDiv.style.display="none"),$L(n,c.updateLineNumbers,o.dims),b>4&&(c.lineDiv.style.display=""),c.renderedView=c.view,UL(C),W(c.cursorDiv),W(c.selectionDiv),c.gutters.style.height=c.sizer.style.minHeight=0,v&&(c.lastWrapHeight=o.wrapperHeight,c.lastWrapWidth=o.wrapperWidth,ks(n,400)),c.updateLineNumbers=null,!0}function iy(n,o){for(var c=o.viewport,l=!0;;l=!1){if(!l||!n.options.lineWrapping||o.oldDisplayWidth==ci(n)){if(c&&c.top!=null&&(c={top:Math.min(n.doc.height+Ru(n.display)-Fu(n),c.top)}),o.visible=Pl(n.display,n.doc,c),o.visible.from>=n.display.viewFrom&&o.visible.to<=n.display.viewTo)break}else l&&(o.visible=Pl(n.display,n.doc,c));if(!ef(n,o))break;Ol(n);var u=ws(n);ys(n),to(n,u),rf(n,u),o.force=!1}o.signal(n,"update",n),(n.display.viewFrom!=n.display.reportedViewFrom||n.display.viewTo!=n.display.reportedViewTo)&&(o.signal(n,"viewportChange",n,n.display.viewFrom,n.display.viewTo),n.display.reportedViewFrom=n.display.viewFrom,n.display.reportedViewTo=n.display.viewTo)}function tf(n,o){var c=new Bl(n,o);if(ef(n,c)){Ol(n),iy(n,c);var l=ws(n);ys(n),to(n,l),rf(n,l),c.finish()}}function $L(n,o,c){var l=n.display,u=n.options.lineNumbers,h=l.lineDiv,m=h.firstChild;function v(K){var Z=K.nextSibling;return p&&E&&n.display.currentWheelTarget==K?K.style.display="none":K.parentNode.removeChild(K),Z}for(var b=l.view,C=l.viewFrom,P=0;P<b.length;P++){var z=b[P];if(!z.hidden)if(!z.node||z.node.parentNode!=h){var H=vL(n,z,C,c);h.insertBefore(H,m)}else{for(;m!=z.node;)m=v(m);var _=u&&o!=null&&o<=C&&z.lineNumber;z.changes&&(ye(z.changes,"gutter")>-1&&(_=!1),Dm(n,z,C,c)),_&&(W(z.lineNumber),z.lineNumber.appendChild(document.createTextNode(re(n.options,C)))),m=z.node.nextSibling}C+=z.size}for(;m;)m=v(m)}function nf(n){var o=n.gutters.offsetWidth;n.sizer.style.marginLeft=o+"px",xt(n,"gutterChanged",n)}function rf(n,o){n.display.sizer.style.minHeight=o.docHeight+"px",n.display.heightForcer.style.top=o.docHeight+"px",n.display.gutters.style.height=o.docHeight+n.display.barHeight+tr(n)+"px"}function oy(n){var o=n.display,c=o.view;if(!(!o.alignWidgets&&(!o.gutters.firstChild||!n.options.fixedGutter))){for(var l=Gu(o)-o.scroller.scrollLeft+n.doc.scrollLeft,u=o.gutters.offsetWidth,h=l+"px",m=0;m<c.length;m++)if(!c[m].hidden){n.options.fixedGutter&&(c[m].gutter&&(c[m].gutter.style.left=h),c[m].gutterBackground&&(c[m].gutterBackground.style.left=h));var v=c[m].alignable;if(v)for(var b=0;b<v.length;b++)v[b].style.left=h}n.options.fixedGutter&&(o.gutters.style.left=l+u+"px")}}function sy(n){if(!n.options.lineNumbers)return!1;var o=n.doc,c=re(n.options,o.first+o.size-1),l=n.display;if(c.length!=l.lineNumChars){var u=l.measure.appendChild(T("div",[T("div",c)],"CodeMirror-linenumber CodeMirror-gutter-elt")),h=u.firstChild.offsetWidth,m=u.offsetWidth-h;return l.lineGutter.style.width="",l.lineNumInnerWidth=Math.max(h,l.lineGutter.offsetWidth-m)+1,l.lineNumWidth=l.lineNumInnerWidth+m,l.lineNumChars=l.lineNumInnerWidth?c.length:-1,l.lineGutter.style.width=l.lineNumWidth+"px",nf(n.display),!0}return!1}function of(n,o){for(var c=[],l=!1,u=0;u<n.length;u++){var h=n[u],m=null;if(typeof h!="string"&&(m=h.style,h=h.className),h=="CodeMirror-linenumbers")if(o)l=!0;else continue;c.push({className:h,style:m})}return o&&!l&&c.push({className:"CodeMirror-linenumbers",style:null}),c}function ay(n){var o=n.gutters,c=n.gutterSpecs;W(o),n.lineGutter=null;for(var l=0;l<c.length;++l){var u=c[l],h=u.className,m=u.style,v=o.appendChild(T("div",null,"CodeMirror-gutter "+h));m&&(v.style.cssText=m),h=="CodeMirror-linenumbers"&&(n.lineGutter=v,v.style.width=(n.lineNumWidth||1)+"px")}o.style.display=c.length?"":"none",nf(n)}function Cs(n){ay(n.display),Vt(n),oy(n)}function GL(n,o,c,l){var u=this;this.input=c,u.scrollbarFiller=T("div",null,"CodeMirror-scrollbar-filler"),u.scrollbarFiller.setAttribute("cm-not-content","true"),u.gutterFiller=T("div",null,"CodeMirror-gutter-filler"),u.gutterFiller.setAttribute("cm-not-content","true"),u.lineDiv=ne("div",null,"CodeMirror-code"),u.selectionDiv=T("div",null,null,"position: relative; z-index: 1"),u.cursorDiv=T("div",null,"CodeMirror-cursors"),u.measure=T("div",null,"CodeMirror-measure"),u.lineMeasure=T("div",null,"CodeMirror-measure"),u.lineSpace=ne("div",[u.measure,u.lineMeasure,u.selectionDiv,u.cursorDiv,u.lineDiv],null,"position: relative; outline: none");var h=ne("div",[u.lineSpace],"CodeMirror-lines");u.mover=T("div",[h],null,"position: relative"),u.sizer=T("div",[u.mover],"CodeMirror-sizer"),u.sizerWidth=null,u.heightForcer=T("div",null,null,"position: absolute; height: "+rt+"px; width: 1px;"),u.gutters=T("div",null,"CodeMirror-gutters"),u.lineGutter=null,u.scroller=T("div",[u.sizer,u.heightForcer,u.gutters],"CodeMirror-scroll"),u.scroller.setAttribute("tabIndex","-1"),u.wrapper=T("div",[u.scrollbarFiller,u.gutterFiller,u.scroller],"CodeMirror"),y&&x>=105&&(u.wrapper.style.clipPath="inset(0px)"),u.wrapper.setAttribute("translate","no"),f&&d<8&&(u.gutters.style.zIndex=-1,u.scroller.style.paddingRight=0),!p&&!(r&&L)&&(u.scroller.draggable=!0),n&&(n.appendChild?n.appendChild(u.wrapper):n(u.wrapper)),u.viewFrom=u.viewTo=o.first,u.reportedViewFrom=u.reportedViewTo=o.first,u.view=[],u.renderedView=null,u.externalMeasured=null,u.viewOffset=0,u.lastWrapHeight=u.lastWrapWidth=0,u.updateLineNumbers=null,u.nativeBarWidth=u.barHeight=u.barWidth=0,u.scrollbarsClipped=!1,u.lineNumWidth=u.lineNumInnerWidth=u.lineNumChars=null,u.alignWidgets=!1,u.cachedCharWidth=u.cachedTextHeight=u.cachedPaddingH=null,u.maxLine=null,u.maxLineLength=0,u.maxLineChanged=!1,u.wheelDX=u.wheelDY=u.wheelStartX=u.wheelStartY=null,u.shift=!1,u.selForContextMenu=null,u.activeTouch=null,u.gutterSpecs=of(l.gutters,l.lineNumbers),ay(u),c.init(u)}var ql=0,wr=null;f?wr=-.53:r?wr=15:y?wr=-.7:k&&(wr=-1/3);function ly(n){var o=n.wheelDeltaX,c=n.wheelDeltaY;return o==null&&n.detail&&n.axis==n.HORIZONTAL_AXIS&&(o=n.detail),c==null&&n.detail&&n.axis==n.VERTICAL_AXIS?c=n.detail:c==null&&(c=n.wheelDelta),{x:o,y:c}}function VL(n){var o=ly(n);return o.x*=wr,o.y*=wr,o}function cy(n,o){y&&x==102&&(n.display.chromeScrollHack==null?n.display.sizer.style.pointerEvents="none":clearTimeout(n.display.chromeScrollHack),n.display.chromeScrollHack=setTimeout(function(){n.display.chromeScrollHack=null,n.display.sizer.style.pointerEvents=""},100));var c=ly(o),l=c.x,u=c.y,h=wr;o.deltaMode===0&&(l=o.deltaX,u=o.deltaY,h=1);var m=n.display,v=m.scroller,b=v.scrollWidth>v.clientWidth,C=v.scrollHeight>v.clientHeight;if(l&&b||u&&C){if(u&&E&&p){e:for(var P=o.target,z=m.view;P!=v;P=P.parentNode)for(var H=0;H<z.length;H++)if(z[H].node==P){n.display.currentWheelTarget=P;break e}}if(l&&!r&&!w&&h!=null){u&&C&&bs(n,Math.max(0,v.scrollTop+u*h)),hi(n,Math.max(0,v.scrollLeft+l*h)),(!u||u&&C)&&Ot(o),m.wheelStartX=null;return}if(u&&h!=null){var _=u*h,K=n.doc.scrollTop,Z=K+m.wrapper.clientHeight;_<0?K=Math.max(0,K+_-50):Z=Math.min(n.doc.height,Z+_+50),tf(n,{top:K,bottom:Z})}ql<20&&o.deltaMode!==0&&(m.wheelStartX==null?(m.wheelStartX=v.scrollLeft,m.wheelStartY=v.scrollTop,m.wheelDX=l,m.wheelDY=u,setTimeout(function(){if(m.wheelStartX!=null){var ie=v.scrollLeft-m.wheelStartX,ce=v.scrollTop-m.wheelStartY,pe=ce&&m.wheelDY&&ce/m.wheelDY||ie&&m.wheelDX&&ie/m.wheelDX;m.wheelStartX=m.wheelStartY=null,pe&&(wr=(wr*ql+pe)/(ql+1),++ql)}},200)):(m.wheelDX+=l,m.wheelDY+=u))}}var hn=function(n,o){this.ranges=n,this.primIndex=o};hn.prototype.primary=function(){return this.ranges[this.primIndex]},hn.prototype.equals=function(n){if(n==this)return!0;if(n.primIndex!=this.primIndex||n.ranges.length!=this.ranges.length)return!1;for(var o=0;o<this.ranges.length;o++){var c=this.ranges[o],l=n.ranges[o];if(!He(c.anchor,l.anchor)||!He(c.head,l.head))return!1}return!0},hn.prototype.deepCopy=function(){for(var n=[],o=0;o<this.ranges.length;o++)n[o]=new We(wt(this.ranges[o].anchor),wt(this.ranges[o].head));return new hn(n,this.primIndex)},hn.prototype.somethingSelected=function(){for(var n=0;n<this.ranges.length;n++)if(!this.ranges[n].empty())return!0;return!1},hn.prototype.contains=function(n,o){o||(o=n);for(var c=0;c<this.ranges.length;c++){var l=this.ranges[c];if(de(o,l.from())>=0&&de(n,l.to())<=0)return c}return-1};var We=function(n,o){this.anchor=n,this.head=o};We.prototype.from=function(){return Vi(this.anchor,this.head)},We.prototype.to=function(){return Gt(this.anchor,this.head)},We.prototype.empty=function(){return this.head.line==this.anchor.line&&this.head.ch==this.anchor.ch};function Hn(n,o,c){var l=n&&n.options.selectionsMayTouch,u=o[c];o.sort(function(H,_){return de(H.from(),_.from())}),c=ye(o,u);for(var h=1;h<o.length;h++){var m=o[h],v=o[h-1],b=de(v.to(),m.from());if(l&&!m.empty()?b>0:b>=0){var C=Vi(v.from(),m.from()),P=Gt(v.to(),m.to()),z=v.empty()?m.from()==m.head:v.from()==v.head;h<=c&&--c,o.splice(--h,2,new We(z?P:C,z?C:P))}}return new hn(o,c)}function Hr(n,o){return new hn([new We(n,o||n)],0)}function Wr(n){return n.text?G(n.from.line+n.text.length-1,Fe(n.text).length+(n.text.length==1?n.from.ch:0)):n.to}function uy(n,o){if(de(n,o.from)<0)return n;if(de(n,o.to)<=0)return Wr(o);var c=n.line+o.text.length-(o.to.line-o.from.line)-1,l=n.ch;return n.line==o.to.line&&(l+=Wr(o).ch-o.to.ch),G(c,l)}function sf(n,o){for(var c=[],l=0;l<n.sel.ranges.length;l++){var u=n.sel.ranges[l];c.push(new We(uy(u.anchor,o),uy(u.head,o)))}return Hn(n.cm,c,n.sel.primIndex)}function fy(n,o,c){return n.line==o.line?G(c.line,n.ch-o.ch+c.ch):G(c.line+(n.line-o.line),n.ch)}function KL(n,o,c){for(var l=[],u=G(n.first,0),h=u,m=0;m<o.length;m++){var v=o[m],b=fy(v.from,u,h),C=fy(Wr(v),u,h);if(u=v.to,h=C,c=="around"){var P=n.sel.ranges[m],z=de(P.head,P.anchor)<0;l[m]=new We(z?C:b,z?b:C)}else l[m]=new We(b,b)}return new hn(l,n.sel.primIndex)}function af(n){n.doc.mode=Ui(n.options,n.doc.modeOption),Ss(n)}function Ss(n){n.doc.iter(function(o){o.stateAfter&&(o.stateAfter=null),o.styles&&(o.styles=null)}),n.doc.modeFrontier=n.doc.highlightFrontier=n.doc.first,ks(n,100),n.state.modeGen++,n.curOp&&Vt(n)}function dy(n,o){return o.from.ch==0&&o.to.ch==0&&Fe(o.text)==""&&(!n.cm||n.cm.options.wholeLineUpdateBefore)}function lf(n,o,c,l){function u(pe){return c?c[pe]:null}function h(pe,ue,me){nL(pe,ue,me,l),xt(pe,"change",pe,o)}function m(pe,ue){for(var me=[],Ee=pe;Ee<ue;++Ee)me.push(new Ki(C[Ee],u(Ee),l));return me}var v=o.from,b=o.to,C=o.text,P=ke(n,v.line),z=ke(n,b.line),H=Fe(C),_=u(C.length-1),K=b.line-v.line;if(o.full)n.insert(0,m(0,C.length)),n.remove(C.length,n.size-C.length);else if(dy(n,o)){var Z=m(0,C.length-1);h(z,z.text,_),K&&n.remove(v.line,K),Z.length&&n.insert(v.line,Z)}else if(P==z)if(C.length==1)h(P,P.text.slice(0,v.ch)+H+P.text.slice(b.ch),_);else{var ie=m(1,C.length-1);ie.push(new Ki(H+P.text.slice(b.ch),_,l)),h(P,P.text.slice(0,v.ch)+C[0],u(0)),n.insert(v.line+1,ie)}else if(C.length==1)h(P,P.text.slice(0,v.ch)+C[0]+z.text.slice(b.ch),u(0)),n.remove(v.line+1,K);else{h(P,P.text.slice(0,v.ch)+C[0],u(0)),h(z,H+z.text.slice(b.ch),_);var ce=m(1,C.length-1);K>1&&n.remove(v.line+1,K-1),n.insert(v.line+1,ce)}xt(n,"change",n,o)}function Ur(n,o,c){function l(u,h,m){if(u.linked)for(var v=0;v<u.linked.length;++v){var b=u.linked[v];if(b.doc!=h){var C=m&&b.sharedHist;c&&!C||(o(b.doc,C),l(b.doc,u,C))}}}l(n,null,!0)}function hy(n,o){if(o.cm)throw new Error("This document is already in use.");n.doc=o,o.cm=n,Vu(n),af(n),py(n),n.options.direction=o.direction,n.options.lineWrapping||qu(n),n.options.mode=o.modeOption,Vt(n)}function py(n){(n.doc.direction=="rtl"?Ve:se)(n.display.lineDiv,"CodeMirror-rtl")}function YL(n){on(n,function(){py(n),Vt(n)})}function zl(n){this.done=[],this.undone=[],this.undoDepth=n?n.undoDepth:1/0,this.lastModTime=this.lastSelTime=0,this.lastOp=this.lastSelOp=null,this.lastOrigin=this.lastSelOrigin=null,this.generation=this.maxGeneration=n?n.maxGeneration:1}function cf(n,o){var c={from:wt(o.from),to:Wr(o),text:mr(n,o.from,o.to)};return yy(n,c,o.from.line,o.to.line+1),Ur(n,function(l){return yy(l,c,o.from.line,o.to.line+1)},!0),c}function gy(n){for(;n.length;){var o=Fe(n);if(o.ranges)n.pop();else break}}function QL(n,o){if(o)return gy(n.done),Fe(n.done);if(n.done.length&&!Fe(n.done).ranges)return Fe(n.done);if(n.done.length>1&&!n.done[n.done.length-2].ranges)return n.done.pop(),Fe(n.done)}function my(n,o,c,l){var u=n.history;u.undone.length=0;var h=+new Date,m,v;if((u.lastOp==l||u.lastOrigin==o.origin&&o.origin&&(o.origin.charAt(0)=="+"&&u.lastModTime>h-(n.cm?n.cm.options.historyEventDelay:500)||o.origin.charAt(0)=="*"))&&(m=QL(u,u.lastOp==l)))v=Fe(m.changes),de(o.from,o.to)==0&&de(o.from,v.to)==0?v.to=Wr(o):m.changes.push(cf(n,o));else{var b=Fe(u.done);for((!b||!b.ranges)&&Rl(n.sel,u.done),m={changes:[cf(n,o)],generation:u.generation},u.done.push(m);u.done.length>u.undoDepth;)u.done.shift(),u.done[0].ranges||u.done.shift()}u.done.push(c),u.generation=++u.maxGeneration,u.lastModTime=u.lastSelTime=h,u.lastOp=u.lastSelOp=l,u.lastOrigin=u.lastSelOrigin=o.origin,v||it(n,"historyAdded")}function XL(n,o,c,l){var u=o.charAt(0);return u=="*"||u=="+"&&c.ranges.length==l.ranges.length&&c.somethingSelected()==l.somethingSelected()&&new Date-n.history.lastSelTime<=(n.cm?n.cm.options.historyEventDelay:500)}function JL(n,o,c,l){var u=n.history,h=l&&l.origin;c==u.lastSelOp||h&&u.lastSelOrigin==h&&(u.lastModTime==u.lastSelTime&&u.lastOrigin==h||XL(n,h,Fe(u.done),o))?u.done[u.done.length-1]=o:Rl(o,u.done),u.lastSelTime=+new Date,u.lastSelOrigin=h,u.lastSelOp=c,l&&l.clearRedo!==!1&&gy(u.undone)}function Rl(n,o){var c=Fe(o);c&&c.ranges&&c.equals(n)||o.push(n)}function yy(n,o,c,l){var u=o["spans_"+n.id],h=0;n.iter(Math.max(n.first,c),Math.min(n.first+n.size,l),function(m){m.markedSpans&&((u||(u=o["spans_"+n.id]={}))[h]=m.markedSpans),++h})}function ZL(n){if(!n)return null;for(var o,c=0;c<n.length;++c)n[c].marker.explicitlyCleared?o||(o=n.slice(0,c)):o&&o.push(n[c]);return o?o.length?o:null:n}function eE(n,o){var c=o["spans_"+n.id];if(!c)return null;for(var l=[],u=0;u<o.text.length;++u)l.push(ZL(c[u]));return l}function vy(n,o){var c=eE(n,o),l=Ou(n,o);if(!c)return l;if(!l)return c;for(var u=0;u<c.length;++u){var h=c[u],m=l[u];if(h&&m)e:for(var v=0;v<m.length;++v){for(var b=m[v],C=0;C<h.length;++C)if(h[C].marker==b.marker)continue e;h.push(b)}else m&&(c[u]=m)}return c}function no(n,o,c){for(var l=[],u=0;u<n.length;++u){var h=n[u];if(h.ranges){l.push(c?hn.prototype.deepCopy.call(h):h);continue}var m=h.changes,v=[];l.push({changes:v});for(var b=0;b<m.length;++b){var C=m[b],P=void 0;if(v.push({from:C.from,to:C.to,text:C.text}),o)for(var z in C)(P=z.match(/^spans_(\d+)$/))&&ye(o,Number(P[1]))>-1&&(Fe(v)[z]=C[z],delete C[z])}}return l}function uf(n,o,c,l){if(l){var u=n.anchor;if(c){var h=de(o,u)<0;h!=de(c,u)<0?(u=o,o=c):h!=de(o,c)<0&&(o=c)}return new We(u,o)}else return new We(c||o,o)}function Fl(n,o,c,l,u){u==null&&(u=n.cm&&(n.cm.display.shift||n.extend)),Pt(n,new hn([uf(n.sel.primary(),o,c,u)],0),l)}function by(n,o,c){for(var l=[],u=n.cm&&(n.cm.display.shift||n.extend),h=0;h<n.sel.ranges.length;h++)l[h]=uf(n.sel.ranges[h],o[h],null,u);var m=Hn(n.cm,l,n.sel.primIndex);Pt(n,m,c)}function ff(n,o,c,l){var u=n.sel.ranges.slice(0);u[o]=c,Pt(n,Hn(n.cm,u,n.sel.primIndex),l)}function wy(n,o,c,l){Pt(n,Hr(o,c),l)}function tE(n,o,c){var l={ranges:o.ranges,update:function(u){this.ranges=[];for(var h=0;h<u.length;h++)this.ranges[h]=new We(Oe(n,u[h].anchor),Oe(n,u[h].head))},origin:c&&c.origin};return it(n,"beforeSelectionChange",n,l),n.cm&&it(n.cm,"beforeSelectionChange",n.cm,l),l.ranges!=o.ranges?Hn(n.cm,l.ranges,l.ranges.length-1):o}function xy(n,o,c){var l=n.history.done,u=Fe(l);u&&u.ranges?(l[l.length-1]=o,_l(n,o,c)):Pt(n,o,c)}function Pt(n,o,c){_l(n,o,c),JL(n,n.sel,n.cm?n.cm.curOp.id:NaN,c)}function _l(n,o,c){(rn(n,"beforeSelectionChange")||n.cm&&rn(n.cm,"beforeSelectionChange"))&&(o=tE(n,o,c));var l=c&&c.bias||(de(o.primary().head,n.sel.primary().head)<0?-1:1);ky(n,Sy(n,o,l,!0)),!(c&&c.scroll===!1)&&n.cm&&n.cm.getOption("readOnly")!="nocursor"&&eo(n.cm)}function ky(n,o){o.equals(n.sel)||(n.sel=o,n.cm&&(n.cm.curOp.updateInput=1,n.cm.curOp.selectionChanged=!0,Sn(n.cm)),xt(n,"cursorActivity",n))}function Cy(n){ky(n,Sy(n,n.sel,null,!1))}function Sy(n,o,c,l){for(var u,h=0;h<o.ranges.length;h++){var m=o.ranges[h],v=o.ranges.length==n.sel.ranges.length&&n.sel.ranges[h],b=jl(n,m.anchor,v&&v.anchor,c,l),C=m.head==m.anchor?b:jl(n,m.head,v&&v.head,c,l);(u||b!=m.anchor||C!=m.head)&&(u||(u=o.ranges.slice(0,h)),u[h]=new We(b,C))}return u?Hn(n.cm,u,o.primIndex):o}function ro(n,o,c,l,u){var h=ke(n,o.line);if(h.markedSpans)for(var m=0;m<h.markedSpans.length;++m){var v=h.markedSpans[m],b=v.marker,C="selectLeft"in b?!b.selectLeft:b.inclusiveLeft,P="selectRight"in b?!b.selectRight:b.inclusiveRight;if((v.from==null||(C?v.from<=o.ch:v.from<o.ch))&&(v.to==null||(P?v.to>=o.ch:v.to>o.ch))){if(u&&(it(b,"beforeCursorEnter"),b.explicitlyCleared))if(h.markedSpans){--m;continue}else break;if(!b.atomic)continue;if(c){var z=b.find(l<0?1:-1),H=void 0;if((l<0?P:C)&&(z=Ay(n,z,-l,z&&z.line==o.line?h:null)),z&&z.line==o.line&&(H=de(z,c))&&(l<0?H<0:H>0))return ro(n,z,o,l,u)}var _=b.find(l<0?-1:1);return(l<0?C:P)&&(_=Ay(n,_,l,_.line==o.line?h:null)),_?ro(n,_,o,l,u):null}}return o}function jl(n,o,c,l,u){var h=l||1,m=ro(n,o,c,h,u)||!u&&ro(n,o,c,h,!0)||ro(n,o,c,-h,u)||!u&&ro(n,o,c,-h,!0);return m||(n.cantEdit=!0,G(n.first,0))}function Ay(n,o,c,l){return c<0&&o.ch==0?o.line>n.first?Oe(n,G(o.line-1)):null:c>0&&o.ch==(l||ke(n,o.line)).text.length?o.line<n.first+n.size-1?G(o.line+1,0):null:new G(o.line,o.ch+c)}function Ty(n){n.setSelection(G(n.firstLine(),0),G(n.lastLine()),bt)}function Ly(n,o,c){var l={canceled:!1,from:o.from,to:o.to,text:o.text,origin:o.origin,cancel:function(){return l.canceled=!0}};return c&&(l.update=function(u,h,m,v){u&&(l.from=Oe(n,u)),h&&(l.to=Oe(n,h)),m&&(l.text=m),v!==void 0&&(l.origin=v)}),it(n,"beforeChange",n,l),n.cm&&it(n.cm,"beforeChange",n.cm,l),l.canceled?(n.cm&&(n.cm.curOp.updateInput=2),null):{from:l.from,to:l.to,text:l.text,origin:l.origin}}function io(n,o,c){if(n.cm){if(!n.cm.curOp)return kt(n.cm,io)(n,o,c);if(n.cm.state.suppressEdits)return}if(!((rn(n,"beforeChange")||n.cm&&rn(n.cm,"beforeChange"))&&(o=Ly(n,o,!0),!o))){var l=vm&&!c&&JT(n,o.from,o.to);if(l)for(var u=l.length-1;u>=0;--u)Ey(n,{from:l[u].from,to:l[u].to,text:u?[""]:o.text,origin:o.origin});else Ey(n,o)}}function Ey(n,o){if(!(o.text.length==1&&o.text[0]==""&&de(o.from,o.to)==0)){var c=sf(n,o);my(n,o,c,n.cm?n.cm.curOp.id:NaN),As(n,o,c,Ou(n,o));var l=[];Ur(n,function(u,h){!h&&ye(l,u.history)==-1&&(Oy(u.history,o),l.push(u.history)),As(u,o,null,Ou(u,o))})}}function Hl(n,o,c){var l=n.cm&&n.cm.state.suppressEdits;if(!(l&&!c)){for(var u=n.history,h,m=n.sel,v=o=="undo"?u.done:u.undone,b=o=="undo"?u.undone:u.done,C=0;C<v.length&&(h=v[C],!(c?h.ranges&&!h.equals(n.sel):!h.ranges));C++);if(C!=v.length){for(u.lastOrigin=u.lastSelOrigin=null;;)if(h=v.pop(),h.ranges){if(Rl(h,b),c&&!h.equals(n.sel)){Pt(n,h,{clearRedo:!1});return}m=h}else if(l){v.push(h);return}else break;var P=[];Rl(m,b),b.push({changes:P,generation:u.generation}),u.generation=h.generation||++u.maxGeneration;for(var z=rn(n,"beforeChange")||n.cm&&rn(n.cm,"beforeChange"),H=function(Z){var ie=h.changes[Z];if(ie.origin=o,z&&!Ly(n,ie,!1))return v.length=0,{};P.push(cf(n,ie));var ce=Z?sf(n,ie):Fe(v);As(n,ie,ce,vy(n,ie)),!Z&&n.cm&&n.cm.scrollIntoView({from:ie.from,to:Wr(ie)});var pe=[];Ur(n,function(ue,me){!me&&ye(pe,ue.history)==-1&&(Oy(ue.history,ie),pe.push(ue.history)),As(ue,ie,null,vy(ue,ie))})},_=h.changes.length-1;_>=0;--_){var K=H(_);if(K)return K.v}}}}function My(n,o){if(o!=0&&(n.first+=o,n.sel=new hn($e(n.sel.ranges,function(u){return new We(G(u.anchor.line+o,u.anchor.ch),G(u.head.line+o,u.head.ch))}),n.sel.primIndex),n.cm)){Vt(n.cm,n.first,n.first-o,o);for(var c=n.cm.display,l=c.viewFrom;l<c.viewTo;l++)_r(n.cm,l,"gutter")}}function As(n,o,c,l){if(n.cm&&!n.cm.curOp)return kt(n.cm,As)(n,o,c,l);if(o.to.line<n.first){My(n,o.text.length-1-(o.to.line-o.from.line));return}if(!(o.from.line>n.lastLine())){if(o.from.line<n.first){var u=o.text.length-1-(n.first-o.from.line);My(n,u),o={from:G(n.first,0),to:G(o.to.line+u,o.to.ch),text:[Fe(o.text)],origin:o.origin}}var h=n.lastLine();o.to.line>h&&(o={from:o.from,to:G(h,ke(n,h).text.length),text:[o.text[0]],origin:o.origin}),o.removed=mr(n,o.from,o.to),c||(c=sf(n,o)),n.cm?nE(n.cm,o,l):lf(n,o,l),_l(n,c,bt),n.cantEdit&&jl(n,G(n.firstLine(),0))&&(n.cantEdit=!1)}}function nE(n,o,c){var l=n.doc,u=n.display,h=o.from,m=o.to,v=!1,b=h.line;n.options.lineWrapping||(b=S(_n(ke(l,h.line))),l.iter(b,m.line+1,function(_){if(_==u.maxLine)return v=!0,!0})),l.sel.contains(o.from,o.to)>-1&&Sn(n),lf(l,o,c,Km(n)),n.options.lineWrapping||(l.iter(b,h.line+o.text.length,function(_){var K=Al(_);K>u.maxLineLength&&(u.maxLine=_,u.maxLineLength=K,u.maxLineChanged=!0,v=!1)}),v&&(n.curOp.updateMaxLine=!0)),$T(l,h.line),ks(n,400);var C=o.text.length-(m.line-h.line)-1;o.full?Vt(n):h.line==m.line&&o.text.length==1&&!dy(n.doc,o)?_r(n,h.line,"text"):Vt(n,h.line,m.line+1,C);var P=rn(n,"changes"),z=rn(n,"change");if(z||P){var H={from:h,to:m,text:o.text,removed:o.removed,origin:o.origin};z&&xt(n,"change",n,H),P&&(n.curOp.changeObjs||(n.curOp.changeObjs=[])).push(H)}n.display.selForContextMenu=null}function oo(n,o,c,l,u){var h;l||(l=c),de(l,c)<0&&(h=[l,c],c=h[0],l=h[1]),typeof o=="string"&&(o=n.splitLines(o)),io(n,{from:c,to:l,text:o,origin:u})}function Dy(n,o,c,l){c<n.line?n.line+=l:o<n.line&&(n.line=o,n.ch=0)}function Ny(n,o,c,l){for(var u=0;u<n.length;++u){var h=n[u],m=!0;if(h.ranges){h.copied||(h=n[u]=h.deepCopy(),h.copied=!0);for(var v=0;v<h.ranges.length;v++)Dy(h.ranges[v].anchor,o,c,l),Dy(h.ranges[v].head,o,c,l);continue}for(var b=0;b<h.changes.length;++b){var C=h.changes[b];if(c<C.from.line)C.from=G(C.from.line+l,C.from.ch),C.to=G(C.to.line+l,C.to.ch);else if(o<=C.to.line){m=!1;break}}m||(n.splice(0,u+1),u=0)}}function Oy(n,o){var c=o.from.line,l=o.to.line,u=o.text.length-(l-c)-1;Ny(n.done,c,l,u),Ny(n.undone,c,l,u)}function Ts(n,o,c,l){var u=o,h=o;return typeof o=="number"?h=ke(n,cm(n,o)):u=S(o),u==null?null:(l(h,u)&&n.cm&&_r(n.cm,u,c),h)}function Ls(n){this.lines=n,this.parent=null;for(var o=0,c=0;c<n.length;++c)n[c].parent=this,o+=n[c].height;this.height=o}Ls.prototype={chunkSize:function(){return this.lines.length},removeInner:function(n,o){for(var c=n,l=n+o;c<l;++c){var u=this.lines[c];this.height-=u.height,rL(u),xt(u,"delete")}this.lines.splice(n,o)},collapse:function(n){n.push.apply(n,this.lines)},insertInner:function(n,o,c){this.height+=c,this.lines=this.lines.slice(0,n).concat(o).concat(this.lines.slice(n));for(var l=0;l<o.length;++l)o[l].parent=this},iterN:function(n,o,c){for(var l=n+o;n<l;++n)if(c(this.lines[n]))return!0}};function Es(n){this.children=n;for(var o=0,c=0,l=0;l<n.length;++l){var u=n[l];o+=u.chunkSize(),c+=u.height,u.parent=this}this.size=o,this.height=c,this.parent=null}Es.prototype={chunkSize:function(){return this.size},removeInner:function(n,o){this.size-=o;for(var c=0;c<this.children.length;++c){var l=this.children[c],u=l.chunkSize();if(n<u){var h=Math.min(o,u-n),m=l.height;if(l.removeInner(n,h),this.height-=m-l.height,u==h&&(this.children.splice(c--,1),l.parent=null),(o-=h)==0)break;n=0}else n-=u}if(this.size-o<25&&(this.children.length>1||!(this.children[0]instanceof Ls))){var v=[];this.collapse(v),this.children=[new Ls(v)],this.children[0].parent=this}},collapse:function(n){for(var o=0;o<this.children.length;++o)this.children[o].collapse(n)},insertInner:function(n,o,c){this.size+=o.length,this.height+=c;for(var l=0;l<this.children.length;++l){var u=this.children[l],h=u.chunkSize();if(n<=h){if(u.insertInner(n,o,c),u.lines&&u.lines.length>50){for(var m=u.lines.length%25+25,v=m;v<u.lines.length;){var b=new Ls(u.lines.slice(v,v+=25));u.height-=b.height,this.children.splice(++l,0,b),b.parent=this}u.lines=u.lines.slice(0,m),this.maybeSpill()}break}n-=h}},maybeSpill:function(){if(!(this.children.length<=10)){var n=this;do{var o=n.children.splice(n.children.length-5,5),c=new Es(o);if(n.parent){n.size-=c.size,n.height-=c.height;var u=ye(n.parent.children,n);n.parent.children.splice(u+1,0,c)}else{var l=new Es(n.children);l.parent=n,n.children=[l,c],n=l}c.parent=n.parent}while(n.children.length>10);n.parent.maybeSpill()}},iterN:function(n,o,c){for(var l=0;l<this.children.length;++l){var u=this.children[l],h=u.chunkSize();if(n<h){var m=Math.min(o,h-n);if(u.iterN(n,m,c))return!0;if((o-=m)==0)break;n=0}else n-=h}}};var Ms=function(n,o,c){if(c)for(var l in c)c.hasOwnProperty(l)&&(this[l]=c[l]);this.doc=n,this.node=o};Ms.prototype.clear=function(){var n=this.doc.cm,o=this.line.widgets,c=this.line,l=S(c);if(!(l==null||!o)){for(var u=0;u<o.length;++u)o[u]==this&&o.splice(u--,1);o.length||(c.widgets=null);var h=gs(this);dn(c,Math.max(0,c.height-h)),n&&(on(n,function(){Py(n,c,-h),_r(n,l,"widget")}),xt(n,"lineWidgetCleared",n,this,l))}},Ms.prototype.changed=function(){var n=this,o=this.height,c=this.doc.cm,l=this.line;this.height=null;var u=gs(this)-o;u&&(Fr(this.doc,l)||dn(l,l.height+u),c&&on(c,function(){c.curOp.forceUpdate=!0,Py(c,l,u),xt(c,"lineWidgetChanged",c,n,S(l))}))},Bn(Ms);function Py(n,o,c){vr(o)<(n.curOp&&n.curOp.scrollTop||n.doc.scrollTop)&&Zu(n,c)}function rE(n,o,c,l){var u=new Ms(n,c,l),h=n.cm;return h&&u.noHScroll&&(h.display.alignWidgets=!0),Ts(n,o,"widget",function(m){var v=m.widgets||(m.widgets=[]);if(u.insertAt==null?v.push(u):v.splice(Math.min(v.length,Math.max(0,u.insertAt)),0,u),u.line=m,h&&!Fr(n,m)){var b=vr(m)<n.scrollTop;dn(m,m.height+gs(u)),b&&Zu(h,u.height),h.curOp.forceUpdate=!0}return!0}),h&&xt(h,"lineWidgetAdded",h,u,typeof o=="number"?o:S(o)),u}var Iy=0,$r=function(n,o){this.lines=[],this.type=o,this.doc=n,this.id=++Iy};$r.prototype.clear=function(){if(!this.explicitlyCleared){var n=this.doc.cm,o=n&&!n.curOp;if(o&&gi(n),rn(this,"clear")){var c=this.find();c&&xt(this,"clear",c.from,c.to)}for(var l=null,u=null,h=0;h<this.lines.length;++h){var m=this.lines[h],v=ds(m.markedSpans,this);n&&!this.collapsed?_r(n,S(m),"text"):n&&(v.to!=null&&(u=S(m)),v.from!=null&&(l=S(m))),m.markedSpans=KT(m.markedSpans,v),v.from==null&&this.collapsed&&!Fr(this.doc,m)&&n&&dn(m,Xi(n.display))}if(n&&this.collapsed&&!n.options.lineWrapping)for(var b=0;b<this.lines.length;++b){var C=_n(this.lines[b]),P=Al(C);P>n.display.maxLineLength&&(n.display.maxLine=C,n.display.maxLineLength=P,n.display.maxLineChanged=!0)}l!=null&&n&&this.collapsed&&Vt(n,l,u+1),this.lines.length=0,this.explicitlyCleared=!0,this.atomic&&this.doc.cantEdit&&(this.doc.cantEdit=!1,n&&Cy(n.doc)),n&&xt(n,"markerCleared",n,this,l,u),o&&mi(n),this.parent&&this.parent.clear()}},$r.prototype.find=function(n,o){n==null&&this.type=="bookmark"&&(n=1);for(var c,l,u=0;u<this.lines.length;++u){var h=this.lines[u],m=ds(h.markedSpans,this);if(m.from!=null&&(c=G(o?h:S(h),m.from),n==-1))return c;if(m.to!=null&&(l=G(o?h:S(h),m.to),n==1))return l}return c&&{from:c,to:l}},$r.prototype.changed=function(){var n=this,o=this.find(-1,!0),c=this,l=this.doc.cm;!o||!l||on(l,function(){var u=o.line,h=S(o.line),m=_u(l,h);if(m&&(_m(m),l.curOp.selectionChanged=l.curOp.forceUpdate=!0),l.curOp.updateMaxLine=!0,!Fr(c.doc,u)&&c.height!=null){var v=c.height;c.height=null;var b=gs(c)-v;b&&dn(u,u.height+b)}xt(l,"markerChanged",l,n)})},$r.prototype.attachLine=function(n){if(!this.lines.length&&this.doc.cm){var o=this.doc.cm.curOp;(!o.maybeHiddenMarkers||ye(o.maybeHiddenMarkers,this)==-1)&&(o.maybeUnhiddenMarkers||(o.maybeUnhiddenMarkers=[])).push(this)}this.lines.push(n)},$r.prototype.detachLine=function(n){if(this.lines.splice(ye(this.lines,n),1),!this.lines.length&&this.doc.cm){var o=this.doc.cm.curOp;(o.maybeHiddenMarkers||(o.maybeHiddenMarkers=[])).push(this)}},Bn($r);function so(n,o,c,l,u){if(l&&l.shared)return iE(n,o,c,l,u);if(n.cm&&!n.cm.curOp)return kt(n.cm,so)(n,o,c,l,u);var h=new $r(n,u),m=de(o,c);if(l&&we(l,h,!1),m>0||m==0&&h.clearWhenEmpty!==!1)return h;if(h.replacedWith&&(h.collapsed=!0,h.widgetNode=ne("span",[h.replacedWith],"CodeMirror-widget"),l.handleMouseEvents||h.widgetNode.setAttribute("cm-ignore-events","true"),l.insertLeft&&(h.widgetNode.insertLeft=!0)),h.collapsed){if(Sm(n,o.line,o,c,h)||o.line!=c.line&&Sm(n,c.line,o,c,h))throw new Error("Inserting collapsed marker partially overlapping an existing one");VT()}h.addToHistory&&my(n,{from:o,to:c,origin:"markText"},n.sel,NaN);var v=o.line,b=n.cm,C;if(n.iter(v,c.line+1,function(z){b&&h.collapsed&&!b.options.lineWrapping&&_n(z)==b.display.maxLine&&(C=!0),h.collapsed&&v!=o.line&&dn(z,0),YT(z,new xl(h,v==o.line?o.ch:null,v==c.line?c.ch:null),n.cm&&n.cm.curOp),++v}),h.collapsed&&n.iter(o.line,c.line+1,function(z){Fr(n,z)&&dn(z,0)}),h.clearOnEnter&&Le(h,"beforeCursorEnter",function(){return h.clear()}),h.readOnly&&(GT(),(n.history.done.length||n.history.undone.length)&&n.clearHistory()),h.collapsed&&(h.id=++Iy,h.atomic=!0),b){if(C&&(b.curOp.updateMaxLine=!0),h.collapsed)Vt(b,o.line,c.line+1);else if(h.className||h.startStyle||h.endStyle||h.css||h.attributes||h.title)for(var P=o.line;P<=c.line;P++)_r(b,P,"text");h.atomic&&Cy(b.doc),xt(b,"markerAdded",b,h)}return h}var Ds=function(n,o){this.markers=n,this.primary=o;for(var c=0;c<n.length;++c)n[c].parent=this};Ds.prototype.clear=function(){if(!this.explicitlyCleared){this.explicitlyCleared=!0;for(var n=0;n<this.markers.length;++n)this.markers[n].clear();xt(this,"clear")}},Ds.prototype.find=function(n,o){return this.primary.find(n,o)},Bn(Ds);function iE(n,o,c,l,u){l=we(l),l.shared=!1;var h=[so(n,o,c,l,u)],m=h[0],v=l.widgetNode;return Ur(n,function(b){v&&(l.widgetNode=v.cloneNode(!0)),h.push(so(b,Oe(b,o),Oe(b,c),l,u));for(var C=0;C<b.linked.length;++C)if(b.linked[C].isParent)return;m=Fe(h)}),new Ds(h,m)}function By(n){return n.findMarks(G(n.first,0),n.clipPos(G(n.lastLine())),function(o){return o.parent})}function oE(n,o){for(var c=0;c<o.length;c++){var l=o[c],u=l.find(),h=n.clipPos(u.from),m=n.clipPos(u.to);if(de(h,m)){var v=so(n,h,m,l.primary,l.primary.type);l.markers.push(v),v.parent=l}}}function sE(n){for(var o=function(l){var u=n[l],h=[u.primary.doc];Ur(u.primary.doc,function(b){return h.push(b)});for(var m=0;m<u.markers.length;m++){var v=u.markers[m];ye(h,v.doc)==-1&&(v.parent=null,u.markers.splice(m--,1))}},c=0;c<n.length;c++)o(c)}var aE=0,Kt=function(n,o,c,l,u){if(!(this instanceof Kt))return new Kt(n,o,c,l,u);c==null&&(c=0),Es.call(this,[new Ls([new Ki("",null)])]),this.first=c,this.scrollTop=this.scrollLeft=0,this.cantEdit=!1,this.cleanGeneration=1,this.modeFrontier=this.highlightFrontier=c;var h=G(c,0);this.sel=Hr(h),this.history=new zl(null),this.id=++aE,this.modeOption=o,this.lineSep=l,this.direction=u=="rtl"?"rtl":"ltr",this.extend=!1,typeof n=="string"&&(n=this.splitLines(n)),lf(this,{from:h,to:h,text:n}),Pt(this,Hr(h),bt)};Kt.prototype=Q(Es.prototype,{constructor:Kt,iter:function(n,o,c){c?this.iterN(n-this.first,o-n,c):this.iterN(this.first,this.first+this.size,n)},insert:function(n,o){for(var c=0,l=0;l<o.length;++l)c+=o[l].height;this.insertInner(n-this.first,o,c)},remove:function(n,o){this.removeInner(n-this.first,o)},getValue:function(n){var o=us(this,this.first,this.first+this.size);return n===!1?o:o.join(n||this.lineSeparator())},setValue:Ct(function(n){var o=G(this.first,0),c=this.first+this.size-1;io(this,{from:o,to:G(c,ke(this,c).text.length),text:this.splitLines(n),origin:"setValue",full:!0},!0),this.cm&&vs(this.cm,0,0),Pt(this,Hr(o),bt)}),replaceRange:function(n,o,c,l){o=Oe(this,o),c=c?Oe(this,c):o,oo(this,n,o,c,l)},getRange:function(n,o,c){var l=mr(this,Oe(this,n),Oe(this,o));return c===!1?l:c===""?l.join(""):l.join(c||this.lineSeparator())},getLine:function(n){var o=this.getLineHandle(n);return o&&o.text},getLineHandle:function(n){if(X(this,n))return ke(this,n)},getLineNumber:function(n){return S(n)},getLineHandleVisualStart:function(n){return typeof n=="number"&&(n=ke(this,n)),_n(n)},lineCount:function(){return this.size},firstLine:function(){return this.first},lastLine:function(){return this.first+this.size-1},clipPos:function(n){return Oe(this,n)},getCursor:function(n){var o=this.sel.primary(),c;return n==null||n=="head"?c=o.head:n=="anchor"?c=o.anchor:n=="end"||n=="to"||n===!1?c=o.to():c=o.from(),c},listSelections:function(){return this.sel.ranges},somethingSelected:function(){return this.sel.somethingSelected()},setCursor:Ct(function(n,o,c){wy(this,Oe(this,typeof n=="number"?G(n,o||0):n),null,c)}),setSelection:Ct(function(n,o,c){wy(this,Oe(this,n),Oe(this,o||n),c)}),extendSelection:Ct(function(n,o,c){Fl(this,Oe(this,n),o&&Oe(this,o),c)}),extendSelections:Ct(function(n,o){by(this,um(this,n),o)}),extendSelectionsBy:Ct(function(n,o){var c=$e(this.sel.ranges,n);by(this,um(this,c),o)}),setSelections:Ct(function(n,o,c){if(n.length){for(var l=[],u=0;u<n.length;u++)l[u]=new We(Oe(this,n[u].anchor),Oe(this,n[u].head||n[u].anchor));o==null&&(o=Math.min(n.length-1,this.sel.primIndex)),Pt(this,Hn(this.cm,l,o),c)}}),addSelection:Ct(function(n,o,c){var l=this.sel.ranges.slice(0);l.push(new We(Oe(this,n),Oe(this,o||n))),Pt(this,Hn(this.cm,l,l.length-1),c)}),getSelection:function(n){for(var o=this.sel.ranges,c,l=0;l<o.length;l++){var u=mr(this,o[l].from(),o[l].to());c=c?c.concat(u):u}return n===!1?c:c.join(n||this.lineSeparator())},getSelections:function(n){for(var o=[],c=this.sel.ranges,l=0;l<c.length;l++){var u=mr(this,c[l].from(),c[l].to());n!==!1&&(u=u.join(n||this.lineSeparator())),o[l]=u}return o},replaceSelection:function(n,o,c){for(var l=[],u=0;u<this.sel.ranges.length;u++)l[u]=n;this.replaceSelections(l,o,c||"+input")},replaceSelections:Ct(function(n,o,c){for(var l=[],u=this.sel,h=0;h<u.ranges.length;h++){var m=u.ranges[h];l[h]={from:m.from(),to:m.to(),text:this.splitLines(n[h]),origin:c}}for(var v=o&&o!="end"&&KL(this,l,o),b=l.length-1;b>=0;b--)io(this,l[b]);v?xy(this,v):this.cm&&eo(this.cm)}),undo:Ct(function(){Hl(this,"undo")}),redo:Ct(function(){Hl(this,"redo")}),undoSelection:Ct(function(){Hl(this,"undo",!0)}),redoSelection:Ct(function(){Hl(this,"redo",!0)}),setExtending:function(n){this.extend=n},getExtending:function(){return this.extend},historySize:function(){for(var n=this.history,o=0,c=0,l=0;l<n.done.length;l++)n.done[l].ranges||++o;for(var u=0;u<n.undone.length;u++)n.undone[u].ranges||++c;return{undo:o,redo:c}},clearHistory:function(){var n=this;this.history=new zl(this.history),Ur(this,function(o){return o.history=n.history},!0)},markClean:function(){this.cleanGeneration=this.changeGeneration(!0)},changeGeneration:function(n){return n&&(this.history.lastOp=this.history.lastSelOp=this.history.lastOrigin=null),this.history.generation},isClean:function(n){return this.history.generation==(n||this.cleanGeneration)},getHistory:function(){return{done:no(this.history.done),undone:no(this.history.undone)}},setHistory:function(n){var o=this.history=new zl(this.history);o.done=no(n.done.slice(0),null,!0),o.undone=no(n.undone.slice(0),null,!0)},setGutterMarker:Ct(function(n,o,c){return Ts(this,n,"gutter",function(l){var u=l.gutterMarkers||(l.gutterMarkers={});return u[o]=c,!c&&ml(u)&&(l.gutterMarkers=null),!0})}),clearGutter:Ct(function(n){var o=this;this.iter(function(c){c.gutterMarkers&&c.gutterMarkers[n]&&Ts(o,c,"gutter",function(){return c.gutterMarkers[n]=null,ml(c.gutterMarkers)&&(c.gutterMarkers=null),!0})})}),lineInfo:function(n){var o;if(typeof n=="number"){if(!X(this,n)||(o=n,n=ke(this,n),!n))return null}else if(o=S(n),o==null)return null;return{line:o,handle:n,text:n.text,gutterMarkers:n.gutterMarkers,textClass:n.textClass,bgClass:n.bgClass,wrapClass:n.wrapClass,widgets:n.widgets}},addLineClass:Ct(function(n,o,c){return Ts(this,n,o=="gutter"?"gutter":"class",function(l){var u=o=="text"?"textClass":o=="background"?"bgClass":o=="gutter"?"gutterClass":"wrapClass";if(!l[u])l[u]=c;else{if(F(c).test(l[u]))return!1;l[u]+=" "+c}return!0})}),removeLineClass:Ct(function(n,o,c){return Ts(this,n,o=="gutter"?"gutter":"class",function(l){var u=o=="text"?"textClass":o=="background"?"bgClass":o=="gutter"?"gutterClass":"wrapClass",h=l[u];if(h)if(c==null)l[u]=null;else{var m=h.match(F(c));if(!m)return!1;var v=m.index+m[0].length;l[u]=h.slice(0,m.index)+(!m.index||v==h.length?"":" ")+h.slice(v)||null}else return!1;return!0})}),addLineWidget:Ct(function(n,o,c){return rE(this,n,o,c)}),removeLineWidget:function(n){n.clear()},markText:function(n,o,c){return so(this,Oe(this,n),Oe(this,o),c,c&&c.type||"range")},setBookmark:function(n,o){var c={replacedWith:o&&(o.nodeType==null?o.widget:o),insertLeft:o&&o.insertLeft,clearWhenEmpty:!1,shared:o&&o.shared,handleMouseEvents:o&&o.handleMouseEvents};return n=Oe(this,n),so(this,n,n,c,"bookmark")},findMarksAt:function(n){n=Oe(this,n);var o=[],c=ke(this,n.line).markedSpans;if(c)for(var l=0;l<c.length;++l){var u=c[l];(u.from==null||u.from<=n.ch)&&(u.to==null||u.to>=n.ch)&&o.push(u.marker.parent||u.marker)}return o},findMarks:function(n,o,c){n=Oe(this,n),o=Oe(this,o);var l=[],u=n.line;return this.iter(n.line,o.line+1,function(h){var m=h.markedSpans;if(m)for(var v=0;v<m.length;v++){var b=m[v];!(b.to!=null&&u==n.line&&n.ch>=b.to||b.from==null&&u!=n.line||b.from!=null&&u==o.line&&b.from>=o.ch)&&(!c||c(b.marker))&&l.push(b.marker.parent||b.marker)}++u}),l},getAllMarks:function(){var n=[];return this.iter(function(o){var c=o.markedSpans;if(c)for(var l=0;l<c.length;++l)c[l].from!=null&&n.push(c[l].marker)}),n},posFromIndex:function(n){var o,c=this.first,l=this.lineSeparator().length;return this.iter(function(u){var h=u.text.length+l;if(h>n)return o=n,!0;n-=h,++c}),Oe(this,G(c,o))},indexFromPos:function(n){n=Oe(this,n);var o=n.ch;if(n.line<this.first||n.ch<0)return 0;var c=this.lineSeparator().length;return this.iter(this.first,n.line,function(l){o+=l.text.length+c}),o},copy:function(n){var o=new Kt(us(this,this.first,this.first+this.size),this.modeOption,this.first,this.lineSep,this.direction);return o.scrollTop=this.scrollTop,o.scrollLeft=this.scrollLeft,o.sel=this.sel,o.extend=!1,n&&(o.history.undoDepth=this.history.undoDepth,o.setHistory(this.getHistory())),o},linkedDoc:function(n){n||(n={});var o=this.first,c=this.first+this.size;n.from!=null&&n.from>o&&(o=n.from),n.to!=null&&n.to<c&&(c=n.to);var l=new Kt(us(this,o,c),n.mode||this.modeOption,o,this.lineSep,this.direction);return n.sharedHist&&(l.history=this.history),(this.linked||(this.linked=[])).push({doc:l,sharedHist:n.sharedHist}),l.linked=[{doc:this,isParent:!0,sharedHist:n.sharedHist}],oE(l,By(this)),l},unlinkDoc:function(n){if(n instanceof et&&(n=n.doc),this.linked)for(var o=0;o<this.linked.length;++o){var c=this.linked[o];if(c.doc==n){this.linked.splice(o,1),n.unlinkDoc(this),sE(By(this));break}}if(n.history==this.history){var l=[n.id];Ur(n,function(u){return l.push(u.id)},!0),n.history=new zl(null),n.history.done=no(this.history.done,l),n.history.undone=no(this.history.undone,l)}},iterLinkedDocs:function(n){Ur(this,n)},getMode:function(){return this.mode},getEditor:function(){return this.cm},splitLines:function(n){return this.lineSep?n.split(this.lineSep):An(n)},lineSeparator:function(){return this.lineSep||`
`},setDirection:Ct(function(n){n!="rtl"&&(n="ltr"),n!=this.direction&&(this.direction=n,this.iter(function(o){return o.order=null}),this.cm&&YL(this.cm))})}),Kt.prototype.eachLine=Kt.prototype.iter;var qy=0;function lE(n){var o=this;if(zy(o),!(ot(o,n)||br(o.display,n))){Ot(n),f&&(qy=+new Date);var c=fi(o,n,!0),l=n.dataTransfer.files;if(!(!c||o.isReadOnly()))if(l&&l.length&&window.FileReader&&window.File)for(var u=l.length,h=Array(u),m=0,v=function(){++m==u&&kt(o,function(){c=Oe(o.doc,c);var _={from:c,to:c,text:o.doc.splitLines(h.filter(function(K){return K!=null}).join(o.doc.lineSeparator())),origin:"paste"};io(o.doc,_),xy(o.doc,Hr(Oe(o.doc,c),Oe(o.doc,Wr(_))))})()},b=function(_,K){if(o.options.allowDropFileTypes&&ye(o.options.allowDropFileTypes,_.type)==-1){v();return}var Z=new FileReader;Z.onerror=function(){return v()},Z.onload=function(){var ie=Z.result;if(/[\x00-\x08\x0e-\x1f]{2}/.test(ie)){v();return}h[K]=ie,v()},Z.readAsText(_)},C=0;C<l.length;C++)b(l[C],C);else{if(o.state.draggingText&&o.doc.sel.contains(c)>-1){o.state.draggingText(n),setTimeout(function(){return o.display.input.focus()},20);return}try{var P=n.dataTransfer.getData("Text");if(P){var z;if(o.state.draggingText&&!o.state.draggingText.copy&&(z=o.listSelections()),_l(o.doc,Hr(c,c)),z)for(var H=0;H<z.length;++H)oo(o.doc,"",z[H].anchor,z[H].head,"drag");o.replaceSelection(P,"around","paste"),o.display.input.focus()}}catch{}}}}function cE(n,o){if(f&&(!n.state.draggingText||+new Date-qy<100)){Br(o);return}if(!(ot(n,o)||br(n.display,o))&&(o.dataTransfer.setData("Text",n.getSelection()),o.dataTransfer.effectAllowed="copyMove",o.dataTransfer.setDragImage&&!k)){var c=T("img",null,null,"position: fixed; left: 0; top: 0;");c.src="data:image/gif;base64,R0lGODlhAQABAAAAACH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==",w&&(c.width=c.height=1,n.display.wrapper.appendChild(c),c._top=c.offsetTop),o.dataTransfer.setDragImage(c,0,0),w&&c.parentNode.removeChild(c)}}function uE(n,o){var c=fi(n,o);if(c){var l=document.createDocumentFragment();Ku(n,c,l),n.display.dragCursor||(n.display.dragCursor=T("div",null,"CodeMirror-cursors CodeMirror-dragcursors"),n.display.lineSpace.insertBefore(n.display.dragCursor,n.display.cursorDiv)),J(n.display.dragCursor,l)}}function zy(n){n.display.dragCursor&&(n.display.lineSpace.removeChild(n.display.dragCursor),n.display.dragCursor=null)}function Ry(n){if(document.getElementsByClassName){for(var o=document.getElementsByClassName("CodeMirror"),c=[],l=0;l<o.length;l++){var u=o[l].CodeMirror;u&&c.push(u)}c.length&&c[0].operation(function(){for(var h=0;h<c.length;h++)n(c[h])})}}var Fy=!1;function fE(){Fy||(dE(),Fy=!0)}function dE(){var n;Le(window,"resize",function(){n==null&&(n=setTimeout(function(){n=null,Ry(hE)},100))}),Le(window,"blur",function(){return Ry(Zi)})}function hE(n){var o=n.display;o.cachedCharWidth=o.cachedTextHeight=o.cachedPaddingH=null,o.scrollbarsClipped=!1,n.setSize()}for(var Gr={3:"Pause",8:"Backspace",9:"Tab",13:"Enter",16:"Shift",17:"Ctrl",18:"Alt",19:"Pause",20:"CapsLock",27:"Esc",32:"Space",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"Left",38:"Up",39:"Right",40:"Down",44:"PrintScrn",45:"Insert",46:"Delete",59:";",61:"=",91:"Mod",92:"Mod",93:"Mod",106:"*",107:"=",109:"-",110:".",111:"/",145:"ScrollLock",173:"-",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'",224:"Mod",63232:"Up",63233:"Down",63234:"Left",63235:"Right",63272:"Delete",63273:"Home",63275:"End",63276:"PageUp",63277:"PageDown",63302:"Insert"},Ns=0;Ns<10;Ns++)Gr[Ns+48]=Gr[Ns+96]=String(Ns);for(var Wl=65;Wl<=90;Wl++)Gr[Wl]=String.fromCharCode(Wl);for(var Os=1;Os<=12;Os++)Gr[Os+111]=Gr[Os+63235]="F"+Os;var xr={};xr.basic={Left:"goCharLeft",Right:"goCharRight",Up:"goLineUp",Down:"goLineDown",End:"goLineEnd",Home:"goLineStartSmart",PageUp:"goPageUp",PageDown:"goPageDown",Delete:"delCharAfter",Backspace:"delCharBefore","Shift-Backspace":"delCharBefore",Tab:"defaultTab","Shift-Tab":"indentAuto",Enter:"newlineAndIndent",Insert:"toggleOverwrite",Esc:"singleSelection"},xr.pcDefault={"Ctrl-A":"selectAll","Ctrl-D":"deleteLine","Ctrl-Z":"undo","Shift-Ctrl-Z":"redo","Ctrl-Y":"redo","Ctrl-Home":"goDocStart","Ctrl-End":"goDocEnd","Ctrl-Up":"goLineUp","Ctrl-Down":"goLineDown","Ctrl-Left":"goGroupLeft","Ctrl-Right":"goGroupRight","Alt-Left":"goLineStart","Alt-Right":"goLineEnd","Ctrl-Backspace":"delGroupBefore","Ctrl-Delete":"delGroupAfter","Ctrl-S":"save","Ctrl-F":"find","Ctrl-G":"findNext","Shift-Ctrl-G":"findPrev","Shift-Ctrl-F":"replace","Shift-Ctrl-R":"replaceAll","Ctrl-[":"indentLess","Ctrl-]":"indentMore","Ctrl-U":"undoSelection","Shift-Ctrl-U":"redoSelection","Alt-U":"redoSelection",fallthrough:"basic"},xr.emacsy={"Ctrl-F":"goCharRight","Ctrl-B":"goCharLeft","Ctrl-P":"goLineUp","Ctrl-N":"goLineDown","Ctrl-A":"goLineStart","Ctrl-E":"goLineEnd","Ctrl-V":"goPageDown","Shift-Ctrl-V":"goPageUp","Ctrl-D":"delCharAfter","Ctrl-H":"delCharBefore","Alt-Backspace":"delWordBefore","Ctrl-K":"killLine","Ctrl-T":"transposeChars","Ctrl-O":"openLine"},xr.macDefault={"Cmd-A":"selectAll","Cmd-D":"deleteLine","Cmd-Z":"undo","Shift-Cmd-Z":"redo","Cmd-Y":"redo","Cmd-Home":"goDocStart","Cmd-Up":"goDocStart","Cmd-End":"goDocEnd","Cmd-Down":"goDocEnd","Alt-Left":"goGroupLeft","Alt-Right":"goGroupRight","Cmd-Left":"goLineLeft","Cmd-Right":"goLineRight","Alt-Backspace":"delGroupBefore","Ctrl-Alt-Backspace":"delGroupAfter","Alt-Delete":"delGroupAfter","Cmd-S":"save","Cmd-F":"find","Cmd-G":"findNext","Shift-Cmd-G":"findPrev","Cmd-Alt-F":"replace","Shift-Cmd-Alt-F":"replaceAll","Cmd-[":"indentLess","Cmd-]":"indentMore","Cmd-Backspace":"delWrappedLineLeft","Cmd-Delete":"delWrappedLineRight","Cmd-U":"undoSelection","Shift-Cmd-U":"redoSelection","Ctrl-Up":"goDocStart","Ctrl-Down":"goDocEnd",fallthrough:["basic","emacsy"]},xr.default=E?xr.macDefault:xr.pcDefault;function pE(n){var o=n.split(/-(?!$)/);n=o[o.length-1];for(var c,l,u,h,m=0;m<o.length-1;m++){var v=o[m];if(/^(cmd|meta|m)$/i.test(v))h=!0;else if(/^a(lt)?$/i.test(v))c=!0;else if(/^(c|ctrl|control)$/i.test(v))l=!0;else if(/^s(hift)?$/i.test(v))u=!0;else throw new Error("Unrecognized modifier name: "+v)}return c&&(n="Alt-"+n),l&&(n="Ctrl-"+n),h&&(n="Cmd-"+n),u&&(n="Shift-"+n),n}function gE(n){var o={};for(var c in n)if(n.hasOwnProperty(c)){var l=n[c];if(/^(name|fallthrough|(de|at)tach)$/.test(c))continue;if(l=="..."){delete n[c];continue}for(var u=$e(c.split(" "),pE),h=0;h<u.length;h++){var m=void 0,v=void 0;h==u.length-1?(v=u.join(" "),m=l):(v=u.slice(0,h+1).join(" "),m="...");var b=o[v];if(!b)o[v]=m;else if(b!=m)throw new Error("Inconsistent bindings for "+v)}delete n[c]}for(var C in o)n[C]=o[C];return n}function ao(n,o,c,l){o=Ul(o);var u=o.call?o.call(n,l):o[n];if(u===!1)return"nothing";if(u==="...")return"multi";if(u!=null&&c(u))return"handled";if(o.fallthrough){if(Object.prototype.toString.call(o.fallthrough)!="[object Array]")return ao(n,o.fallthrough,c,l);for(var h=0;h<o.fallthrough.length;h++){var m=ao(n,o.fallthrough[h],c,l);if(m)return m}}}function _y(n){var o=typeof n=="string"?n:Gr[n.keyCode];return o=="Ctrl"||o=="Alt"||o=="Shift"||o=="Mod"}function jy(n,o,c){var l=n;return o.altKey&&l!="Alt"&&(n="Alt-"+n),(R?o.metaKey:o.ctrlKey)&&l!="Ctrl"&&(n="Ctrl-"+n),(R?o.ctrlKey:o.metaKey)&&l!="Mod"&&(n="Cmd-"+n),!c&&o.shiftKey&&l!="Shift"&&(n="Shift-"+n),n}function Hy(n,o){if(w&&n.keyCode==34&&n.char)return!1;var c=Gr[n.keyCode];return c==null||n.altGraphKey?!1:(n.keyCode==3&&n.code&&(c=n.code),jy(c,n,o))}function Ul(n){return typeof n=="string"?xr[n]:n}function lo(n,o){for(var c=n.doc.sel.ranges,l=[],u=0;u<c.length;u++){for(var h=o(c[u]);l.length&&de(h.from,Fe(l).to)<=0;){var m=l.pop();if(de(m.from,h.from)<0){h.from=m.from;break}}l.push(h)}on(n,function(){for(var v=l.length-1;v>=0;v--)oo(n.doc,"",l[v].from,l[v].to,"+delete");eo(n)})}function df(n,o,c){var l=Or(n.text,o+c,c);return l<0||l>n.text.length?null:l}function hf(n,o,c){var l=df(n,o.ch,c);return l==null?null:new G(o.line,l,c<0?"after":"before")}function pf(n,o,c,l,u){if(n){o.doc.direction=="rtl"&&(u=-u);var h=ze(c,o.doc.direction);if(h){var m=u<0?Fe(h):h[0],v=u<0==(m.level==1),b=v?"after":"before",C;if(m.level>0||o.doc.direction=="rtl"){var P=Qi(o,c);C=u<0?c.text.length-1:0;var z=nr(o,P,C).top;C=Jn(function(H){return nr(o,P,H).top==z},u<0==(m.level==1)?m.from:m.to-1,C),b=="before"&&(C=df(c,C,1))}else C=u<0?m.to:m.from;return new G(l,C,b)}}return new G(l,u<0?c.text.length:0,u<0?"before":"after")}function mE(n,o,c,l){var u=ze(o,n.doc.direction);if(!u)return hf(o,c,l);c.ch>=o.text.length?(c.ch=o.text.length,c.sticky="before"):c.ch<=0&&(c.ch=0,c.sticky="after");var h=Ir(u,c.ch,c.sticky),m=u[h];if(n.doc.direction=="ltr"&&m.level%2==0&&(l>0?m.to>c.ch:m.from<c.ch))return hf(o,c,l);var v=function(ce,pe){return df(o,ce instanceof G?ce.ch:ce,pe)},b,C=function(ce){return n.options.lineWrapping?(b=b||Qi(n,o),Vm(n,o,b,ce)):{begin:0,end:o.text.length}},P=C(c.sticky=="before"?v(c,-1):c.ch);if(n.doc.direction=="rtl"||m.level==1){var z=m.level==1==l<0,H=v(c,z?1:-1);if(H!=null&&(z?H<=m.to&&H<=P.end:H>=m.from&&H>=P.begin)){var _=z?"before":"after";return new G(c.line,H,_)}}var K=function(ce,pe,ue){for(var me=function(Ke,St){return St?new G(c.line,v(Ke,1),"before"):new G(c.line,Ke,"after")};ce>=0&&ce<u.length;ce+=pe){var Ee=u[ce],Te=pe>0==(Ee.level!=1),Ie=Te?ue.begin:v(ue.end,-1);if(Ee.from<=Ie&&Ie<Ee.to||(Ie=Te?Ee.from:v(Ee.to,-1),ue.begin<=Ie&&Ie<ue.end))return me(Ie,Te)}},Z=K(h+l,l,P);if(Z)return Z;var ie=l>0?P.end:v(P.begin,-1);return ie!=null&&!(l>0&&ie==o.text.length)&&(Z=K(l>0?0:u.length-1,l,C(ie)),Z)?Z:null}var Ps={selectAll:Ty,singleSelection:function(n){return n.setSelection(n.getCursor("anchor"),n.getCursor("head"),bt)},killLine:function(n){return lo(n,function(o){if(o.empty()){var c=ke(n.doc,o.head.line).text.length;return o.head.ch==c&&o.head.line<n.lastLine()?{from:o.head,to:G(o.head.line+1,0)}:{from:o.head,to:G(o.head.line,c)}}else return{from:o.from(),to:o.to()}})},deleteLine:function(n){return lo(n,function(o){return{from:G(o.from().line,0),to:Oe(n.doc,G(o.to().line+1,0))}})},delLineLeft:function(n){return lo(n,function(o){return{from:G(o.from().line,0),to:o.from()}})},delWrappedLineLeft:function(n){return lo(n,function(o){var c=n.charCoords(o.head,"div").top+5,l=n.coordsChar({left:0,top:c},"div");return{from:l,to:o.from()}})},delWrappedLineRight:function(n){return lo(n,function(o){var c=n.charCoords(o.head,"div").top+5,l=n.coordsChar({left:n.display.lineDiv.offsetWidth+100,top:c},"div");return{from:o.from(),to:l}})},undo:function(n){return n.undo()},redo:function(n){return n.redo()},undoSelection:function(n){return n.undoSelection()},redoSelection:function(n){return n.redoSelection()},goDocStart:function(n){return n.extendSelection(G(n.firstLine(),0))},goDocEnd:function(n){return n.extendSelection(G(n.lastLine()))},goLineStart:function(n){return n.extendSelectionsBy(function(o){return Wy(n,o.head.line)},{origin:"+move",bias:1})},goLineStartSmart:function(n){return n.extendSelectionsBy(function(o){return Uy(n,o.head)},{origin:"+move",bias:1})},goLineEnd:function(n){return n.extendSelectionsBy(function(o){return yE(n,o.head.line)},{origin:"+move",bias:-1})},goLineRight:function(n){return n.extendSelectionsBy(function(o){var c=n.cursorCoords(o.head,"div").top+5;return n.coordsChar({left:n.display.lineDiv.offsetWidth+100,top:c},"div")},je)},goLineLeft:function(n){return n.extendSelectionsBy(function(o){var c=n.cursorCoords(o.head,"div").top+5;return n.coordsChar({left:0,top:c},"div")},je)},goLineLeftSmart:function(n){return n.extendSelectionsBy(function(o){var c=n.cursorCoords(o.head,"div").top+5,l=n.coordsChar({left:0,top:c},"div");return l.ch<n.getLine(l.line).search(/\S/)?Uy(n,o.head):l},je)},goLineUp:function(n){return n.moveV(-1,"line")},goLineDown:function(n){return n.moveV(1,"line")},goPageUp:function(n){return n.moveV(-1,"page")},goPageDown:function(n){return n.moveV(1,"page")},goCharLeft:function(n){return n.moveH(-1,"char")},goCharRight:function(n){return n.moveH(1,"char")},goColumnLeft:function(n){return n.moveH(-1,"column")},goColumnRight:function(n){return n.moveH(1,"column")},goWordLeft:function(n){return n.moveH(-1,"word")},goGroupRight:function(n){return n.moveH(1,"group")},goGroupLeft:function(n){return n.moveH(-1,"group")},goWordRight:function(n){return n.moveH(1,"word")},delCharBefore:function(n){return n.deleteH(-1,"codepoint")},delCharAfter:function(n){return n.deleteH(1,"char")},delWordBefore:function(n){return n.deleteH(-1,"word")},delWordAfter:function(n){return n.deleteH(1,"word")},delGroupBefore:function(n){return n.deleteH(-1,"group")},delGroupAfter:function(n){return n.deleteH(1,"group")},indentAuto:function(n){return n.indentSelection("smart")},indentMore:function(n){return n.indentSelection("add")},indentLess:function(n){return n.indentSelection("subtract")},insertTab:function(n){return n.replaceSelection("	")},insertSoftTab:function(n){for(var o=[],c=n.listSelections(),l=n.options.tabSize,u=0;u<c.length;u++){var h=c[u].from(),m=ge(n.getLine(h.line),h.ch,l);o.push(fn(l-m%l))}n.replaceSelections(o)},defaultTab:function(n){n.somethingSelected()?n.indentSelection("add"):n.execCommand("insertTab")},transposeChars:function(n){return on(n,function(){for(var o=n.listSelections(),c=[],l=0;l<o.length;l++)if(o[l].empty()){var u=o[l].head,h=ke(n.doc,u.line).text;if(h){if(u.ch==h.length&&(u=new G(u.line,u.ch-1)),u.ch>0)u=new G(u.line,u.ch+1),n.replaceRange(h.charAt(u.ch-1)+h.charAt(u.ch-2),G(u.line,u.ch-2),u,"+transpose");else if(u.line>n.doc.first){var m=ke(n.doc,u.line-1).text;m&&(u=new G(u.line,1),n.replaceRange(h.charAt(0)+n.doc.lineSeparator()+m.charAt(m.length-1),G(u.line-1,m.length-1),u,"+transpose"))}}c.push(new We(u,u))}n.setSelections(c)})},newlineAndIndent:function(n){return on(n,function(){for(var o=n.listSelections(),c=o.length-1;c>=0;c--)n.replaceRange(n.doc.lineSeparator(),o[c].anchor,o[c].head,"+input");o=n.listSelections();for(var l=0;l<o.length;l++)n.indentLine(o[l].from().line,null,!0);eo(n)})},openLine:function(n){return n.replaceSelection(`
`,"start")},toggleOverwrite:function(n){return n.toggleOverwrite()}};function Wy(n,o){var c=ke(n.doc,o),l=_n(c);return l!=c&&(o=S(l)),pf(!0,n,l,o,1)}function yE(n,o){var c=ke(n.doc,o),l=eL(c);return l!=c&&(o=S(l)),pf(!0,n,c,o,-1)}function Uy(n,o){var c=Wy(n,o.line),l=ke(n.doc,c.line),u=ze(l,n.doc.direction);if(!u||u[0].level==0){var h=Math.max(c.ch,l.text.search(/\S/)),m=o.line==c.line&&o.ch<=h&&o.ch;return G(c.line,m?0:h,c.sticky)}return c}function $l(n,o,c){if(typeof o=="string"&&(o=Ps[o],!o))return!1;n.display.input.ensurePolled();var l=n.display.shift,u=!1;try{n.isReadOnly()&&(n.state.suppressEdits=!0),c&&(n.display.shift=!1),u=o(n)!=zt}finally{n.display.shift=l,n.state.suppressEdits=!1}return u}function vE(n,o,c){for(var l=0;l<n.state.keyMaps.length;l++){var u=ao(o,n.state.keyMaps[l],c,n);if(u)return u}return n.options.extraKeys&&ao(o,n.options.extraKeys,c,n)||ao(o,n.options.keyMap,c,n)}var bE=new he;function Is(n,o,c,l){var u=n.state.keySeq;if(u){if(_y(o))return"handled";if(/\'$/.test(o)?n.state.keySeq=null:bE.set(50,function(){n.state.keySeq==u&&(n.state.keySeq=null,n.display.input.reset())}),$y(n,u+" "+o,c,l))return!0}return $y(n,o,c,l)}function $y(n,o,c,l){var u=vE(n,o,l);return u=="multi"&&(n.state.keySeq=o),u=="handled"&&xt(n,"keyHandled",n,o,c),(u=="handled"||u=="multi")&&(Ot(c),Yu(n)),!!u}function Gy(n,o){var c=Hy(o,!0);return c?o.shiftKey&&!n.state.keySeq?Is(n,"Shift-"+c,o,function(l){return $l(n,l,!0)})||Is(n,c,o,function(l){if(typeof l=="string"?/^go[A-Z]/.test(l):l.motion)return $l(n,l)}):Is(n,c,o,function(l){return $l(n,l)}):!1}function wE(n,o,c){return Is(n,"'"+c+"'",o,function(l){return $l(n,l,!0)})}var gf=null;function Vy(n){var o=this;if(!(n.target&&n.target!=o.display.input.getField())&&(o.curOp.focus=Re(te(o)),!ot(o,n))){f&&d<11&&n.keyCode==27&&(n.returnValue=!1);var c=n.keyCode;o.display.shift=c==16||n.shiftKey;var l=Gy(o,n);w&&(gf=l?c:null,!l&&c==88&&!bl&&(E?n.metaKey:n.ctrlKey)&&o.replaceSelection("",null,"cut")),r&&!E&&!l&&c==46&&n.shiftKey&&!n.ctrlKey&&document.execCommand&&document.execCommand("cut"),c==18&&!/\bCodeMirror-crosshair\b/.test(o.display.lineDiv.className)&&xE(o)}}function xE(n){var o=n.display.lineDiv;Ve(o,"CodeMirror-crosshair");function c(l){(l.keyCode==18||!l.altKey)&&(se(o,"CodeMirror-crosshair"),Nt(document,"keyup",c),Nt(document,"mouseover",c))}Le(document,"keyup",c),Le(document,"mouseover",c)}function Ky(n){n.keyCode==16&&(this.doc.sel.shift=!1),ot(this,n)}function Yy(n){var o=this;if(!(n.target&&n.target!=o.display.input.getField())&&!(br(o.display,n)||ot(o,n)||n.ctrlKey&&!n.altKey||E&&n.metaKey)){var c=n.keyCode,l=n.charCode;if(w&&c==gf){gf=null,Ot(n);return}if(!(w&&(!n.which||n.which<10)&&Gy(o,n))){var u=String.fromCharCode(l??c);u!="\b"&&(wE(o,n,u)||o.display.input.onKeyPress(n))}}}var kE=400,mf=function(n,o,c){this.time=n,this.pos=o,this.button=c};mf.prototype.compare=function(n,o,c){return this.time+kE>n&&de(o,this.pos)==0&&c==this.button};var Bs,qs;function CE(n,o){var c=+new Date;return qs&&qs.compare(c,n,o)?(Bs=qs=null,"triple"):Bs&&Bs.compare(c,n,o)?(qs=new mf(c,n,o),Bs=null,"double"):(Bs=new mf(c,n,o),qs=null,"single")}function Qy(n){var o=this,c=o.display;if(!(ot(o,n)||c.activeTouch&&c.input.supportsTouch())){if(c.input.ensurePolled(),c.shift=n.shiftKey,br(c,n)){p||(c.scroller.draggable=!1,setTimeout(function(){return c.scroller.draggable=!0},100));return}if(!yf(o,n)){var l=fi(o,n),u=qn(n),h=l?CE(l,u):"single";ae(o).focus(),u==1&&o.state.selectingText&&o.state.selectingText(n),!(l&&SE(o,u,l,h,n))&&(u==1?l?TE(o,l,h,n):as(n)==c.scroller&&Ot(n):u==2?(l&&Fl(o.doc,l),setTimeout(function(){return c.input.focus()},20)):u==3&&(j?o.display.input.onContextMenu(n):Qu(o)))}}}function SE(n,o,c,l,u){var h="Click";return l=="double"?h="Double"+h:l=="triple"&&(h="Triple"+h),h=(o==1?"Left":o==2?"Middle":"Right")+h,Is(n,jy(h,u),u,function(m){if(typeof m=="string"&&(m=Ps[m]),!m)return!1;var v=!1;try{n.isReadOnly()&&(n.state.suppressEdits=!0),v=m(n,c)!=zt}finally{n.state.suppressEdits=!1}return v})}function AE(n,o,c){var l=n.getOption("configureMouse"),u=l?l(n,o,c):{};if(u.unit==null){var h=N?c.shiftKey&&c.metaKey:c.altKey;u.unit=h?"rectangle":o=="single"?"char":o=="double"?"word":"line"}return(u.extend==null||n.doc.extend)&&(u.extend=n.doc.extend||c.shiftKey),u.addNew==null&&(u.addNew=E?c.metaKey:c.ctrlKey),u.moveOnDrag==null&&(u.moveOnDrag=!(E?c.altKey:c.ctrlKey)),u}function TE(n,o,c,l){f?setTimeout(fe(Xm,n),0):n.curOp.focus=Re(te(n));var u=AE(n,c,l),h=n.doc.sel,m;n.options.dragDrop&&Eu&&!n.isReadOnly()&&c=="single"&&(m=h.contains(o))>-1&&(de((m=h.ranges[m]).from(),o)<0||o.xRel>0)&&(de(m.to(),o)>0||o.xRel<0)?LE(n,l,o,u):EE(n,l,o,u)}function LE(n,o,c,l){var u=n.display,h=!1,m=kt(n,function(C){p&&(u.scroller.draggable=!1),n.state.draggingText=!1,n.state.delayingBlurEvent&&(n.hasFocus()?n.state.delayingBlurEvent=!1:Qu(n)),Nt(u.wrapper.ownerDocument,"mouseup",m),Nt(u.wrapper.ownerDocument,"mousemove",v),Nt(u.scroller,"dragstart",b),Nt(u.scroller,"drop",m),h||(Ot(C),l.addNew||Fl(n.doc,c,null,null,l.extend),p&&!k||f&&d==9?setTimeout(function(){u.wrapper.ownerDocument.body.focus({preventScroll:!0}),u.input.focus()},20):u.input.focus())}),v=function(C){h=h||Math.abs(o.clientX-C.clientX)+Math.abs(o.clientY-C.clientY)>=10},b=function(){return h=!0};p&&(u.scroller.draggable=!0),n.state.draggingText=m,m.copy=!l.moveOnDrag,Le(u.wrapper.ownerDocument,"mouseup",m),Le(u.wrapper.ownerDocument,"mousemove",v),Le(u.scroller,"dragstart",b),Le(u.scroller,"drop",m),n.state.delayingBlurEvent=!0,setTimeout(function(){return u.input.focus()},20),u.scroller.dragDrop&&u.scroller.dragDrop()}function Xy(n,o,c){if(c=="char")return new We(o,o);if(c=="word")return n.findWordAt(o);if(c=="line")return new We(G(o.line,0),Oe(n.doc,G(o.line+1,0)));var l=c(n,o);return new We(l.from,l.to)}function EE(n,o,c,l){f&&Qu(n);var u=n.display,h=n.doc;Ot(o);var m,v,b=h.sel,C=b.ranges;if(l.addNew&&!l.extend?(v=h.sel.contains(c),v>-1?m=C[v]:m=new We(c,c)):(m=h.sel.primary(),v=h.sel.primIndex),l.unit=="rectangle")l.addNew||(m=new We(c,c)),c=fi(n,o,!0,!0),v=-1;else{var P=Xy(n,c,l.unit);l.extend?m=uf(m,P.anchor,P.head,l.extend):m=P}l.addNew?v==-1?(v=C.length,Pt(h,Hn(n,C.concat([m]),v),{scroll:!1,origin:"*mouse"})):C.length>1&&C[v].empty()&&l.unit=="char"&&!l.extend?(Pt(h,Hn(n,C.slice(0,v).concat(C.slice(v+1)),0),{scroll:!1,origin:"*mouse"}),b=h.sel):ff(h,v,m,yt):(v=0,Pt(h,new hn([m],0),yt),b=h.sel);var z=c;function H(ue){if(de(z,ue)!=0)if(z=ue,l.unit=="rectangle"){for(var me=[],Ee=n.options.tabSize,Te=ge(ke(h,c.line).text,c.ch,Ee),Ie=ge(ke(h,ue.line).text,ue.ch,Ee),Ke=Math.min(Te,Ie),St=Math.max(Te,Ie),tt=Math.min(c.line,ue.line),sn=Math.min(n.lastLine(),Math.max(c.line,ue.line));tt<=sn;tt++){var Yt=ke(h,tt).text,dt=ut(Yt,Ke,Ee);Ke==St?me.push(new We(G(tt,dt),G(tt,dt))):Yt.length>dt&&me.push(new We(G(tt,dt),G(tt,ut(Yt,St,Ee))))}me.length||me.push(new We(c,c)),Pt(h,Hn(n,b.ranges.slice(0,v).concat(me),v),{origin:"*mouse",scroll:!1}),n.scrollIntoView(ue)}else{var Qt=m,Et=Xy(n,ue,l.unit),vt=Qt.anchor,ht;de(Et.anchor,vt)>0?(ht=Et.head,vt=Vi(Qt.from(),Et.anchor)):(ht=Et.anchor,vt=Gt(Qt.to(),Et.head));var at=b.ranges.slice(0);at[v]=ME(n,new We(Oe(h,vt),ht)),Pt(h,Hn(n,at,v),yt)}}var _=u.wrapper.getBoundingClientRect(),K=0;function Z(ue){var me=++K,Ee=fi(n,ue,!0,l.unit=="rectangle");if(Ee)if(de(Ee,z)!=0){n.curOp.focus=Re(te(n)),H(Ee);var Te=Pl(u,h);(Ee.line>=Te.to||Ee.line<Te.from)&&setTimeout(kt(n,function(){K==me&&Z(ue)}),150)}else{var Ie=ue.clientY<_.top?-20:ue.clientY>_.bottom?20:0;Ie&&setTimeout(kt(n,function(){K==me&&(u.scroller.scrollTop+=Ie,Z(ue))}),50)}}function ie(ue){n.state.selectingText=!1,K=1/0,ue&&(Ot(ue),u.input.focus()),Nt(u.wrapper.ownerDocument,"mousemove",ce),Nt(u.wrapper.ownerDocument,"mouseup",pe),h.history.lastSelOrigin=null}var ce=kt(n,function(ue){ue.buttons===0||!qn(ue)?ie(ue):Z(ue)}),pe=kt(n,ie);n.state.selectingText=pe,Le(u.wrapper.ownerDocument,"mousemove",ce),Le(u.wrapper.ownerDocument,"mouseup",pe)}function ME(n,o){var c=o.anchor,l=o.head,u=ke(n.doc,c.line);if(de(c,l)==0&&c.sticky==l.sticky)return o;var h=ze(u);if(!h)return o;var m=Ir(h,c.ch,c.sticky),v=h[m];if(v.from!=c.ch&&v.to!=c.ch)return o;var b=m+(v.from==c.ch==(v.level!=1)?0:1);if(b==0||b==h.length)return o;var C;if(l.line!=c.line)C=(l.line-c.line)*(n.doc.direction=="ltr"?1:-1)>0;else{var P=Ir(h,l.ch,l.sticky),z=P-m||(l.ch-c.ch)*(v.level==1?-1:1);P==b-1||P==b?C=z<0:C=z>0}var H=h[b+(C?-1:0)],_=C==(H.level==1),K=_?H.from:H.to,Z=_?"after":"before";return c.ch==K&&c.sticky==Z?o:new We(new G(c.line,K,Z),l)}function Jy(n,o,c,l){var u,h;if(o.touches)u=o.touches[0].clientX,h=o.touches[0].clientY;else try{u=o.clientX,h=o.clientY}catch{return!1}if(u>=Math.floor(n.display.gutters.getBoundingClientRect().right))return!1;l&&Ot(o);var m=n.display,v=m.lineDiv.getBoundingClientRect();if(h>v.bottom||!rn(n,c))return $t(o);h-=v.top-m.viewOffset;for(var b=0;b<n.display.gutterSpecs.length;++b){var C=m.gutters.childNodes[b];if(C&&C.getBoundingClientRect().right>=u){var P=q(n.doc,h),z=n.display.gutterSpecs[b];return it(n,c,n,P,z.className,o),$t(o)}}}function yf(n,o){return Jy(n,o,"gutterClick",!0)}function Zy(n,o){br(n.display,o)||DE(n,o)||ot(n,o,"contextmenu")||j||n.display.input.onContextMenu(o)}function DE(n,o){return rn(n,"gutterContextMenu")?Jy(n,o,"gutterContextMenu",!1):!1}function ev(n){n.display.wrapper.className=n.display.wrapper.className.replace(/\s*cm-s-\S+/g,"")+n.options.theme.replace(/(^|\s)\s*/g," cm-s-"),ms(n)}var co={toString:function(){return"CodeMirror.Init"}},tv={},Gl={};function NE(n){var o=n.optionHandlers;function c(l,u,h,m){n.defaults[l]=u,h&&(o[l]=m?function(v,b,C){C!=co&&h(v,b,C)}:h)}n.defineOption=c,n.Init=co,c("value","",function(l,u){return l.setValue(u)},!0),c("mode",null,function(l,u){l.doc.modeOption=u,af(l)},!0),c("indentUnit",2,af,!0),c("indentWithTabs",!1),c("smartIndent",!0),c("tabSize",4,function(l){Ss(l),ms(l),Vt(l)},!0),c("lineSeparator",null,function(l,u){if(l.doc.lineSep=u,!!u){var h=[],m=l.doc.first;l.doc.iter(function(b){for(var C=0;;){var P=b.text.indexOf(u,C);if(P==-1)break;C=P+u.length,h.push(G(m,P))}m++});for(var v=h.length-1;v>=0;v--)oo(l.doc,u,h[v],G(h[v].line,h[v].ch+u.length))}}),c("specialChars",/[\u0000-\u001f\u007f-\u009f\u00ad\u061c\u200b\u200e\u200f\u2028\u2029\u202d\u202e\u2066\u2067\u2069\ufeff\ufff9-\ufffc]/g,function(l,u,h){l.state.specialChars=new RegExp(u.source+(u.test("	")?"":"|	"),"g"),h!=co&&l.refresh()}),c("specialCharPlaceholder",sL,function(l){return l.refresh()},!0),c("electricChars",!0),c("inputStyle",L?"contenteditable":"textarea",function(){throw new Error("inputStyle can not (yet) be changed in a running editor")},!0),c("spellcheck",!1,function(l,u){return l.getInputField().spellcheck=u},!0),c("autocorrect",!1,function(l,u){return l.getInputField().autocorrect=u},!0),c("autocapitalize",!1,function(l,u){return l.getInputField().autocapitalize=u},!0),c("rtlMoveVisually",!B),c("wholeLineUpdateBefore",!0),c("theme","default",function(l){ev(l),Cs(l)},!0),c("keyMap","default",function(l,u,h){var m=Ul(u),v=h!=co&&Ul(h);v&&v.detach&&v.detach(l,m),m.attach&&m.attach(l,v||null)}),c("extraKeys",null),c("configureMouse",null),c("lineWrapping",!1,PE,!0),c("gutters",[],function(l,u){l.display.gutterSpecs=of(u,l.options.lineNumbers),Cs(l)},!0),c("fixedGutter",!0,function(l,u){l.display.gutters.style.left=u?Gu(l.display)+"px":"0",l.refresh()},!0),c("coverGutterNextToScrollbar",!1,function(l){return to(l)},!0),c("scrollbarStyle","native",function(l){ry(l),to(l),l.display.scrollbars.setScrollTop(l.doc.scrollTop),l.display.scrollbars.setScrollLeft(l.doc.scrollLeft)},!0),c("lineNumbers",!1,function(l,u){l.display.gutterSpecs=of(l.options.gutters,u),Cs(l)},!0),c("firstLineNumber",1,Cs,!0),c("lineNumberFormatter",function(l){return l},Cs,!0),c("showCursorWhenSelecting",!1,ys,!0),c("resetSelectionOnContextMenu",!0),c("lineWiseCopyCut",!0),c("pasteLinesPerSelection",!0),c("selectionsMayTouch",!1),c("readOnly",!1,function(l,u){u=="nocursor"&&(Zi(l),l.display.input.blur()),l.display.input.readOnlyChanged(u)}),c("screenReaderLabel",null,function(l,u){u=u===""?null:u,l.display.input.screenReaderLabelChanged(u)}),c("disableInput",!1,function(l,u){u||l.display.input.reset()},!0),c("dragDrop",!0,OE),c("allowDropFileTypes",null),c("cursorBlinkRate",530),c("cursorScrollMargin",0),c("cursorHeight",1,ys,!0),c("singleCursorHeightPerLine",!0,ys,!0),c("workTime",100),c("workDelay",100),c("flattenSpans",!0,Ss,!0),c("addModeClass",!1,Ss,!0),c("pollInterval",100),c("undoDepth",200,function(l,u){return l.doc.history.undoDepth=u}),c("historyEventDelay",1250),c("viewportMargin",10,function(l){return l.refresh()},!0),c("maxHighlightLength",1e4,Ss,!0),c("moveInputWithCursor",!0,function(l,u){u||l.display.input.resetPosition()}),c("tabindex",null,function(l,u){return l.display.input.getField().tabIndex=u||""}),c("autofocus",null),c("direction","ltr",function(l,u){return l.doc.setDirection(u)},!0),c("phrases",null)}function OE(n,o,c){var l=c&&c!=co;if(!o!=!l){var u=n.display.dragFunctions,h=o?Le:Nt;h(n.display.scroller,"dragstart",u.start),h(n.display.scroller,"dragenter",u.enter),h(n.display.scroller,"dragover",u.over),h(n.display.scroller,"dragleave",u.leave),h(n.display.scroller,"drop",u.drop)}}function PE(n){n.options.lineWrapping?(Ve(n.display.wrapper,"CodeMirror-wrap"),n.display.sizer.style.minWidth="",n.display.sizerWidth=null):(se(n.display.wrapper,"CodeMirror-wrap"),qu(n)),Vu(n),Vt(n),ms(n),setTimeout(function(){return to(n)},100)}function et(n,o){var c=this;if(!(this instanceof et))return new et(n,o);this.options=o=o?we(o):{},we(tv,o,!1);var l=o.value;typeof l=="string"?l=new Kt(l,o.mode,null,o.lineSeparator,o.direction):o.mode&&(l.modeOption=o.mode),this.doc=l;var u=new et.inputStyles[o.inputStyle](this),h=this.display=new GL(n,l,u,o);h.wrapper.CodeMirror=this,ev(this),o.lineWrapping&&(this.display.wrapper.className+=" CodeMirror-wrap"),ry(this),this.state={keyMaps:[],overlays:[],modeGen:0,overwrite:!1,delayingBlurEvent:!1,focused:!1,suppressEdits:!1,pasteIncoming:-1,cutIncoming:-1,selectingText:!1,draggingText:!1,highlight:new he,keySeq:null,specialChars:null},o.autofocus&&!L&&h.input.focus(),f&&d<11&&setTimeout(function(){return c.display.input.reset(!0)},20),IE(this),fE(),gi(this),this.curOp.forceUpdate=!0,hy(this,l),o.autofocus&&!L||this.hasFocus()?setTimeout(function(){c.hasFocus()&&!c.state.focused&&Xu(c)},20):Zi(this);for(var m in Gl)Gl.hasOwnProperty(m)&&Gl[m](this,o[m],co);sy(this),o.finishInit&&o.finishInit(this);for(var v=0;v<vf.length;++v)vf[v](this);mi(this),p&&o.lineWrapping&&getComputedStyle(h.lineDiv).textRendering=="optimizelegibility"&&(h.lineDiv.style.textRendering="auto")}et.defaults=tv,et.optionHandlers=Gl;function IE(n){var o=n.display;Le(o.scroller,"mousedown",kt(n,Qy)),f&&d<11?Le(o.scroller,"dblclick",kt(n,function(b){if(!ot(n,b)){var C=fi(n,b);if(!(!C||yf(n,b)||br(n.display,b))){Ot(b);var P=n.findWordAt(C);Fl(n.doc,P.anchor,P.head)}}})):Le(o.scroller,"dblclick",function(b){return ot(n,b)||Ot(b)}),Le(o.scroller,"contextmenu",function(b){return Zy(n,b)}),Le(o.input.getField(),"contextmenu",function(b){o.scroller.contains(b.target)||Zy(n,b)});var c,l={end:0};function u(){o.activeTouch&&(c=setTimeout(function(){return o.activeTouch=null},1e3),l=o.activeTouch,l.end=+new Date)}function h(b){if(b.touches.length!=1)return!1;var C=b.touches[0];return C.radiusX<=1&&C.radiusY<=1}function m(b,C){if(C.left==null)return!0;var P=C.left-b.left,z=C.top-b.top;return P*P+z*z>20*20}Le(o.scroller,"touchstart",function(b){if(!ot(n,b)&&!h(b)&&!yf(n,b)){o.input.ensurePolled(),clearTimeout(c);var C=+new Date;o.activeTouch={start:C,moved:!1,prev:C-l.end<=300?l:null},b.touches.length==1&&(o.activeTouch.left=b.touches[0].pageX,o.activeTouch.top=b.touches[0].pageY)}}),Le(o.scroller,"touchmove",function(){o.activeTouch&&(o.activeTouch.moved=!0)}),Le(o.scroller,"touchend",function(b){var C=o.activeTouch;if(C&&!br(o,b)&&C.left!=null&&!C.moved&&new Date-C.start<300){var P=n.coordsChar(o.activeTouch,"page"),z;!C.prev||m(C,C.prev)?z=new We(P,P):!C.prev.prev||m(C,C.prev.prev)?z=n.findWordAt(P):z=new We(G(P.line,0),Oe(n.doc,G(P.line+1,0))),n.setSelection(z.anchor,z.head),n.focus(),Ot(b)}u()}),Le(o.scroller,"touchcancel",u),Le(o.scroller,"scroll",function(){o.scroller.clientHeight&&(bs(n,o.scroller.scrollTop),hi(n,o.scroller.scrollLeft,!0),it(n,"scroll",n))}),Le(o.scroller,"mousewheel",function(b){return cy(n,b)}),Le(o.scroller,"DOMMouseScroll",function(b){return cy(n,b)}),Le(o.wrapper,"scroll",function(){return o.wrapper.scrollTop=o.wrapper.scrollLeft=0}),o.dragFunctions={enter:function(b){ot(n,b)||Br(b)},over:function(b){ot(n,b)||(uE(n,b),Br(b))},start:function(b){return cE(n,b)},drop:kt(n,lE),leave:function(b){ot(n,b)||zy(n)}};var v=o.input.getField();Le(v,"keyup",function(b){return Ky.call(n,b)}),Le(v,"keydown",kt(n,Vy)),Le(v,"keypress",kt(n,Yy)),Le(v,"focus",function(b){return Xu(n,b)}),Le(v,"blur",function(b){return Zi(n,b)})}var vf=[];et.defineInitHook=function(n){return vf.push(n)};function zs(n,o,c,l){var u=n.doc,h;c==null&&(c="add"),c=="smart"&&(u.mode.indent?h=fs(n,o).state:c="prev");var m=n.options.tabSize,v=ke(u,o),b=ge(v.text,null,m);v.stateAfter&&(v.stateAfter=null);var C=v.text.match(/^\s*/)[0],P;if(!l&&!/\S/.test(v.text))P=0,c="not";else if(c=="smart"&&(P=u.mode.indent(h,v.text.slice(C.length),v.text),P==zt||P>150)){if(!l)return;c="prev"}c=="prev"?o>u.first?P=ge(ke(u,o-1).text,null,m):P=0:c=="add"?P=b+n.options.indentUnit:c=="subtract"?P=b-n.options.indentUnit:typeof c=="number"&&(P=b+c),P=Math.max(0,P);var z="",H=0;if(n.options.indentWithTabs)for(var _=Math.floor(P/m);_;--_)H+=m,z+="	";if(H<P&&(z+=fn(P-H)),z!=C)return oo(u,z,G(o,0),G(o,C.length),"+input"),v.stateAfter=null,!0;for(var K=0;K<u.sel.ranges.length;K++){var Z=u.sel.ranges[K];if(Z.head.line==o&&Z.head.ch<C.length){var ie=G(o,C.length);ff(u,K,new We(ie,ie));break}}}var Wn=null;function Vl(n){Wn=n}function bf(n,o,c,l,u){var h=n.doc;n.display.shift=!1,l||(l=h.sel);var m=+new Date-200,v=u=="paste"||n.state.pasteIncoming>m,b=An(o),C=null;if(v&&l.ranges.length>1)if(Wn&&Wn.text.join(`
`)==o){if(l.ranges.length%Wn.text.length==0){C=[];for(var P=0;P<Wn.text.length;P++)C.push(h.splitLines(Wn.text[P]))}}else b.length==l.ranges.length&&n.options.pasteLinesPerSelection&&(C=$e(b,function(ce){return[ce]}));for(var z=n.curOp.updateInput,H=l.ranges.length-1;H>=0;H--){var _=l.ranges[H],K=_.from(),Z=_.to();_.empty()&&(c&&c>0?K=G(K.line,K.ch-c):n.state.overwrite&&!v?Z=G(Z.line,Math.min(ke(h,Z.line).text.length,Z.ch+Fe(b).length)):v&&Wn&&Wn.lineWise&&Wn.text.join(`
`)==b.join(`
`)&&(K=Z=G(K.line,0)));var ie={from:K,to:Z,text:C?C[H%C.length]:b,origin:u||(v?"paste":n.state.cutIncoming>m?"cut":"+input")};io(n.doc,ie),xt(n,"inputRead",n,ie)}o&&!v&&rv(n,o),eo(n),n.curOp.updateInput<2&&(n.curOp.updateInput=z),n.curOp.typing=!0,n.state.pasteIncoming=n.state.cutIncoming=-1}function nv(n,o){var c=n.clipboardData&&n.clipboardData.getData("Text");if(c)return n.preventDefault(),!o.isReadOnly()&&!o.options.disableInput&&o.hasFocus()&&on(o,function(){return bf(o,c,0,null,"paste")}),!0}function rv(n,o){if(!(!n.options.electricChars||!n.options.smartIndent))for(var c=n.doc.sel,l=c.ranges.length-1;l>=0;l--){var u=c.ranges[l];if(!(u.head.ch>100||l&&c.ranges[l-1].head.line==u.head.line)){var h=n.getModeAt(u.head),m=!1;if(h.electricChars){for(var v=0;v<h.electricChars.length;v++)if(o.indexOf(h.electricChars.charAt(v))>-1){m=zs(n,u.head.line,"smart");break}}else h.electricInput&&h.electricInput.test(ke(n.doc,u.head.line).text.slice(0,u.head.ch))&&(m=zs(n,u.head.line,"smart"));m&&xt(n,"electricInput",n,u.head.line)}}}function iv(n){for(var o=[],c=[],l=0;l<n.doc.sel.ranges.length;l++){var u=n.doc.sel.ranges[l].head.line,h={anchor:G(u,0),head:G(u+1,0)};c.push(h),o.push(n.getRange(h.anchor,h.head))}return{text:o,ranges:c}}function wf(n,o,c,l){n.setAttribute("autocorrect",c?"on":"off"),n.setAttribute("autocapitalize",l?"on":"off"),n.setAttribute("spellcheck",!!o)}function ov(){var n=T("textarea",null,null,"position: absolute; bottom: -1em; padding: 0; width: 1px; height: 1em; min-height: 1em; outline: none"),o=T("div",[n],null,"overflow: hidden; position: relative; width: 3px; height: 0px;");return p?n.style.width="1000px":n.setAttribute("wrap","off"),D&&(n.style.border="1px solid black"),o}function BE(n){var o=n.optionHandlers,c=n.helpers={};n.prototype={constructor:n,focus:function(){ae(this).focus(),this.display.input.focus()},setOption:function(l,u){var h=this.options,m=h[l];h[l]==u&&l!="mode"||(h[l]=u,o.hasOwnProperty(l)&&kt(this,o[l])(this,u,m),it(this,"optionChange",this,l))},getOption:function(l){return this.options[l]},getDoc:function(){return this.doc},addKeyMap:function(l,u){this.state.keyMaps[u?"push":"unshift"](Ul(l))},removeKeyMap:function(l){for(var u=this.state.keyMaps,h=0;h<u.length;++h)if(u[h]==l||u[h].name==l)return u.splice(h,1),!0},addOverlay:Rt(function(l,u){var h=l.token?l:n.getMode(this.options,l);if(h.startState)throw new Error("Overlays may not be stateful.");$(this.state.overlays,{mode:h,modeSpec:l,opaque:u&&u.opaque,priority:u&&u.priority||0},function(m){return m.priority}),this.state.modeGen++,Vt(this)}),removeOverlay:Rt(function(l){for(var u=this.state.overlays,h=0;h<u.length;++h){var m=u[h].modeSpec;if(m==l||typeof l=="string"&&m.name==l){u.splice(h,1),this.state.modeGen++,Vt(this);return}}}),indentLine:Rt(function(l,u,h){typeof u!="string"&&typeof u!="number"&&(u==null?u=this.options.smartIndent?"smart":"prev":u=u?"add":"subtract"),X(this.doc,l)&&zs(this,l,u,h)}),indentSelection:Rt(function(l){for(var u=this.doc.sel.ranges,h=-1,m=0;m<u.length;m++){var v=u[m];if(v.empty())v.head.line>h&&(zs(this,v.head.line,l,!0),h=v.head.line,m==this.doc.sel.primIndex&&eo(this));else{var b=v.from(),C=v.to(),P=Math.max(h,b.line);h=Math.min(this.lastLine(),C.line-(C.ch?0:1))+1;for(var z=P;z<h;++z)zs(this,z,l);var H=this.doc.sel.ranges;b.ch==0&&u.length==H.length&&H[m].from().ch>0&&ff(this.doc,m,new We(b,H[m].to()),bt)}}}),getTokenAt:function(l,u){return gm(this,l,u)},getLineTokens:function(l,u){return gm(this,G(l),u,!0)},getTokenTypeAt:function(l){l=Oe(this.doc,l);var u=dm(this,ke(this.doc,l.line)),h=0,m=(u.length-1)/2,v=l.ch,b;if(v==0)b=u[2];else for(;;){var C=h+m>>1;if((C?u[C*2-1]:0)>=v)m=C;else if(u[C*2+1]<v)h=C+1;else{b=u[C*2+2];break}}var P=b?b.indexOf("overlay "):-1;return P<0?b:P==0?null:b.slice(0,P-1)},getModeAt:function(l){var u=this.doc.mode;return u.innerMode?n.innerMode(u,this.getTokenAt(l).state).mode:u},getHelper:function(l,u){return this.getHelpers(l,u)[0]},getHelpers:function(l,u){var h=[];if(!c.hasOwnProperty(u))return h;var m=c[u],v=this.getModeAt(l);if(typeof v[u]=="string")m[v[u]]&&h.push(m[v[u]]);else if(v[u])for(var b=0;b<v[u].length;b++){var C=m[v[u][b]];C&&h.push(C)}else v.helperType&&m[v.helperType]?h.push(m[v.helperType]):m[v.name]&&h.push(m[v.name]);for(var P=0;P<m._global.length;P++){var z=m._global[P];z.pred(v,this)&&ye(h,z.val)==-1&&h.push(z.val)}return h},getStateAfter:function(l,u){var h=this.doc;return l=cm(h,l??h.first+h.size-1),fs(this,l+1,u).state},cursorCoords:function(l,u){var h,m=this.doc.sel.primary();return l==null?h=m.head:typeof l=="object"?h=Oe(this.doc,l):h=l?m.from():m.to(),jn(this,h,u||"page")},charCoords:function(l,u){return Ml(this,Oe(this.doc,l),u||"page")},coordsChar:function(l,u){return l=Um(this,l,u||"page"),Wu(this,l.left,l.top)},lineAtHeight:function(l,u){return l=Um(this,{top:l,left:0},u||"page").top,q(this.doc,l+this.display.viewOffset)},heightAtLine:function(l,u,h){var m=!1,v;if(typeof l=="number"){var b=this.doc.first+this.doc.size-1;l<this.doc.first?l=this.doc.first:l>b&&(l=b,m=!0),v=ke(this.doc,l)}else v=l;return El(this,v,{top:0,left:0},u||"page",h||m).top+(m?this.doc.height-vr(v):0)},defaultTextHeight:function(){return Xi(this.display)},defaultCharWidth:function(){return Ji(this.display)},getViewport:function(){return{from:this.display.viewFrom,to:this.display.viewTo}},addWidget:function(l,u,h,m,v){var b=this.display;l=jn(this,Oe(this.doc,l));var C=l.bottom,P=l.left;if(u.style.position="absolute",u.setAttribute("cm-ignore-events","true"),this.display.input.setUneditable(u),b.sizer.appendChild(u),m=="over")C=l.top;else if(m=="above"||m=="near"){var z=Math.max(b.wrapper.clientHeight,this.doc.height),H=Math.max(b.sizer.clientWidth,b.lineSpace.clientWidth);(m=="above"||l.bottom+u.offsetHeight>z)&&l.top>u.offsetHeight?C=l.top-u.offsetHeight:l.bottom+u.offsetHeight<=z&&(C=l.bottom),P+u.offsetWidth>H&&(P=H-u.offsetWidth)}u.style.top=C+"px",u.style.left=u.style.right="",v=="right"?(P=b.sizer.clientWidth-u.offsetWidth,u.style.right="0px"):(v=="left"?P=0:v=="middle"&&(P=(b.sizer.clientWidth-u.offsetWidth)/2),u.style.left=P+"px"),h&&OL(this,{left:P,top:C,right:P+u.offsetWidth,bottom:C+u.offsetHeight})},triggerOnKeyDown:Rt(Vy),triggerOnKeyPress:Rt(Yy),triggerOnKeyUp:Ky,triggerOnMouseDown:Rt(Qy),execCommand:function(l){if(Ps.hasOwnProperty(l))return Ps[l].call(null,this)},triggerElectric:Rt(function(l){rv(this,l)}),findPosH:function(l,u,h,m){var v=1;u<0&&(v=-1,u=-u);for(var b=Oe(this.doc,l),C=0;C<u&&(b=xf(this.doc,b,v,h,m),!b.hitSide);++C);return b},moveH:Rt(function(l,u){var h=this;this.extendSelectionsBy(function(m){return h.display.shift||h.doc.extend||m.empty()?xf(h.doc,m.head,l,u,h.options.rtlMoveVisually):l<0?m.from():m.to()},je)}),deleteH:Rt(function(l,u){var h=this.doc.sel,m=this.doc;h.somethingSelected()?m.replaceSelection("",null,"+delete"):lo(this,function(v){var b=xf(m,v.head,l,u,!1);return l<0?{from:b,to:v.head}:{from:v.head,to:b}})}),findPosV:function(l,u,h,m){var v=1,b=m;u<0&&(v=-1,u=-u);for(var C=Oe(this.doc,l),P=0;P<u;++P){var z=jn(this,C,"div");if(b==null?b=z.left:z.left=b,C=sv(this,z,v,h),C.hitSide)break}return C},moveV:Rt(function(l,u){var h=this,m=this.doc,v=[],b=!this.display.shift&&!m.extend&&m.sel.somethingSelected();if(m.extendSelectionsBy(function(P){if(b)return l<0?P.from():P.to();var z=jn(h,P.head,"div");P.goalColumn!=null&&(z.left=P.goalColumn),v.push(z.left);var H=sv(h,z,l,u);return u=="page"&&P==m.sel.primary()&&Zu(h,Ml(h,H,"div").top-z.top),H},je),v.length)for(var C=0;C<m.sel.ranges.length;C++)m.sel.ranges[C].goalColumn=v[C]}),findWordAt:function(l){var u=this.doc,h=ke(u,l.line).text,m=l.ch,v=l.ch;if(h){var b=this.getHelper(l,"wordChars");(l.sticky=="before"||v==h.length)&&m?--m:++v;for(var C=h.charAt(m),P=hr(C,b)?function(z){return hr(z,b)}:/\s/.test(C)?function(z){return/\s/.test(z)}:function(z){return!/\s/.test(z)&&!hr(z)};m>0&&P(h.charAt(m-1));)--m;for(;v<h.length&&P(h.charAt(v));)++v}return new We(G(l.line,m),G(l.line,v))},toggleOverwrite:function(l){l!=null&&l==this.state.overwrite||((this.state.overwrite=!this.state.overwrite)?Ve(this.display.cursorDiv,"CodeMirror-overwrite"):se(this.display.cursorDiv,"CodeMirror-overwrite"),it(this,"overwriteToggle",this,this.state.overwrite))},hasFocus:function(){return this.display.input.getField()==Re(te(this))},isReadOnly:function(){return!!(this.options.readOnly||this.doc.cantEdit)},scrollTo:Rt(function(l,u){vs(this,l,u)}),getScrollInfo:function(){var l=this.display.scroller;return{left:l.scrollLeft,top:l.scrollTop,height:l.scrollHeight-tr(this)-this.display.barHeight,width:l.scrollWidth-tr(this)-this.display.barWidth,clientHeight:Fu(this),clientWidth:ci(this)}},scrollIntoView:Rt(function(l,u){l==null?(l={from:this.doc.sel.primary().head,to:null},u==null&&(u=this.options.cursorScrollMargin)):typeof l=="number"?l={from:G(l,0),to:null}:l.from==null&&(l={from:l,to:null}),l.to||(l.to=l.from),l.margin=u||0,l.from.line!=null?PL(this,l):Zm(this,l.from,l.to,l.margin)}),setSize:Rt(function(l,u){var h=this,m=function(b){return typeof b=="number"||/^\d+$/.test(String(b))?b+"px":b};l!=null&&(this.display.wrapper.style.width=m(l)),u!=null&&(this.display.wrapper.style.height=m(u)),this.options.lineWrapping&&jm(this);var v=this.display.viewFrom;this.doc.iter(v,this.display.viewTo,function(b){if(b.widgets){for(var C=0;C<b.widgets.length;C++)if(b.widgets[C].noHScroll){_r(h,v,"widget");break}}++v}),this.curOp.forceUpdate=!0,it(this,"refresh",this)}),operation:function(l){return on(this,l)},startOperation:function(){return gi(this)},endOperation:function(){return mi(this)},refresh:Rt(function(){var l=this.display.cachedTextHeight;Vt(this),this.curOp.forceUpdate=!0,ms(this),vs(this,this.doc.scrollLeft,this.doc.scrollTop),nf(this.display),(l==null||Math.abs(l-Xi(this.display))>.5||this.options.lineWrapping)&&Vu(this),it(this,"refresh",this)}),swapDoc:Rt(function(l){var u=this.doc;return u.cm=null,this.state.selectingText&&this.state.selectingText(),hy(this,l),ms(this),this.display.input.reset(),vs(this,l.scrollLeft,l.scrollTop),this.curOp.forceScroll=!0,xt(this,"swapDoc",this,u),u}),phrase:function(l){var u=this.options.phrases;return u&&Object.prototype.hasOwnProperty.call(u,l)?u[l]:l},getInputField:function(){return this.display.input.getField()},getWrapperElement:function(){return this.display.wrapper},getScrollerElement:function(){return this.display.scroller},getGutterElement:function(){return this.display.gutters}},Bn(n),n.registerHelper=function(l,u,h){c.hasOwnProperty(l)||(c[l]=n[l]={_global:[]}),c[l][u]=h},n.registerGlobalHelper=function(l,u,h,m){n.registerHelper(l,u,m),c[l]._global.push({pred:h,val:m})}}function xf(n,o,c,l,u){var h=o,m=c,v=ke(n,o.line),b=u&&n.direction=="rtl"?-c:c;function C(){var pe=o.line+b;return pe<n.first||pe>=n.first+n.size?!1:(o=new G(pe,o.ch,o.sticky),v=ke(n,pe))}function P(pe){var ue;if(l=="codepoint"){var me=v.text.charCodeAt(o.ch+(c>0?0:-1));if(isNaN(me))ue=null;else{var Ee=c>0?me>=55296&&me<56320:me>=56320&&me<57343;ue=new G(o.line,Math.max(0,Math.min(v.text.length,o.ch+c*(Ee?2:1))),-c)}}else u?ue=mE(n.cm,v,o,c):ue=hf(v,o,c);if(ue==null)if(!pe&&C())o=pf(u,n.cm,v,o.line,b);else return!1;else o=ue;return!0}if(l=="char"||l=="codepoint")P();else if(l=="column")P(!0);else if(l=="word"||l=="group")for(var z=null,H=l=="group",_=n.cm&&n.cm.getHelper(o,"wordChars"),K=!0;!(c<0&&!P(!K));K=!1){var Z=v.text.charAt(o.ch)||`
`,ie=hr(Z,_)?"w":H&&Z==`
`?"n":!H||/\s/.test(Z)?null:"p";if(H&&!K&&!ie&&(ie="s"),z&&z!=ie){c<0&&(c=1,P(),o.sticky="after");break}if(ie&&(z=ie),c>0&&!P(!K))break}var ce=jl(n,o,h,m,!0);return He(h,ce)&&(ce.hitSide=!0),ce}function sv(n,o,c,l){var u=n.doc,h=o.left,m;if(l=="page"){var v=Math.min(n.display.wrapper.clientHeight,ae(n).innerHeight||u(n).documentElement.clientHeight),b=Math.max(v-.5*Xi(n.display),3);m=(c>0?o.bottom:o.top)+c*b}else l=="line"&&(m=c>0?o.bottom+3:o.top-3);for(var C;C=Wu(n,h,m),!!C.outside;){if(c<0?m<=0:m>=u.height){C.hitSide=!0;break}m+=c*5}return C}var Ue=function(n){this.cm=n,this.lastAnchorNode=this.lastAnchorOffset=this.lastFocusNode=this.lastFocusOffset=null,this.polling=new he,this.composing=null,this.gracePeriod=!1,this.readDOMTimeout=null};Ue.prototype.init=function(n){var o=this,c=this,l=c.cm,u=c.div=n.lineDiv;u.contentEditable=!0,wf(u,l.options.spellcheck,l.options.autocorrect,l.options.autocapitalize);function h(v){for(var b=v.target;b;b=b.parentNode){if(b==u)return!0;if(/\bCodeMirror-(?:line)?widget\b/.test(b.className))break}return!1}Le(u,"paste",function(v){!h(v)||ot(l,v)||nv(v,l)||d<=11&&setTimeout(kt(l,function(){return o.updateFromDOM()}),20)}),Le(u,"compositionstart",function(v){o.composing={data:v.data,done:!1}}),Le(u,"compositionupdate",function(v){o.composing||(o.composing={data:v.data,done:!1})}),Le(u,"compositionend",function(v){o.composing&&(v.data!=o.composing.data&&o.readFromDOMSoon(),o.composing.done=!0)}),Le(u,"touchstart",function(){return c.forceCompositionEnd()}),Le(u,"input",function(){o.composing||o.readFromDOMSoon()});function m(v){if(!(!h(v)||ot(l,v))){if(l.somethingSelected())Vl({lineWise:!1,text:l.getSelections()}),v.type=="cut"&&l.replaceSelection("",null,"cut");else if(l.options.lineWiseCopyCut){var b=iv(l);Vl({lineWise:!0,text:b.text}),v.type=="cut"&&l.operation(function(){l.setSelections(b.ranges,0,bt),l.replaceSelection("",null,"cut")})}else return;if(v.clipboardData){v.clipboardData.clearData();var C=Wn.text.join(`
`);if(v.clipboardData.setData("Text",C),v.clipboardData.getData("Text")==C){v.preventDefault();return}}var P=ov(),z=P.firstChild;wf(z),l.display.lineSpace.insertBefore(P,l.display.lineSpace.firstChild),z.value=Wn.text.join(`
`);var H=Re(le(u));Cn(z),setTimeout(function(){l.display.lineSpace.removeChild(P),H.focus(),H==u&&c.showPrimarySelection()},50)}}Le(u,"copy",m),Le(u,"cut",m)},Ue.prototype.screenReaderLabelChanged=function(n){n?this.div.setAttribute("aria-label",n):this.div.removeAttribute("aria-label")},Ue.prototype.prepareSelection=function(){var n=Qm(this.cm,!1);return n.focus=Re(le(this.div))==this.div,n},Ue.prototype.showSelection=function(n,o){!n||!this.cm.display.view.length||((n.focus||o)&&this.showPrimarySelection(),this.showMultipleSelections(n))},Ue.prototype.getSelection=function(){return this.cm.display.wrapper.ownerDocument.getSelection()},Ue.prototype.showPrimarySelection=function(){var n=this.getSelection(),o=this.cm,c=o.doc.sel.primary(),l=c.from(),u=c.to();if(o.display.viewTo==o.display.viewFrom||l.line>=o.display.viewTo||u.line<o.display.viewFrom){n.removeAllRanges();return}var h=Kl(o,n.anchorNode,n.anchorOffset),m=Kl(o,n.focusNode,n.focusOffset);if(!(h&&!h.bad&&m&&!m.bad&&de(Vi(h,m),l)==0&&de(Gt(h,m),u)==0)){var v=o.display.view,b=l.line>=o.display.viewFrom&&av(o,l)||{node:v[0].measure.map[2],offset:0},C=u.line<o.display.viewTo&&av(o,u);if(!C){var P=v[v.length-1].measure,z=P.maps?P.maps[P.maps.length-1]:P.map;C={node:z[z.length-1],offset:z[z.length-2]-z[z.length-3]}}if(!b||!C){n.removeAllRanges();return}var H=n.rangeCount&&n.getRangeAt(0),_;try{_=ee(b.node,b.offset,C.offset,C.node)}catch{}_&&(!r&&o.state.focused?(n.collapse(b.node,b.offset),_.collapsed||(n.removeAllRanges(),n.addRange(_))):(n.removeAllRanges(),n.addRange(_)),H&&n.anchorNode==null?n.addRange(H):r&&this.startGracePeriod()),this.rememberSelection()}},Ue.prototype.startGracePeriod=function(){var n=this;clearTimeout(this.gracePeriod),this.gracePeriod=setTimeout(function(){n.gracePeriod=!1,n.selectionChanged()&&n.cm.operation(function(){return n.cm.curOp.selectionChanged=!0})},20)},Ue.prototype.showMultipleSelections=function(n){J(this.cm.display.cursorDiv,n.cursors),J(this.cm.display.selectionDiv,n.selection)},Ue.prototype.rememberSelection=function(){var n=this.getSelection();this.lastAnchorNode=n.anchorNode,this.lastAnchorOffset=n.anchorOffset,this.lastFocusNode=n.focusNode,this.lastFocusOffset=n.focusOffset},Ue.prototype.selectionInEditor=function(){var n=this.getSelection();if(!n.rangeCount)return!1;var o=n.getRangeAt(0).commonAncestorContainer;return be(this.div,o)},Ue.prototype.focus=function(){this.cm.options.readOnly!="nocursor"&&((!this.selectionInEditor()||Re(le(this.div))!=this.div)&&this.showSelection(this.prepareSelection(),!0),this.div.focus())},Ue.prototype.blur=function(){this.div.blur()},Ue.prototype.getField=function(){return this.div},Ue.prototype.supportsTouch=function(){return!0},Ue.prototype.receivedFocus=function(){var n=this,o=this;this.selectionInEditor()?setTimeout(function(){return n.pollSelection()},20):on(this.cm,function(){return o.cm.curOp.selectionChanged=!0});function c(){o.cm.state.focused&&(o.pollSelection(),o.polling.set(o.cm.options.pollInterval,c))}this.polling.set(this.cm.options.pollInterval,c)},Ue.prototype.selectionChanged=function(){var n=this.getSelection();return n.anchorNode!=this.lastAnchorNode||n.anchorOffset!=this.lastAnchorOffset||n.focusNode!=this.lastFocusNode||n.focusOffset!=this.lastFocusOffset},Ue.prototype.pollSelection=function(){if(!(this.readDOMTimeout!=null||this.gracePeriod||!this.selectionChanged())){var n=this.getSelection(),o=this.cm;if(O&&y&&this.cm.display.gutterSpecs.length&&qE(n.anchorNode)){this.cm.triggerOnKeyDown({type:"keydown",keyCode:8,preventDefault:Math.abs}),this.blur(),this.focus();return}if(!this.composing){this.rememberSelection();var c=Kl(o,n.anchorNode,n.anchorOffset),l=Kl(o,n.focusNode,n.focusOffset);c&&l&&on(o,function(){Pt(o.doc,Hr(c,l),bt),(c.bad||l.bad)&&(o.curOp.selectionChanged=!0)})}}},Ue.prototype.pollContent=function(){this.readDOMTimeout!=null&&(clearTimeout(this.readDOMTimeout),this.readDOMTimeout=null);var n=this.cm,o=n.display,c=n.doc.sel.primary(),l=c.from(),u=c.to();if(l.ch==0&&l.line>n.firstLine()&&(l=G(l.line-1,ke(n.doc,l.line-1).length)),u.ch==ke(n.doc,u.line).text.length&&u.line<n.lastLine()&&(u=G(u.line+1,0)),l.line<o.viewFrom||u.line>o.viewTo-1)return!1;var h,m,v;l.line==o.viewFrom||(h=di(n,l.line))==0?(m=S(o.view[0].line),v=o.view[0].node):(m=S(o.view[h].line),v=o.view[h-1].node.nextSibling);var b=di(n,u.line),C,P;if(b==o.view.length-1?(C=o.viewTo-1,P=o.lineDiv.lastChild):(C=S(o.view[b+1].line)-1,P=o.view[b+1].node.previousSibling),!v)return!1;for(var z=n.doc.splitLines(zE(n,v,P,m,C)),H=mr(n.doc,G(m,0),G(C,ke(n.doc,C).text.length));z.length>1&&H.length>1;)if(Fe(z)==Fe(H))z.pop(),H.pop(),C--;else if(z[0]==H[0])z.shift(),H.shift(),m++;else break;for(var _=0,K=0,Z=z[0],ie=H[0],ce=Math.min(Z.length,ie.length);_<ce&&Z.charCodeAt(_)==ie.charCodeAt(_);)++_;for(var pe=Fe(z),ue=Fe(H),me=Math.min(pe.length-(z.length==1?_:0),ue.length-(H.length==1?_:0));K<me&&pe.charCodeAt(pe.length-K-1)==ue.charCodeAt(ue.length-K-1);)++K;if(z.length==1&&H.length==1&&m==l.line)for(;_&&_>l.ch&&pe.charCodeAt(pe.length-K-1)==ue.charCodeAt(ue.length-K-1);)_--,K++;z[z.length-1]=pe.slice(0,pe.length-K).replace(/^\u200b+/,""),z[0]=z[0].slice(_).replace(/\u200b+$/,"");var Ee=G(m,_),Te=G(C,H.length?Fe(H).length-K:0);if(z.length>1||z[0]||de(Ee,Te))return oo(n.doc,z,Ee,Te,"+input"),!0},Ue.prototype.ensurePolled=function(){this.forceCompositionEnd()},Ue.prototype.reset=function(){this.forceCompositionEnd()},Ue.prototype.forceCompositionEnd=function(){this.composing&&(clearTimeout(this.readDOMTimeout),this.composing=null,this.updateFromDOM(),this.div.blur(),this.div.focus())},Ue.prototype.readFromDOMSoon=function(){var n=this;this.readDOMTimeout==null&&(this.readDOMTimeout=setTimeout(function(){if(n.readDOMTimeout=null,n.composing)if(n.composing.done)n.composing=null;else return;n.updateFromDOM()},80))},Ue.prototype.updateFromDOM=function(){var n=this;(this.cm.isReadOnly()||!this.pollContent())&&on(this.cm,function(){return Vt(n.cm)})},Ue.prototype.setUneditable=function(n){n.contentEditable="false"},Ue.prototype.onKeyPress=function(n){n.charCode==0||this.composing||(n.preventDefault(),this.cm.isReadOnly()||kt(this.cm,bf)(this.cm,String.fromCharCode(n.charCode==null?n.keyCode:n.charCode),0))},Ue.prototype.readOnlyChanged=function(n){this.div.contentEditable=String(n!="nocursor")},Ue.prototype.onContextMenu=function(){},Ue.prototype.resetPosition=function(){},Ue.prototype.needsContentAttribute=!0;function av(n,o){var c=_u(n,o.line);if(!c||c.hidden)return null;var l=ke(n.doc,o.line),u=qm(c,l,o.line),h=ze(l,n.doc.direction),m="left";if(h){var v=Ir(h,o.ch);m=v%2?"right":"left"}var b=Fm(u.map,o.ch,m);return b.offset=b.collapse=="right"?b.end:b.start,b}function qE(n){for(var o=n;o;o=o.parentNode)if(/CodeMirror-gutter-wrapper/.test(o.className))return!0;return!1}function uo(n,o){return o&&(n.bad=!0),n}function zE(n,o,c,l,u){var h="",m=!1,v=n.doc.lineSeparator(),b=!1;function C(_){return function(K){return K.id==_}}function P(){m&&(h+=v,b&&(h+=v),m=b=!1)}function z(_){_&&(P(),h+=_)}function H(_){if(_.nodeType==1){var K=_.getAttribute("cm-text");if(K){z(K);return}var Z=_.getAttribute("cm-marker"),ie;if(Z){var ce=n.findMarks(G(l,0),G(u+1,0),C(+Z));ce.length&&(ie=ce[0].find(0))&&z(mr(n.doc,ie.from,ie.to).join(v));return}if(_.getAttribute("contenteditable")=="false")return;var pe=/^(pre|div|p|li|table|br)$/i.test(_.nodeName);if(!/^br$/i.test(_.nodeName)&&_.textContent.length==0)return;pe&&P();for(var ue=0;ue<_.childNodes.length;ue++)H(_.childNodes[ue]);/^(pre|p)$/i.test(_.nodeName)&&(b=!0),pe&&(m=!0)}else _.nodeType==3&&z(_.nodeValue.replace(/\u200b/g,"").replace(/\u00a0/g," "))}for(;H(o),o!=c;)o=o.nextSibling,b=!1;return h}function Kl(n,o,c){var l;if(o==n.display.lineDiv){if(l=n.display.lineDiv.childNodes[c],!l)return uo(n.clipPos(G(n.display.viewTo-1)),!0);o=null,c=0}else for(l=o;;l=l.parentNode){if(!l||l==n.display.lineDiv)return null;if(l.parentNode&&l.parentNode==n.display.lineDiv)break}for(var u=0;u<n.display.view.length;u++){var h=n.display.view[u];if(h.node==l)return RE(h,o,c)}}function RE(n,o,c){var l=n.text.firstChild,u=!1;if(!o||!be(l,o))return uo(G(S(n.line),0),!0);if(o==l&&(u=!0,o=l.childNodes[c],c=0,!o)){var h=n.rest?Fe(n.rest):n.line;return uo(G(S(h),h.text.length),u)}var m=o.nodeType==3?o:null,v=o;for(!m&&o.childNodes.length==1&&o.firstChild.nodeType==3&&(m=o.firstChild,c&&(c=m.nodeValue.length));v.parentNode!=l;)v=v.parentNode;var b=n.measure,C=b.maps;function P(ie,ce,pe){for(var ue=-1;ue<(C?C.length:0);ue++)for(var me=ue<0?b.map:C[ue],Ee=0;Ee<me.length;Ee+=3){var Te=me[Ee+2];if(Te==ie||Te==ce){var Ie=S(ue<0?n.line:n.rest[ue]),Ke=me[Ee]+pe;return(pe<0||Te!=ie)&&(Ke=me[Ee+(pe?1:0)]),G(Ie,Ke)}}}var z=P(m,v,c);if(z)return uo(z,u);for(var H=v.nextSibling,_=m?m.nodeValue.length-c:0;H;H=H.nextSibling){if(z=P(H,H.firstChild,0),z)return uo(G(z.line,z.ch-_),u);_+=H.textContent.length}for(var K=v.previousSibling,Z=c;K;K=K.previousSibling){if(z=P(K,K.firstChild,-1),z)return uo(G(z.line,z.ch+Z),u);Z+=K.textContent.length}}var lt=function(n){this.cm=n,this.prevInput="",this.pollingFast=!1,this.polling=new he,this.hasSelection=!1,this.composing=null,this.resetting=!1};lt.prototype.init=function(n){var o=this,c=this,l=this.cm;this.createField(n);var u=this.textarea;n.wrapper.insertBefore(this.wrapper,n.wrapper.firstChild),D&&(u.style.width="0px"),Le(u,"input",function(){f&&d>=9&&o.hasSelection&&(o.hasSelection=null),c.poll()}),Le(u,"paste",function(m){ot(l,m)||nv(m,l)||(l.state.pasteIncoming=+new Date,c.fastPoll())});function h(m){if(!ot(l,m)){if(l.somethingSelected())Vl({lineWise:!1,text:l.getSelections()});else if(l.options.lineWiseCopyCut){var v=iv(l);Vl({lineWise:!0,text:v.text}),m.type=="cut"?l.setSelections(v.ranges,null,bt):(c.prevInput="",u.value=v.text.join(`
`),Cn(u))}else return;m.type=="cut"&&(l.state.cutIncoming=+new Date)}}Le(u,"cut",h),Le(u,"copy",h),Le(n.scroller,"paste",function(m){if(!(br(n,m)||ot(l,m))){if(!u.dispatchEvent){l.state.pasteIncoming=+new Date,c.focus();return}var v=new Event("paste");v.clipboardData=m.clipboardData,u.dispatchEvent(v)}}),Le(n.lineSpace,"selectstart",function(m){br(n,m)||Ot(m)}),Le(u,"compositionstart",function(){var m=l.getCursor("from");c.composing&&c.composing.range.clear(),c.composing={start:m,range:l.markText(m,l.getCursor("to"),{className:"CodeMirror-composing"})}}),Le(u,"compositionend",function(){c.composing&&(c.poll(),c.composing.range.clear(),c.composing=null)})},lt.prototype.createField=function(n){this.wrapper=ov(),this.textarea=this.wrapper.firstChild;var o=this.cm.options;wf(this.textarea,o.spellcheck,o.autocorrect,o.autocapitalize)},lt.prototype.screenReaderLabelChanged=function(n){n?this.textarea.setAttribute("aria-label",n):this.textarea.removeAttribute("aria-label")},lt.prototype.prepareSelection=function(){var n=this.cm,o=n.display,c=n.doc,l=Qm(n);if(n.options.moveInputWithCursor){var u=jn(n,c.sel.primary().head,"div"),h=o.wrapper.getBoundingClientRect(),m=o.lineDiv.getBoundingClientRect();l.teTop=Math.max(0,Math.min(o.wrapper.clientHeight-10,u.top+m.top-h.top)),l.teLeft=Math.max(0,Math.min(o.wrapper.clientWidth-10,u.left+m.left-h.left))}return l},lt.prototype.showSelection=function(n){var o=this.cm,c=o.display;J(c.cursorDiv,n.cursors),J(c.selectionDiv,n.selection),n.teTop!=null&&(this.wrapper.style.top=n.teTop+"px",this.wrapper.style.left=n.teLeft+"px")},lt.prototype.reset=function(n){if(!(this.contextMenuPending||this.composing&&n)){var o=this.cm;if(this.resetting=!0,o.somethingSelected()){this.prevInput="";var c=o.getSelection();this.textarea.value=c,o.state.focused&&Cn(this.textarea),f&&d>=9&&(this.hasSelection=c)}else n||(this.prevInput=this.textarea.value="",f&&d>=9&&(this.hasSelection=null));this.resetting=!1}},lt.prototype.getField=function(){return this.textarea},lt.prototype.supportsTouch=function(){return!1},lt.prototype.focus=function(){if(this.cm.options.readOnly!="nocursor"&&(!L||Re(le(this.textarea))!=this.textarea))try{this.textarea.focus()}catch{}},lt.prototype.blur=function(){this.textarea.blur()},lt.prototype.resetPosition=function(){this.wrapper.style.top=this.wrapper.style.left=0},lt.prototype.receivedFocus=function(){this.slowPoll()},lt.prototype.slowPoll=function(){var n=this;this.pollingFast||this.polling.set(this.cm.options.pollInterval,function(){n.poll(),n.cm.state.focused&&n.slowPoll()})},lt.prototype.fastPoll=function(){var n=!1,o=this;o.pollingFast=!0;function c(){var l=o.poll();!l&&!n?(n=!0,o.polling.set(60,c)):(o.pollingFast=!1,o.slowPoll())}o.polling.set(20,c)},lt.prototype.poll=function(){var n=this,o=this.cm,c=this.textarea,l=this.prevInput;if(this.contextMenuPending||this.resetting||!o.state.focused||zr(c)&&!l&&!this.composing||o.isReadOnly()||o.options.disableInput||o.state.keySeq)return!1;var u=c.value;if(u==l&&!o.somethingSelected())return!1;if(f&&d>=9&&this.hasSelection===u||E&&/[\uf700-\uf7ff]/.test(u))return o.display.input.reset(),!1;if(o.doc.sel==o.display.selForContextMenu){var h=u.charCodeAt(0);if(h==8203&&!l&&(l="\u200B"),h==8666)return this.reset(),this.cm.execCommand("undo")}for(var m=0,v=Math.min(l.length,u.length);m<v&&l.charCodeAt(m)==u.charCodeAt(m);)++m;return on(o,function(){bf(o,u.slice(m),l.length-m,null,n.composing?"*compose":null),u.length>1e3||u.indexOf(`
`)>-1?c.value=n.prevInput="":n.prevInput=u,n.composing&&(n.composing.range.clear(),n.composing.range=o.markText(n.composing.start,o.getCursor("to"),{className:"CodeMirror-composing"}))}),!0},lt.prototype.ensurePolled=function(){this.pollingFast&&this.poll()&&(this.pollingFast=!1)},lt.prototype.onKeyPress=function(){f&&d>=9&&(this.hasSelection=null),this.fastPoll()},lt.prototype.onContextMenu=function(n){var o=this,c=o.cm,l=c.display,u=o.textarea;o.contextMenuPending&&o.contextMenuPending();var h=fi(c,n),m=l.scroller.scrollTop;if(!h||w)return;var v=c.options.resetSelectionOnContextMenu;v&&c.doc.sel.contains(h)==-1&&kt(c,Pt)(c.doc,Hr(h),bt);var b=u.style.cssText,C=o.wrapper.style.cssText,P=o.wrapper.offsetParent.getBoundingClientRect();o.wrapper.style.cssText="position: static",u.style.cssText=`position: absolute; width: 30px; height: 30px;
      top: `+(n.clientY-P.top-5)+"px; left: "+(n.clientX-P.left-5)+`px;
      z-index: 1000; background: `+(f?"rgba(255, 255, 255, .05)":"transparent")+`;
      outline: none; border-width: 0; outline: none; overflow: hidden; opacity: .05; filter: alpha(opacity=5);`;var z;p&&(z=u.ownerDocument.defaultView.scrollY),l.input.focus(),p&&u.ownerDocument.defaultView.scrollTo(null,z),l.input.reset(),c.somethingSelected()||(u.value=o.prevInput=" "),o.contextMenuPending=_,l.selForContextMenu=c.doc.sel,clearTimeout(l.detectingSelectAll);function H(){if(u.selectionStart!=null){var Z=c.somethingSelected(),ie="\u200B"+(Z?u.value:"");u.value="\u21DA",u.value=ie,o.prevInput=Z?"":"\u200B",u.selectionStart=1,u.selectionEnd=ie.length,l.selForContextMenu=c.doc.sel}}function _(){if(o.contextMenuPending==_&&(o.contextMenuPending=!1,o.wrapper.style.cssText=C,u.style.cssText=b,f&&d<9&&l.scrollbars.setScrollTop(l.scroller.scrollTop=m),u.selectionStart!=null)){(!f||f&&d<9)&&H();var Z=0,ie=function(){l.selForContextMenu==c.doc.sel&&u.selectionStart==0&&u.selectionEnd>0&&o.prevInput=="\u200B"?kt(c,Ty)(c):Z++<10?l.detectingSelectAll=setTimeout(ie,500):(l.selForContextMenu=null,l.input.reset())};l.detectingSelectAll=setTimeout(ie,200)}}if(f&&d>=9&&H(),j){Br(n);var K=function(){Nt(window,"mouseup",K),setTimeout(_,20)};Le(window,"mouseup",K)}else setTimeout(_,50)},lt.prototype.readOnlyChanged=function(n){n||this.reset(),this.textarea.disabled=n=="nocursor",this.textarea.readOnly=!!n},lt.prototype.setUneditable=function(){},lt.prototype.needsContentAttribute=!1;function FE(n,o){if(o=o?we(o):{},o.value=n.value,!o.tabindex&&n.tabIndex&&(o.tabindex=n.tabIndex),!o.placeholder&&n.placeholder&&(o.placeholder=n.placeholder),o.autofocus==null){var c=Re(le(n));o.autofocus=c==n||n.getAttribute("autofocus")!=null&&c==document.body}function l(){n.value=v.getValue()}var u;if(n.form&&(Le(n.form,"submit",l),!o.leaveSubmitMethodAlone)){var h=n.form;u=h.submit;try{var m=h.submit=function(){l(),h.submit=u,h.submit(),h.submit=m}}catch{}}o.finishInit=function(b){b.save=l,b.getTextArea=function(){return n},b.toTextArea=function(){b.toTextArea=isNaN,l(),n.parentNode.removeChild(b.getWrapperElement()),n.style.display="",n.form&&(Nt(n.form,"submit",l),!o.leaveSubmitMethodAlone&&typeof n.form.submit=="function"&&(n.form.submit=u))}},n.style.display="none";var v=et(function(b){return n.parentNode.insertBefore(b,n.nextSibling)},o);return v}function _E(n){n.off=Nt,n.on=Le,n.wheelEventPixels=VL,n.Doc=Kt,n.splitLines=An,n.countColumn=ge,n.findColumn=ut,n.isWordChar=Dt,n.Pass=zt,n.signal=it,n.Line=Ki,n.changeEnd=Wr,n.scrollbarModel=ny,n.Pos=G,n.cmpPos=de,n.modes=Hi,n.mimeModes=Rn,n.resolveMode=Wi,n.getMode=Ui,n.modeExtensions=Rr,n.extendMode=$i,n.copyState=Zn,n.startState=Gi,n.innerMode=cs,n.commands=Ps,n.keyMap=xr,n.keyName=Hy,n.isModifierKey=_y,n.lookupKey=ao,n.normalizeKeyMap=gE,n.StringStream=st,n.SharedTextMarker=Ds,n.TextMarker=$r,n.LineWidget=Ms,n.e_preventDefault=Ot,n.e_stopPropagation=_i,n.e_stop=Br,n.addClass=Ve,n.contains=be,n.rmClass=se,n.keyNames=Gr}NE(et),BE(et);var jE="iter insert remove copy getEditor constructor".split(" ");for(var Yl in Kt.prototype)Kt.prototype.hasOwnProperty(Yl)&&ye(jE,Yl)<0&&(et.prototype[Yl]=function(n){return function(){return n.apply(this.doc,arguments)}}(Kt.prototype[Yl]));return Bn(Kt),et.inputStyles={textarea:lt,contenteditable:Ue},et.defineMode=function(n){!et.defaults.mode&&n!="null"&&(et.defaults.mode=n),Fn.apply(this,arguments)},et.defineMIME=li,et.defineMode("null",function(){return{token:function(n){return n.skipToEnd()}}}),et.defineMIME("text/plain","null"),et.defineExtension=function(n,o){et.prototype[n]=o},et.defineDocExtension=function(n,o){Kt.prototype[n]=o},et.fromTextArea=FE,_E(et),et.version="5.65.16",et})});var lg=Y((_C,jC)=>{(function(t){typeof _C=="object"&&typeof jC=="object"?t(fr()):typeof define=="function"&&define.amd?define(["../../lib/codemirror"],t):t(CodeMirror)})(function(t){"use strict";t.defineMode("javascript",function(e,r){var i=e.indentUnit,s=r.statementIndent,a=r.jsonld,f=r.json||a,d=r.trackScope!==!1,p=r.typescript,g=r.wordCharacters||/[\w$\xa1-\uffff]/,y=function(){function S(wt){return{type:wt,style:"keyword"}}var q=S("keyword a"),X=S("keyword b"),re=S("keyword c"),G=S("keyword d"),de=S("operator"),He={type:"atom",style:"atom"};return{if:S("if"),while:q,with:q,else:X,do:X,try:X,finally:X,return:G,break:G,continue:G,new:S("new"),delete:re,void:re,throw:re,debugger:S("debugger"),var:S("var"),const:S("var"),let:S("var"),function:S("function"),catch:S("catch"),for:S("for"),switch:S("switch"),case:S("case"),default:S("default"),in:de,typeof:de,instanceof:de,true:He,false:He,null:He,undefined:He,NaN:He,Infinity:He,this:S("this"),class:S("class"),super:S("atom"),yield:re,export:S("export"),import:S("import"),extends:re,await:re}}(),x=/[+\-*&%=<>!?|~^@]/,w=/^@(context|id|value|language|type|container|list|set|reverse|index|base|vocab|graph)"/;function k(S){for(var q=!1,X,re=!1;(X=S.next())!=null;){if(!q){if(X=="/"&&!re)return;X=="["?re=!0:re&&X=="]"&&(re=!1)}q=!q&&X=="\\"}}var A,M;function D(S,q,X){return A=S,M=X,q}function O(S,q){var X=S.next();if(X=='"'||X=="'")return q.tokenize=L(X),q.tokenize(S,q);if(X=="."&&S.match(/^\d[\d_]*(?:[eE][+\-]?[\d_]+)?/))return D("number","number");if(X=="."&&S.match(".."))return D("spread","meta");if(/[\[\]{}\(\),;\:\.]/.test(X))return D(X);if(X=="="&&S.eat(">"))return D("=>","operator");if(X=="0"&&S.match(/^(?:x[\dA-Fa-f_]+|o[0-7_]+|b[01_]+)n?/))return D("number","number");if(/\d/.test(X))return S.match(/^[\d_]*(?:n|(?:\.[\d_]*)?(?:[eE][+\-]?[\d_]+)?)?/),D("number","number");if(X=="/")return S.eat("*")?(q.tokenize=E,E(S,q)):S.eat("/")?(S.skipToEnd(),D("comment","comment")):dn(S,q,1)?(k(S),S.match(/^\b(([gimyus])(?![gimyus]*\2))+\b/),D("regexp","string-2")):(S.eat("="),D("operator","operator",S.current()));if(X=="`")return q.tokenize=N,N(S,q);if(X=="#"&&S.peek()=="!")return S.skipToEnd(),D("meta","meta");if(X=="#"&&S.eatWhile(g))return D("variable","property");if(X=="<"&&S.match("!--")||X=="-"&&S.match("->")&&!/\S/.test(S.string.slice(0,S.start)))return S.skipToEnd(),D("comment","comment");if(x.test(X))return(X!=">"||!q.lexical||q.lexical.type!=">")&&(S.eat("=")?(X=="!"||X=="=")&&S.eat("="):/[<>*+\-|&?]/.test(X)&&(S.eat(X),X==">"&&S.eat(X))),X=="?"&&S.eat(".")?D("."):D("operator","operator",S.current());if(g.test(X)){S.eatWhile(g);var re=S.current();if(q.lastType!="."){if(y.propertyIsEnumerable(re)){var G=y[re];return D(G.type,G.style,re)}if(re=="async"&&S.match(/^(\s|\/\*([^*]|\*(?!\/))*?\*\/)*[\[\(\w]/,!1))return D("async","keyword",re)}return D("variable","variable",re)}}function L(S){return function(q,X){var re=!1,G;if(a&&q.peek()=="@"&&q.match(w))return X.tokenize=O,D("jsonld-keyword","meta");for(;(G=q.next())!=null&&!(G==S&&!re);)re=!re&&G=="\\";return re||(X.tokenize=O),D("string","string")}}function E(S,q){for(var X=!1,re;re=S.next();){if(re=="/"&&X){q.tokenize=O;break}X=re=="*"}return D("comment","comment")}function N(S,q){for(var X=!1,re;(re=S.next())!=null;){if(!X&&(re=="`"||re=="$"&&S.eat("{"))){q.tokenize=O;break}X=!X&&re=="\\"}return D("quasi","string-2",S.current())}var B="([{}])";function I(S,q){q.fatArrowAt&&(q.fatArrowAt=null);var X=S.string.indexOf("=>",S.start);if(!(X<0)){if(p){var re=/:\s*(?:\w+(?:<[^>]*>|\[\])?|\{[^}]*\})\s*$/.exec(S.string.slice(S.start,X));re&&(X=re.index)}for(var G=0,de=!1,He=X-1;He>=0;--He){var wt=S.string.charAt(He),Gt=B.indexOf(wt);if(Gt>=0&&Gt<3){if(!G){++He;break}if(--G==0){wt=="("&&(de=!0);break}}else if(Gt>=3&&Gt<6)++G;else if(g.test(wt))de=!0;else if(/["'\/`]/.test(wt))for(;;--He){if(He==0)return;var Vi=S.string.charAt(He-1);if(Vi==wt&&S.string.charAt(He-2)!="\\"){He--;break}}else if(de&&!G){++He;break}}de&&!G&&(q.fatArrowAt=He)}}var R={atom:!0,number:!0,variable:!0,string:!0,regexp:!0,this:!0,import:!0,"jsonld-keyword":!0};function j(S,q,X,re,G,de){this.indented=S,this.column=q,this.type=X,this.prev=G,this.info=de,re!=null&&(this.align=re)}function F(S,q){if(!d)return!1;for(var X=S.localVars;X;X=X.next)if(X.name==q)return!0;for(var re=S.context;re;re=re.prev)for(var X=re.vars;X;X=X.next)if(X.name==q)return!0}function se(S,q,X,re,G){var de=S.cc;for(W.state=S,W.stream=G,W.marked=null,W.cc=de,W.style=q,S.lexical.hasOwnProperty("align")||(S.lexical.align=!0);;){var He=de.length?de.pop():f?ye:ge;if(He(X,re)){for(;de.length&&de[de.length-1].lex;)de.pop()();return W.marked?W.marked:X=="variable"&&F(S,re)?"variable-2":q}}}var W={state:null,column:null,marked:null,cc:null};function J(){for(var S=arguments.length-1;S>=0;S--)W.cc.push(arguments[S])}function T(){return J.apply(null,arguments),!0}function ne(S,q){for(var X=q;X;X=X.next)if(X.name==S)return!0;return!1}function ee(S){var q=W.state;if(W.marked="def",!!d){if(q.context){if(q.lexical.info=="var"&&q.context&&q.context.block){var X=be(S,q.context);if(X!=null){q.context=X;return}}else if(!ne(S,q.localVars)){q.localVars=new mt(S,q.localVars);return}}r.globalVars&&!ne(S,q.globalVars)&&(q.globalVars=new mt(S,q.globalVars))}}function be(S,q){if(q)if(q.block){var X=be(S,q.prev);return X?X==q.prev?q:new Ve(X,q.vars,!0):null}else return ne(S,q.vars)?q:new Ve(q.prev,new mt(S,q.vars),!1);else return null}function Re(S){return S=="public"||S=="private"||S=="protected"||S=="abstract"||S=="readonly"}function Ve(S,q,X){this.prev=S,this.vars=q,this.block=X}function mt(S,q){this.name=S,this.next=q}var Cn=new mt("this",new mt("arguments",null));function Lt(){W.state.context=new Ve(W.state.context,W.state.localVars,!1),W.state.localVars=Cn}function te(){W.state.context=new Ve(W.state.context,W.state.localVars,!0),W.state.localVars=null}Lt.lex=te.lex=!0;function le(){W.state.localVars=W.state.context.vars,W.state.context=W.state.context.prev}le.lex=!0;function ae(S,q){var X=function(){var re=W.state,G=re.indented;if(re.lexical.type=="stat")G=re.lexical.indented;else for(var de=re.lexical;de&&de.type==")"&&de.align;de=de.prev)G=de.indented;re.lexical=new j(G,W.stream.column(),S,null,re.lexical,q)};return X.lex=!0,X}function fe(){var S=W.state;S.lexical.prev&&(S.lexical.type==")"&&(S.indented=S.lexical.indented),S.lexical=S.lexical.prev)}fe.lex=!0;function we(S){function q(X){return X==S?T():S==";"||X=="}"||X==")"||X=="]"?J():T(q)}return q}function ge(S,q){return S=="var"?T(ae("vardef",q),_i,we(";"),fe):S=="keyword a"?T(ae("form"),zt,ge,fe):S=="keyword b"?T(ae("form"),ge,fe):S=="keyword d"?W.stream.match(/^\s*$/,!1)?T():T(ae("stat"),yt,we(";"),fe):S=="debugger"?T(we(";")):S=="{"?T(ae("}"),te,Jn,fe,le):S==";"?T():S=="if"?(W.state.lexical.info=="else"&&W.state.cc[W.state.cc.length-1]==fe&&W.state.cc.pop()(),T(ae("form"),zt,ge,fe,ji)):S=="function"?T(An):S=="for"?T(ae("form"),te,vl,ge,le,fe):S=="class"||p&&q=="interface"?(W.marked="keyword",T(ae("form",S=="class"?S:q),Hi,fe)):S=="variable"?p&&q=="declare"?(W.marked="keyword",T(ge)):p&&(q=="module"||q=="enum"||q=="type")&&W.stream.match(/^\s*\w/,!1)?(W.marked="keyword",q=="enum"?T(ke):q=="type"?T(bl,we("operator"),ze,we(";")):T(ae("form"),$t,we("{"),ae("}"),Jn,fe,fe)):p&&q=="namespace"?(W.marked="keyword",T(ae("form"),ye,ge,fe)):p&&q=="abstract"?(W.marked="keyword",T(ge)):T(ae("stat"),_e):S=="switch"?T(ae("form"),zt,we("{"),ae("}","switch"),te,Jn,fe,fe,le):S=="case"?T(ye,we(":")):S=="default"?T(we(":")):S=="catch"?T(ae("form"),Lt,he,ge,fe,le):S=="export"?T(ae("stat"),Wi,fe):S=="import"?T(ae("stat"),Rr,fe):S=="async"?T(ge):q=="@"?T(ye,ge):J(ae("stat"),ye,we(";"),fe)}function he(S){if(S=="(")return T(zn,we(")"))}function ye(S,q){return bt(S,q,!1)}function rt(S,q){return bt(S,q,!0)}function zt(S){return S!="("?J():T(ae(")"),yt,we(")"),fe)}function bt(S,q,X){if(W.state.fatArrowAt==W.stream.start){var re=X?$e:Fe;if(S=="(")return T(Lt,ae(")"),ft(zn,")"),fe,we("=>"),re,le);if(S=="variable")return J(Lt,$t,we("=>"),re,le)}var G=X?ut:je;return R.hasOwnProperty(S)?T(G):S=="function"?T(An,G):S=="class"||p&&q=="interface"?(W.marked="keyword",T(ae("form"),Mu,fe)):S=="keyword c"||S=="async"?T(X?rt:ye):S=="("?T(ae(")"),yt,we(")"),fe,G):S=="operator"||S=="spread"?T(X?rt:ye):S=="["?T(ae("]"),st,fe,G):S=="{"?Or(hr,"}",null,G):S=="quasi"?J(Ut,G):S=="new"?T($(X)):T()}function yt(S){return S.match(/[;\}\)\],]/)?J():J(ye)}function je(S,q){return S==","?T(yt):ut(S,q,!1)}function ut(S,q,X){var re=X==!1?je:ut,G=X==!1?ye:rt;if(S=="=>")return T(Lt,X?$e:Fe,le);if(S=="operator")return/\+\+|--/.test(q)||p&&q=="!"?T(re):p&&q=="<"&&W.stream.match(/^([^<>]|<[^<>]*>)*>\s*\(/,!1)?T(ae(">"),ft(ze,">"),fe,re):q=="?"?T(ye,we(":"),G):T(G);if(S=="quasi")return J(Ut,re);if(S!=";"){if(S=="(")return Or(rt,")","call",re);if(S==".")return T(Dt,re);if(S=="[")return T(ae("]"),yt,we("]"),fe,re);if(p&&q=="as")return W.marked="keyword",T(ze,re);if(S=="regexp")return W.state.lastType=W.marked="operator",W.stream.backUp(W.stream.pos-W.stream.start-1),T(G)}}function Ut(S,q){return S!="quasi"?J():q.slice(q.length-2)!="${"?T(Ut):T(yt,fn)}function fn(S){if(S=="}")return W.marked="string-2",W.state.tokenize=N,T(Ut)}function Fe(S){return I(W.stream,W.state),J(S=="{"?ge:ye)}function $e(S){return I(W.stream,W.state),J(S=="{"?ge:rt)}function $(S){return function(q){return q=="."?T(S?Q:oe):q=="variable"&&p?T(rn,S?ut:je):J(S?rt:ye)}}function oe(S,q){if(q=="target")return W.marked="keyword",T(je)}function Q(S,q){if(q=="target")return W.marked="keyword",T(ut)}function _e(S){return S==":"?T(fe,ge):J(je,we(";"),fe)}function Dt(S){if(S=="variable")return W.marked="property",T()}function hr(S,q){if(S=="async")return W.marked="property",T(hr);if(S=="variable"||W.style=="keyword"){if(W.marked="property",q=="get"||q=="set")return T(ml);var X;return p&&W.state.fatArrowAt==W.stream.start&&(X=W.stream.match(/^\s*:\s*/,!1))&&(W.state.fatArrowAt=W.stream.pos+X[0].length),T(pr)}else{if(S=="number"||S=="string")return W.marked=a?"property":W.style+" property",T(pr);if(S=="jsonld-keyword")return T(pr);if(p&&Re(q))return W.marked="keyword",T(hr);if(S=="[")return T(ye,Pr,we("]"),pr);if(S=="spread")return T(rt,pr);if(q=="*")return W.marked="keyword",T(hr);if(S==":")return J(pr)}}function ml(S){return S!="variable"?J(pr):(W.marked="property",T(An))}function pr(S){if(S==":")return T(rt);if(S=="(")return J(An)}function ft(S,q,X){function re(G,de){if(X?X.indexOf(G)>-1:G==","){var He=W.state.lexical;return He.info=="call"&&(He.pos=(He.pos||0)+1),T(function(wt,Gt){return wt==q||Gt==q?J():J(S)},re)}return G==q||de==q?T():X&&X.indexOf(";")>-1?J(S):T(we(q))}return function(G,de){return G==q||de==q?T():J(S,re)}}function Or(S,q,X){for(var re=3;re<arguments.length;re++)W.cc.push(arguments[re]);return T(ae(q,X),ft(S,q),fe)}function Jn(S){return S=="}"?T():J(ge,Jn)}function Pr(S,q){if(p){if(S==":")return T(ze);if(q=="?")return T(Pr)}}function ai(S,q){if(p&&(S==":"||q=="in"))return T(ze)}function Ir(S){if(p&&S==":")return W.stream.match(/^\s*\w+\s+is\b/,!1)?T(ye,Lu,ze):T(ze)}function Lu(S,q){if(q=="is")return W.marked="keyword",T()}function ze(S,q){if(q=="keyof"||q=="typeof"||q=="infer"||q=="readonly")return W.marked="keyword",T(q=="typeof"?rt:ze);if(S=="variable"||q=="void")return W.marked="type",T(Sn);if(q=="|"||q=="&")return T(ze);if(S=="string"||S=="number"||S=="atom")return T(Sn);if(S=="[")return T(ae("]"),ft(ze,"]",","),fe,Sn);if(S=="{")return T(ae("}"),Le,fe,Sn);if(S=="(")return T(ft(ot,")"),yl,Sn);if(S=="<")return T(ft(ze,">"),ze);if(S=="quasi")return J(Nt,Sn)}function yl(S){if(S=="=>")return T(ze)}function Le(S){return S.match(/[\}\)\]]/)?T():S==","||S==";"?T(Le):J(gr,Le)}function gr(S,q){if(S=="variable"||W.style=="keyword")return W.marked="property",T(gr);if(q=="?"||S=="number"||S=="string")return T(gr);if(S==":")return T(ze);if(S=="[")return T(we("variable"),ai,we("]"),gr);if(S=="(")return J(zr,gr);if(!S.match(/[;\}\)\],]/))return T()}function Nt(S,q){return S!="quasi"?J():q.slice(q.length-2)!="${"?T(Nt):T(ze,it)}function it(S){if(S=="}")return W.marked="string-2",W.state.tokenize=N,T(Nt)}function ot(S,q){return S=="variable"&&W.stream.match(/^\s*[?:]/,!1)||q=="?"?T(ot):S==":"?T(ze):S=="spread"?T(ot):J(ze)}function Sn(S,q){if(q=="<")return T(ae(">"),ft(ze,">"),fe,Sn);if(q=="|"||S=="."||q=="&")return T(ze);if(S=="[")return T(ze,we("]"),Sn);if(q=="extends"||q=="implements")return W.marked="keyword",T(ze);if(q=="?")return T(ze,we(":"),ze)}function rn(S,q){if(q=="<")return T(ae(">"),ft(ze,">"),fe,Sn)}function Bn(){return J(ze,Ot)}function Ot(S,q){if(q=="=")return T(ze)}function _i(S,q){return q=="enum"?(W.marked="keyword",T(ke)):J($t,Pr,qn,Eu)}function $t(S,q){if(p&&Re(q))return W.marked="keyword",T($t);if(S=="variable")return ee(q),T();if(S=="spread")return T($t);if(S=="[")return Or(as,"]");if(S=="{")return Or(Br,"}")}function Br(S,q){return S=="variable"&&!W.stream.match(/^\s*:/,!1)?(ee(q),T(qn)):(S=="variable"&&(W.marked="property"),S=="spread"?T($t):S=="}"?J():S=="["?T(ye,we("]"),we(":"),Br):T(we(":"),$t,qn))}function as(){return J($t,qn)}function qn(S,q){if(q=="=")return T(rt)}function Eu(S){if(S==",")return T(_i)}function ji(S,q){if(S=="keyword b"&&q=="else")return T(ae("form","else"),ge,fe)}function vl(S,q){if(q=="await")return T(vl);if(S=="(")return T(ae(")"),ls,fe)}function ls(S){return S=="var"?T(_i,qr):S=="variable"?T(qr):J(qr)}function qr(S,q){return S==")"?T():S==";"?T(qr):q=="in"||q=="of"?(W.marked="keyword",T(ye,qr)):J(ye,qr)}function An(S,q){if(q=="*")return W.marked="keyword",T(An);if(S=="variable")return ee(q),T(An);if(S=="(")return T(Lt,ae(")"),ft(zn,")"),fe,Ir,ge,le);if(p&&q=="<")return T(ae(">"),ft(Bn,">"),fe,An)}function zr(S,q){if(q=="*")return W.marked="keyword",T(zr);if(S=="variable")return ee(q),T(zr);if(S=="(")return T(Lt,ae(")"),ft(zn,")"),fe,Ir,le);if(p&&q=="<")return T(ae(">"),ft(Bn,">"),fe,zr)}function bl(S,q){if(S=="keyword"||S=="variable")return W.marked="type",T(bl);if(q=="<")return T(ae(">"),ft(Bn,">"),fe)}function zn(S,q){return q=="@"&&T(ye,zn),S=="spread"?T(zn):p&&Re(q)?(W.marked="keyword",T(zn)):p&&S=="this"?T(Pr,qn):J($t,Pr,qn)}function Mu(S,q){return S=="variable"?Hi(S,q):Rn(S,q)}function Hi(S,q){if(S=="variable")return ee(q),T(Rn)}function Rn(S,q){if(q=="<")return T(ae(">"),ft(Bn,">"),fe,Rn);if(q=="extends"||q=="implements"||p&&S==",")return q=="implements"&&(W.marked="keyword"),T(p?ze:ye,Rn);if(S=="{")return T(ae("}"),Fn,fe)}function Fn(S,q){if(S=="async"||S=="variable"&&(q=="static"||q=="get"||q=="set"||p&&Re(q))&&W.stream.match(/^\s+#?[\w$\xa1-\uffff]/,!1))return W.marked="keyword",T(Fn);if(S=="variable"||W.style=="keyword")return W.marked="property",T(li,Fn);if(S=="number"||S=="string")return T(li,Fn);if(S=="[")return T(ye,Pr,we("]"),li,Fn);if(q=="*")return W.marked="keyword",T(Fn);if(p&&S=="(")return J(zr,Fn);if(S==";"||S==",")return T(Fn);if(S=="}")return T();if(q=="@")return T(ye,Fn)}function li(S,q){if(q=="!"||q=="?")return T(li);if(S==":")return T(ze,qn);if(q=="=")return T(rt);var X=W.state.lexical.prev,re=X&&X.info=="interface";return J(re?zr:An)}function Wi(S,q){return q=="*"?(W.marked="keyword",T(Gi,we(";"))):q=="default"?(W.marked="keyword",T(ye,we(";"))):S=="{"?T(ft(Ui,"}"),Gi,we(";")):J(ge)}function Ui(S,q){if(q=="as")return W.marked="keyword",T(we("variable"));if(S=="variable")return J(rt,Ui)}function Rr(S){return S=="string"?T():S=="("?J(ye):S=="."?J(je):J($i,Zn,Gi)}function $i(S,q){return S=="{"?Or($i,"}"):(S=="variable"&&ee(q),q=="*"&&(W.marked="keyword"),T(cs))}function Zn(S){if(S==",")return T($i,Zn)}function cs(S,q){if(q=="as")return W.marked="keyword",T($i)}function Gi(S,q){if(q=="from")return W.marked="keyword",T(ye)}function st(S){return S=="]"?T():J(ft(rt,"]"))}function ke(){return J(ae("form"),$t,we("{"),ae("}"),ft(mr,"}"),fe,fe)}function mr(){return J($t,qn)}function us(S,q){return S.lastType=="operator"||S.lastType==","||x.test(q.charAt(0))||/[,.]/.test(q.charAt(0))}function dn(S,q,X){return q.tokenize==O&&/^(?:operator|sof|keyword [bcd]|case|new|export|default|spread|[\[{}\(,;:]|=>)$/.test(q.lastType)||q.lastType=="quasi"&&/\{\s*$/.test(S.string.slice(0,S.pos-(X||0)))}return{startState:function(S){var q={tokenize:O,lastType:"sof",cc:[],lexical:new j((S||0)-i,0,"block",!1),localVars:r.localVars,context:r.localVars&&new Ve(null,null,!1),indented:S||0};return r.globalVars&&typeof r.globalVars=="object"&&(q.globalVars=r.globalVars),q},token:function(S,q){if(S.sol()&&(q.lexical.hasOwnProperty("align")||(q.lexical.align=!1),q.indented=S.indentation(),I(S,q)),q.tokenize!=E&&S.eatSpace())return null;var X=q.tokenize(S,q);return A=="comment"?X:(q.lastType=A=="operator"&&(M=="++"||M=="--")?"incdec":A,se(q,X,A,M,S))},indent:function(S,q){if(S.tokenize==E||S.tokenize==N)return t.Pass;if(S.tokenize!=O)return 0;var X=q&&q.charAt(0),re=S.lexical,G;if(!/^\s*else\b/.test(q))for(var de=S.cc.length-1;de>=0;--de){var He=S.cc[de];if(He==fe)re=re.prev;else if(He!=ji&&He!=le)break}for(;(re.type=="stat"||re.type=="form")&&(X=="}"||(G=S.cc[S.cc.length-1])&&(G==je||G==ut)&&!/^[,\.=+\-*:?[\(]/.test(q));)re=re.prev;s&&re.type==")"&&re.prev.type=="stat"&&(re=re.prev);var wt=re.type,Gt=X==wt;return wt=="vardef"?re.indented+(S.lastType=="operator"||S.lastType==","?re.info.length+1:0):wt=="form"&&X=="{"?re.indented:wt=="form"?re.indented+i:wt=="stat"?re.indented+(us(S,q)?s||i:0):re.info=="switch"&&!Gt&&r.doubleIndentSwitch!=!1?re.indented+(/^(?:case|default)\b/.test(q)?i:2*i):re.align?re.column+(Gt?0:1):re.indented+(Gt?0:i)},electricInput:/^\s*(?:case .*?:|default:|\{|\})$/,blockCommentStart:f?null:"/*",blockCommentEnd:f?null:"*/",blockCommentContinue:f?null:" * ",lineComment:f?null:"//",fold:"brace",closeBrackets:"()[]{}''\"\"``",helperType:f?"json":"javascript",jsonldMode:a,jsonMode:f,expressionAllowed:dn,skipExpression:function(S){se(S,"atom","atom","true",new t.StringStream("",2,null))}}}),t.registerHelper("wordChars","javascript",/[\w$]/),t.defineMIME("text/javascript","javascript"),t.defineMIME("text/ecmascript","javascript"),t.defineMIME("application/javascript","javascript"),t.defineMIME("application/x-javascript","javascript"),t.defineMIME("application/ecmascript","javascript"),t.defineMIME("application/json",{name:"javascript",json:!0}),t.defineMIME("application/x-json",{name:"javascript",json:!0}),t.defineMIME("application/manifest+json",{name:"javascript",json:!0}),t.defineMIME("application/ld+json",{name:"javascript",jsonld:!0}),t.defineMIME("text/typescript",{name:"javascript",typescript:!0}),t.defineMIME("application/typescript",{name:"javascript",typescript:!0})})});var tu=Y((q7,_S)=>{function vH(t,e){switch(t.charCodeAt(e)){default:return 0;case 10:return 1;case 13:return e+1<t.length&&t.charCodeAt(e+1)===10?2:1}}_S.exports={newLineLength:vH}});var HS=Y((z7,jS)=>{var{newLineLength:bH}=tu();jS.exports=(t,e)=>{let r=1,i=0;for(let s=0;s<t.length;s++){let a=bH(t,s);a!==0&&(e(i,s+a,r++),i=s+a,s+=a-1)}e(i,t.length,r++)}});var US=Y((R7,WS)=>{var{newLineLength:wH}=tu();WS.exports=(t,e)=>{let r=1,i=0;for(let s=0;s<t.length;s++){let a=wH(t,s);a!==0&&(e(i,s,r++),i=s+a,s+=a-1)}e(i,t.length,r++)}});var GS=Y((F7,$S)=>{$S.exports=function(t){if(t instanceof RegExp){let e=t.flags.indexOf("g")!==-1?t.flags:t.flags+"g",r=new RegExp(t,e);return function(i,s){let a;for(;a=r.exec(i);)s(a.index,a.index+a[0].length)}}return t=String(t),function(e,r){let i=-1;for(;i=e.indexOf(t,i+1),i!==-1;)r(i,i+t.length)}}});var KS=Y((_7,VS)=>{var{newLineLength:xH}=tu();VS.exports=(t,e)=>{let r=1;for(let i=0;i<t.length;i++){let s=xH(t,i);s!==0&&(e(i,i+s,r++),i+=s-1)}}});var QS=Y((j7,YS)=>{YS.exports={lines:HS(),lineContents:US(),matches:GS(),newlines:KS()}});var nu=Y((H7,ZS)=>{function XS(t){return wg.call(null,t)}function wg(t){let e=this===window?{}:this||{},r={};return Object.assign(r,e,t,{fork:wg.bind(r),ranges:Object.assign({},e.ranges,t&&t.ranges)}),typeof r.createHook!="function"&&(r.createHook=i=>i()),r}function JS(t){let e=Object.assign({},this);for(let r in t){let i=t[r];if(!(!i||typeof i!="object"))if(hasOwnProperty.call(e,r)){let s=e[r];e[r]=s&&typeof s.fork=="function"?s.fork(t[r]):s}else e[r]=XS(t[r])}return e.fork=JS.bind(e),e}ZS.exports={createPrinter:XS,forkPrinter:wg,forkPrinterSet:JS}});var xg=Y((W7,e1)=>{e1.exports=nu().createPrinter()});var n1=Y((U7,t1)=>{var{createPrinter:kH}=nu();t1.exports=kH({print:t=>t.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;")})});var i1=Y(($7,r1)=>{var{forkPrinterSet:CH}=nu();r1.exports=CH.call({},{noop:xg(),html:n1(),tty:xg()})});var s1=Y((G7,o1)=>{o1.exports=function(e,r){let i=[];return r.forEach(({generate:s,marker:a})=>s(e,(f,d,p)=>i.push({type:a,start:f,end:d,data:p}))),i}});var l1=Y((V7,a1)=>{var ru=()=>"",SH=function(){};function Pi(t,e){return typeof t=="function"?t:e||SH}a1.exports=function(e,r,i){let s=Pi(i.print,E=>E),a=Object.assign(Object.defineProperties(Object.create(null),{offset:{get:()=>x},line:{get:()=>w},column:{get:()=>k},start:{get:()=>d.start},end:{get:()=>d.end},data:{get:()=>d.data}}),Pi(i.createContext)()),f=[],d={start:0,end:e.length},p=i.ranges||{},g=[],y=1/0,x=0,w=1,k=1,A="";A+=Pi(i.open,ru)(a),p=[].concat(Object.getOwnPropertyNames(p),Object.getOwnPropertySymbols(p)).reduce((E,N)=>{let B=p[N];return typeof B=="function"&&(p[N]=B=i.createHook(B)),B&&(g.push(N),E[N]={open:Pi(B.open,ru),close:Pi(B.close,ru),print:Pi(B.print,s)}),E},{}),r=r.slice().sort((E,N)=>E.start-N.start||N.end-E.end||g.indexOf(E.type)-g.indexOf(N.type));let M=E=>p[(d=f[E]).type].open(a)||"",D=E=>p[(d=f[E]).type].close(a)||"",O=E=>{if(x!==E){let N=e.substring(x,E),B=f.length?p[f[f.length-1].type].print:s;for(let I=x;I<E;I++){let R=e.charCodeAt(I);R===10||R===13&&(I>=e.length||e.charCodeAt(I+1)!==10)?(w++,k=1):k++}A+=B(N,a),x=E}},L=E=>{for(;y<=E;){O(y);for(let N=f.length-1;N>=0&&f[N].end===y;N--)A+=D(N),f.pop();y=1/0;for(let N=0;N<f.length;N++)f[N].end<y&&(y=f[N].end)}};for(let E=0;E<r.length;E++){let N=r[E],B=0;if(p.hasOwnProperty(N.type)!==!1&&!(N.start>N.end||!Number.isFinite(N.start)||!Number.isFinite(N.end))){for(L(N.start),O(N.start),B=0;B<f.length;B++)if(f[B].end<N.end){for(let I=f.length-1;I>=B;I--)A+=D(I);break}for(f.splice(B,0,N);B<f.length;B++)A+=M(B);N.end<y&&(y=N.end)}}L(e.length),O(e.length);for(let E=f.length-1;E>=0;E--)A+=D(E);return A+=Pi(i.close,ru)(a)||"",A}});var f1=Y((K7,u1)=>{var AH=QS(),Sg=i1(),c1=s1(),TH=l1();function LH(t,e){return{marker:t,generate:e}}function EH(t,e){let r={};for(let i in e)r[i]={ranges:{[t]:e[i]}};return r}function Cg(t,e,r){let i=(s,a)=>{let f=e[a||r]||Sg.noop,d=c1(s,t);return TH(s,d,f)};return Object.assign(i,{print:i,generateRanges(s){return c1(s,t)},use(s,a){let f=Symbol(s.name),d=s.ranges||s,p=Array.isArray(d)?(g,y)=>d.forEach(x=>y(...x)):d;return typeof p!="function"||(a||(a=s.printer),!a)?i:Cg(t.concat(LH(f,p)),e.fork(EH(f,a)),r)},printer(s){return Cg(t,e,s)}})}function kg(t,e,r){let i=Cg([],r||Sg,e);return Array.isArray(t)&&(i=t.reduce((s,a)=>Array.isArray(a)?s.use(...a):s.use(a),i)),i}u1.exports=Object.assign(kg,{gen:AH,printer:Object.assign((...t)=>kg().printer(...t),Sg),use(...t){return kg().use(...t)}})});var p1=Y((d1,h1)=>{(function(t){typeof d1=="object"&&typeof h1=="object"?t(fr()):typeof define=="function"&&define.amd?define(["../../lib/codemirror"],t):t(CodeMirror)})(function(t){"use strict";t.defineMode("css",function(j,F){var se=F.inline;F.propertyKeywords||(F=t.resolveMode("text/css"));var W=j.indentUnit,J=F.tokenHooks,T=F.documentTypes||{},ne=F.mediaTypes||{},ee=F.mediaFeatures||{},be=F.mediaValueKeywords||{},Re=F.propertyKeywords||{},Ve=F.nonStandardPropertyKeywords||{},mt=F.fontProperties||{},Cn=F.counterDescriptors||{},Lt=F.colorKeywords||{},te=F.valueKeywords||{},le=F.allowNested,ae=F.lineComment,fe=F.supportsAtComponent===!0,we=j.highlightNonStandardPropertyKeywords!==!1,ge,he;function ye($,oe){return ge=oe,$}function rt($,oe){var Q=$.next();if(J[Q]){var _e=J[Q]($,oe);if(_e!==!1)return _e}if(Q=="@")return $.eatWhile(/[\w\\\-]/),ye("def",$.current());if(Q=="="||(Q=="~"||Q=="|")&&$.eat("="))return ye(null,"compare");if(Q=='"'||Q=="'")return oe.tokenize=zt(Q),oe.tokenize($,oe);if(Q=="#")return $.eatWhile(/[\w\\\-]/),ye("atom","hash");if(Q=="!")return $.match(/^\s*\w*/),ye("keyword","important");if(/\d/.test(Q)||Q=="."&&$.eat(/\d/))return $.eatWhile(/[\w.%]/),ye("number","unit");if(Q==="-"){if(/[\d.]/.test($.peek()))return $.eatWhile(/[\w.%]/),ye("number","unit");if($.match(/^-[\w\\\-]*/))return $.eatWhile(/[\w\\\-]/),$.match(/^\s*:/,!1)?ye("variable-2","variable-definition"):ye("variable-2","variable");if($.match(/^\w+-/))return ye("meta","meta")}else return/[,+>*\/]/.test(Q)?ye(null,"select-op"):Q=="."&&$.match(/^-?[_a-z][_a-z0-9-]*/i)?ye("qualifier","qualifier"):/[:;{}\[\]\(\)]/.test(Q)?ye(null,Q):$.match(/^[\w-.]+(?=\()/)?(/^(url(-prefix)?|domain|regexp)$/i.test($.current())&&(oe.tokenize=bt),ye("variable callee","variable")):/[\w\\\-]/.test(Q)?($.eatWhile(/[\w\\\-]/),ye("property","word")):ye(null,null)}function zt($){return function(oe,Q){for(var _e=!1,Dt;(Dt=oe.next())!=null;){if(Dt==$&&!_e){$==")"&&oe.backUp(1);break}_e=!_e&&Dt=="\\"}return(Dt==$||!_e&&$!=")")&&(Q.tokenize=null),ye("string","string")}}function bt($,oe){return $.next(),$.match(/^\s*[\"\')]/,!1)?oe.tokenize=null:oe.tokenize=zt(")"),ye(null,"(")}function yt($,oe,Q){this.type=$,this.indent=oe,this.prev=Q}function je($,oe,Q,_e){return $.context=new yt(Q,oe.indentation()+(_e===!1?0:W),$.context),Q}function ut($){return $.context.prev&&($.context=$.context.prev),$.context.type}function Ut($,oe,Q){return $e[Q.context.type]($,oe,Q)}function fn($,oe,Q,_e){for(var Dt=_e||1;Dt>0;Dt--)Q.context=Q.context.prev;return Ut($,oe,Q)}function Fe($){var oe=$.current().toLowerCase();te.hasOwnProperty(oe)?he="atom":Lt.hasOwnProperty(oe)?he="keyword":he="variable"}var $e={};return $e.top=function($,oe,Q){if($=="{")return je(Q,oe,"block");if($=="}"&&Q.context.prev)return ut(Q);if(fe&&/@component/i.test($))return je(Q,oe,"atComponentBlock");if(/^@(-moz-)?document$/i.test($))return je(Q,oe,"documentTypes");if(/^@(media|supports|(-moz-)?document|import)$/i.test($))return je(Q,oe,"atBlock");if(/^@(font-face|counter-style)/i.test($))return Q.stateArg=$,"restricted_atBlock_before";if(/^@(-(moz|ms|o|webkit)-)?keyframes$/i.test($))return"keyframes";if($&&$.charAt(0)=="@")return je(Q,oe,"at");if($=="hash")he="builtin";else if($=="word")he="tag";else{if($=="variable-definition")return"maybeprop";if($=="interpolation")return je(Q,oe,"interpolation");if($==":")return"pseudo";if(le&&$=="(")return je(Q,oe,"parens")}return Q.context.type},$e.block=function($,oe,Q){if($=="word"){var _e=oe.current().toLowerCase();return Re.hasOwnProperty(_e)?(he="property","maybeprop"):Ve.hasOwnProperty(_e)?(he=we?"string-2":"property","maybeprop"):le?(he=oe.match(/^\s*:(?:\s|$)/,!1)?"property":"tag","block"):(he+=" error","maybeprop")}else return $=="meta"?"block":!le&&($=="hash"||$=="qualifier")?(he="error","block"):$e.top($,oe,Q)},$e.maybeprop=function($,oe,Q){return $==":"?je(Q,oe,"prop"):Ut($,oe,Q)},$e.prop=function($,oe,Q){if($==";")return ut(Q);if($=="{"&&le)return je(Q,oe,"propBlock");if($=="}"||$=="{")return fn($,oe,Q);if($=="(")return je(Q,oe,"parens");if($=="hash"&&!/^#([0-9a-fA-F]{3,4}|[0-9a-fA-F]{6}|[0-9a-fA-F]{8})$/.test(oe.current()))he+=" error";else if($=="word")Fe(oe);else if($=="interpolation")return je(Q,oe,"interpolation");return"prop"},$e.propBlock=function($,oe,Q){return $=="}"?ut(Q):$=="word"?(he="property","maybeprop"):Q.context.type},$e.parens=function($,oe,Q){return $=="{"||$=="}"?fn($,oe,Q):$==")"?ut(Q):$=="("?je(Q,oe,"parens"):$=="interpolation"?je(Q,oe,"interpolation"):($=="word"&&Fe(oe),"parens")},$e.pseudo=function($,oe,Q){return $=="meta"?"pseudo":$=="word"?(he="variable-3",Q.context.type):Ut($,oe,Q)},$e.documentTypes=function($,oe,Q){return $=="word"&&T.hasOwnProperty(oe.current())?(he="tag",Q.context.type):$e.atBlock($,oe,Q)},$e.atBlock=function($,oe,Q){if($=="(")return je(Q,oe,"atBlock_parens");if($=="}"||$==";")return fn($,oe,Q);if($=="{")return ut(Q)&&je(Q,oe,le?"block":"top");if($=="interpolation")return je(Q,oe,"interpolation");if($=="word"){var _e=oe.current().toLowerCase();_e=="only"||_e=="not"||_e=="and"||_e=="or"?he="keyword":ne.hasOwnProperty(_e)?he="attribute":ee.hasOwnProperty(_e)?he="property":be.hasOwnProperty(_e)?he="keyword":Re.hasOwnProperty(_e)?he="property":Ve.hasOwnProperty(_e)?he=we?"string-2":"property":te.hasOwnProperty(_e)?he="atom":Lt.hasOwnProperty(_e)?he="keyword":he="error"}return Q.context.type},$e.atComponentBlock=function($,oe,Q){return $=="}"?fn($,oe,Q):$=="{"?ut(Q)&&je(Q,oe,le?"block":"top",!1):($=="word"&&(he="error"),Q.context.type)},$e.atBlock_parens=function($,oe,Q){return $==")"?ut(Q):$=="{"||$=="}"?fn($,oe,Q,2):$e.atBlock($,oe,Q)},$e.restricted_atBlock_before=function($,oe,Q){return $=="{"?je(Q,oe,"restricted_atBlock"):$=="word"&&Q.stateArg=="@counter-style"?(he="variable","restricted_atBlock_before"):Ut($,oe,Q)},$e.restricted_atBlock=function($,oe,Q){return $=="}"?(Q.stateArg=null,ut(Q)):$=="word"?(Q.stateArg=="@font-face"&&!mt.hasOwnProperty(oe.current().toLowerCase())||Q.stateArg=="@counter-style"&&!Cn.hasOwnProperty(oe.current().toLowerCase())?he="error":he="property","maybeprop"):"restricted_atBlock"},$e.keyframes=function($,oe,Q){return $=="word"?(he="variable","keyframes"):$=="{"?je(Q,oe,"top"):Ut($,oe,Q)},$e.at=function($,oe,Q){return $==";"?ut(Q):$=="{"||$=="}"?fn($,oe,Q):($=="word"?he="tag":$=="hash"&&(he="builtin"),"at")},$e.interpolation=function($,oe,Q){return $=="}"?ut(Q):$=="{"||$==";"?fn($,oe,Q):($=="word"?he="variable":$!="variable"&&$!="("&&$!=")"&&(he="error"),"interpolation")},{startState:function($){return{tokenize:null,state:se?"block":"top",stateArg:null,context:new yt(se?"block":"top",$||0,null)}},token:function($,oe){if(!oe.tokenize&&$.eatSpace())return null;var Q=(oe.tokenize||rt)($,oe);return Q&&typeof Q=="object"&&(ge=Q[1],Q=Q[0]),he=Q,ge!="comment"&&(oe.state=$e[oe.state](ge,$,oe)),he},indent:function($,oe){var Q=$.context,_e=oe&&oe.charAt(0),Dt=Q.indent;return Q.type=="prop"&&(_e=="}"||_e==")")&&(Q=Q.prev),Q.prev&&(_e=="}"&&(Q.type=="block"||Q.type=="top"||Q.type=="interpolation"||Q.type=="restricted_atBlock")?(Q=Q.prev,Dt=Q.indent):(_e==")"&&(Q.type=="parens"||Q.type=="atBlock_parens")||_e=="{"&&(Q.type=="at"||Q.type=="atBlock"))&&(Dt=Math.max(0,Q.indent-W))),Dt},electricChars:"}",blockCommentStart:"/*",blockCommentEnd:"*/",blockCommentContinue:" * ",lineComment:ae,fold:"brace"}});function e(j){for(var F={},se=0;se<j.length;++se)F[j[se].toLowerCase()]=!0;return F}var r=["domain","regexp","url","url-prefix"],i=e(r),s=["all","aural","braille","handheld","print","projection","screen","tty","tv","embossed"],a=e(s),f=["width","min-width","max-width","height","min-height","max-height","device-width","min-device-width","max-device-width","device-height","min-device-height","max-device-height","aspect-ratio","min-aspect-ratio","max-aspect-ratio","device-aspect-ratio","min-device-aspect-ratio","max-device-aspect-ratio","color","min-color","max-color","color-index","min-color-index","max-color-index","monochrome","min-monochrome","max-monochrome","resolution","min-resolution","max-resolution","scan","grid","orientation","device-pixel-ratio","min-device-pixel-ratio","max-device-pixel-ratio","pointer","any-pointer","hover","any-hover","prefers-color-scheme","dynamic-range","video-dynamic-range"],d=e(f),p=["landscape","portrait","none","coarse","fine","on-demand","hover","interlace","progressive","dark","light","standard","high"],g=e(p),y=["align-content","align-items","align-self","alignment-adjust","alignment-baseline","all","anchor-point","animation","animation-delay","animation-direction","animation-duration","animation-fill-mode","animation-iteration-count","animation-name","animation-play-state","animation-timing-function","appearance","azimuth","backdrop-filter","backface-visibility","background","background-attachment","background-blend-mode","background-clip","background-color","background-image","background-origin","background-position","background-position-x","background-position-y","background-repeat","background-size","baseline-shift","binding","bleed","block-size","bookmark-label","bookmark-level","bookmark-state","bookmark-target","border","border-bottom","border-bottom-color","border-bottom-left-radius","border-bottom-right-radius","border-bottom-style","border-bottom-width","border-collapse","border-color","border-image","border-image-outset","border-image-repeat","border-image-slice","border-image-source","border-image-width","border-left","border-left-color","border-left-style","border-left-width","border-radius","border-right","border-right-color","border-right-style","border-right-width","border-spacing","border-style","border-top","border-top-color","border-top-left-radius","border-top-right-radius","border-top-style","border-top-width","border-width","bottom","box-decoration-break","box-shadow","box-sizing","break-after","break-before","break-inside","caption-side","caret-color","clear","clip","color","color-profile","column-count","column-fill","column-gap","column-rule","column-rule-color","column-rule-style","column-rule-width","column-span","column-width","columns","contain","content","counter-increment","counter-reset","crop","cue","cue-after","cue-before","cursor","direction","display","dominant-baseline","drop-initial-after-adjust","drop-initial-after-align","drop-initial-before-adjust","drop-initial-before-align","drop-initial-size","drop-initial-value","elevation","empty-cells","fit","fit-content","fit-position","flex","flex-basis","flex-direction","flex-flow","flex-grow","flex-shrink","flex-wrap","float","float-offset","flow-from","flow-into","font","font-family","font-feature-settings","font-kerning","font-language-override","font-optical-sizing","font-size","font-size-adjust","font-stretch","font-style","font-synthesis","font-variant","font-variant-alternates","font-variant-caps","font-variant-east-asian","font-variant-ligatures","font-variant-numeric","font-variant-position","font-variation-settings","font-weight","gap","grid","grid-area","grid-auto-columns","grid-auto-flow","grid-auto-rows","grid-column","grid-column-end","grid-column-gap","grid-column-start","grid-gap","grid-row","grid-row-end","grid-row-gap","grid-row-start","grid-template","grid-template-areas","grid-template-columns","grid-template-rows","hanging-punctuation","height","hyphens","icon","image-orientation","image-rendering","image-resolution","inline-box-align","inset","inset-block","inset-block-end","inset-block-start","inset-inline","inset-inline-end","inset-inline-start","isolation","justify-content","justify-items","justify-self","left","letter-spacing","line-break","line-height","line-height-step","line-stacking","line-stacking-ruby","line-stacking-shift","line-stacking-strategy","list-style","list-style-image","list-style-position","list-style-type","margin","margin-bottom","margin-left","margin-right","margin-top","marks","marquee-direction","marquee-loop","marquee-play-count","marquee-speed","marquee-style","mask-clip","mask-composite","mask-image","mask-mode","mask-origin","mask-position","mask-repeat","mask-size","mask-type","max-block-size","max-height","max-inline-size","max-width","min-block-size","min-height","min-inline-size","min-width","mix-blend-mode","move-to","nav-down","nav-index","nav-left","nav-right","nav-up","object-fit","object-position","offset","offset-anchor","offset-distance","offset-path","offset-position","offset-rotate","opacity","order","orphans","outline","outline-color","outline-offset","outline-style","outline-width","overflow","overflow-style","overflow-wrap","overflow-x","overflow-y","padding","padding-bottom","padding-left","padding-right","padding-top","page","page-break-after","page-break-before","page-break-inside","page-policy","pause","pause-after","pause-before","perspective","perspective-origin","pitch","pitch-range","place-content","place-items","place-self","play-during","position","presentation-level","punctuation-trim","quotes","region-break-after","region-break-before","region-break-inside","region-fragment","rendering-intent","resize","rest","rest-after","rest-before","richness","right","rotate","rotation","rotation-point","row-gap","ruby-align","ruby-overhang","ruby-position","ruby-span","scale","scroll-behavior","scroll-margin","scroll-margin-block","scroll-margin-block-end","scroll-margin-block-start","scroll-margin-bottom","scroll-margin-inline","scroll-margin-inline-end","scroll-margin-inline-start","scroll-margin-left","scroll-margin-right","scroll-margin-top","scroll-padding","scroll-padding-block","scroll-padding-block-end","scroll-padding-block-start","scroll-padding-bottom","scroll-padding-inline","scroll-padding-inline-end","scroll-padding-inline-start","scroll-padding-left","scroll-padding-right","scroll-padding-top","scroll-snap-align","scroll-snap-type","shape-image-threshold","shape-inside","shape-margin","shape-outside","size","speak","speak-as","speak-header","speak-numeral","speak-punctuation","speech-rate","stress","string-set","tab-size","table-layout","target","target-name","target-new","target-position","text-align","text-align-last","text-combine-upright","text-decoration","text-decoration-color","text-decoration-line","text-decoration-skip","text-decoration-skip-ink","text-decoration-style","text-emphasis","text-emphasis-color","text-emphasis-position","text-emphasis-style","text-height","text-indent","text-justify","text-orientation","text-outline","text-overflow","text-rendering","text-shadow","text-size-adjust","text-space-collapse","text-transform","text-underline-position","text-wrap","top","touch-action","transform","transform-origin","transform-style","transition","transition-delay","transition-duration","transition-property","transition-timing-function","translate","unicode-bidi","user-select","vertical-align","visibility","voice-balance","voice-duration","voice-family","voice-pitch","voice-range","voice-rate","voice-stress","voice-volume","volume","white-space","widows","width","will-change","word-break","word-spacing","word-wrap","writing-mode","z-index","clip-path","clip-rule","mask","enable-background","filter","flood-color","flood-opacity","lighting-color","stop-color","stop-opacity","pointer-events","color-interpolation","color-interpolation-filters","color-rendering","fill","fill-opacity","fill-rule","image-rendering","marker","marker-end","marker-mid","marker-start","paint-order","shape-rendering","stroke","stroke-dasharray","stroke-dashoffset","stroke-linecap","stroke-linejoin","stroke-miterlimit","stroke-opacity","stroke-width","text-rendering","baseline-shift","dominant-baseline","glyph-orientation-horizontal","glyph-orientation-vertical","text-anchor","writing-mode"],x=e(y),w=["accent-color","aspect-ratio","border-block","border-block-color","border-block-end","border-block-end-color","border-block-end-style","border-block-end-width","border-block-start","border-block-start-color","border-block-start-style","border-block-start-width","border-block-style","border-block-width","border-inline","border-inline-color","border-inline-end","border-inline-end-color","border-inline-end-style","border-inline-end-width","border-inline-start","border-inline-start-color","border-inline-start-style","border-inline-start-width","border-inline-style","border-inline-width","content-visibility","margin-block","margin-block-end","margin-block-start","margin-inline","margin-inline-end","margin-inline-start","overflow-anchor","overscroll-behavior","padding-block","padding-block-end","padding-block-start","padding-inline","padding-inline-end","padding-inline-start","scroll-snap-stop","scrollbar-3d-light-color","scrollbar-arrow-color","scrollbar-base-color","scrollbar-dark-shadow-color","scrollbar-face-color","scrollbar-highlight-color","scrollbar-shadow-color","scrollbar-track-color","searchfield-cancel-button","searchfield-decoration","searchfield-results-button","searchfield-results-decoration","shape-inside","zoom"],k=e(w),A=["font-display","font-family","src","unicode-range","font-variant","font-feature-settings","font-stretch","font-weight","font-style"],M=e(A),D=["additive-symbols","fallback","negative","pad","prefix","range","speak-as","suffix","symbols","system"],O=e(D),L=["aliceblue","antiquewhite","aqua","aquamarine","azure","beige","bisque","black","blanchedalmond","blue","blueviolet","brown","burlywood","cadetblue","chartreuse","chocolate","coral","cornflowerblue","cornsilk","crimson","cyan","darkblue","darkcyan","darkgoldenrod","darkgray","darkgreen","darkgrey","darkkhaki","darkmagenta","darkolivegreen","darkorange","darkorchid","darkred","darksalmon","darkseagreen","darkslateblue","darkslategray","darkslategrey","darkturquoise","darkviolet","deeppink","deepskyblue","dimgray","dimgrey","dodgerblue","firebrick","floralwhite","forestgreen","fuchsia","gainsboro","ghostwhite","gold","goldenrod","gray","grey","green","greenyellow","honeydew","hotpink","indianred","indigo","ivory","khaki","lavender","lavenderblush","lawngreen","lemonchiffon","lightblue","lightcoral","lightcyan","lightgoldenrodyellow","lightgray","lightgreen","lightgrey","lightpink","lightsalmon","lightseagreen","lightskyblue","lightslategray","lightslategrey","lightsteelblue","lightyellow","lime","limegreen","linen","magenta","maroon","mediumaquamarine","mediumblue","mediumorchid","mediumpurple","mediumseagreen","mediumslateblue","mediumspringgreen","mediumturquoise","mediumvioletred","midnightblue","mintcream","mistyrose","moccasin","navajowhite","navy","oldlace","olive","olivedrab","orange","orangered","orchid","palegoldenrod","palegreen","paleturquoise","palevioletred","papayawhip","peachpuff","peru","pink","plum","powderblue","purple","rebeccapurple","red","rosybrown","royalblue","saddlebrown","salmon","sandybrown","seagreen","seashell","sienna","silver","skyblue","slateblue","slategray","slategrey","snow","springgreen","steelblue","tan","teal","thistle","tomato","turquoise","violet","wheat","white","whitesmoke","yellow","yellowgreen"],E=e(L),N=["above","absolute","activeborder","additive","activecaption","afar","after-white-space","ahead","alias","all","all-scroll","alphabetic","alternate","always","amharic","amharic-abegede","antialiased","appworkspace","arabic-indic","armenian","asterisks","attr","auto","auto-flow","avoid","avoid-column","avoid-page","avoid-region","axis-pan","background","backwards","baseline","below","bidi-override","binary","bengali","blink","block","block-axis","blur","bold","bolder","border","border-box","both","bottom","break","break-all","break-word","brightness","bullets","button","buttonface","buttonhighlight","buttonshadow","buttontext","calc","cambodian","capitalize","caps-lock-indicator","caption","captiontext","caret","cell","center","checkbox","circle","cjk-decimal","cjk-earthly-branch","cjk-heavenly-stem","cjk-ideographic","clear","clip","close-quote","col-resize","collapse","color","color-burn","color-dodge","column","column-reverse","compact","condensed","conic-gradient","contain","content","contents","content-box","context-menu","continuous","contrast","copy","counter","counters","cover","crop","cross","crosshair","cubic-bezier","currentcolor","cursive","cyclic","darken","dashed","decimal","decimal-leading-zero","default","default-button","dense","destination-atop","destination-in","destination-out","destination-over","devanagari","difference","disc","discard","disclosure-closed","disclosure-open","document","dot-dash","dot-dot-dash","dotted","double","down","drop-shadow","e-resize","ease","ease-in","ease-in-out","ease-out","element","ellipse","ellipsis","embed","end","ethiopic","ethiopic-abegede","ethiopic-abegede-am-et","ethiopic-abegede-gez","ethiopic-abegede-ti-er","ethiopic-abegede-ti-et","ethiopic-halehame-aa-er","ethiopic-halehame-aa-et","ethiopic-halehame-am-et","ethiopic-halehame-gez","ethiopic-halehame-om-et","ethiopic-halehame-sid-et","ethiopic-halehame-so-et","ethiopic-halehame-ti-er","ethiopic-halehame-ti-et","ethiopic-halehame-tig","ethiopic-numeric","ew-resize","exclusion","expanded","extends","extra-condensed","extra-expanded","fantasy","fast","fill","fill-box","fixed","flat","flex","flex-end","flex-start","footnotes","forwards","from","geometricPrecision","georgian","grayscale","graytext","grid","groove","gujarati","gurmukhi","hand","hangul","hangul-consonant","hard-light","hebrew","help","hidden","hide","higher","highlight","highlighttext","hiragana","hiragana-iroha","horizontal","hsl","hsla","hue","hue-rotate","icon","ignore","inactiveborder","inactivecaption","inactivecaptiontext","infinite","infobackground","infotext","inherit","initial","inline","inline-axis","inline-block","inline-flex","inline-grid","inline-table","inset","inside","intrinsic","invert","italic","japanese-formal","japanese-informal","justify","kannada","katakana","katakana-iroha","keep-all","khmer","korean-hangul-formal","korean-hanja-formal","korean-hanja-informal","landscape","lao","large","larger","left","level","lighter","lighten","line-through","linear","linear-gradient","lines","list-item","listbox","listitem","local","logical","loud","lower","lower-alpha","lower-armenian","lower-greek","lower-hexadecimal","lower-latin","lower-norwegian","lower-roman","lowercase","ltr","luminosity","malayalam","manipulation","match","matrix","matrix3d","media-play-button","media-slider","media-sliderthumb","media-volume-slider","media-volume-sliderthumb","medium","menu","menulist","menulist-button","menutext","message-box","middle","min-intrinsic","mix","mongolian","monospace","move","multiple","multiple_mask_images","multiply","myanmar","n-resize","narrower","ne-resize","nesw-resize","no-close-quote","no-drop","no-open-quote","no-repeat","none","normal","not-allowed","nowrap","ns-resize","numbers","numeric","nw-resize","nwse-resize","oblique","octal","opacity","open-quote","optimizeLegibility","optimizeSpeed","oriya","oromo","outset","outside","outside-shape","overlay","overline","padding","padding-box","painted","page","paused","persian","perspective","pinch-zoom","plus-darker","plus-lighter","pointer","polygon","portrait","pre","pre-line","pre-wrap","preserve-3d","progress","push-button","radial-gradient","radio","read-only","read-write","read-write-plaintext-only","rectangle","region","relative","repeat","repeating-linear-gradient","repeating-radial-gradient","repeating-conic-gradient","repeat-x","repeat-y","reset","reverse","rgb","rgba","ridge","right","rotate","rotate3d","rotateX","rotateY","rotateZ","round","row","row-resize","row-reverse","rtl","run-in","running","s-resize","sans-serif","saturate","saturation","scale","scale3d","scaleX","scaleY","scaleZ","screen","scroll","scrollbar","scroll-position","se-resize","searchfield","searchfield-cancel-button","searchfield-decoration","searchfield-results-button","searchfield-results-decoration","self-start","self-end","semi-condensed","semi-expanded","separate","sepia","serif","show","sidama","simp-chinese-formal","simp-chinese-informal","single","skew","skewX","skewY","skip-white-space","slide","slider-horizontal","slider-vertical","sliderthumb-horizontal","sliderthumb-vertical","slow","small","small-caps","small-caption","smaller","soft-light","solid","somali","source-atop","source-in","source-out","source-over","space","space-around","space-between","space-evenly","spell-out","square","square-button","start","static","status-bar","stretch","stroke","stroke-box","sub","subpixel-antialiased","svg_masks","super","sw-resize","symbolic","symbols","system-ui","table","table-caption","table-cell","table-column","table-column-group","table-footer-group","table-header-group","table-row","table-row-group","tamil","telugu","text","text-bottom","text-top","textarea","textfield","thai","thick","thin","threeddarkshadow","threedface","threedhighlight","threedlightshadow","threedshadow","tibetan","tigre","tigrinya-er","tigrinya-er-abegede","tigrinya-et","tigrinya-et-abegede","to","top","trad-chinese-formal","trad-chinese-informal","transform","translate","translate3d","translateX","translateY","translateZ","transparent","ultra-condensed","ultra-expanded","underline","unidirectional-pan","unset","up","upper-alpha","upper-armenian","upper-greek","upper-hexadecimal","upper-latin","upper-norwegian","upper-roman","uppercase","urdu","url","var","vertical","vertical-text","view-box","visible","visibleFill","visiblePainted","visibleStroke","visual","w-resize","wait","wave","wider","window","windowframe","windowtext","words","wrap","wrap-reverse","x-large","x-small","xor","xx-large","xx-small"],B=e(N),I=r.concat(s).concat(f).concat(p).concat(y).concat(w).concat(L).concat(N);t.registerHelper("hintWords","css",I);function R(j,F){for(var se=!1,W;(W=j.next())!=null;){if(se&&W=="/"){F.tokenize=null;break}se=W=="*"}return["comment","comment"]}t.defineMIME("text/css",{documentTypes:i,mediaTypes:a,mediaFeatures:d,mediaValueKeywords:g,propertyKeywords:x,nonStandardPropertyKeywords:k,fontProperties:M,counterDescriptors:O,colorKeywords:E,valueKeywords:B,tokenHooks:{"/":function(j,F){return j.eat("*")?(F.tokenize=R,R(j,F)):!1}},name:"css"}),t.defineMIME("text/x-scss",{mediaTypes:a,mediaFeatures:d,mediaValueKeywords:g,propertyKeywords:x,nonStandardPropertyKeywords:k,colorKeywords:E,valueKeywords:B,fontProperties:M,allowNested:!0,lineComment:"//",tokenHooks:{"/":function(j,F){return j.eat("/")?(j.skipToEnd(),["comment","comment"]):j.eat("*")?(F.tokenize=R,R(j,F)):["operator","operator"]},":":function(j){return j.match(/^\s*\{/,!1)?[null,null]:!1},$:function(j){return j.match(/^[\w-]+/),j.match(/^\s*:/,!1)?["variable-2","variable-definition"]:["variable-2","variable"]},"#":function(j){return j.eat("{")?[null,"interpolation"]:!1}},name:"css",helperType:"scss"}),t.defineMIME("text/x-less",{mediaTypes:a,mediaFeatures:d,mediaValueKeywords:g,propertyKeywords:x,nonStandardPropertyKeywords:k,colorKeywords:E,valueKeywords:B,fontProperties:M,allowNested:!0,lineComment:"//",tokenHooks:{"/":function(j,F){return j.eat("/")?(j.skipToEnd(),["comment","comment"]):j.eat("*")?(F.tokenize=R,R(j,F)):["operator","operator"]},"@":function(j){return j.eat("{")?[null,"interpolation"]:j.match(/^(charset|document|font-face|import|(-(moz|ms|o|webkit)-)?keyframes|media|namespace|page|supports)\b/i,!1)?!1:(j.eatWhile(/[\w\\\-]/),j.match(/^\s*:/,!1)?["variable-2","variable-definition"]:["variable-2","variable"])},"&":function(){return["atom","atom"]}},name:"css",helperType:"less"}),t.defineMIME("text/x-gss",{documentTypes:i,mediaTypes:a,mediaFeatures:d,propertyKeywords:x,nonStandardPropertyKeywords:k,fontProperties:M,counterDescriptors:O,colorKeywords:E,valueKeywords:B,supportsAtComponent:!0,tokenHooks:{"/":function(j,F){return j.eat("*")?(F.tokenize=R,R(j,F)):!1}},name:"css",helperType:"gss"})})});var y1=Y((g1,m1)=>{(function(t){typeof g1=="object"&&typeof m1=="object"?t(fr()):typeof define=="function"&&define.amd?define(["../../lib/codemirror"],t):t(CodeMirror)})(function(t){"use strict";var e={autoSelfClosers:{area:!0,base:!0,br:!0,col:!0,command:!0,embed:!0,frame:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0,menuitem:!0},implicitlyClosed:{dd:!0,li:!0,optgroup:!0,option:!0,p:!0,rp:!0,rt:!0,tbody:!0,td:!0,tfoot:!0,th:!0,tr:!0},contextGrabbers:{dd:{dd:!0,dt:!0},dt:{dd:!0,dt:!0},li:{li:!0},option:{option:!0,optgroup:!0},optgroup:{optgroup:!0},p:{address:!0,article:!0,aside:!0,blockquote:!0,dir:!0,div:!0,dl:!0,fieldset:!0,footer:!0,form:!0,h1:!0,h2:!0,h3:!0,h4:!0,h5:!0,h6:!0,header:!0,hgroup:!0,hr:!0,menu:!0,nav:!0,ol:!0,p:!0,pre:!0,section:!0,table:!0,ul:!0},rp:{rp:!0,rt:!0},rt:{rp:!0,rt:!0},tbody:{tbody:!0,tfoot:!0},td:{td:!0,th:!0},tfoot:{tbody:!0},th:{td:!0,th:!0},thead:{tbody:!0,tfoot:!0},tr:{tr:!0}},doNotIndent:{pre:!0},allowUnquoted:!0,allowMissing:!0,caseFold:!0},r={autoSelfClosers:{},implicitlyClosed:{},contextGrabbers:{},doNotIndent:{},allowUnquoted:!1,allowMissing:!1,allowMissingTagName:!1,caseFold:!1};t.defineMode("xml",function(i,s){var a=i.indentUnit,f={},d=s.htmlMode?e:r;for(var p in d)f[p]=d[p];for(var p in s)f[p]=s[p];var g,y;function x(T,ne){function ee(Ve){return ne.tokenize=Ve,Ve(T,ne)}var be=T.next();if(be=="<")return T.eat("!")?T.eat("[")?T.match("CDATA[")?ee(A("atom","]]>")):null:T.match("--")?ee(A("comment","-->")):T.match("DOCTYPE",!0,!0)?(T.eatWhile(/[\w\._\-]/),ee(M(1))):null:T.eat("?")?(T.eatWhile(/[\w\._\-]/),ne.tokenize=A("meta","?>"),"meta"):(g=T.eat("/")?"closeTag":"openTag",ne.tokenize=w,"tag bracket");if(be=="&"){var Re;return T.eat("#")?T.eat("x")?Re=T.eatWhile(/[a-fA-F\d]/)&&T.eat(";"):Re=T.eatWhile(/[\d]/)&&T.eat(";"):Re=T.eatWhile(/[\w\.\-:]/)&&T.eat(";"),Re?"atom":"error"}else return T.eatWhile(/[^&<]/),null}x.isInText=!0;function w(T,ne){var ee=T.next();if(ee==">"||ee=="/"&&T.eat(">"))return ne.tokenize=x,g=ee==">"?"endTag":"selfcloseTag","tag bracket";if(ee=="=")return g="equals",null;if(ee=="<"){ne.tokenize=x,ne.state=N,ne.tagName=ne.tagStart=null;var be=ne.tokenize(T,ne);return be?be+" tag error":"tag error"}else return/[\'\"]/.test(ee)?(ne.tokenize=k(ee),ne.stringStartCol=T.column(),ne.tokenize(T,ne)):(T.match(/^[^\s\u00a0=<>\"\']*[^\s\u00a0=<>\"\'\/]/),"word")}function k(T){var ne=function(ee,be){for(;!ee.eol();)if(ee.next()==T){be.tokenize=w;break}return"string"};return ne.isInAttribute=!0,ne}function A(T,ne){return function(ee,be){for(;!ee.eol();){if(ee.match(ne)){be.tokenize=x;break}ee.next()}return T}}function M(T){return function(ne,ee){for(var be;(be=ne.next())!=null;){if(be=="<")return ee.tokenize=M(T+1),ee.tokenize(ne,ee);if(be==">")if(T==1){ee.tokenize=x;break}else return ee.tokenize=M(T-1),ee.tokenize(ne,ee)}return"meta"}}function D(T){return T&&T.toLowerCase()}function O(T,ne,ee){this.prev=T.context,this.tagName=ne||"",this.indent=T.indented,this.startOfLine=ee,(f.doNotIndent.hasOwnProperty(ne)||T.context&&T.context.noIndent)&&(this.noIndent=!0)}function L(T){T.context&&(T.context=T.context.prev)}function E(T,ne){for(var ee;;){if(!T.context||(ee=T.context.tagName,!f.contextGrabbers.hasOwnProperty(D(ee))||!f.contextGrabbers[D(ee)].hasOwnProperty(D(ne))))return;L(T)}}function N(T,ne,ee){return T=="openTag"?(ee.tagStart=ne.column(),B):T=="closeTag"?I:N}function B(T,ne,ee){return T=="word"?(ee.tagName=ne.current(),y="tag",F):f.allowMissingTagName&&T=="endTag"?(y="tag bracket",F(T,ne,ee)):(y="error",B)}function I(T,ne,ee){if(T=="word"){var be=ne.current();return ee.context&&ee.context.tagName!=be&&f.implicitlyClosed.hasOwnProperty(D(ee.context.tagName))&&L(ee),ee.context&&ee.context.tagName==be||f.matchClosing===!1?(y="tag",R):(y="tag error",j)}else return f.allowMissingTagName&&T=="endTag"?(y="tag bracket",R(T,ne,ee)):(y="error",j)}function R(T,ne,ee){return T!="endTag"?(y="error",R):(L(ee),N)}function j(T,ne,ee){return y="error",R(T,ne,ee)}function F(T,ne,ee){if(T=="word")return y="attribute",se;if(T=="endTag"||T=="selfcloseTag"){var be=ee.tagName,Re=ee.tagStart;return ee.tagName=ee.tagStart=null,T=="selfcloseTag"||f.autoSelfClosers.hasOwnProperty(D(be))?E(ee,be):(E(ee,be),ee.context=new O(ee,be,Re==ee.indented)),N}return y="error",F}function se(T,ne,ee){return T=="equals"?W:(f.allowMissing||(y="error"),F(T,ne,ee))}function W(T,ne,ee){return T=="string"?J:T=="word"&&f.allowUnquoted?(y="string",F):(y="error",F(T,ne,ee))}function J(T,ne,ee){return T=="string"?J:F(T,ne,ee)}return{startState:function(T){var ne={tokenize:x,state:N,indented:T||0,tagName:null,tagStart:null,context:null};return T!=null&&(ne.baseIndent=T),ne},token:function(T,ne){if(!ne.tagName&&T.sol()&&(ne.indented=T.indentation()),T.eatSpace())return null;g=null;var ee=ne.tokenize(T,ne);return(ee||g)&&ee!="comment"&&(y=null,ne.state=ne.state(g||ee,T,ne),y&&(ee=y=="error"?ee+" error":y)),ee},indent:function(T,ne,ee){var be=T.context;if(T.tokenize.isInAttribute)return T.tagStart==T.indented?T.stringStartCol+1:T.indented+a;if(be&&be.noIndent)return t.Pass;if(T.tokenize!=w&&T.tokenize!=x)return ee?ee.match(/^(\s*)/)[0].length:0;if(T.tagName)return f.multilineTagIndentPastTag!==!1?T.tagStart+T.tagName.length+2:T.tagStart+a*(f.multilineTagIndentFactor||1);if(f.alignCDATA&&/<!\[CDATA\[/.test(ne))return 0;var Re=ne&&/^<(\/)?([\w_:\.-]*)/.exec(ne);if(Re&&Re[1])for(;be;)if(be.tagName==Re[2]){be=be.prev;break}else if(f.implicitlyClosed.hasOwnProperty(D(be.tagName)))be=be.prev;else break;else if(Re)for(;be;){var Ve=f.contextGrabbers[D(be.tagName)];if(Ve&&Ve.hasOwnProperty(D(Re[2])))be=be.prev;else break}for(;be&&be.prev&&!be.startOfLine;)be=be.prev;return be?be.indent+a:T.baseIndent||0},electricInput:/<\/[\s\w:]+>$/,blockCommentStart:"<!--",blockCommentEnd:"-->",configuration:f.htmlMode?"html":"xml",helperType:f.htmlMode?"html":"xml",skipAttribute:function(T){T.state==W&&(T.state=F)},xmlCurrentTag:function(T){return T.tagName?{name:T.tagName,close:T.type=="closeTag"}:null},xmlCurrentContext:function(T){for(var ne=[],ee=T.context;ee;ee=ee.prev)ne.push(ee.tagName);return ne.reverse()}}}),t.defineMIME("text/xml","xml"),t.defineMIME("application/xml","xml"),t.mimeModes.hasOwnProperty("text/html")||t.defineMIME("text/html",{name:"xml",htmlMode:!0})})});var W1=Y((jG,H1)=>{H1.exports="0.5.7"});var Dg=Y((HG,$1)=>{var _H={8:"\\b",9:"\\t",10:"\\n",12:"\\f",13:"\\r",34:'\\"',92:"\\\\"};function jH(t){return t>=55296&&t<=56319}function HH(t){return t>=56320&&t<=57343}function U1(t){return typeof t.pipe=="function"&&typeof t._read=="function"&&typeof t._readableState=="object"&&t._readableState!==null}function WH(t,e,r,i){switch(r&&typeof r.toJSON=="function"&&(r=r.toJSON()),i!==null&&(r=i.call(t,String(e),r)),typeof r){case"function":case"symbol":r=void 0;break;case"object":if(r!==null){let s=r.constructor;(s===String||s===Number||s===Boolean)&&(r=r.valueOf())}break}return r}function UH(t){return t===null||typeof t!="object"?1:Array.isArray(t)?3:2}function $H(t){return t===null||typeof t!="object"?1:typeof t.then=="function"?4:U1(t)?t._readableState.objectMode?6:5:Array.isArray(t)?3:2}function GH(t){return typeof t=="function"?t:Array.isArray(t)?[...new Set(t.map(r=>{let i=r&&r.constructor;return i===String||i===Number?String(r):null}).filter(r=>typeof r=="string"))]:null}function VH(t){return typeof t=="number"?!Number.isFinite(t)||t<1?!1:" ".repeat(Math.min(t,10)):typeof t=="string"&&t.slice(0,10)||!1}$1.exports={escapableCharCodeSubstitution:_H,isLeadingSurrogate:jH,isTrailingSurrogate:HH,type:{PRIMITIVE:1,PROMISE:4,ARRAY:3,OBJECT:2,STRING_STREAM:5,OBJECT_STREAM:6},isReadableStream:U1,replaceValue:WH,getTypeNative:UH,getTypeAsync:$H,normalizeReplacer:GH,normalizeSpace:VH}});var Y1=Y((WG,K1)=>{var{normalizeReplacer:KH,normalizeSpace:YH,replaceValue:QH,getTypeNative:XH,getTypeAsync:JH,isLeadingSurrogate:ZH,isTrailingSurrogate:e4,escapableCharCodeSubstitution:t4,type:{PRIMITIVE:G1,OBJECT:n4,ARRAY:r4,PROMISE:i4,STRING_STREAM:o4,OBJECT_STREAM:s4}}=Dg(),a4=Array.from({length:2048}).map((t,e)=>t4.hasOwnProperty(e)?2:e<32?6:e<128?1:2);function V1(t){let e=0,r=!1;for(let i=0;i<t.length;i++){let s=t.charCodeAt(i);if(s<2048)e+=a4[s];else if(ZH(s)){e+=6,r=!0;continue}else e4(s)?e=r?e-2:e+6:e+=3;r=!1}return e+2}function l4(t){switch(typeof t){case"string":return V1(t);case"number":return Number.isFinite(t)?String(t).length:4;case"boolean":return t?4:5;case"undefined":case"object":return 4;default:return 0}}function c4(t){return t=YH(t),typeof t=="string"?t.length:0}K1.exports=function(e,r,i,s){function a(D,O,L){if(A)return;L=QH(D,O,L,r);let E=w(L);if(E!==G1&&p.has(L)){y.add(L),M+=4,s.continueOnCircular||(A=!0);return}switch(E){case G1:L!==void 0||Array.isArray(D)?M+=l4(L):D===k&&(M+=9);break;case n4:{if(d.has(L)){g.add(L),M+=d.get(L);break}let N=M,B=0;M+=2,p.add(L);for(let I in L)if(hasOwnProperty.call(L,I)&&(f===null||f.has(I))){let R=M;a(L,I,L[I]),R!==M&&(M+=V1(I)+1,B++)}B>1&&(M+=B-1),p.delete(L),i>0&&B>0&&(M+=(1+(p.size+1)*i+1)*B,M+=1+p.size*i),d.set(L,M-N);break}case r4:{if(d.has(L)){g.add(L),M+=d.get(L);break}let N=M;M+=2,p.add(L);for(let B=0;B<L.length;B++)a(L,B,L[B]);L.length>1&&(M+=L.length-1),p.delete(L),i>0&&L.length>0&&(M+=(1+(p.size+1)*i)*L.length,M+=1+p.size*i),d.set(L,M-N);break}case i4:case o4:x.add(L);break;case s4:M+=2,x.add(L);break}}let f=null;r=KH(r),Array.isArray(r)&&(f=new Set(r),r=null),i=c4(i),s=s||{};let d=new Map,p=new Set,g=new Set,y=new Set,x=new Set,w=s.async?JH:XH,k={"":e},A=!1,M=0;return a(k,"",e),{minLength:isNaN(M)?1/0:M,circular:[...y],duplicate:[...g],async:[...x]}}});var X1=Y((UG,Q1)=>{Q1.exports=()=>{throw new Error("Method is not supported")}});var Z1=Y(($G,J1)=>{J1.exports=TextDecoder});var Pg=Y((GG,tA)=>{var{isReadableStream:u4}=Dg(),f4=Z1(),al=1,d4=2,h4=new f4;function eA(t){return t!==null&&typeof t=="object"}function Ng(t,e){return t.name==="SyntaxError"&&e.jsonParseOffset&&(t.message=t.message.replace(/at position (\d+)/,(r,i)=>"at position "+(Number(i)+e.jsonParseOffset))),t}function p4(t,e){let r=t.length;t.length+=e.length;for(let i=0;i<e.length;i++)t[r+i]=e[i]}tA.exports=function(t){let e=new Og;if(eA(t)&&u4(t))return new Promise((r,i)=>{t.on("data",s=>{try{e.push(s)}catch(a){i(Ng(a,e)),e=null}}).on("error",s=>{e=null,i(s)}).on("end",()=>{try{r(e.finish())}catch(s){i(Ng(s,e))}finally{e=null}})});if(typeof t=="function"){let r=t();if(eA(r)&&(Symbol.iterator in r||Symbol.asyncIterator in r))return new Promise(async(i,s)=>{try{for await(let a of r)e.push(a);i(e.finish())}catch(a){s(Ng(a,e))}finally{e=null}})}throw new Error("Chunk emitter should be readable stream, generator, async generator or function returning an iterable object")};var Og=class{constructor(){this.value=void 0,this.valueStack=null,this.stack=new Array(100),this.lastFlushDepth=0,this.flushDepth=0,this.stateString=!1,this.stateStringEscape=!1,this.pendingByteSeq=null,this.pendingChunk=null,this.chunkOffset=0,this.jsonParseOffset=0}parseAndAppend(e,r){this.stack[this.lastFlushDepth-1]===al?(r&&(this.jsonParseOffset--,e="{"+e+"}"),Object.assign(this.valueStack.value,JSON.parse(e))):(r&&(this.jsonParseOffset--,e="["+e+"]"),p4(this.valueStack.value,JSON.parse(e)))}prepareAddition(e){let{value:r}=this.valueStack;if(Array.isArray(r)?r.length!==0:Object.keys(r).length!==0){if(e[0]===",")return this.jsonParseOffset++,e.slice(1);if(e[0]!=="}"&&e[0]!=="]")return this.jsonParseOffset-=3,"[[]"+e}return e}flush(e,r,i){let s=e.slice(r,i);if(this.jsonParseOffset=this.chunkOffset+r,this.pendingChunk!==null&&(s=this.pendingChunk+s,this.jsonParseOffset-=this.pendingChunk.length,this.pendingChunk=null),this.flushDepth===this.lastFlushDepth)this.flushDepth>0?this.parseAndAppend(this.prepareAddition(s),!0):(this.value=JSON.parse(s),this.valueStack={value:this.value,prev:null});else if(this.flushDepth>this.lastFlushDepth){for(let a=this.flushDepth-1;a>=this.lastFlushDepth;a--)s+=this.stack[a]===al?"}":"]";this.lastFlushDepth===0?(this.value=JSON.parse(s),this.valueStack={value:this.value,prev:null}):this.parseAndAppend(this.prepareAddition(s),!0);for(let a=this.lastFlushDepth||1;a<this.flushDepth;a++){let f=this.valueStack.value;if(this.stack[a-1]===al){let d;for(d in f);f=f[d]}else f=f[f.length-1];this.valueStack={value:f,prev:this.valueStack}}}else{s=this.prepareAddition(s);for(let a=this.lastFlushDepth-1;a>=this.flushDepth;a--)this.jsonParseOffset--,s=(this.stack[a]===al?"{":"[")+s;this.parseAndAppend(s,!1);for(let a=this.lastFlushDepth-1;a>=this.flushDepth;a--)this.valueStack=this.valueStack.prev}this.lastFlushDepth=this.flushDepth}push(e){if(typeof e!="string"){if(this.pendingByteSeq!==null){let a=e;e=new Uint8Array(this.pendingByteSeq.length+a.length),e.set(this.pendingByteSeq),e.set(a,this.pendingByteSeq.length),this.pendingByteSeq=null}if(e[e.length-1]>127)for(let a=0;a<e.length;a++){let f=e[e.length-1-a];if(f>>6===3){a++,(a!==4&&f>>3===30||a!==3&&f>>4===14||a!==2&&f>>5===6)&&(this.pendingByteSeq=e.slice(e.length-a),e=e.slice(0,-a));break}}e=h4.decode(e)}let r=e.length,i=0,s=0;e:for(let a=0;a<r;a++){if(this.stateString){for(;a<r;a++)if(this.stateStringEscape)this.stateStringEscape=!1;else switch(e.charCodeAt(a)){case 34:this.stateString=!1;continue e;case 92:this.stateStringEscape=!0}break}switch(e.charCodeAt(a)){case 34:this.stateString=!0,this.stateStringEscape=!1;break;case 44:s=a;break;case 123:s=a+1,this.stack[this.flushDepth++]=al;break;case 91:s=a+1,this.stack[this.flushDepth++]=d4;break;case 93:case 125:s=a+1,this.flushDepth--,this.flushDepth<this.lastFlushDepth&&(this.flush(e,i,s),i=s);break;case 9:case 10:case 13:case 32:i===a&&i++,s===a&&s++;break}}s>i&&this.flush(e,i,s),s<r&&(this.pendingChunk!==null?this.pendingChunk+=e:this.pendingChunk=e.slice(s,r)),this.chunkOffset+=r}finish(){return this.pendingChunk!==null&&(this.flush("",0,0),this.pendingChunk=null),this.value}}});var rA=Y((VG,nA)=>{nA.exports={version:W1(),stringifyInfo:Y1(),stringifyStream:X1(),parseChunked:Pg()}});var D0=zh(),HR=new Date().getTimezoneOffset()*60*1e3;function WR(t){return"hsl("+String(t).split("").reduce((e,r)=>e+e^r.charCodeAt(0),0)+", 50%, 85%)"}function UR(t){t.definitionSyntax={syntax:null,error:null};try{t.definitionSyntax.syntax=D0.definitionSyntax.parse(t.value)}catch(e){t.definitionSyntax.error=e.message}}function M0(t,e){if(t.props[e]){t.definitionSyntax||(t.definitionSyntax={});let r=t.definitionSyntax[e]={syntax:null,error:null};try{r.syntax=D0.definitionSyntax.parse(t.props[e])}catch(i){r.error=i.message}}}function N0(t,{defineObjectMarker:e,addQueryHelpers:r}){let i=new Map([["FPWD","#ffbdbd"],["WD","#ffcb88"],["ED","#ffcb88"],["LC","#fde66e"],["CR","#e6ea37"],["PR","#c8e62b"],["REC","#a2d278"]]),s=new Map,a=e("spec",{lookupRefs:["id"],ref:"id",title:p=>p.props.title,page:"spec"});for(let p of t.specs)s.set(p.id,p),a(p);let f=e("def",{refs:["props"],lookupRefs:["id","props"],ref:"id",title:p=>p.props.name,page:"def"});t.defs.forEach(p=>{p.source.spec=s.get(p.source.spec),p.id=p.source.spec.id+"/"+p.type+"/"+p.props.name,M0(p,"value"),M0(p,"newValues"),f(p)});let d=e("prod",{ref:"id",title:p=>"<"+p.name+">",page:"prod"});t.prods.forEach(p=>{p.source.spec=s.get(p.source.spec),p.id=p.source.spec.id+"/prod/"+p.name,UR(p,"value"),d(p)}),t.idls.forEach(p=>{p.source.spec=s.get(p.source.spec)}),t.genericProds=["ident-token","function-token","at-keyword-token","hash-token","string-token","bad-string-token","url-token","bad-url-token","delim-token","number-token","percentage-token","dimension-token","whitespace-token","CDO-token","CDC-token","colon-token","semicolon-token","comma-token","[-token","]-token","(-token",")-token","{-token","}-token","string","ident","custom-ident","custom-property-name","hex-color","id-selector","an-plus-b","urange","declaration-value","any-value","dimension","angle","decibel","frequency","flex","length","resolution","semitones","time","percentage","zero","number","integer"],r({isArray:p=>Array.isArray(p),color:p=>i.has(p)?i.get(p):WR(p),datetime:p=>new Date((typeof p=="number"?p:Date.parse(p))-HR).toISOString().replace(/T/," ").replace(/\..+$/,""),syntaxChildren(p){let g=[];return p&&(p.term&&g.push(p.term),p.terms&&g.push(...p.terms)),g}})}function O0(t){let e=[N0].filter(r=>{if(typeof r=="function")return!0;console.warn('[discovery-cli] "prepare" module should return a function, but got '+typeof r)});e.length&&t.setPrepare(async(r,...i)=>{for(let s of e)r=await s(r,...i)||r;return r})}var P0=[];var sk=[(B0(),mn(I0)),(z0(),mn(q0)),(F0(),mn(R0)),(j0(),mn(_0)),(W0(),mn(H0)),($0(),mn(U0)),(V0(),mn(G0)),(Y0(),mn(K0)),(X0(),mn(Q0)),(Z0(),mn(J0)),(tk(),mn(ek)),(rk(),mn(nk)),(ok(),mn(ik))];var Rh="1.0.0-beta.83";var ak="1.0.0-beta.10";var jt=Object.hasOwn||((t,e)=>Object.hasOwnProperty.call(t,e)),iF=Object.prototype.toString;function Bo(t,e){return e!==void 0&&(Array.isArray(e)?e.forEach(r=>t.add(r)):t.add(e)),t}function Fh(t,e,r){t.has(e)?t.get(e).add(r):t.set(e,new Set([r]))}function lk(t,e){return t&&jt(t,e)?t[e]:void 0}function Kn(t){return t!==null&&typeof t=="object"&&t.constructor===Object}function Zr(t){return iF.call(t)==="[object RegExp]"}function Er(t){return t&&jt(t,"length")&&isFinite(t.length)}function wn(t){if(Array.isArray(t))return t.length>0;if(Kn(t)){for(let e in t)if(jt(t,e))return!0;return!1}return!!t}var oF=function(){return{yy:{},options:{ranges:!0},rules:[/^(?:\/\/.*?(?:\n|\r\n?|\u2028|\u2029|$)|\/\*(?:.|\s)*?(?:\*\/|$))/,/^\s+/,/^\//,/^<(?!=)/,/^/,/^(?:(?:[a-zA-Z_]|\\u[0-9a-fA-F]{4})(?:[a-zA-Z_$0-9]|\\u[0-9a-fA-F]{4})*\(?)/,/^/,(e,r)=>{if(e[0]!==(r==="template"?"}":"`"))return null;for(let i=1;i<e.length;i++){if(e[i]==="`")return i+1;if(e[i]==="$"&&e[i+1]==="{")return i+2;e[i]==="\\"&&i++}return null},(e,r)=>{if(e[0]!==(r==="template"?"}":"`"))return null;for(let i=1;i<e.length;i++){if(e[i]==="`")return i+1;if(e[i]==="$"&&e[i+1]==="{")return i+2;e[i]==="\\"&&i++}return null},/^/,/^\(/,/^\)/,/^\[/,/^\]/,/^\{/,/^\}/,/^(?:(true|false|null|undefined|Infinity|NaN)\b)/,/^and\b/,/^or\b/,/^is\b/,/^has\s+no\b/,/^has\b/,/^in\b/,/^not\s+in\b/,/^not\b/,/^no\b/,/^(?:(asc|desc)(NA?|AN?)?\b)/,/^(?:(?:[a-zA-Z_]|\\u[0-9a-fA-F]{4})(?:[a-zA-Z_$0-9]|\\u[0-9a-fA-F]{4})*\()/,/^(?:\$(?:[a-zA-Z_]|\\u[0-9a-fA-F]{4})(?:[a-zA-Z_$0-9]|\\u[0-9a-fA-F]{4})*\()/,/^(?:(\d+\.|\.)?\d+([eE][-+]?\d+)?\b)/,/^0[xX][0-9a-fA-F]+/,/^(?:"(?:\\[\\"]|[^"])*")/,/^(?:'(?:\\[\\']|[^'])*')/,/^(?:\/(?:\\.|[^/])+\/[gimsu]*)/,/^(?:(?:[a-zA-Z_]|\\u[0-9a-fA-F]{4})(?:[a-zA-Z_$0-9]|\\u[0-9a-fA-F]{4})*)/,/^(?:\$(?:[a-zA-Z_]|\\u[0-9a-fA-F]{4})(?:[a-zA-Z_$0-9]|\\u[0-9a-fA-F]{4})*)/,/^@/,/^#/,/^\$\$/,/^\$/,/^=>/,/^=/,/^!=/,/^~=/,/^>=/,/^<=/,/^</,/^>/,/^\.\.\(/,/^\.\(/,/^\.\[/,/^\.\.\./,/^\.\./,/^\./,/^\?\?/,/^\?/,/^,/,/^:/,/^;/,/^\-/,/^\+/,/^\*/,/^\//,/^\%/,/^(?:\|)/,/^./,/^$/],conditions:{preventPrimitive:{rules:[0,1,2,3,4,7,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,64,65,66],inclusive:!0},preventKeyword:{rules:[5,6],inclusive:!1},template:{rules:[8,9],inclusive:!1},INITIAL:{rules:[0,1,7,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,64,65,66],inclusive:!0}},performAction(e,r,i,s){let a=s;switch(i){case 0:{e.commentRanges.push(r.yylloc.range);break}case 1:break;case 2:{return this.popState(),40;break}case 3:{return this.popState(),44;break}case 4:{this.done=!1,this.popState();break}case 5:{if(this.popState(),r.yytext.endsWith("(")){this.unput(r.yytext);return}return e.pps(),r.yytext=this.ident(r.yytext),14;break}case 6:{this.done=!1,this.popState();break}case 7:{let f=r.yytext.endsWith("`")?"TEMPLATE":"TPL_START";return r.yytext=this.toStringLiteral(r.yytext,!0,1+ +(f!=="TEMPLATE")),f==="TEMPLATE"&&e.pps(),f;break}case 8:{let f=r.yytext.endsWith("`")?"TPL_END":"TPL_CONTINUE";return r.yytext=this.toStringLiteral(r.yytext,!0,1+ +(f!=="TPL_END")),this.popState(),f==="TPL_END"&&e.pps(),f;break}case 9:{this.parseError("Unexpected end of input");break}case 10:return 21;case 11:{return e.pps(),22;break}case 12:return 61;case 13:{return e.pps(),63;break}case 14:return 84;case 15:{if(this.bracketStack[this.bracketStack.length-1]!=="TPL_END")return e.pps(),85;this.unput("}"),this.begin("template");break}case 16:{return r.yytext=this.toLiteral(r.yytext),57;break}case 17:return 36;case 18:return 37;case 19:return 30;case 20:return 35;case 21:return 33;case 22:return 32;case 23:return 34;case 24:return 25;case 25:return 26;case 26:return 95;case 27:{return r.yytext=this.ident(r.yytext.slice(0,-1)),70;break}case 28:{return r.yytext=this.ident(r.yytext.slice(1,-1)),72;break}case 29:{return e.pps(),r.yytext=Number(r.yytext),55;break}case 30:{return e.pps(),r.yytext=parseInt(r.yytext,16),55;break}case 31:{return e.pps(),r.yytext=this.toStringLiteral(r.yytext),54;break}case 32:{return e.pps(),r.yytext=this.toStringLiteral(r.yytext),54;break}case 33:{return e.pps(),r.yytext=this.toRegExp(r.yytext),56;break}case 34:{return e.pps(),r.yytext=this.ident(r.yytext),14;break}case 35:{return e.pps(),r.yytext=this.ident(r.yytext.slice(1)),15;break}case 36:{return e.pps(),51;break}case 37:{return e.pps(),52;break}case 38:{return e.pps(),53;break}case 39:{return e.pps(),9;break}case 40:return 20;case 41:return 42;case 42:return 43;case 43:return 48;case 44:return 47;case 45:return 45;case 46:return 44;case 47:return 46;case 48:return 69;case 49:return 66;case 50:return 67;case 51:return 89;case 52:{return e.pps(),e.pks(),68;break}case 53:{return e.pps(),e.pks(),65;break}case 54:return 38;case 55:return 17;case 56:return 73;case 57:return 11;case 58:return 10;case 59:return 27;case 60:return 28;case 61:return 39;case 62:return 40;case 63:return 41;case 64:return 29;case 65:{this.parseError(`Bad input on line ${r.yylloc.first_line} column ${r.yylloc.first_column}
`+this.showPosition(),{text:r.yytext,token:"BAD_TOKEN"});break}case 66:return 5}},setInput(e,r){return this.yy=r||this.yy||{},this._input=e,this._more=!1,this._backtrack=!1,this.done=!1,this.currentCondition="INITIAL",this.conditionStack=["INITIAL"],this.offset=0,this.yytext=this.match="",this.yyleng=0,this.yylineno=0,this.yylloc={first_line:1,first_column:0,last_line:1,last_column:0},this.yylloc.range=[0,0],this},parseError(e,r){if(!this.yy.parser)throw new Error(e);this.yy.parser.parseError(e,r)},input(){let e=this._input[this.offset],r=/\n|\r\n?|\u2028|\u2029/g.test(e);return this.offset++,this.yyleng++,this.yytext=this.match=this.yytext+e,r?(this.yylineno++,this.yylloc.last_line++,this.yylloc.last_column=0):this.yylloc.last_column++,this.yylloc.range[1]++,e},lineColumnForOffset(e=this.offset,r=this._input,i=1,s=0){let a=/\n|\r\n?|\u2028|\u2029/g,f=i,d=s,p=0,g;for(;(g=a.exec(r))!==null;)if(g.index<e)f++,d=0,p=g.index+g[0].length;else{d+=e-p,p=-1;break}return p!==-1&&(d+=e-p),{line:f,column:d}},setMatch(e,r){let i=this._input.slice(e,r),s=e!==this.offset?this.lineColumnForOffset(e):{line:this.yylloc.last_line,column:this.yylloc.last_column},a=e!==r?this.lineColumnForOffset(r-e,i,s.line,s.column):s;this.yytext=this.match=i,this.yyleng=r-e,this.offset=r,this.yylineno=a.line-1,this.yylloc={first_line:s.line,first_column:s.column,last_line:a.line,last_column:a.column},this.yylloc.range=[e,r]},less(e){let r=this.offset-this.match.length;this.setMatch(r,r+e)},unput(e){let r=this.match.length-e.length;if(!this.match.startsWith(e,r))throw new Error("Lexer#unput() should receive a part of matched text only");this.less(r)},more(){this._more=!0},reject(){throw new Error("reject() is allowed only when options.backtrack_lexer = true")},showPosition(e=this.offset-this.match.length){let r=this._input,i=Math.max(e-20,0),s=Math.min(e+20,r.length),a=(i===0?"":"...")+r.slice(i,e).replace(/\n|\r\n?|\u2028|\u2029/g,"\\n"),f=r.slice(e,s).replace(/\n|\r\n?|\u2028|\u2029/g,"\\n")+(s===r.length?"":"...");return a+f+`
${"-".repeat(a.length)}^`},test_match(e,r){let i;this._more=!1,this._backtrack=!1,this.setMatch(this.offset,this.offset+e[0].length),this.matches=e;let s=this.performAction.call(this,this.yy,this,r,this.conditionStack[this.conditionStack.length-1]);return!s&&this._backtrack?(Object.assign(this,i),!1):(this.eof()||(this.done=!1),typeof s=="number"&&this.yy.parser?this.yy.parser.terminals_[s]:s||!1)},eof(){return this.offset===this._input.length},next(){if(this.done)return 1;this.eof()&&(this.done=!0),this._more||(this.yytext="",this.match="");let e,r;for(let i of this.conditions[this.currentCondition].rules){let s=this.rules[i],a=this._input.slice(this.offset),f;if(typeof s=="function"){let d=s(a,this.currentCondition);switch(typeof d){case"string":f=[d];break;case"number":f=[a.slice(0,d)];break;default:f=d}}else f=a.match(s);if(f&&(!e||f[0].length>e[0].length)){e=f,r=i;break}}if(e)return this.test_match(e,r);if(this.eof())return 1;this.parseError("Lexical error on line "+(this.yylineno+1)+`. Unrecognized text.
`+this.showPosition(),{text:"",token:null,line:this.yylineno})},lex(){let e;for(;!e;)e=this.next();return e},begin(e){this.currentCondition=e,this.conditionStack.push(e)},pushState(e){this.begin(e)},popState(){return this.conditionStack.pop(),this.currentCondition=this.conditionStack.length?this.conditionStack[this.conditionStack.length-1]:"INITIAL"},topState(e){return e=this.conditionStack.length-1-Math.abs(e||0),e>=0?this.conditionStack[e]:"INITIAL"},stateStackSize(){return this.conditionStack.length}}}();function _h(){this.yy={}}_h.prototype={Parser:_h,lexer:oF,symbols_:{error:2,root:3,block:4,EOF:5,definitions:6,e:7,def:8,$:9,";":10,":":11,$ident:12,ident:13,IDENT:14,$IDENT:15,condConsequent:16,"?":17,condAlternate:18,query:19,"=>":20,"(":21,")":22,functionArgs:23,compareFunction:24,NOT:25,NO:26,"-":27,"+":28,"|":29,IS:30,assertion:31,IN:32,HAS:33,NOTIN:34,HASNO:35,AND:36,OR:37,"??":38,"*":39,"/":40,"%":41,"=":42,"!=":43,"<":44,"<=":45,">":46,">=":47,"~=":48,queryRoot:49,relativePath:50,"@":51,"#":52,$$:53,STRING:54,NUMBER:55,REGEXP:56,LITERAL:57,template:58,object:59,array:60,"[":61,sliceNotation:62,"]":63,"method()":64,".":65,".(":66,".[":67,"..":68,"..(":69,"METHOD(":70,arguments:71,"$METHOD(":72,",":73,functionArg:74,templateString:75,templateStart:76,templateTail:77,templateEnd:78,templateContinue:79,TEMPLATE:80,TPL_START:81,TPL_CONTINUE:82,TPL_END:83,"{":84,"}":85,objectEntries:86,objectEntry:87,objectEntryKeyLiteral:88,"...":89,arrayElements:90,arrayElement:91,assertionTerm:92,assertionList:93,compareExpr:94,ORDER:95,sliceNotationComponent:96,$accept:0,$end:1},terminals_:{2:"error",5:"EOF",9:"$",10:";",11:":",14:"IDENT",15:"$IDENT",17:"?",20:"=>",21:"(",22:")",25:"NOT",26:"NO",27:"-",28:"+",29:"|",30:"IS",32:"IN",33:"HAS",34:"NOTIN",35:"HASNO",36:"AND",37:"OR",38:"??",39:"*",40:"/",41:"%",42:"=",43:"!=",44:"<",45:"<=",46:">",47:">=",48:"~=",51:"@",52:"#",53:"$$",54:"STRING",55:"NUMBER",56:"REGEXP",57:"LITERAL",61:"[",63:"]",65:".",66:".(",67:".[",68:"..",69:"..(",70:"METHOD(",72:"$METHOD(",73:",",80:"TEMPLATE",81:"TPL_START",82:"TPL_CONTINUE",83:"TPL_END",84:"{",85:"}",89:"...",95:"ORDER"},productions_:[0,[3,2],[4,2],[4,1],[4,1],[4,0],[6,1],[6,2],[8,2],[8,4],[8,2],[8,4],[13,1],[12,1],[16,2],[16,1],[18,2],[18,1],[18,0],[7,1],[7,2],[7,3],[7,4],[7,5],[7,1],[7,2],[7,2],[7,2],[7,2],[7,3],[7,4],[7,3],[7,3],[7,3],[7,3],[7,3],[7,3],[7,3],[7,3],[7,3],[7,3],[7,3],[7,3],[7,3],[7,3],[7,3],[7,3],[7,3],[7,3],[7,3],[7,3],[7,3],[19,1],[19,1],[49,1],[49,1],[49,1],[49,1],[49,1],[49,1],[49,1],[49,1],[49,1],[49,1],[49,1],[49,1],[49,3],[49,2],[49,2],[49,1],[49,1],[49,3],[49,4],[49,2],[49,2],[49,3],[49,3],[49,2],[49,2],[49,3],[49,2],[49,3],[50,3],[50,4],[50,4],[50,3],[50,3],[50,4],[50,4],[50,3],[50,3],[50,4],[64,2],[64,3],[64,2],[64,3],[71,1],[71,3],[74,1],[23,1],[23,3],[58,1],[58,2],[77,1],[77,2],[77,2],[77,3],[75,1],[76,1],[79,1],[78,1],[59,2],[59,3],[59,4],[59,3],[59,4],[59,5],[86,1],[86,3],[88,1],[88,1],[88,1],[87,1],[87,1],[87,1],[87,1],[87,3],[87,3],[87,3],[87,5],[87,1],[87,2],[90,1],[90,3],[91,1],[91,1],[91,2],[60,2],[60,3],[60,4],[31,1],[31,2],[31,3],[31,4],[92,1],[92,1],[92,1],[92,1],[93,1],[93,3],[93,3],[24,1],[24,3],[94,2],[62,1],[62,2],[62,2],[62,3],[96,1],[96,2]],table:function(e){function r(w){let k=w.match(/[\x20-\x2f]/g),A=k?Math.max(...k.map(M=>M.charCodeAt()-32)):-1;for(let M=A;M>=0;M--){let D=(32+M).toString(16),O;w=w.replace(new RegExp("\\[\\x"+D+"(.+?)\\]"),(L,E)=>O=E).replace(new RegExp("\\x"+D,"g"),O)}return w=w.replace(/<([^>]+?)>/g,(M,D)=>{let O=a[D[0]],L=1;return O>>5===1&&(O=O&31|a[D[1]]<<5,L=2),D.slice(L).repeat(O)}),w}function i(w){let k=[];for(let A=0;A<w.length;A++){let M=a[w[A]];if(M&32){let D=a[w[++A]];k.push(M&31|D<<5)}else k.push(M)}return k}let a="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789~|=".split("").reduce((w,k,A)=>(w[k]=A,w),Object.create(null)),[f,d,...p]=e.split("=").map(r),g=d.split(";").map(w=>{let k=[];for(let A=0;A<w.length;A++)for(let M=0,D=a[w[A]];M<3;M++)k.push(D>>M*2&3);return k}),y=p.map(i),x=i(f).map(w=>{let k=g[w],A=Object.create(null);for(let M=0;M<k.length;M++){let D=k[M];if(D!==0){let O=y[D-1].shift();A[M]=D===1?O:[D-1,O]}}return A});for(let w=0;w<y[3].length;w+=2)x[y[3][w]][y[3][w+1]]=[3];return x}(`ABCDEFGHIJKHHHHLL<NM>NOPMMQRSQRTMUVWMXXMYZEFTO<TH>PMaQRSQRbMMHcdefgBhBHi[ BiBjBj]BFHFHkBMlBmBnBoBpBqBMMrBsB<GM>WMMt[!BkBMMt]BuBfMMvBUMYMwBxByBzBzB0B0BH1<DB2>BuBMd3BMduBfM<E4B>5B6 <DB7>B8B8<EB9>B8BMM~<C!>BbHc|BMeMgChChCMMiCjCmBkClCMsBmCnCuBMMMuBMUMMoCMwBHHHpCqCTMHMuB<FM>bHgBgBMFFMoBlCjCmCMOOMMyByB0BMoCrCsCsCtC3BbMnCnCHMHsCsC=A1[ V[!C["lmkCpqC]]]<FA>[#[$[%[&['UqqWJkq]K]C][([)FgCCAAE];]]A];Ag;AwU[*ClmkOpqC]<FA>[+[,U[-qqWJnqK]]C(A]wAA[.A[/kAMAqi]]<Fq>CAAAAD<JA>g;AwADwzwP8|D<GA>||DMz|PDAwDPw;AwA8AwAMA|z<F|>DAAAIjqCMAA8MAAw;AAE!<FA>#wA8AwgMA|z<F|>DAAAMz|DMAA8MAAw;AAVClmkapqC<FA>&S(AwA8AwAMA|z<F|>DAAAMz|DIAA8MAAw;AwAoAwAMA|z<F|>DAAAMz|DMAA8MAAw;AwA8AwAMA|z<F|>DAAAMz|DMAA8MAAw;AAEi"<FA>UqqWZmqKCFgCCgFEB;AAAChCACIAE<IA>C<KA>Q;AwAsAwBMA|z<F|>DAAAMz|DMAA8MAAw;AAAAk<QA>EAIC;AEV*<FA>#E <FA>+A <FA>#AE!<FA>%VlqCAAE;AARClC<MA>KCI<HA>Yl;AwE~lmkOp6y<F|>X-OFg~OAA0;AAEClmkKpqC<FA>'aC(AAADwzwD8|D<GA>||DMw|PDAw|D;M;AAEi"<FA>UqqWZmqKC)B;AwA8.<Fq>CAAAMz|DMAA8MAA<Cg;AAAAAA>AI<QA>I;<FA>kAIAqi<Fq>C<OA>g;AAU!<FA>$<HA>M<QA>M;AAA8AwgMA|z<F|>DAAAMw|DM<GA>w;AwA8A0AMA6jq|qqqCAAAMz|DMAA8MAAw;AwA8A0AMA|z||q||DAAAMz|DMAA8MAAw<C;AAAAAAAAAAAAAAAAAAAAAC>AAI;AAAg<RA>D<KA>B;AAAgAkAAAqi<Fq>CAAAADAAM<GA>gB;<VA>DAAM;AAEy"<FA>+AE!<FA>,O(AAAChCACA<KA>C<KA>Q;AAAChCACIAE<IA>C<KA>QB;<HA>I;AwA8AkAMA6i<Fq>CAAAMz|DMAA8MAAw;<FA>kAAAqi<Fq>C<JA>FoAAAg;<YA>IAAAI;AAQClC<MA>KCI<HA>Yl;<YA>MAAAM;AAAo<UA>MAAAM;AAAg<UA>MAAAM;AAAClmECAgC<FA>&OFgCO;AAAw<UA>MAAAM;<FA>/<Fq>C<HA>M<GA>g;AwA8A0AMA6z||qqqCAAAMz|DMAA8MAAw;AwA8A0AMA6jqvqqqCAAAMz|DMAA8MAAw;AwA8A0AMA6jquqqqCAAAMz|DMAA8MAAw;AwA8A0AMA|z<F|>DAAAMz|DMAA8MAAw;AwA8A0AMA6z||qvqDAAAMz|DMAA8MAAw;AwA8A0AMA6z||q||DAAAMz|DMAA8MAAw;AAAgAkAAAqi<Fq><CCAAAA><FA>gB;<FA>C<SA>Q;<FA>kAAAqi<Fq>C<OA>g;AAAIAkAAAqi<Fq>C<OA>g;AAE!<FA>UqqWJmqKCFgCCgEE;<VA>D;AAAwAkAAAqi<Fq>CAAAAD<JA>g;<FA>kAAAqi<Fq>CAAAADAAM<GA>g;<HA>IAAAAK;<HA>MAAAAP;AAAClC<MA>KCI<HA>Il;<FA>kAAAqi<Fq><CCAAAA><FA>g;<UA>IgqCMAAAM;AAAIAkAAAqi<Fq>C<HA>MAAAMAAg;<FA>kAAAqi<Fq>C<HA>MAAAMAAg;AAAg=BC[ D[!E["[#F[$QhBgBG]][%[&['[(KRSbcd]iB]pBqB]T]]]]zB[)0B$%qC]y[*C[[,+[-0ChBgB]]G%]]5C4C#3C'6CpBqBT9*~*|*gD+pD-G(lD[.iBpBqB]nDqDToDzDtDuD2D4D5D6D 7D 8D9D~D gE|D"jE-G&hEiEkETpEFsEtEoEqEuE0E+3E-G'2[/EpBqBT]3E-G'5/qC7E6!zD8EuD9E+~E+|E+gF+hF+iF+jF+kF+lF+mF+nF+oF+pF+qF+rF+sF+tF+uF+vF+wFyF-G(zF.ToD0F1F2F 3F 4F5F6F qC7F+qCgG0B$%iG-G&hG<EqC>jG+kG+oGqCpGqG+rG+zDsGzDvGuDuGwG+qC0G)1G2GjE-G&3GiEkET0BsEtE7GqEuE|G,gHRSbcd.qCqCqClH0B$%<UqC>pGqCrH+tH<EqC>0H-G&zHT1HqCqCzDvGuD2HqCqCjE-G&6HiEkET~HtE8HuEhI+iI+jI+qC5C4C"lI+qCqCmI+qCzDoIuDzDpIuD~HtE8HuE<FqC>tI+uI+qCqC=[ [!["P[#[$[%[&['tBIsBHJ]LMNO][(oB[)fUVWXYZae]]][*jBkBlBmBnBuBvBwBxB]]r]]B]y][+B[,![-[.sB|B~B][/1B2B3B4B5B6B7B8B9BgChCiCjCkClCmCnCoCpC]]]rC]sCtCuCvCwCxCzC#B1CPtB7CsBHJ2CLMNO(*rB8C<EzC#B>hDiDjDkDzCrD%mD*rBsDyDxD1DwDvD0D3D<CtBuBvB!!>zC$mElErBrEtB1DxEyEzEvEnEwEzC&)*rBzC'1ELMNO(*rBzC'4ELMNO(*rB-rC DxD1DwDvD0D<TzC#B>3DzCrD%xF*rBtBuBv<CB">BtBuBv+zC#B8F9F~FsB|F|B~B/rC!1CzC#B<C|B~B3B4B5B6BgChCiCjCkClCmCnCoCpC><CgChCiC><CzC#B>lGmGnGrDrD-rC<CzC#B>yDxD1DtG0DyDxD1DwDvD0DzC&)*rBxGyGzG.2B3B4B5B6B7B8B9BgChCiCjCkClCmCnCoCpC,mElErCzC$mElErB5G4GrEtB1DxEyEzEvE6GwEhDiDjD8G9G~GzC#BzCtB1DsBhH(*rB.2B3B4B5B6B7B8B9BgChCiCjCkClCmCnCoCpCiHjH-rCkHjH.2B3B4B5B6B7B8B9BgChCiCjCkClCmCnCoCpC!<E|B~BgChCiCjCkClCmCnCoCpC>|B~B3B4B5B6B9BgChCiCjCkClCmCnCoCpC|B~B3B4B5B6B7B9BgChCiCjCkClCmCnCoCpC|B~B3B4B5B6BgChCiCjCkClCmCnCoCp<CCgChCi><CC|B~BgChCiClCmCnCo><FC|B~BgChCi>ClCmCnCoCrD-mHrCnHoHpHqH-rCzC#BsHuHsBvH|B~B/rC-rCwH-rCxH-rCzC%yH*rBsDrD<C-rC>yDxD1DwDvD0D3H4H5H<C.2B3B4B5B6B7B8B9BgChCiCjCkClCmCnCoCpC>zC$mElErB9HtB1DxEyEzEvE7HwEgI|H<DzC#B>-kIrCsCtCuCvCwCxC!zC#B.2B3B4B5B6B7B8B9BgChCiCjCkClCmCnCoCpC-rCzC#B-rCnI4H5H<CyDxD1DwDvD0D>qI9HtB1DxEyEzEvErIwExH<D-rC>sI<C-rC><CzC#B><C-rC>=FDDDEEE<jBG><gBT><mBN><lBY><kB4B><kB6B><mB0B><mB1B><mB3E><mB2B><mB3B><mB5B><mB7B><mB8B><mB9B><mB~B><mB|B><mBgC><mBhC><lBS><mBlC><mBmC>FFF<mBlD><cP><mBM><mBrD><gBsD>BCCC<jBH><lBS><mB5E>FFF<PU><mB4B><mB6B>jDjDNNNiD<bN>iDN<WZ><Wa><jBb><jBc><jBI><jBK><mBpE>6EmEmEkEkE~E~EnEnE<mBjC><mBsE><mBwE><mBxE><mByE><mBzE><mBN><mBkC><cR><mBpC><mBqC><mBtC><mBuC><RwC><mBmD><mBnD><mBuD><gBtD><mBvD>1D1[ D6D6D7D7D]8D8D9D9DiEiE<D3D><D4D><D5D><RO><mB8C>gDgD<mB~C><Rd><mBf><agB><ahB><aiB><ajB><VkB><UlB><WmB><jBnB><jBoB><mBpB><mBqB><mBrB><dsB><dtB><hBuB><hBvB><hBwB><hBxB><dyB><mBzB><mByC><mB1C><mB2C><mB5C><mB6C><PV><mBnC><mB4E><mBiC><mBqE>7E8E|E|EoEo<mBEt><DE0>E<RQ><mBrC><mBsC><mBvC><RxC><mBoD><mBpD><mBwD><mByD>jEjE<mB9C><mB|C><Re><mBzC><mB0C><mB3C><mB4C><mB7C><PW>kDkDiDiD<mBoC><jBJ><jBL><mBrE>lElEmEmE9<mBEu>E<mBqD><mBxD>2D2 <mBzD>gEgE~D~D|D|DhDhD<PX><mBvE><D1E><D2E><mB0D>gEgEhEhE=BB`),defaultActions:{50:[2,1],200:[2,155],245:[2,157]},performAction(t,e,r,i,s,a,f){let d=a.length-1;switch(s){case 1:return i.buildResult(a[d-1]);case 2:this.$={type:"Block",definitions:a[d-1],body:a[d],range:this._$.range};break;case 3:this.$={type:"Block",definitions:a[d],body:{type:"Placeholder",range:[f[d].range[1],f[d].range[1]]},range:this._$.range};break;case 4:this.$={type:"Block",definitions:[],body:a[d],range:this._$.range};break;case 5:this.$={type:"Block",definitions:[],body:{type:"Placeholder",range:[f[d].range[1],f[d].range[1]]},range:this._$.range};break;case 6:case 96:case 99:case 101:case 117:case 132:case 148:case 151:this.$=[a[d]];break;case 7:a[d-1].push(a[d]);break;case 8:this.$={type:"Definition",declarator:{type:"Declarator",name:null,range:f[d-1].range},value:null,range:this._$.range};break;case 9:this.$={type:"Definition",declarator:{type:"Declarator",name:null,range:f[d-3].range},value:a[d-1],range:this._$.range};break;case 10:this.$={type:"Definition",declarator:{type:"Declarator",name:a[d-1].name,range:f[d-1].range},value:null,range:this._$.range};break;case 11:this.$={type:"Definition",declarator:{type:"Declarator",name:a[d-3].name,range:f[d-3].range},value:a[d-1],range:this._$.range};break;case 12:case 13:case 98:case 144:case 145:this.$={type:"Identifier",name:a[d],range:this._$.range};break;case 14:case 16:case 159:this.$=a[d];break;case 15:case 17:case 18:case 158:this.$=null;break;case 19:case 52:case 53:case 64:case 65:case 134:break;case 20:case 22:this.$={type:"Function",arguments:[],body:a[d],range:this._$.range};break;case 21:this.$={type:"Function",arguments:[{type:"Identifier",name:a[d-2]}],body:a[d],range:this._$.range};break;case 23:this.$={type:"Function",arguments:a[d-3],body:a[d],range:this._$.range};break;case 24:this.$={type:"CompareFunction",compares:a[d],range:this._$.range};break;case 25:case 26:case 27:case 28:case 67:this.$={type:"Prefix",operator:a[d-1],argument:a[d],range:this._$.range};break;case 29:this.$={type:"Pipeline",left:a[d-2],right:a[d],range:this._$.range};break;case 30:this.$={type:"Pipeline",left:a[d-3],right:{type:"Block",definitions:a[d-1],body:a[d]},range:this._$.range};break;case 31:this.$={type:"Postfix",operator:a[d],argument:a[d-2],range:this._$.range};break;case 32:case 33:case 34:case 35:case 36:case 37:case 38:case 39:case 40:case 41:case 42:case 43:case 44:case 45:case 46:case 47:case 48:case 49:case 50:this.$={type:"Binary",operator:a[d-1],left:a[d-2],right:a[d],range:this._$.range};break;case 51:this.$={type:"Conditional",test:a[d-2],consequent:a[d-1],alternate:a[d],range:this._$.range};break;case 54:this.$={type:"Data",range:this._$.range};break;case 55:this.$={type:"Context",range:this._$.range};break;case 56:this.$={type:"Current",range:this._$.range};break;case 57:this.$={type:"Arg1",range:this._$.range};break;case 58:this.$={type:"Reference",name:a[d],range:this._$.range};break;case 59:case 60:case 61:case 62:case 107:case 108:case 109:case 110:case 119:case 120:case 121:this.$={type:"Literal",value:a[d],range:this._$.range};break;case 63:this.$={type:"Template",values:a[d],range:this._$.range};break;case 66:this.$={type:"SliceNotation",value:null,arguments:a[d-1],range:this._$.range};break;case 68:this.$={type:"Conditional",test:null,consequent:a[d-1],alternate:a[d],range:this._$.range};break;case 69:case 73:this.$={type:"GetProperty",value:null,property:a[d],range:this._$.range};break;case 70:case 74:this.$={type:"MethodCall",value:null,method:a[d],range:this._$.range};break;case 71:this.$={type:"Parentheses",body:a[d-1],range:this._$.range};break;case 72:this.$={type:"Parentheses",body:{type:"Block",definitions:a[d-2],body:a[d-1]},range:this._$.range};break;case 75:this.$={type:"Map",value:null,query:a[d-1],range:this._$.range};break;case 76:this.$={type:"Filter",value:null,query:a[d-1],range:this._$.range};break;case 77:this.$={type:"MapRecursive",value:null,query:{type:"GetProperty",value:null,property:a[d]},range:this._$.range};break;case 78:this.$={type:"MapRecursive",value:null,query:{type:"MethodCall",value:null,method:a[d]},range:this._$.range};break;case 79:this.$={type:"MapRecursive",value:null,query:a[d-1],range:this._$.range};break;case 80:this.$={type:"Pipeline",left:null,right:a[d],range:this._$.range};break;case 81:this.$={type:"Pipeline",left:null,right:{type:"Block",definitions:a[d-1],body:a[d]},range:this._$.range};break;case 82:this.$={type:"Pick",value:a[d-2],getter:null,range:this._$.range};break;case 83:this.$={type:"Pick",value:a[d-3],getter:a[d-1],range:this._$.range};break;case 84:this.$={type:"SliceNotation",value:a[d-3],arguments:a[d-1],range:this._$.range};break;case 85:this.$={type:"GetProperty",value:a[d-2],property:a[d],range:this._$.range};break;case 86:this.$={type:"MethodCall",value:a[d-2],method:a[d],range:this._$.range};break;case 87:this.$={type:"Map",value:a[d-3],query:a[d-1],range:this._$.range};break;case 88:this.$={type:"Filter",value:a[d-3],query:a[d-1],range:this._$.range};break;case 89:this.$={type:"MapRecursive",value:a[d-2],query:{type:"GetProperty",value:null,property:a[d]},range:this._$.range};break;case 90:this.$={type:"MapRecursive",value:a[d-2],query:{type:"MethodCall",value:null,method:a[d]},range:this._$.range};break;case 91:this.$={type:"MapRecursive",value:a[d-3],query:a[d-1],range:this._$.range};break;case 92:this.$={type:"Method",reference:{type:"Identifier",name:a[d-1],range:[f[d-1].range[0],f[d-1].range[1]-1]},arguments:[],range:this._$.range};break;case 93:this.$={type:"Method",reference:{type:"Identifier",name:a[d-2],range:[f[d-2].range[0],f[d-2].range[1]-1]},arguments:a[d-1],range:this._$.range};break;case 94:this.$={type:"Method",reference:{type:"Reference",name:{type:"Identifier",name:a[d-1],range:[f[d-1].range[0],f[d-1].range[1]-1]},range:[f[d-1].range[0],f[d-1].range[1]-1]},arguments:[],range:this._$.range};break;case 95:this.$={type:"Method",reference:{type:"Reference",name:{type:"Identifier",name:a[d-2],range:[f[d-2].range[0],f[d-2].range[1]-1]},range:[f[d-2].range[0],f[d-2].range[1]-1]},arguments:a[d-1],range:this._$.range};break;case 97:case 100:case 118:case 133:case 152:a[d-2].push(a[d]);break;case 102:this.$=[a[d-1],...a[d]];break;case 103:case 154:this.$=[null,a[d]];break;case 104:case 156:this.$=[a[d-1],a[d]];break;case 105:this.$=[null,a[d-1],...a[d]];break;case 106:this.$=[a[d-2],a[d-1],...a[d]];break;case 111:case 114:this.$={type:"Object",properties:[],range:this._$.range};break;case 112:this.$={type:"Object",properties:a[d-1],range:this._$.range};break;case 113:this.$={type:"Object",properties:a[d-2],range:this._$.range};break;case 115:this.$={type:"Block",definitions:a[d-2],body:{type:"Object",properties:a[d-1]},range:this._$.range};break;case 116:this.$={type:"Block",definitions:a[d-3],body:{type:"Object",properties:a[d-2]},range:this._$.range};break;case 122:this.$={type:"ObjectEntry",key:{type:"Current"},value:null,range:this._$.range};break;case 123:this.$={type:"ObjectEntry",key:{type:"Reference",name:a[d]},value:null,range:this._$.range};break;case 124:case 125:this.$={type:"ObjectEntry",key:a[d],value:null,range:this._$.range};break;case 126:case 127:this.$={type:"ObjectEntry",key:a[d-2],value:a[d],range:this._$.range};break;case 128:this.$={type:"ObjectEntry",key:{type:"Identifier",name:"$"+a[d-2].name},value:a[d],range:this._$.range};break;case 129:this.$={type:"ObjectEntry",key:a[d-3],value:a[d],range:this._$.range};break;case 130:this.$={type:"Spread",query:null,array:!1,range:this._$.range};break;case 131:this.$={type:"Spread",query:a[d],array:!1,range:this._$.range};break;case 135:this.$={type:"Spread",query:null,array:!0,range:this._$.range};break;case 136:this.$={type:"Spread",query:a[d],array:!0,range:this._$.range};break;case 137:this.$={type:"Array",elements:[],range:this._$.range};break;case 138:this.$={type:"Array",elements:a[d-1],range:this._$.range};break;case 139:this.$={type:"Array",elements:a[d-2],range:this._$.range};break;case 140:this.$={type:"Assertion",negation:!1,assertion:a[d],range:this._$.range};break;case 141:this.$={type:"Assertion",negation:!0,assertion:a[d],range:this._$.range};break;case 142:this.$={type:"Assertion",negation:!1,assertion:a[d-1],range:this._$.range};break;case 143:this.$={type:"Assertion",negation:!0,assertion:a[d-1],range:this._$.range};break;case 146:this.$={type:"Method",reference:{type:"Reference",name:a[d]},arguments:[],range:this._$.range};break;case 147:this.$={type:"Identifier",name:String(a[d]),range:this._$.range};break;case 149:case 150:a[d-2].push(a[d-1],a[d]);break;case 153:this.$={type:"Compare",query:a[d-1],order:a[d],range:this._$.range};break;case 155:this.$=[null,a[d-1],a[d]];break;case 157:this.$=[a[d-2],a[d-1],a[d]];break}},trace(...t){this.DEBUG&&Jison.print(...t)},parseError(t,e){if(e.recoverable)this.trace(t);else{let r=new Error(t);throw r.hash=e,r}},parse(t,...e){let d=F=>{M.length-=2*F,D.length-=F,O.length-=F},p=()=>{let F=g.lex()||1;return typeof F!="number"&&(F=this.symbols_[F]||F),F},g=Object.create(this.lexer),y=g.options&&g.options.ranges,x={...this.yy,parser:this,lexer:g};g.setInput(t,x),typeof x.parseError=="function"&&(this.parseError=x.parseError),typeof g.yylloc>"u"&&(g.yylloc={});let w=this.table,k={},A=g.yylloc,M=[0],D=[null],O=[A],L=[],E="",N=0,B=0,I=0,R,j;for(;;){let F=M[M.length-1],se;if(this.defaultActions[F]?se=this.defaultActions[F]:((R===null||typeof R>"u")&&(R=p()),se=w[F]&&w[F][R]),!se||!se[0]){let T=function(ne){let ee=M.length-1,be=0;for(;;){if("2"in w[ne])return be;if(ne===0||ee<2)return!1;ee-=2,ne=M[ee],++be}},W,J="";if(!I){let ne=[];for(let ee in w[F])ee in this.terminals_&&ee>2&&ne.push("'"+this.terminals_[ee]+"'");J=g.showPosition?"Parse error on line "+(N+1)+`:
`+g.showPosition()+`
Expecting `+ne.join(", ")+", got '"+(this.terminals_[R]||R)+"'":"Parse error on line "+(N+1)+": Unexpected "+(R===1?"end of input":"'"+(this.terminals_[R]||R)+"'"),this.parseError(J,{text:g.match,token:this.terminals_[R]||R,line:g.yylineno,loc:A,expected:ne})}if(I===3){if(R===1||j===1)throw new Error(J||"Parsing halted while starting to recover from another error.");B=g.yyleng,E=g.yytext,N=g.yylineno,A=g.yylloc,R=p()}if(W===!1)throw new Error(J||"Parsing halted. No suitable error recovery rule available.");d(W),j=R==2?null:R,R=2,F=M[M.length-1],se=w[F]&&w[F][2],I=3}if(Array.isArray(se[0])&&se.length>1)throw new Error("Parse Error: multiple actions possible at state: "+F+", token: "+R);switch(se[0]){case 1:M.push(R),D.push(g.yytext),O.push(g.yylloc),M.push(se[1]),R=null,j?(R=j,j=null):(B=g.yyleng,E=g.yytext,N=g.yylineno,A=g.yylloc,I>0&&I--);break;case 2:{let W=this.productions_[se[1]][1],J=O[O.length-(W||1)],T=O[O.length-1];k.$=D[D.length-W],k._$={first_line:J.first_line,last_line:T.last_line,first_column:J.first_column,last_column:T.last_column},y&&(k._$.range=[J.range[0],T.range[1]]);let ne=this.performAction.call(k,E,B,N,x,se[1],D,O,...e);if(typeof ne<"u")return ne;W&&d(W),M.push(this.productions_[se[1]][0]),D.push(k.$),O.push(k._$),M.push(w[M[M.length-2]][M[M.length-1]]);break}case 3:return!0}}}};var sF=function(e){function r(L,E){Object.entries(E).forEach(([N,B])=>L[N]=B(L[N]))}let i=new Map([["EOF",["<end of input>"]],["IDENT",["ident"]],["$IDENT",["$ident"]],["NOT",["'not'"]],["NO",["'no'"]],["IS",["'is'"]],["IN",["'in'"]],["HAS",["'has'"]],["NOTIN",["'not in'"]],["HASNO",["'has no'"]],["AND",["'and'"]],["OR",["'or'"]],["STRING",["string"]],["TPL_START",["template"]],["TEMPLATE",["template"]],["NUMBER",["number"]],["REGEXP",["regexp"]],["LITERAL",["'true'","'false'","'null'","'undefined'","'NaN'","'Infinity'"]],["ORDER",["'asc'","'desc'","'ascN'","'descN'"]],["METHOD(",["'method('"]],["$METHOD(",["'$method('"]]]),s=L=>i.get(L)||`'${L}'`,a=function(L,E={},N){if(E.recoverable)this.trace(L);else{if(Array.isArray(E.inside)){let F=N.lexer.offset-N.lexer.match.length;N.lexer.setMatch(F+E.inside[0],F+E.inside[1])}let B=N.lexer.yylloc,I=[L.split(/\n/)[0],"",N.lexer.showPosition()],R=Array.isArray(E.expected)?[...new Set([].concat(...E.expected.map(F=>s(F.slice(1,-1)))))]:null;R&&I.push("","Expecting "+R.join(", ")+" got "+s(E.token));let j=new SyntaxError(I.join(`
`));throw j.details={rawMessage:L,text:E.text,token:E.token,expected:R,loc:{range:B.range,start:{line:B.first_line,column:B.first_column,offset:B.range[0]},end:{line:B.last_line,column:B.last_column,offset:B.range[1]}}},j}},f=new Set([`
`,"\r","\u2028","\u2029"]),d=new Map([["undefined",void 0],["null",null],["false",!1],["true",!0],["Infinity",1/0],["NaN",NaN]]);Object.assign(e.lexer,{ident:L=>L.replace(/\\u[0-9a-fA-F]{4}/g,E=>String.fromCharCode(parseInt(E.slice(2),16))),toLiteral:L=>d.get(L),toStringLiteral(L,E=!1,N=1){let B=L.length-N,I="";for(let R=1;R<B;R++){if(!E&&f.has(L[R])&&this.parseError("Invalid line terminator",{inside:[R,R+1]}),L[R]!=="\\"){I+=L[R];continue}R===B-1&&this.parseError("Invalid backslash",{inside:[R,R+1]});let j=L[++R];switch(j){case"\r":R+=L[R+1]===`
`;break;case`
`:case"\u2028":case"\u2029":break;case"0":I+="\0";break;case"b":I+="\b";break;case"n":I+=`
`;break;case"r":I+="\r";break;case"f":I+="\f";break;case"t":I+="	";break;case"v":I+="\v";break;case"u":{let[F=""]=L.slice(R+1,R+5).match(/^[0-9a-f]*/i)||[];if(F.length===4){I+=String.fromCharCode(parseInt(F,16)),R+=4;break}this.parseError("Invalid Unicode escape sequence",{inside:[R-1,Math.min(R+1+F.length,B)]});break}case"x":{let[F=""]=L.slice(R+1,R+3).match(/^[0-9a-f]*/i)||[];if(F.length===2){I+=String.fromCharCode(parseInt(F,16)),R+=2;break}this.parseError("Invalid hexadecimal escape sequence",{inside:[R-1,Math.min(R+1+F.length,B)]});break}default:I+=j}}return I},toRegExp(L){let E=L.lastIndexOf("/")+1,N=L.substr(E);return N.split("").forEach((B,I,R)=>{let j=R.indexOf(B,I+1);j!==-1&&this.parseError("Duplicate flag in regexp",{inside:[E+j,E+j+1]})}),new RegExp(L.substr(1,L.lastIndexOf("/")-1),N)}}),r(e.lexer,{setInput:L=>function(E,N){let B=[];return N.commentRanges=B,N.buildResult=I=>({ast:I,commentRanges:B}),N.parseError=function(...I){return a.call(this,...I,N)},N.pks=()=>{this.eof()||this.begin("preventKeyword")},N.pps=()=>{this.eof()||this.begin("preventPrimitive")},this.bracketStack=[],this.prevToken=null,this.prevYylloc={first_line:1,last_line:1,first_column:0,last_column:0,range:[0,0]},L.call(this,E,N)}});let p=new e.Parser;p.lexer={...e.lexer},p.yy={...e.yy};let g=["AND","OR","IN","NOTIN","HAS","HASNO","IS"],y=[...g,"NOT","NO","ORDER"],x=["+","-","*","/","%","|","=","!=","~=",">=","<=","<",">"],w=[null,"?",":",";",",",".","..","(",".(","..(","METHOD(","$METHOD(","[",".[","=>",...x,...g,"NOT","NO"],k=[",","?",":",";","EOF","]",")","}","TPL_CONTINUE","TPL_END",...x,...g,"ORDER"],A=new Map(w.map(L=>[L,new Set(k)]));for(let L of[".(","..(","METHOD(","$METHOD("])A.get(L).delete(")");for(let L of["[",".["])A.get(L).delete("]");r(p.lexer,{lex:L=>function(){let N=this.offset,B=L.call(this);if(A.has(this.prevToken)&&A.get(this.prevToken).has(B)){let I={first_line:this.prevYylloc.last_line,last_line:this.yylloc.first_line,first_column:this.prevYylloc.last_column,last_column:this.yylloc.first_column,range:[this.prevYylloc.range[1],this.yylloc.range[0]]};if(this.unput(this.match),this.pushState("preventPrimitive"),this.done=!1,this.yytext="",this.yylloc=this.prevYylloc=I,N!==this.offset&&y.includes(B))switch(this._input[N]){case" ":case"	":I.last_column--,I.range[1]--;break;case`
`:{let R=this._input.lastIndexOf(`
`,N-1);I.last_line--,I.last_column=R===-1?I.last_column-1:N-R,I.range[1]--;break}}return this.prevToken="IDENT"}if(this.prevYylloc=this.yylloc,y.includes(B))switch(this._input[this.offset]){case" ":case"	":this.prevYylloc={...this.prevYylloc,last_column:this.prevYylloc.last_column+1,range:[this.prevYylloc.range[0],this.prevYylloc.range[1]+1]};break;case`
`:this.prevYylloc={...this.prevYylloc,last_line:this.prevYylloc.last_line+1,last_column:0,range:[this.prevYylloc.range[0],this.prevYylloc.range[1]+1]};break}return this.prevToken=B}});let M=new Map([["(",")"],[".(",")"],["..(",")"],["METHOD(",")"],["$METHOD(",")"],["[","]"],[".[","]"],["{","}"],["TPL_START","TPL_END"]]),D=new Set([")","]","}","TPL_END"]),O=L=>function(){let N=L.call(this);if(D.has(N)){let B=this.bracketStack.pop();B!==N&&this.parseError(`Expected "${B}" got "${N}"`)}return M.has(N)&&this.bracketStack.push(M.get(N)),N};return r(e.lexer,{lex:O}),r(p.lexer,{lex:O}),{parse(L,E){return E?p.parse(L):e.parse(L)},*tokenize(L,E,N){let B=E?p:e,I=Object.create(B.lexer);for(I.setInput(L,{parser:B});!I.done;){let R={type:I.lex(),value:I.match,offset:I.yylloc.range[0]};N&&(R.loc={range:I.yylloc.range,start:{line:I.yylloc.first_line,column:I.yylloc.first_column},end:{line:I.yylloc.last_line,column:I.yylloc.last_column}}),yield R}}}}(new _h),Nc=sF;var jh={};Ae(jh,{compile:()=>aF,stringify:()=>cF,walk:()=>lF});function aF(t,e){e.put(e.scope.arg1?"arguments[1]":"undefined")}function lF(){}function cF(t,e){e.put("$$")}var Hh={};Ae(Hh,{compile:()=>fF,stringify:()=>hF,suggest:()=>uF,walk:()=>dF});function uF(t,e){t.elements.length===0&&e.queryRoot(t.range[0]+1,t.range[1]-1)}function fF(t,e){e.put("["),e.list(t.elements,","),e.put("]")}function dF(t,e){e.list(t.elements)}function hF(t,e){e.put("["),e.list(t.elements,","),e.put("]")}var Wh={};Ae(Wh,{compile:()=>gF,stringify:()=>yF,suggest:()=>pF,walk:()=>mF});function pF(t,e){Array.isArray(t.assertion)||(e.range(t.assertion.range,"var"),e.range(t.assertion.range,"assertion"))}function gF(t,e){if(Array.isArray(t.assertion)){e.put(t.negation?"!(":"(");for(let r=0;r<t.assertion.length;r++)if(r%2===0)e.node(t.assertion[r]);else switch(t.assertion[r]){case"and":e.put("&&");break;case"or":e.put("||");break;default:e.error("Bad conjuction operator in assertion",t)}e.put(")")}else switch(t.negation&&e.put("!"),t.assertion.type){case"Identifier":t.assertion.name?(e.put("!!"),e.tolerant&&e.put("(typeof "),e.put("a."),e.put(t.assertion.name),e.tolerant&&(e.put('==="function"?a.'),e.put(t.assertion.name)),e.put(".call(mctx,"),e.nodeOrCurrent(),e.put(")"),e.tolerant&&e.put(":false)"),e.usedAssertions.has(t.assertion.name)?e.usedAssertions.get(t.assertion.name).push(t.assertion.range):e.usedAssertions.set(t.assertion.name,t.assertion.range)):e.put("false");break;case"Method":e.put("!!"),e.node(t.assertion);break;default:e.error('Unknown assertion node type "'+t.assertion.type+'"',t.assertion)}}function mF(t,e){if(Array.isArray(t.assertion))for(let r=0;r<t.assertion.length;r++)r%2===0&&e.node(t.assertion[r]);else e.node(t.assertion)}function yF(t,e){if(t.negation&&e.put("not "),Array.isArray(t.assertion)){e.put("(");for(let r=0;r<t.assertion.length;r++)r%2===0?e.node(t.assertion[r]):(e.put(" "),e.put(t.assertion[r]),e.put(" "));e.put(")")}else e.node(t.assertion)}var Uh={};Ae(Uh,{compile:()=>bF,stringify:()=>xF,suggest:()=>vF,walk:()=>wF});var ck={in:"in","not in":"notIn",has:"has","has no":"hasNo",and:"and",or:"or","??":"nullish","+":"add","-":"sub","*":"mul","/":"div","%":"mod","=":"eq","!=":"ne","<":"lt","<=":"lte",">":"gt",">=":"gte","~=":"match"};function Oc(t,e,r){if(r.type==="Array"){if(r.elements.length===0){t.range([r.range[0]+1,r.range[1]-1],"value-subset",e,!1);return}let i=[];for(let{type:a,range:f,value:d}of r.elements)f&&(a==="Literal"||a==="Identifier")&&i.push(d);let s=i.length?t.literalList(i):!1;for(let{type:a,range:f,value:d}of r.elements)f&&(a==="Literal"||a==="Identifier"||a==="GetProperty"&&d===null)&&t.range(f,"value-subset",e,s)}}function vF(t,e){switch(t.operator){case"in":e.range(t.left.range,"in-value",t.right,null),Oc(e,t.left,t.right);break;case"not in":Oc(e,t.left,t.right);break;case"has":e.range(t.right.range,"in-value",t.left,null),Oc(e,t.right,t.left);break;case"has no":Oc(e,t.right,t.left);break;case"=":case"!=":e.range(t.right.range,"value",t.left,null);break}}function bF(t,e){if(!(t.operator in ck)){e.error('Unknown operator "'+t.operator+'"',t);return}switch(t.operator){case"and":e.put("!");case"or":{let r=e.allocateVar();e.put(`${e.buildinFn("bool")}(${r}=`),e.node(t.left),e.put(`)?${r}:`),e.scope.captureCurrent.disabled=!0,e.node(t.right),e.scope.captureCurrent.disabled=!1;break}case"??":{let r=e.allocateVar();e.put(`(${r}=`),e.node(t.left),e.put(`,${r}!==null&&${r}!==undefined)?${r}:`),e.scope.captureCurrent.disabled=!0,e.node(t.right),e.scope.captureCurrent.disabled=!1;break}case"has no":e.put("!");case"has":e.put(e.buildinFn("in")),e.put("("),e.node(t.right),e.put(","),e.node(t.left),e.put(")");break;default:e.put(e.buildinFn(ck[t.operator])),e.put("("),e.node(t.left),e.put(","),e.node(t.right),e.put(")")}}function wF(t,e){e.node(t.left),e.node(t.right)}function xF(t,e){e.node(t.left),/^[a-z]/i.test(t.operator)?(e.put(" "),e.put(t.operator),e.put(" ")):e.put(t.operator),e.node(t.right)}var $h={};Ae($h,{compile:()=>CF,stringify:()=>AF,suggest:()=>kF,walk:()=>SF});function kF(t,e){t.body===null&&e.queryRoot(t.range[1])}function CF(t,e){t.definitions.length?e.createScope(()=>{e.put("(()=>{"),e.list(t.definitions),e.put("return "),e.nodeOrCurrent(t.body),e.put("})()")},(r,i)=>r+i+";",e.scope.$ref):t.body&&t.body.type==="Object"?(e.put("("),e.nodeOrCurrent(t.body),e.put(")")):e.nodeOrCurrent(t.body)}function SF(t,e){e.list(t.definitions),e.nodeOrNothing(t.body)}function AF(t,e){e.list(t.definitions),e.nodeOrNothing(t.body)}var Gh={};Ae(Gh,{compile:()=>TF,stringify:()=>EF,walk:()=>LF});var uk={"":"cmp",N:"cmpNatural",A:"cmpAnalytical",NA:"cmpNaturalAnalytical",AN:"cmpNaturalAnalytical"};function TF(t,e){t.order.startsWith("desc")&&e.put("-"),e.createScope(()=>{let r=uk[t.order.slice(3+t.order.startsWith("desc"))]||uk[""];e.put(e.buildinFn(r)),e.put("((_q=$=>("),e.node(t.query),e.put("))(a),_q(b))")},(r,i)=>r+i+",")}function LF(t,e){e.node(t.query)}function EF(t,e){e.node(t.query),e.put(" "),e.put(t.order)}var Vh={};Ae(Vh,{compile:()=>MF,stringify:()=>NF,walk:()=>DF});function MF(t,e){e.put("(a, b)=>{let _q;return "),e.list(t.compares,"||"),e.put("||0}")}function DF(t,e){e.list(t.compares)}function NF(t,e){e.list(t.compares,",")}var Kh={};Ae(Kh,{compile:()=>OF,stringify:()=>IF,walk:()=>PF});function OF(t,e){e.put(e.buildinFn("bool")),e.put("("),e.scope.captureCurrent.disabled=!0,e.nodeOrCurrent(t.test),e.put(")?"),e.nodeOrCurrent(t.consequent),e.put(":"),t.alternate?e.node(t.alternate):e.put("undefined"),e.scope.captureCurrent.disabled=!1}function PF(t,e){e.nodeOrNothing(t.test),e.nodeOrNothing(t.consequent),e.nodeOrNothing(t.alternate)}function IF(t,e){e.nodeOrNothing(t.test),e.put("?"),e.nodeOrNothing(t.consequent),t.alternate&&(e.put(":"),e.node(t.alternate))}var Yh={};Ae(Yh,{compile:()=>BF,stringify:()=>zF,walk:()=>qF});function BF(t,e){e.put("context")}function qF(){}function zF(t,e){e.put("#")}var Qh={};Ae(Qh,{compile:()=>FF,stringify:()=>jF,suggest:()=>RF,walk:()=>_F});function RF(t,e){t.range&&e.range(t.range,"var")}function FF(t,e){e.put(e.scope.$ref)}function _F(){}function jF(t,e){e.put("$")}var Xh={};Ae(Xh,{compile:()=>HF,stringify:()=>UF,walk:()=>WF});function HF(t,e){e.put("data")}function WF(){}function UF(t,e){e.put("@")}var Jh={};Ae(Jh,{compile:()=>$F,stringify:()=>VF,walk:()=>GF});function $F(t,e){t.name&&e.put("$"+t.name)}function GF(){}function VF(t,e){e.put(t.name?"$"+t.name:"$")}var Zh={};Ae(Zh,{compile:()=>QF,stringify:()=>JF,suggest:()=>YF,walk:()=>XF});function Fa(t,e){return{type:"GetProperty",value:t,property:e}}function _a(t){return{type:"Identifier",name:t}}var KF=["data","context","ctx","array","idx","index"];function YF(t,e){t.value===null&&e.range(t.declarator.range,"path")}function QF(t,e){if(t.declarator.name===null){e.node(t.declarator),e.nodeOrCurrent(t.value),e.put(";");return}if(e.scope.own.includes(t.declarator.name)){e.error(`Identifier "$${t.declarator.name}" has already been declared`,t.declarator);return}if(KF.includes(t.declarator.name)){e.error(`Identifier "$${t.declarator.name}" is reserved for future use`,t.declarator);return}e.put("const "),e.node(t.declarator),e.put("="),e.node(t.value||Fa(null,_a(t.declarator.name))),e.put(";"),e.scope.push(t.declarator.name),e.scope.own.push(t.declarator.name)}function XF(t,e){e.node(t.declarator),e.nodeOrNothing(t.value)}function JF(t,e){e.node(t.declarator),t.value!==null&&(e.put(":"),e.node(t.value)),e.put(";")}var ep={};Ae(ep,{compile:()=>ZF,stringify:()=>t_,walk:()=>e_});function ZF(t,e){e.put(e.buildinFn("filter")),e.put("("),e.nodeOrCurrent(t.value),e.createScope(()=>{e.put(",$=>"),e.node(t.query)},(r,i)=>(e.put(")"),r+"("+i+",")),e.put(")")}function e_(t,e){e.nodeOrNothing(t.value),e.node(t.query)}function t_(t,e){e.nodeOrNothing(t.value),e.put(".["),e.node(t.query),e.put("]")}var tp={};Ae(tp,{compile:()=>n_,stringify:()=>i_,walk:()=>r_});function n_(t,e){e.createScope(()=>{let r=t.arguments.map(i=>"$"+i.name);e.scope.arg1=!0,e.scope.$ref=r[0]||"$";for(let i of t.arguments)e.scope.push(i.name);e.put("function("),e.put(String(r)||"$"),e.put("){return "),e.node(t.body),e.put("}")},(r,i)=>r+i+",")}function r_(t,e){e.node(t.body)}function i_(t,e){e.put("=>"),e.node(t.body)}var np={};Ae(np,{compile:()=>s_,stringify:()=>l_,suggest:()=>o_,walk:()=>a_});function o_(t,e){e.range(t.property.range,"path",t.value||void 0,!t.value),t.value===null&&e.range(t.property.range,"var"),t.range&&t.value===null&&t.property.range[0]!==t.range[0]&&e.queryRoot(t.range[0])}function s_(t,e){e.put(e.buildinFn("map")),e.put("("),e.nodeOrCurrent(t.value),e.put(","),t.property.type==="Identifier"?e.put(JSON.stringify(t.property.name)):e.node(t.property),e.put(")")}function a_(t,e){e.nodeOrNothing(t.value),e.node(t.property)}function l_(t,e){e.nodeOrNothing(t.value)&&e.put("."),e.node(t.property)}var rp={};Ae(rp,{compile:()=>c_,stringify:()=>f_,walk:()=>u_});function c_(t,e){e.put(t.name)}function u_(){}function f_(t,e){e.put(t.name)}var ip={};Ae(ip,{compile:()=>d_,stringify:()=>p_,walk:()=>h_});function d_(t,e){e.put(typeof t.value=="string"?JSON.stringify(t.value):String(t.value))}function h_(){}function p_(t,e){e.put(typeof t.value=="string"?JSON.stringify(t.value):String(t.value))}var op={};Ae(op,{compile:()=>g_,stringify:()=>y_,walk:()=>m_});function g_(t,e){e.put(e.buildinFn("map")),e.put("("),e.nodeOrCurrent(t.value),e.createScope(()=>{e.put(",$=>"),e.node(t.query)},(r,i)=>(e.put(")"),r+"("+i+",")),e.put(")")}function m_(t,e){e.nodeOrNothing(t.value),e.node(t.query)}function y_(t,e){e.nodeOrNothing(t.value),e.put(".("),e.node(t.query),e.put(")")}var sp={};Ae(sp,{compile:()=>v_,stringify:()=>w_,walk:()=>b_});function v_(t,e){e.put(e.buildinFn("mapRecursive")),e.put("("),e.nodeOrCurrent(t.value),e.createScope(()=>{e.put(",$=>"),e.node(t.query)},(r,i)=>(e.put(")"),r+"("+i+",")),e.put(")")}function b_(t,e){e.nodeOrNothing(t.value),e.node(t.query)}function w_(t,e){e.nodeOrNothing(t.value),e.put(".."),e.isSimpleGetPropertyQuery(t.query)||e.isSimpleMethodCallQuery(t.query)?e.node(t.query):(e.put("("),e.node(t.query),e.put(")"))}var ap={};Ae(ap,{compile:()=>k_,stringify:()=>S_,suggest:()=>x_,walk:()=>C_});function x_(t,e){t.arguments.length===0&&e.queryRoot(t.range[1]-1)}function k_(t,e,r){let i=t.reference.type==="Identifier";e.tolerant&&e.put("(typeof "),i&&(e.usedMethods.has(t.reference.name)?e.usedMethods.get(t.reference.name).push(t.reference.range):e.usedMethods.set(t.reference.name,[t.reference.range]),e.put("m.")),e.node(t.reference),e.tolerant&&(e.put('==="function"?'),i&&e.put("m."),e.node(t.reference)),e.put(i?".call(mctx,":"("),e.nodeOrCurrent(r),t.arguments.length&&(e.put(","),e.list(t.arguments,",")),e.put(")"),e.tolerant&&e.put(":undefined)")}function C_(t,e){e.node(t.reference),e.list(t.arguments)}function S_(t,e){e.node(t.reference),e.put("("),e.list(t.arguments,","),e.put(")")}var lp={};Ae(lp,{compile:()=>A_,stringify:()=>L_,walk:()=>T_});function A_(t,e){e.node(t.method,t.value)}function T_(t,e){e.nodeOrNothing(t.value),e.node(t.method)}function L_(t,e){e.nodeOrNothing(t.value)&&e.put("."),e.node(t.method)}var cp={};Ae(cp,{compile:()=>M_,stringify:()=>N_,suggest:()=>E_,walk:()=>D_});function E_(t,e){t.properties.length===0&&e.queryRoot(t.range[0]+1,t.range[1]-1)}function M_(t,e){e.put("{"),e.list(t.properties,","),e.put("}")}function D_(t,e){e.list(t.properties)}function N_(t,e){e.put("{"),e.list(t.properties,","),e.put("}")}var up={};Ae(up,{compile:()=>I_,stringify:()=>q_,suggest:()=>P_,walk:()=>B_});var O_=new Set(["Literal","Identifier","Reference","Current"]);function P_(t,e){if(t.value===null)switch(t.key.type){case"Literal":case"Identifier":e.range(t.range,"path"),e.range(t.range,"var");break;case"Current":case"Reference":e.range(t.range,"var");break}}function I_(t,e){let r=t.value;switch(t.key.type){case"Current":e.put("...null");return;case"Literal":e.node(t.key),r=r||Fa(null,_a(String(t.key.value)));break;case"Identifier":e.node(t.key),r=r||Fa(null,_a(t.key.name));break;case"Reference":e.node(t.key.name),r=r||t.key;break;default:e.put("["),e.node(t.key),e.put("]")}e.put(":"),e.node(r)}function B_(t,e){e.node(t.key),e.nodeOrNothing(t.value)}function q_(t,e){if(O_.has(t.key.type)){if(e.node(t.key),t.value===null)return}else e.put("["),e.node(t.key),e.put("]");e.put(":"),e.node(t.value)}var fp={};Ae(fp,{compile:()=>z_,stringify:()=>F_,walk:()=>R_});function z_(t,e){e.put("("),e.node(t.body),e.put(")")}function R_(t,e){e.node(t.body)}function F_(t,e){e.put("("),e.node(t.body),e.put(")")}var dp={};Ae(dp,{compile:()=>j_,stringify:()=>W_,suggest:()=>__,walk:()=>H_});function __(t,e){if(t.getter===null){let r=t.range[1]-1;e.range([r,r],"key",t.value,!1),e.queryRoot(r)}else(t.getter.type==="GetProperty"||t.getter.type==="Reference"||t.getter.type==="Literal"&&typeof t.getter.value=="string")&&e.range(t.getter.range,"key",t.value,!1)}function j_(t,e){e.put(e.buildinFn("pick")),e.put("("),e.node(t.value),t.getter&&(e.put(","),e.node(t.getter)),e.put(")")}function H_(t,e){e.node(t.value),t.getter!==null&&e.node(t.getter)}function W_(t,e){e.node(t.value),e.put("["),t.getter!==null&&e.node(t.getter),e.put("]")}var hp={};Ae(hp,{compile:()=>U_,stringify:()=>G_,walk:()=>$_});function U_(t,e){e.createScope(()=>{e.put("($=>("),e.node(t.right),e.put("))")},(r,i)=>r+i+","),e.put("("),e.nodeOrCurrent(t.left),e.put(")")}function $_(t,e){e.node(t.left),e.node(t.right)}function G_(t,e){e.node(t.left),e.put("|"),e.node(t.right)}var pp={};Ae(pp,{compile:()=>K_,stringify:()=>Q_,suggest:()=>V_,walk:()=>Y_});function V_(t,e){e.queryRoot(t.range[1])}function K_(t,e){e.put(e.scope.$ref)}function Y_(){}function Q_(){}var gp={};Ae(gp,{compile:()=>X_,stringify:()=>Z_,walk:()=>J_});function X_(t,e){if(t.operator&&t.operator.type){e.createScope(()=>{e.put("($=>("),e.node(t.operator),e.put("))")},(r,i)=>r+i+","),e.put("("),e.node(t.argument),e.put(")");return}switch(t.operator){default:e.error('Unknown operator "'+t.operator+'"',t)}}function J_(t,e){e.node(t.argument),t.operator&&t.operator.type&&e.node(t.operator)}function Z_(t,e){e.node(t.argument),e.put(" "),e.node(t.operator)}var mp={};Ae(mp,{compile:()=>ej,stringify:()=>nj,walk:()=>tj});function ej(t,e){switch(t.operator){case"no":case"not":e.put("!"),e.put(e.buildinFn("bool")),e.put("("),e.node(t.argument),e.put(")");break;case"+":case"-":e.put(t.operator),e.node(t.argument);break;case"is":e.put("!!("),e.node(t.argument),e.put(")");break;default:e.error('Unknown operator "'+t.operator+'"',t)}}function tj(t,e){e.node(t.argument),t.operator&&t.operator.type&&e.node(t.operator)}function nj(t,e){e.put(t.operator),t.operator!=="-"&&t.operator!=="+"&&e.put(" "),e.node(t.argument)}var yp={};Ae(yp,{compile:()=>ij,stringify:()=>sj,suggest:()=>rj,walk:()=>oj});function rj(t,e){t.range&&e.range(t.range,"var")}function ij(t,e){if(!e.scope.includes(t.name.name)&&e.tolerant){e.put("(typeof $"),e.node(t.name),e.put('!=="undefined"?$'),e.node(t.name),e.put(":undefined)");return}e.put("$"),e.node(t.name)}function oj(t,e){e.node(t.name)}function sj(t,e){e.put("$"),e.node(t.name)}var vp={};Ae(vp,{compile:()=>aj,stringify:()=>cj,walk:()=>lj});function aj(t,e){e.put(e.buildinFn("slice")),e.put("("),e.nodeOrCurrent(t.value),t.arguments.slice(0,3).forEach(r=>{e.put(","),r?e.node(r):e.put("undefined")}),e.put(")")}function lj(t,e){e.nodeOrNothing(t.value);for(let r of t.arguments.slice(0,3))r&&e.node(r)}function cj(t,e){let[r,i,s]=t.arguments;e.nodeOrNothing(t.value),e.put("["),r&&e.node(r),e.put(":"),i&&e.node(i),s&&(e.put(":"),e.node(s)),e.put("]")}var bp={};Ae(bp,{compile:()=>fj,stringify:()=>hj,suggest:()=>uj,walk:()=>dj});function uj(t,e){t.query===null&&e.queryRoot(t.range[1])}function fj(t,e){if(t.array){e.put("..."),e.put(e.buildinFn("ensureArray")),e.put("("),e.nodeOrCurrent(t.query),e.put(")");return}e.put("..."),e.nodeOrCurrent(t.query)}function dj(t,e){e.nodeOrNothing(t.query)}function hj(t,e){e.put("..."),e.nodeOrNothing(t.query)}var wp={};Ae(wp,{compile:()=>gj,stringify:()=>yj,suggest:()=>pj,walk:()=>mj});function pj(t,e){for(let[r,i]of Object.entries(t.values))i===null&&e.queryRoot(t.values[Number(r)-1].range[1])}function gj(t,e){for(let[r,i]of Object.entries(t.values)){let s=Number(r);i!==null&&(s!==0&&e.put("+"),s%2===0?e.put('"'+fk(i.value,vj)+'"'):(e.put("("),e.node(i),e.put(")")))}}function mj(t,e){for(let r of t.values)r!==null&&e.node(r)}function yj(t,e){let r=t.values.length-1;for(let[i,s]of Object.entries(t.values)){let a=Number(i);a%2===0?(e.put(a===0?"`":"}"),e.put(fk(s.value,bj)),e.put(a===r?"`":"${")):s!==null&&e.node(s)}}var vj=new Map([["\b","\\b"],[`
`,"\\n"],["\r","\\r"],["\f","\\f"],["	","\\t"],["\v","\\v"],["\u2028","\\u2028"],["\u2029","\\u2029"],["\\","\\\\"],['"','\\"']]),bj=new Map([["\b","\\b"],["\f","\\f"],["	","\\t"],["\v","\\v"],["\\","\\\\"],["$","\\$"]]);function fk(t,e){let r="";for(let i=0;i<t.length;i++)r+=e.get(t[i])||t[i];return r}var wj={Arg1:jh,Array:Hh,Assertion:Wh,Binary:Uh,Block:$h,Compare:Gh,Conditional:Kh,Context:Yh,Current:Qh,Data:Xh,Declarator:Jh,Definition:Zh,Filter:ep,Function:tp,GetProperty:np,Identifier:rp,Literal:ip,Map:op,MapRecursive:sp,Method:ap,MethodCall:lp,Object:cp,ObjectEntry:up,Parentheses:fp,Pick:dp,Pipeline:hp,Placeholder:pp,Postfix:gp,Prefix:mp,Reference:yp,SliceNotation:vp,CompareFunction:Vh,Spread:bp,Template:wp},ja=t=>new Map(Object.entries(wj).map(([e,r])=>[e,r[t]]).filter(([,e])=>typeof e=="function")),xj={};ja("build").forEach((t,e)=>xj[e]=t);var xp=ja("compile"),kp=ja("walk"),Cp=ja("stringify"),Sp=ja("suggest");function Ha(t,e){function r(f){if(kp.has(f.type))s(f),kp.get(f.type)(f,i),a(f);else throw new Error('Unknown node type "'+f.type+'"')}let i={node:r,nodeOrNothing(f){f!==null&&r(f)},list(f){f.forEach(r)}},s=()=>{},a=()=>{};typeof e=="function"&&(e={enter:e}),e&&(typeof e.enter=="function"&&(s=e.enter),typeof e.leave=="function"&&(a=e.leave)),r(t)}function dk(t,e){return e>=0&&e<t.length&&/[a-zA-Z_$0-9]/.test(t[e])}function Ap(t,e){let r=t.charCodeAt(e);return r===9||r===10||r===13||r===32}function kj(t,e,r){for(;e<r;e++)if(!Ap(t,e))return!1;return!0}function Cj(t,e,r,i,s){let a=[];for(let f=0;f<i.length;f++){let[d,p]=i[f];if(d>=e)break;d<t||(a.push(t,d),t=p)}return(t!==r.length||!s)&&a.push(t,e),a}function Sj(t,e,r,i){let s=[];for(let a=0;a<t.length;a++){let[f,d,p,g]=t[a];if(kj(e,f,d)){for(;f>=0&&Ap(e,f-1);)f--;for(;d<e.length&&Ap(e,d);)d++;if(dk(e,f-1)){if(f===d)continue;f++}if(dk(e,d)){if(f===d)continue;d--}}let y=Cj(f,d,e,r,i);for(let x=0;x<y.length;x+=2)s.push([y[x],y[x+1],p,g])}return s}function Aj(t){let e=null,r=[],i=Object.assign(new Map,{literalList:r}),s=(f,d)=>{i.has(f)?i.get(f).push(d):i.set(f,[d])},a={range(f,d,p=e,g=!0){s(p,[...f,d,g])},literalList(f){let d="l"+r.length;return r.push([d,f]),d},queryRoot(f,d=f){s(e,[f,d,"var",!0]),s(e,[f,d,"path",!0])}};return Ha(t,f=>{if(Sp.has(f.type)){let d=e;e=f,Sp.get(f.type)(f,a),e=d}}),i}function Pc(t,{ast:e,commentRanges:r}){let i=Aj(e),s=r.length&&r[r.length-1][1]===t.length&&!/[\r\n]$/.test(t);for(let[a,f]of i)i.set(a,Sj(f,t,r,s));return i}function Tj(t){return t.type==="GetProperty"}function Lj(t){return t.type==="MethodCall"}function Ic(t){function e(s){if(Cp.has(s.type))Cp.get(s.type)(s,i);else throw new Error('Unknown node type "'+s.type+'"')}let r=[],i={isSimpleGetPropertyQuery:Tj,isSimpleMethodCallQuery:Lj,put(s){r.push(s)},node:e,nodeOrNothing(s){if(s!==null)return e(s),!0},list(s,a){if(!a){s.forEach(e);return}s.forEach((f,d)=>{d>0&&i.put(a),e(f)})}};return e(t),r.join("")}function Tp(t,e,r){let i=Object.assign(Object.create(SyntaxError.prototype),r),s=new Error;return i.name=t,i.message=e,Object.defineProperty(i,"stack",{get:function(){return(s.stack||"").replace(/^(.+\n){1,3}/,t+": "+e+`
`)}}),i}function Lp(t,e,r){return hk(t,"query",e,r)}function Ep(t,e,r){return hk(t,"method",e,r)}function hk(t,e,r=!1,i=null){function s(O){let L="s"+g.length;return g.push(O?[L,O]:[L]),L}function a(O){let L=y.get(O);return L||y.set(O,L=s()),L}function f(O,L,E,N,B){let I=[O,L,JSON.stringify(E)];if(E==="var"){if(!D.scope.length)return;I.push(JSON.stringify(D.scope))}else N||(N=s()),I.push(N),B&&I.push(typeof B=="string"?B:a(B));return w.push(I),N}function d(O,L,E="$"){let N=D.scope,B=k.length;if(D.scope=D.scope.slice(),D.scope.own=[],D.scope.firstCurrent=null,D.scope.captureCurrent=[],D.scope.arg1=N.arg1||e==="method",D.scope.$ref=E,O(),D.scope.captureCurrent.length){let R="stat("+D.scope.captureCurrent.reduce((j,F)=>f(...F,j),void 0)+","+D.scope.$ref+")";D.scope.firstCurrent?k[D.scope.firstCurrent]=R:k[B]=L(k[B],R)}D.scope=N}function p(O,L){let E=!1;if(i!==null){if(i.has(O))for(let[N,B,I,R]of i.get(O))I==="var"?f(N,B,I):R===!0?D.scope.captureCurrent.push([N,B,I]):(E||(E=a(O),k.push("stat("+E+",")),I&&f(N,B,I,E,R));O.type==="Current"&&D.scope.firstCurrent===null&&D.scope.captureCurrent.disabled!==!0&&(D.scope.firstCurrent=k.length)}if(xp.has(O.type))xp.get(O.type)(O,D,L);else throw new Error('Unknown node type "'+O.type+'"');E&&k.push(")")}let g=[],y=new WeakMap,x=[],w=[],k=[{toString(){if(e==="query")return["((data,context)=>{",...D.usedMethods.size||D.usedAssertions.size?["const method = (name,...args)=>m[name].apply(mctx,args);","const assertion = (name,...args)=>a[name].apply(mctx,args);","const mctx = Object.freeze({context,method,assertion});"]:[]].join(`
`)+`
`;if(e==="method")return["(function(data){","const mctx = this;","const context = mctx.context;"].join(`
`)+`
`;throw new Error("Unknown kind: "+e)}},{toString(){return x.length>0?"let "+x+`;
`:""}},{toString(){return g.length>0?[`const stat=(s,v)=>(s.add(v),v);
`,"const "+g.map(([O,L])=>O+"=new Set("+(L?JSON.stringify(L):"")+")")+`;
`].join(""):""}},{toString(){let O=i&&Array.isArray(i.literalList)&&i.literalList.map(([L,E])=>L+"="+JSON.stringify(E));return O&&O.length?"const "+O+`;
`:""}},i===null?"return ":`return{
value: `],A={},M=new Set,D={tolerant:r,usedAssertions:new Map,usedMethods:new Map,suggestions:i!==null,buildinFn(O){return M.add(O),"f."+O},scope:[],createScope:d,error:(O,L)=>{let E=new SyntaxError(O);if(L&&L.range&&(E.details={loc:{range:L.range}}),!r)throw E},allocateVar(){let O="tmp"+x.length;return x.push(O),O},put:O=>k.push(O),node:p,nodeOrCurrent(O,L){p(O||{type:"Current"},L)},list(O,L,E){O.forEach((N,B)=>{B>0&&k.push(L),p(N,E)})}};if(d(()=>p(t),(O,L)=>(k.push(")"),"("+L+","+O),"data"),!r){let{usedMethods:O,usedAssertions:L}=D;L.size&&(k.unshift(" this.assertAssertions(a)||"),A.assertAssertions=function(E){for(let[N,B]of L.entries())if(!jt(E,N))return()=>{throw Object.assign(new Error(`Assertion "${N}" is not defined`),{details:{loc:{range:B}}})}}),O.size&&(k.unshift(" this.assertMethods(m)||"),A.assertMethods=function(E){for(let[N,B]of O.entries())if(!jt(E,N))return()=>{throw Object.assign(new Error(`Method "${N}" is not defined. If that's a custom method make sure you added it with "methods" section in options`),{details:{loc:{range:B[0]}}})}})}i!==null&&k.push(`,
stats: [`+w.map(O=>"["+O+"]")+`],
methods: m,
assertions: a
}`);try{let O=new Function("f,m,a","return"+k.join("")+"})");return Object.assign(O.bind(A),{toString(){return O.toString().replace(/^(\S+\s+)anonymous([^)\s]+)\s*\)/,"$1query$2)")}})}catch(O){throw Tp("SyntaxError","Jora query compilation error",{compiledSource:k.join(""),details:O})}}var pk=t=>typeof t=="number"||typeof t=="string",xn=(t,e)=>e<t.length?t.charCodeAt(e):0,Wa=t=>t===43||t===45,Yn=t=>t>=48&&t<=57,Mp=t=>t===9||t===10||t===12||t===13||t===32,Dp=t=>t>32&&t<256&&(t<65||t>90)&&(t<97||t>122)&&!Yn(t)&&!Wa(t)||t===8470,Ej=t=>t&&!Mp(t)&&!Dp(t)&&!Yn(t),Mj=(t,e,r)=>Wa(t)?Yn(e)?2:e===46&&Yn(r)?3:0:Yn(t)?1:0,qo=(t,e,r)=>{for(;r(xn(t,++e)););return e},Dj=(t,e,r)=>{let i=xn(t,e);if(Wa(i)&&(i=xn(t,e+=1)),Yn(i)&&(e=qo(t,e,Yn),i=xn(t,e)),i===46&&Yn(xn(t,e+1))){if(r)return e;let s=qo(t,e+1,Yn);if(i=xn(t,s),i===46)return e;e=s}if(i===69||i===101){let s=1;i=xn(t,e+1),Wa(i)&&(s=2,i=xn(t,e+2)),Yn(i)&&(e=qo(t,e+s,Yn))}return e},gk=(t,e,r,i)=>{if(e>=t.length)return 0;let s=xn(t,e);return Mp(s)?1|qo(t,e,Mp)-e<<4:Dp(s)||i&&Wa(s)?2|qo(t,e,Dp)-e<<4:Mj(s,xn(t,e+1),xn(t,e+2))?4|Dj(t,e,r)-e<<4:8|qo(t,e,Ej)-e<<4},Nj=(t,e,r)=>{let i=0,s=0,a=!1,f=!1,d=0,p=0,g=!0;for(;;){let y=gk(t,i,a,f),x=gk(e,s,a,f),w=y&15,k=y>>4,A=x&15,M=x>>4;if(w!==A){if(g&&w&3&&A&12){d=1,p=w,i+=k;continue}if(g&&A&3&&w&12){d=-1,p=A,s+=M;continue}return w-A}if(w===0)return d;g=!1,a=!1,f=!1;let D=k<M?k:M,O=k-M,L="",E="";for(let N=0;N<D;N++)if(L=t[i+N],E=e[s+N],L!==E){O=L<E?-1:1;break}if(w&3)a=t[i+k-1]===".",O!==0&&w>p&&(p=w,d=O);else if(w&4){if(f=!0,O!==0){let N=t.substr(i,k)-e.substr(s,M);if(N!==0)return r?-N:N;if(w>p){let B=xn(t,i),I=xn(e,s),R=B===45?-1:1;p=w,d=B!==I&&(B===45||I===43)?-1:B!==I&&(B===43||I===45)?1:(k-M||O)<0?-R:R,r&&(d=-d)}}}else if(O!==0){if(L!==E){let N=t.substr(i,k),B=e.substr(s,M),I=N.toLowerCase(),R=B.toLowerCase();return I!==R?I<R?-1:1:N<B?-1:1}return O}i+=k,s+=M}},mk=t=>(e,r)=>pk(e)&&pk(r)?Math.sign(Nj(String(e),String(r),t)):0,yk=mk(!1),vk=mk(!0);var Oj=1,Pj=2,zo=3,Ua=4,Ij=5,Bj=6,qj=7,zj=8;function ei(t){switch(typeof t){case"boolean":return Oj;case"number":return t!==t?Pj:zo;case"string":return Ua;case"object":return t===null?Ij:Bj;case"undefined":return zj;default:return qj}}function Ro(t,e){let r=ei(t),i=ei(e);return r!==i?r<i?-1:1:t<e?-1:t>e?1:0}function bk(t,e){let r=ei(t),i=ei(e);return r!==i?r<i?-1:1:r===zo?e-t:t<e?-1:t>e?1:0}function Ti(t,e){let r=ei(t),i=ei(e);return(r===zo||r===Ua)&&(i===zo||i===Ua)?yk(t,e):r!==i?r<i?-1:1:t<e?-1:t>e?1:0}function wk(t,e){let r=ei(t),i=ei(e);return(r===zo||r===Ua)&&(i===zo||i===Ua)?vk(t,e,!0):r!==i?r<i?-1:1:t<e?-1:t>e?1:0}function Np(t,e){return t.length===1?(r,i)=>e(t(r),t(i)):t}var en=Object.freeze({ensureArray:Rj,bool:wn,and:(t,e)=>wn(t)?e:t,or:(t,e)=>wn(t)?t:e,add:Fj,sub:_j,mul:jj,div:Hj,mod:Wj,eq:Uj,ne:$j,lt:Gj,lte:Vj,gt:Kj,gte:Yj,in:Bc,notIn:(t,e)=>!Bc(t,e),has:(t,e)=>Bc(e,t),hasNo:(t,e)=>!Bc(e,t),cmp:Ro,cmpAnalytical:bk,cmpNatural:Ti,cmpNaturalAnalytical:wk,match:Qj,pick:Xj,indexOf:Jj,lastIndexOf:Zj,map:Op,mapRecursive:t3,some:Pp,filter:n3,slice:r3});function Rj(t){return Array.isArray(t)?t:[t]}function Fj(t,e){return Array.isArray(t)||Array.isArray(e)?[...new Set([].concat(t,e))]:t+e}function _j(t,e){if(Array.isArray(t)){let r=new Set(t);return Array.isArray(e)?e.forEach(i=>r.delete(i)):r.delete(e),[...r]}return t-e}function jj(t,e){return t*e}function Hj(t,e){return t/e}function Wj(t,e){return t%e}function Uj(t,e){return Object.is(t,e)}function $j(t,e){return!Object.is(t,e)}function Gj(t,e){return t<e}function Vj(t,e){return t<=e}function Kj(t,e){return t>e}function Yj(t,e){return t>=e}function Bc(t,e){return Kn(e)?jt(e,t):e?xk(e,t)!==-1:!1}function Qj(t,e){return typeof e=="function"?Pp(t,e):Zr(e)?Pp(t,e.test.bind(e)):e==null}function Xj(t,e=()=>!0){if(t){if(typeof e=="function"){if(Array.isArray(t)||typeof t=="string"){for(let r=0;r<t.length;r++)if(wn(e(t[r],r)))return t[r]}for(let r in t)if(jt(t,r)&&wn(e(t[r],r)))return t[r];return}return Array.isArray(t)||typeof t=="string"?isFinite(e)?t[e<0?t.length+Number(e):Number(e)||0]:void 0:jt(t,e)?t[e]:void 0}}function Jj(t,e,r){return t?xk(t,e,r):-1}function xk(t,e,r=0){if(Number.isNaN(e)&&Er(t)){for(let i=parseInt(r,10)||0;i<t.length;i++)if(Number.isNaN(t[i]))return i}return typeof t.indexOf=="function"?t.indexOf(e,r):-1}function Zj(t,e,r){return t?e3(t,e,r):-1}function e3(t,e,r){if(Number.isNaN(e)&&Er(t)){for(let i=parseInt(r,10)||t.length-1;i>=0;i--)if(Number.isNaN(t[i]))return i}return typeof t.lastIndexOf=="function"?t.lastIndexOf(e,parseInt(r,10)||t.length-1):-1}function Op(t,e){let r=typeof e=="function"?e:i=>lk(i,e);return Array.isArray(t)?[...t.reduce((i,s)=>Bo(i,r(s)),new Set)]:t!==void 0?r(t):t}function t3(t,e){let r=new Set;return Bo(r,Op(t,e)),r.forEach(i=>Bo(r,Op(i,e))),[...r]}function Pp(t,e){return Array.isArray(t)?t.some(r=>wn(e(r))):wn(e(t))}function n3(t,e){return Array.isArray(t)?t.filter(r=>wn(e(r))):wn(e(t))?t:void 0}function r3(t,e=0,r=t&&t.length,i=1){if(!Er(t))return[];if(e=parseInt(e,10)||0,r=parseInt(r,10)||t.length,i=parseInt(i,10)||1,i!==1){let s=[];e=e<0?Math.max(0,t.length+e):Math.min(t.length,e),r=r<0?Math.max(0,t.length+r):Math.min(t.length,r);for(let a=i>0?e:r-1;a>=e&&a<r;a+=i)s.push(t[a]);return s}return typeof t=="string"?t.slice(e,r):Array.prototype.slice.call(t,e,r)}var i3=kk(20)?1/0:kk(10)?10:0;function kk(t){return Array.from({length:t},(e,r)=>({idx:r})).sort((e,r)=>e.idx%2-r.idx%2).every((e,r)=>r<t/2?e.idx>>1===r:Math.ceil(t/2)+(e.idx>>1)===r)}function Ck(t,e){return t.length<=i3?t.slice().sort(e):t.map((r,i)=>({value:r,idx:i})).sort((r,i)=>(r.value===void 0?i.value!==void 0:i.value===void 0?-1:e(r.value,i.value))||r.idx-i.idx).map(r=>r.value)}var o3=(t,e)=>t-e,s3=(t,e)=>e-t,qc=class{constructor(e,r,i,s=!1){this.maxSize=e||1/0,this.compare=r||s3,this.accept=i||null,this.values=[],this.valuesSet=s?new Set:null}add(e){this.accept!==null&&!this.accept(e)||this.valuesSet!==null&&this.valuesSet.has(e)||(this.values.length<this.maxSize?(this.valuesSet!==null&&this.valuesSet.add(e),this.values.push(e),this.heapifyUp(this.values.length-1)):this.compare(this.values[0],e)>0&&(this.valuesSet!==null&&(this.valuesSet.delete(this.values[0]),this.valuesSet.add(e)),this.values[0]=e,this.heapifyDown()))}addArray(e){for(let r=0;r<e.length;r++)this.add(e[r])}extract(){let e=this.values[0],r=this.values.pop();return this.values.length>0&&(this.values[0]=r,this.heapifyDown()),this.valuesSet!==null&&this.valuesSet.delete(e),e}heapifyUp(e){let r=this.values,i=r[e];for(;e>0;){let s=e-1>>1,a=r[s];if(this.compare(a,i)>0)break;r[s]=i,r[e]=a,e=s}}heapifyDown(){let e=this.values,r=e.length,i=r>>1,s=0,a=e[s],f=s,d=a;for(;s<i;){let p=2*s+1,g=e[p],y=p+1;if(this.compare(g,a)>0&&(f=p,d=g),y<r){let x=e[y];this.compare(x,d)>0&&(f=y,d=x)}if(f===s)break;e[s]=d,e[f]=a,s=f,d=a}}[Symbol.iterator](){return this.values.slice().sort(this.compare)[Symbol.iterator]()}},ti=class extends qc{},zc=class extends qc{constructor(e,r,i,s){super(e,r?(a,f)=>-r(a,f):o3,i,s)}};var a3=t=>t;function l3(t){return t!==null&&typeof t=="object"?NaN:Number(t)}function Fo(t,e,r){if(Er(t)){typeof e!="function"&&(e=a3);for(let i of t){let s=e(i);s!==void 0&&r(l3(s))}}}function Sk(t,e,r,i,s){if(t.length===0||!isFinite(e)||e<0||e>100)return;let a=0,f=e*(t.length-1)/100,d=Math.floor(f),p=Math.ceil(f),g=!1,y=e<50?new zc(p+1,s):new ti(t.length-d,s);if(Fo(t,r,x=>{Number.isNaN(x)&&(g=!0),y.add(x),a++}),g)return NaN;if(t.length!==a){if(a===0)return;f=e*(a-1)/100,d=Math.floor(f),p=Math.ceil(f);let x=e<50?p+1:a-d;for(let w=y.values.length;w>x;w--)y.extract()}if(d!==p){let x=y.extract(),w=y.values[0];return x<=w?x+(w-x)*(f-d):w+(x-w)*(f-d)}return y.values[0]}var c3=t=>t;function Ak(t,e){let r,i=0,s=0;return Fo(t,e,a=>{if(s++,r===void 0)r=a;else{let f=r,d=Math.abs(f),p=Math.abs(a);r+=a,d!==1/0&&p!==1/0&&(d>=p?i+=f-r+a:i+=a-r+f)}}),r!==void 0&&(r+=i),{sum:r,count:s}}function Tk(t,e){let r=[];return Fo(t,e,r.push.bind(r)),r}function Lk(t,e){let r=0;if(Er(t)){typeof e!="function"&&(e=c3);for(let i of t)e(i)!==void 0&&r++}return r}function Ek(t,e){return Ak(t,e).sum}function Mk(t,e){let{sum:r,count:i}=Ak(t,e);if(i>0)return r/i}function Ip(t,e){let r=0,i=0,s=0;if(Fo(t,e,a=>{r+=1;let f=a-i;i+=f/r,s+=f*(a-i)}),r>0)return s/r}function Dk(t,e){let r=Ip(t,e);if(r!==void 0)return Math.sqrt(r)}function Nk(t,e=Ti){let r;if(t&&isFinite(t.length)&&typeof e=="function"){e=Np(e,Ti);for(let i=0;i<t.length;i++){let s=t[i];(r===void 0||e(s,r)<0)&&e(s,void 0)!==0&&(r=s)}}return r}function Ok(t,e=Ti){let r;if(t&&isFinite(t.length)&&typeof e=="function"){e=Np(e,Ti);for(let i=0;i<t.length;i++){let s=t[i];(r===void 0||e(s,r)>=0)&&e(s,void 0)!==0&&(r=s)}}return r}function Rc(t,e,r){if(Er(t))return Sk(t,e,r)}function Pk(t,e){return Rc(t,50,e)}function u3(){}function f3(t){return t}function Ik(t){return t===null?null:{matched:t.slice(),start:t.index,end:t.index+t[0].length,input:t.input,groups:t.groups||null}}function d3(t){let e=t.pop(),r=typeof e=="string"?null:e,i=r===null?e:t.pop(),s=t.pop();return{matched:t,start:s,end:s+t[0].length,input:i,groups:r}}var h3=String.prototype.replaceAll||function(t,e){return Zr(t)?this.replace(t,e):this.split(t).join(String(e))},$a=Object.freeze({bool:en.bool,filter:en.filter,map:en.map,pick:en.pick,indexOf:en.indexOf,lastIndexOf:en.lastIndexOf,keys(t){return Object.keys(t||{})},values(t){let e=new Set;for(let r in t)jt(t,r)&&Bo(e,t[r]);return[...e]},entries(t){let e=[];for(let r in t)jt(t,r)&&e.push({key:r,value:t[r]});return e},fromEntries(t){let e=Object.create(null);if(Array.isArray(t))for(let r of t)r&&(e[r.key]=r.value);return e},size(t){return Kn(t)?Object.keys(t).length:t&&t.length||0},sort(t,e=Ro){if(!Array.isArray(t))return t;if(typeof e=="function"&&e.length!==2){let r=e;e=(i,s)=>{if(i=r(i),s=r(s),Array.isArray(i)&&Array.isArray(s)){if(i.length!==s.length)return i.length<s.length?-1:1;for(let a=0;a<i.length;a++){let f=Ro(i[a],s[a]);if(f!==0)return f}return 0}return Ro(i,s)}}return Ck(t,e)},reverse(t){return Array.isArray(t)?t.slice().reverse():t},slice(t,e,r){return en.slice(t,e,r)},group(t,e,r){let i=new Map,s=[];typeof e!="function"&&(e=u3),typeof r!="function"&&(r=f3),Array.isArray(t)||(t=[t]);for(let a of t){let f=e(a);if(Array.isArray(f))for(let d of f)Fh(i,d,r(a));else Fh(i,f,r(a))}for(let[a,f]of i)s.push({key:a,value:[...f]});return s},join(t,e){return Array.isArray(t)?t.join(e):String(t)},match(t,e,r){let i=String(t),s=Zr(e)?e.flags:"";if(r||s.includes("g")){let a=[],f=new RegExp(e,(s||"").replace(/g|$/,"g")),d;for(;d=f.exec(i);)a.push(Ik(d));return a}return Ik(i.match(e))},reduce(t,e,r=void 0){return Array.isArray(t)?r!==void 0?t.reduce((i,s)=>e(s,i),r):t.reduce((i,s)=>e(s,i)):e(t,r)},split(t,e){if(Array.isArray(t)){let r=typeof e=="function"?e:Object.is.bind(null,e),i=[],s=0,a=0;for(;a<t.length;a++)r(t[a])&&(i.push(t.slice(s,a)),s=a+1);return i.push(t.slice(s,a)),i}return String(t).split(e)},replace(t,e,r){if(Array.isArray(t)){let i=typeof e=="function"?e:Object.is.bind(null,e);return t.map(typeof r=="function"?s=>i(s)?r(s):s:s=>i(s)?r:s)}return Zr(e)&&!e.flags.includes("g")&&(e=new RegExp(e,e.flags+"g")),h3.call(String(t),e,typeof r=="function"?(...i)=>r(d3(i)):r)},toLowerCase(t,e){return String(t).toLocaleLowerCase(e)},toUpperCase(t,e){return String(t).toLocaleUpperCase(e)},trim(t){return String(t).trim()},...["abs","acos","acosh","asin","asinh","atan","atan2","atanh","cbrt","ceil","clz32","cos","cosh","exp","expm1","floor","fround","hypot","imul","log10","log2","pow","round","sign","sin","sinh","sqrt","tan","tanh","trunc"].reduce((t,e)=>(t[e]=Math[e],t),{}),ln:Math.log,ln1p:Math.log1p,numbers:Tk,count:Lk,sum:Ek,avg:Mk,variance:Ip,stdev:Dk,min:Nk,max:Ok,percentile:Rc,p:Rc,median:Pk});var Ga=Object.freeze({function:t=>typeof t=="function",symbol:t=>typeof t=="symbol",primitive:t=>t===null||typeof t!="object"&&typeof t!="function",string:t=>typeof t=="string",number:t=>typeof t=="number",int:Number.isInteger,finite:t=>Number.isFinite(t),nan:t=>Number.isNaN(t),infinity:t=>t===1/0||t===-1/0,boolean:t=>t===!0||t===!1,null:t=>t===null,undefined:t=>t===void 0,nullish:t=>t==null,object:Kn,array:Array.isArray,regexp:Zr,truthy:wn,falsy:t=>!wn(t)});var p3={path:"property",key:"value",value:"value","in-value":"value","value-subset":"value",var:"variable",assertion:"assertion"};function Fc(t,e){Object.keys(t).forEach(e.add,e)}function g3(t,e,r,i=new Set){let s=a=>{switch(typeof a){case"string":case"number":i.add(a);break}};switch(t){case"path":{let a=new Set;for(let f of e)if(Array.isArray(f))for(let d of f)Kn(d)&&Fc(d,a);else Kn(f)&&Fc(f,a);a.forEach(i.add,i);break}case"key":{let a=new Set;for(let f of e)f!==null&&typeof f=="object"&&!Array.isArray(f)&&Fc(f,a);a.forEach(i.add,i);break}case"value":for(let a of e)s(a);break;case"in-value":{let a=new Set;for(let f of e)Array.isArray(f)?f.forEach(s):Kn(f)&&Fc(f,a);a.forEach(i.add,i);break}case"var":for(let a of e)i.add("$"+a);break;case"value-subset":{let a=new Set(r);for(let f of e)a.has(f)||s(f);break}}return i}function Bk(t,e,r,i=!1){let s=[];for(let[a,f,d,p,g=null]of r)if(e>=a&&e<=f&&(i||p.size||p.length)){let y=t.substring(a,f);/\S/.test(y)||(a=f=e,y=""),s.push({context:d,from:a,to:f,text:y,values:p,related:g})}return s}function qk(t,e){return typeof t=="function"?t:t===!0?e:!1}function zk(t){if(/^(["']).*\1$/.test(t))try{return t[0]==="'"&&(t=`"${t.slice(1,-1).replace(/\\.|"/g,e=>e==="\\'"?"'":e==='"'?'\\"':e)}"`),JSON.parse(t)}catch{}return t}function m3(t){return e=>(typeof e=="string"?e:String(e)).toLowerCase().indexOf(t)!==-1}var Bp=(t,{value:e,stats:r,assertions:i})=>({get value(){return e},stat(s,a){return Bk(t,s,r,a)},suggestion(s,a){let{limit:f=1/0,sort:d,filter:p}=a||{};d=qk(d,en.cmp),p=qk(p,m3);let g=d&&isFinite(f)?ti:Set,y=Bk(t,s,r,!0),x=new Map,w=[];for(let k of y){let{context:A,text:M,from:D,to:O,values:L,related:E}=k,N=p3[A];if(!x.has(N)){let I;switch(g){case ti:I=new ti(f,d,p&&p(zk(M)),!0);break;case Set:I=new Set;break}x.set(N,{type:N,from:D,to:O,text:M,suggestions:I})}let{suggestions:B}=x.get(N);switch(A){case"assertion":if(B.size===0||B.values&&B.values.length===0)for(let I of Object.keys(i))B.add(I);break;default:g3(A,L,E,B)}}if(g===Set)for(let k of x.values()){let{suggestions:A}=k;if(d&&(A=[...A].sort(d)),p||isFinite(f)){let M=[],D=p?p(zk(k.text)):()=>!0;for(let O of A)if(D(O)&&M.push(O)>=f)break;A=M}k.suggestions=A}for(let k of x.values())k.suggestions=Array.isArray(k.suggestions)?k.suggestions:[...k.suggestions],k.suggestions.length&&w.push(k);return w.length?w:null}});var y3=new Map,v3=new Map,b3=new Map,w3=new Map;function Rk(t,e,r,i,s){typeof r=="string"?Object.defineProperty(t,e,{configurable:!0,get(){let f=qp(r,"method")(en,i,s);return Object.defineProperty(t,e,{enumerable:!0,value:f}),f}}):typeof r=="function"&&Object.defineProperty(t,e,{enumerable:!0,value:r})}function Fk(t,e){if(!t&&!e)return{queryMethods:$a,queryAssertions:Ga};let r={...$a},i={...Ga};for(let[s,a]of Object.entries(t||{})){if(jt($a,s))throw new Error(`Builtin method "${s}" can't be overridden`);Rk(r,s,a,r,i)}for(let[s,a]of Object.entries(e||{})){if(jt(Ga,s))throw new Error(`Builtin assertion "${s}" can't be overridden`);Rk(i,s,a,r,i)}return{queryMethods:r,queryAssertions:i}}function x3(t,e){console.log(`[${t}]`),typeof e=="string"?console.log(e):e!==void 0&&console.dir(e,{depth:null}),console.log()}function qp(t,e,r,i,s){s=typeof s=="function"?s:s?x3:!1,s&&(s("========================="),s("Compile query from source",t));let a=Nc.parse(t,i);s&&(s("AST",a.ast),s("Restored source",Ic(a.ast)));let f=r?Pc(t,a):null;if(s&&f){let p=w=>JSON.stringify(w).slice(1,-1),g=[].concat(...[...f.entries()].map(([w,k])=>k.map(A=>[w,...A]))),y=[],x=null;s("Stat/suggestion ranges",g.sort((w,k)=>w[1]-k[1]).map(([w,...k])=>{let[A,M,D,O]=k,L;if(A===y[0]&&M===y[1])L=" ".repeat(x.length);else{let E=p(t.slice(0,A)).length,N=p(t.substring(A,M)).length;y=k,x=" ".repeat(E)+(N?"~".repeat(N):"\\")+" "+A+":"+M,L=p(t)+`
`+x}return L+" ["+D+"] on "+w.type+(O===!0?" (current)":O&&O.type?" & "+O.type:"")}).join(`
`))}let d=e==="method"?Ep(a.ast,i,f):Lp(a.ast,i,f);return s&&s("Compiled code",d.toString()),d}function k3(t,e){e=e||{};let r=!!e.stat,i=!!e.tolerant,s=r?i?w3:v3:i?b3:y3,{methods:a,assertions:f}=e||{},{queryMethods:d,queryAssertions:p}=Fk(a,f),g;return t=String(t),s.has(t)&&!e.debug?g=s.get(t):(g=qp(t,"query",r,i,e.debug),s.set(t,g)),g=g(en,d,p),r?Object.assign((y,x)=>Bp(t,g(y,x)),{query:g}):g}function C3(t){let e=new Map,r=new Map,i=new Map,s=new Map,{methods:a,assertions:f}=t||{},{queryMethods:d,queryAssertions:p}=Fk(a,f);return function(y,x){x=x||{};let w=!!x.stat,k=!!x.tolerant,A=w?k?s:r:k?i:e,M;if(y=String(y),A.has(y)&&!x.debug)M=A.get(y);else{let D=qp(y,"query",w,k,x.debug)(en,d,p);M=w?Object.assign((O,L)=>Bp(y,D(O,L)),{query:D}):D,A.set(y,M)}return M}}var Mr=Object.assign(k3,{version:ak,buildin:en,methods:$a,assertions:Ga,setup:C3,syntax:{tokenize:Nc.tokenize,parse:Nc.parse,suggest:Pc,walk:Ha,stringify:Ic,compile:Lp,compileMethod:Ep}});var zp={};Ae(zp,{createElement:()=>U,createFragment:()=>Li,createText:()=>qt,passiveCaptureOptions:()=>On,passiveSupported:()=>_k});function U(t,e,r){let i=document.createElement(t);typeof e=="string"&&(e={class:e});for(let s in e)if(hasOwnProperty.call(e,s)){if(e[s]===void 0)continue;s.startsWith("on")?i.addEventListener(s.substr(2),e[s]):i.setAttribute(s,e[s])}return Array.isArray(r)?r.forEach(s=>i.appendChild(s instanceof Node?s:qt(s))):typeof r=="string"&&(i.innerHTML=r),i}function qt(t){return document.createTextNode(String(t))}function Li(...t){let e=document.createDocumentFragment();return t.forEach(r=>e.appendChild(r instanceof Node?r:qt(r))),e}var _k=(()=>{let t=!1;try{let e={get passive(){return t=!0,!1}};window.addEventListener("test",null,e),window.removeEventListener("test",null,e)}catch{}return t})(),On=_k?Object.freeze({passive:!0,capture:!0}):!0;function Va(t,e){let r=U("style",null,":host{display:none}"),i=new Set,s=Promise.resolve();return Array.isArray(e)&&(t.append(...e.map(a=>{switch(typeof a=="string"&&(a={type:"style",content:a}),a.type){case"style":case"inline":return U("style",{media:a.media},a.content);case"link":case"external":{let f,d,p=new Promise((y,x)=>{f=y,d=x});return i.add(p),U("link",{rel:"stylesheet",href:a.href,media:a.media,onerror(y){i.delete(p),d(y),i.size||r.remove()},onload(){i.delete(p),f(),i.size||r.remove()}})}default:throw new Error(`Unknown type "${a.type}" for a style descriptor`)}})),i.size&&(s=Promise.all(i),t.append(r))),s}var Fp={};Ae(Fp,{deepEqual:()=>Rp,equal:()=>Ka});var _c=Object.hasOwn||((t,e)=>Object.prototype.hasOwnProperty.call(t,e)),Rp=(t,e)=>Ka(t,e,Ka);function Ka(t,e,r=Object.is){if(t===e)return!0;if(!t||typeof t!="object"||!e||typeof e!="object")return!1;for(let i in t)if(_c(t,i)&&(!_c(e,i)||!r(t[i],e[i],r)))return!1;for(let i in e)if(_c(e,i)&&!_c(t,i))return!1;return!0}function S3(t){if(!t||typeof t!="object")return"value is not an object";let{name:e,test:r,decode:i}=t;return typeof e!="string"?"missed name":typeof r!="function"?"missed test function":typeof i!="function"?"missed decode function":!1}function A3(t){let e=S3(t);if(e)throw new Error(`Bad encoding config${t?.name?` "${t.name}"`:""}: ${e}`);let{name:r,test:i,streaming:s,decode:a}=t;return Object.freeze({name:r||"unknown",test:i,streaming:!!s,decode:a})}function jc(t){if(!t)return[];if(!Array.isArray(t))throw new Error("Encodings must be an array");return t.map(A3)}var Qn=class{constructor(){this.listeners=Object.create(null)}on(e,r){return this.listeners[e]={callback:r,next:this.listeners[e]||null},this}once(e,r){return this.on(e,function i(...s){r.apply(this,s),this.off(e,i)})}off(e,r){let i=this.listeners[e]||null,s=null;for(;i!==null;){if(i.callback===r){i.callback=null,s?s.next=i.next:this.listeners[e]=i.next;break}s=i,i=i.next}return this}emit(e,...r){let i=this.listeners[e]||null,s=!1;for(;i!==null;)typeof i.callback=="function"&&i.callback.apply(this,r),s=!0,i=i.next;return s}};var ur=new WeakMap,kn=class extends Qn{constructor(e){super(),ur.set(this,new Map),e&&(this.revoke=r=>{ur.get(this).delete(r),this.emit("revoke",r)})}define(e,r){return ur.get(this).set(e,r),this.emit("define",e,r),r}isDefined(e){return ur.get(this).has(e)}has(e){return ur.get(this).has(e)}get(e){return ur.get(this).get(e)}get names(){return[...ur.get(this).keys()]}get keys(){return ur.get(this).keys()}get values(){return ur.get(this).values()}get entries(){return ur.get(this).entries()}};var _o=new WeakMap,Ya=class extends kn{constructor(){super(!0),_o.set(this,Object.create(null))}define(e,r){if(typeof r!="function")throw new Error("callback is not a function");_o.set(this,Object.freeze({..._o.get(this),[e]:r})),super.define(e,Object.freeze({name:e,callback:r}))}revoke(e){if(this.has(e)){let r={..._o.get(this)};delete r[e],_o.set(this,Object.freeze(r))}super.revoke(e)}get actionMap(){return _o.get(this)}call(e,...r){if(!this.has(e))throw new Error(`action "${e}" doesn't exist`);let{callback:i}=this.get(e);return i(...r)}};var Hp={};Ae(Hp,{localStorageEntry:()=>jp,sessionStorageEntry:()=>L3});function T3(t){let e="__storage_test__"+Math.random(),r;try{r=window[t]}catch{return null}try{r.setItem(e,e),r.removeItem(e)}catch(i){if(!(i instanceof DOMException&&(i.code===22||i.code===1014||i.name==="QuotaExceededError"||i.name==="NS_ERROR_DOM_QUOTA_REACHED")&&r.length!==0))return null}return r}function jk(t){let e=new Map;return e.storage=T3(t),e.getOrCreate=r=>e.get(r)||E3(r,e),e.getOrCreate.available=e.storage!==null,e}var _p=new Map([["session",jk("sessionStorage")],["local",jk("localStorage")]]),L3=_p.get("session").getOrCreate,jp=_p.get("local").getOrCreate;addEventListener("storage",t=>{for(let[,e]of _p)e.storage===t.storageArea&&e.has(t.key)&&e.get(t.key).forceSync()});function E3(t,e){let r=null,i=new Qn,s=(f=e.storage.getItem(t))=>{r!==f&&i.emit("change",r=f)},a={get value(){return this.get()},get(){return r},set(f){e.storage&&(e.storage.setItem(t,f),s())},delete(){e.storage&&(e.storage.removeItem(t),s())},forceSync(){return e.storage&&s(),this.get()},on(f,d){return i.on("change",f),d&&f(r),()=>i.off("change",f)},off(f){i.off("change",f)}};return e.set(t,a),a.forceSync(),a}var Wp=new Set([!0,!1,"auto","disabled","only"]),Hc=new Set,Wc=matchMedia("(prefers-color-scheme:dark)"),Up=jp("discoveryjs:darkmode"),Hk=new Map([["true",!0],["false",!1],["auto","auto"]]),Uc=null;function M3(){for(let t of Hc)t.mode==="auto"&&t.set("auto")}function Wk(t){let e=Hk.has(t)?Hk.get(t):null;if(Uc!==e){Uc=e;for(let r of Hc)r.persistent&&r.mode!=="disabled"&&r.mode!=="only"&&r.set(e!==null?e:"auto")}}Wk(Up.value);Up.on(Wk);Wc.addListener(M3);function Uk(t,e){return(t==="off"||t==="disable"||!Wp.has(t))&&(t="disabled"),t!=="disabled"&&t!=="only"&&e&&Uc!==null&&(t=Uc),t}function $k(t){switch(Wp.has(t)||(t="disabled"),t){case"only":return!0;case"auto":return Wc.matches;default:return t===!0}}function Gk(t,e){return $k(Uk(t,e))}var $c=class{constructor(e,r){this.persistent=r?Up:null,this.handlers=[],this.set(Uk(e,r),!0),Hc.add(this)}subscribe(e,r){let i={fn:e};return this.handlers.push(i),r&&i.fn(this.value,this.mode),()=>{let s=this.handlers.indexOf(i);i=null,s!==-1&&this.handlers.splice(s,1)}}destroy(){Hc.delete(this)}set(e,r){let i=this.value,s=this.mode;Wp.has(e)||(console.warn(`Bad value "${e}" for darkmode, ${r?'fallback to "disabled"':"ignored"}`),e="disabled"),!(!r&&(s==="disabled"||e==="disabled"||s==="only"||e==="only"))&&(this.mode=typeof e=="boolean"?"manual":e,this.value=$k(e),this.mode!=="disabled"&&(this.persistent&&!r&&this.persistent.set(this.mode==="auto"?"auto":this.value),(this.value!==i||this.mode!==s)&&this.handlers.forEach(({fn:a})=>a(this.value,this.mode))))}toggle(e){switch(this.mode){case"auto":this.set(!Wc.matches);break;case"manual":this.set(e&&this.value!==Wc.matches?"auto":!this.value);break}}};var tn=class{static setValue(e,r){if(!e.shouldPublish(r,e.value))return!1;let i=[],s=e.subscriber;for(e.value=r;s!==null;){let{callback:a,thisArg:f}=s;a!==null&&i.push(a.call(f,r,()=>e.unsubscribe(a,f))),s=s.subscriber}return i}constructor(e,r){this.value=e,this.shouldPublish=typeof r=="function"?r:this.shouldPublish,this.subscriber=null}get readonly(){let e=this;return{subscribe:this.subscribe.bind(this),subscribeSync:this.subscribeSync.bind(this),unsubscribe:this.unsubscribe.bind(this),get value(){return e.value}}}subscribe(e,r){return this.subscriber={callback:e,thisArg:r,subscriber:this.subscriber},()=>this.unsubscribe(e,r)}subscribeSync(e,r){let i=this.subscribe(e,r);return e.call(r,this.value,i),i}unsubscribe(e,r){let i=this,s=this.subscriber;for(;s!==null;){if(s.callback===e&&s.thisArg===r){s.callback=null,s.thisArg=null,i.subscriber=s.subscriber;break}i=s,s=s.subscriber}}shouldPublish(e,r){return e!==r}set(e){return this.constructor.setValue(this,e)!==!1}asyncSet(e){let r=this.constructor.setValue(this,e);return r===!1?Promise.resolve(!1):Promise.all(r).then(i=>i!==!1)}};var Vk=Symbol("config"),D3={name:"not-found",render:(t,{name:e})=>{t.style.cssText="color:#a00",t.innerText=`Page \`${e}\` not found`}},Qa=class extends kn{constructor(e){if(super(),this.host=e,this.lastPage=null,this.lastPageId=null,this.pageOverscrolled=new tn(!1),this.setPageOverscroll=()=>{},typeof IntersectionObserver=="function"){let r=U("div",{style:"position:absolute"}),i=e.dom.content,s=null,a=()=>{};s&&(s.disconnect(),s=null),i&&(s=new IntersectionObserver(f=>this.pageOverscrolled.set(!f[f.length-1].isIntersecting),{root:i}),this.setPageOverscroll=f=>{s.unobserve(r),a(),f&&(f.prepend(r),s.observe(r),a=this.pageOverscrolled.subscribeSync(d=>f.classList.toggle("page_overscrolled",d)))})}}define(e,r,i){super.define(e,Object.freeze({name:e,render:typeof r=="function"?r.bind(this.host.view):(s,a,f)=>this.host.view.render(s,r,a,f),options:Object.freeze({...i}),[Vk]:r}))}render(e,r,i,s){let a=Date.now(),f=this.get(r),d;f||(f=this.get("not-found")||D3,i={name:r});let{reuseEl:p,init:g,keepScrollOffset:y=!0}=f.options||{},x=this.lastPage!==r,w=s&&s.id,k=this.lastPageId!==w,A=p&&!x?e:document.createElement("article"),M=e.parentNode;this.lastPage=r,this.lastPageId=w,A.id=e.id,A.classList.add("page","page-"+r),x&&typeof g=="function"&&g(A);try{d=f.render(A,i,s)}catch(D){d=this.host.view.render(A,"alert-danger",String(D)+" (see details in console)"),this.host.log("error","Page render error:",D)}return(x||k||!y)&&(M.scrollTop=0),A!==e&&(e.replaceWith(A),this.setPageOverscroll(A)),{pageEl:A,config:f[Vk],renderState:Promise.resolve(d).finally(()=>this.host.log("perf",`Page "${f.name}" rendered in ${Date.now()-a}ms`))}}};var $p=Object.freeze({}),{hasOwnProperty:N3}=Object,Gp=new WeakMap,Vp=new WeakMap,Xk=new WeakMap,O3=new Set(["view","when","data","whenData","postRender","className"]);function ni(t,e){return Xk.set(t,e),t}function Jk(t,e,r,i){if(!i.has(e)){if(t.fragmentEls.has(e))for(let s of t.fragmentEls.get(e)){let a=r.children.find(f=>f.view===s);a?r=a:r.children.push(r={node:null,parent:r,view:s,children:[]})}if(Vp.has(e)?r.children.push(r={node:e,parent:r,viewRoot:Vp.get(e),children:[]}):t.viewEls.has(e)&&r.children.push(r={node:e,parent:r,view:t.viewEls.get(e),children:[]}),e.nodeType===1)for(let s=e.firstChild;s;s=s.nextSibling)Jk(t,s,r,i)}}function P3(t){return{name:!1,options:$p,render(e,r){if(e.className="discovery-buildin-view-render-error",e.dataset.type=r.type,e.textContent=r.reason,"config"in r){let i=e.appendChild(document.createElement("span"));i.className="toggle-config",i.textContent="show config...",i.addEventListener("click",()=>{e.classList.toggle("expanded")?(i.textContent="hide config...",t.render(e,{view:"struct",expanded:1},r.config)):(i.textContent="show config...",e.lastChild.remove())})}}}}function Kk(t,e,r,i,s,a,f,d){return!N3.call(r,t)||r[t]===void 0||e.host.queryBool(r[t]===!0?"":r[t],i,s)?!0:(e.viewEls.set(d,{skipped:t,config:r,inputData:a,inputDataIndex:f,data:i,context:s}),!1)}function Zk(t,e,r,i){let s=e;return typeof s=="string"&&s.startsWith("=")&&(s=t.queryFn(s.slice(1))),typeof s=="function"&&(s=s(r,i)),typeof s=="string"&&(s=s.trim().split(/\s+/)),Array.isArray(s)&&(s=s.map(a=>typeof a=="function"?a(r,i):a).filter(Boolean),s.length)?s:null}function Yk(t,e,r,i,s,a,f,d,p){let{tag:g}=e.options,y=g===!1||g===null?document.createDocumentFragment():document.createElement(g||"div"),x=Promise.resolve(e.render(y,s,a,f));return typeof i.postRender=="function"&&(x=x.then(()=>i.postRender(y,i,a,f))),x.then(function(){let w={config:i,props:s,inputData:d,inputDataIndex:p,data:a,context:f};if(y.nodeType!==Node.DOCUMENT_FRAGMENT_NODE){if(t.viewEls.set(y,w),e.name&&y.classList.add(`view-${e.name}`),i.className){let k=Zk(t.host,i.className,a,f);k!==null&&y.classList.add(...k)}s.tooltip&&Kp(t.host,y,s.tooltip,a,f)}else for(let k of y.childNodes)t.fragmentEls.has(k)?t.fragmentEls.get(k).unshift(w):t.fragmentEls.set(k,[w]);r.replaceWith(y)})}function I3(t,e){return{name:e,normalizeConfig:t.normalizeConfig.bind(t),ensureValidConfig:t.ensureValidConfig.bind(t),composeConfig:t.composeConfig.bind(t),propsFromConfig:t.propsFromConfig.bind(t),render:t.render.bind(t),listLimit:t.listLimit.bind(t),renderList:t.renderList.bind(t),maybeMoreButtons:t.maybeMoreButtons.bind(t),renderMoreButton:t.renderMoreButton.bind(t),tooltip(r,i,s,a){r&&r.nodeType===1?Kp(t.host,r,i,s,a):t.host.log("warn","A tooltip can be attached to a HTML element only")}}}function Kp(t,e,r,i,s){e.classList.add("discovery-view-has-tooltip"),Gp.set(e,[r,i,s]),t.view.tooltip||(t.view.tooltip=B3(t))}function Qk(t){return t&&!Array.isArray(t)&&typeof t!="string"&&typeof t!="function"&&!t.view}function B3(t){let e=null,r=new t.view.Popup({className:"discovery-buildin-view-tooltip",hoverTriggers:".discovery-view-has-tooltip",position:"pointer",showDelay(i){let[s]=Gp.get(i)||[];if(Qk(s))return s.showDelay},render(i,s){let[a,f,d]=Gp.get(s)||[],p="pointer",g="natural",y=3,x=3,w=a;return e!==null&&(i.classList.remove(...e),e=null),Qk(a)&&(e=Zk(t,a.className,f,d),e!==null&&i.classList.add(...e),p=a.position||p,g=a.positionMode||g,Number.isFinite(a.pointerOffsetX)&&(y=a.pointerOffsetX),Number.isFinite(a.pointerOffsetY)&&(x=a.pointerOffsetY),w=a.content),r.position=p,r.positionMode=g,r.pointerOffsetX=y,r.pointerOffsetY=x,w?t.view.render(i,w,f,d):t.view.render(i,{view:t.view.defaultRenderErrorRenderer.render,reason:"Element marked as having a tooltip but related data is not found"})}});return r}function eC(t,e,r,i,s,a){if(Array.isArray(r))return Promise.all(r.map(g=>eC(t,e,g,i,s,a)));let f=i&&typeof s=="number"?i[s]:i,d=null;switch(typeof r.view){case"function":d={name:!1,options:$p,render:r.view};break;case"string":if(r.view==="render"){let{config:g="",context:y=""}=r;d={name:!1,options:{tag:!1},render:(x,w,k)=>{let A=g!==""?t.host.query(g,f,a):k,M=t.host.query(y,a,f);return t.render(x,A,k!==A?k:f,M)}}}else if(r.view.startsWith("preset/")){let g=r.view.substr(7);d={name:!1,options:{tag:!1},render:t.host.preset.isDefined(g)?t.host.preset.get(g).render:()=>{}}}else d=t.get(r.view);break}if(!d){let g=typeof r.view=="string"?"View `"+r.view+"` is not found":"Render is not a function";t.host.log("error",g,r),d=t.defaultRenderErrorRenderer,r={type:"config",reason:g,config:r}}e||(e=document.createDocumentFragment());let p=e.appendChild(document.createComment(""));return Kk("when",t,r,f,a,i,s,p)?("data"in r?Promise.resolve(t.host.query(r.data,f,a)):Promise.resolve(f)).then(y=>Kk("whenData",t,r,y,a,i,s,p)?Yk(t,d,p,r,t.propsFromConfig(r,y,a),y,a,i,s):null).catch(y=>{Yk(t,t.defaultRenderErrorRenderer,p,$p,{type:"render",reason:String(y),config:r}),t.host.log("error","View render error:",y)}):Promise.resolve()}var Xa=class extends kn{constructor(e){super(),this.host=e,this.defaultRenderErrorRenderer=P3(this),this.viewEls=new WeakMap,this.fragmentEls=new WeakMap}define(e,r,i){super.define(e,Object.freeze({name:e,options:Object.freeze({...i}),render:typeof r=="function"?r.bind(I3(this,e)):(s,a,f,d)=>this.render(s,r,f,d)}))}normalizeConfig(e){if(!e)return null;if(Array.isArray(e))return e.reduce((r,i)=>r.concat(this.normalizeConfig(i)||[]),[]);if(typeof e=="string"){let[,r,i,s]=e.match(/^(\S+?)([:{])((?:.|\s)+)$/)||[];if(r){if(i==="{")try{return ni(this.host.queryToConfig(r,i+s),e)}catch(a){return ni(this.badConfig(e,a),e)}return ni({view:r,data:s},e)}return ni({view:e},e)}else if(typeof e=="function")return ni({view:e},e);return e}badConfig(e,r){let i=r&&r.message||"Unknown error";return this.host.log("error",i,{config:e,error:r}),{view:this.defaultRenderErrorRenderer.render,type:"config",reason:i,config:e}}ensureValidConfig(e){return Array.isArray(e)?e.map(r=>this.ensureValidConfig(r)):!e||!e.view?this.badConfig(e,new Error(e?"Option `view` is missed":"Config is not a valid value")):e}composeConfig(e,r){return e=this.normalizeConfig(e),r=this.normalizeConfig(r),e&&r?Array.isArray(e)?e.map(i=>ni({...i,...r},[i,r])):ni({...e,...r},[e,r]):e||r}propsFromConfig(e,r,i){let s=ni({},e);for(let[a,f]of Object.entries(e))O3.has(a)||(s[a]=typeof f=="string"&&f.startsWith("=")?this.host.query(f.slice(1),r,i):f);return s}render(e,r,i,s,a){return eC(this,e,this.ensureValidConfig(this.normalizeConfig(r)),i,a,s)}listLimit(e,r){return e===!1?!1:!e||isNaN(e)?r:Math.max(parseInt(e,10),0)||r}renderList(e,r,i,s,a=0,f=!1,d){f===!1&&(f=i.length);let p=Promise.all(i.slice(a,a+f).map((g,y,x)=>this.render(e,r,i,{...s,index:a+y,array:i,sliceIndex:y,slice:x},a+y)));return this.maybeMoreButtons(d||e,null,i.length,a+f,f,(g,y)=>this.renderList(e,r,i,s,g,y,d)),p}maybeMoreButtons(e,r,i,s,a,f){let d=i-s,p=d<=0?null:document.createElement("span");return d>a&&this.renderMoreButton(p,"Show "+a+" more...",()=>f(s,a)),d>0&&this.renderMoreButton(p,"Show all the rest "+d+" items...",()=>f(s,1/0)),p!==null&&(p.className="more-buttons",e.insertBefore(p,r)),p}renderMoreButton(e,r,i){let s=document.createElement("button");s.className="more-button",s.innerHTML=r,s.addEventListener("click",()=>{e.remove(),i()}),e.appendChild(s)}attachTooltip(e,r,i,s){Kp(this.host,e,r,i,s)}adoptFragment(e,r){let i=this.fragmentEls.get(r);if(i)for(let s of e.childNodes)this.fragmentEls.set(s,i)}setViewRoot(e,r,i){Vp.set(e,{name:r,...i})}getViewTree(e){let r=new Set(e||[]),i=[];return Jk(this,this.host.dom.container,{parent:null,children:i},r),i}getViewStackTrace(e){let{container:r}=this.host.dom;if(!r||!(e instanceof Node)||!r.contains(e))return null;let i=[],s=e;for(;s!==r;)this.viewEls.has(s)&&i.push(this.viewEls.get(s)),s=s.parentNode;return i.length===0?null:i.reverse()}getViewConfigTransitionTree(e){let r=Xk.get(e)||[];return Array.isArray(r)||(r=[r]),{value:e,deps:r.map(this.getViewConfigTransitionTree,this)}}};var Ja=class extends kn{constructor(e){super(),this.view=e}define(e,r){r=JSON.parse(JSON.stringify(r)),super.define(e,Object.freeze({name:e,render:(i,s,a,f)=>this.view.render(i,r,a,f),config:r}))}render(e,r,i,s){let a=this.get(r);if(!a){let f="Preset `"+r+"` is not found";console.error(f,r);let d=e.appendChild(document.createElement("div"));return d.className="discovery-buildin-view-config-error",d.textContent=f,Promise.resolve()}return a.render(e,null,i,s)}};var Xp={};Ae(Xp,{getBoundingRect:()=>cn,getOffsetParent:()=>Za,getOverflowParent:()=>el,getPageOffset:()=>Yp,getViewportRect:()=>Qp});var{documentElement:jo}=document,tC=document.compatMode==="CSS1Compat";function Za(t){let e=t.offsetParent;for(;e!==null&&e!==jo&&getComputedStyle(e).position==="static";)e=e.offsetParent;return e||jo}function el(t){let e=t.parentNode;for(;e!==null&&e!==jo&&getComputedStyle(e).overflow==="visible";)e=e.parentNode;return e||jo}function Yp(t){let e=0,r=0;if(t&&t.getBoundingClientRect){let i=t.getBoundingClientRect();e=-i.top,r=-i.left}else if(tC)e=window.pageYOffset||jo.scrollTop,r=window.pageXOffset||jo.scrollLeft;else{let{body:i}=document;t!==i&&(e=i.scrollTop-i.clientTop,r=i.scrollLeft-i.clientLeft)}return{left:r,top:e}}function cn(t,e){let r=Yp(e),i=0,s=0,a=0,f=0;return t&&t.getBoundingClientRect&&({top:i,left:s,right:a,bottom:f}=t.getBoundingClientRect()),{top:i+r.top,left:s+r.left,right:a+r.left,bottom:f+r.top,width:a-s,height:f-i}}function Qp(t,e){let r=tC?document.documentElement:document.body,{top:i,left:s}=t===r&&!e?Yp():cn(t,e),a,f;return!t||t===window?(a=window.innerWidth||0,f=window.innerHeight||0):(i+=t.clientTop,s+=t.clientLeft,a=t.clientWidth,f=t.clientHeight),{top:i,left:s,right:s+a,bottom:i+f,width:a,height:f}}var Jp={};Ae(Jp,{pointerXY:()=>ri});var nC=new tn({x:0,y:0},(t,e)=>t.x!==e.x||t.y!==e.y);document.addEventListener("pointermove",({x:t,y:e})=>nC.set({x:t,y:e}),On);var ri=nC.readonly;function q3(t){let e=typeof t;return t!=null&&(e==="object"||e==="function")}function Dr(t,e){if(typeof e=="number"&&(e={wait:e}),!q3(e))return t;let{wait:r}=e,i,s,a,f,d,p,g=0,y=!1,x=!1,w=!0;if(typeof t!="function")throw new TypeError("Expected a function");r=Math.max(0,Number(r)||0),y=!!e.leading,x="maxWait"in e,a=x?Math.max(Number(e.maxWait)||0,r):a,w="trailing"in e?!!e.trailing:w;function k(F){let se=i,W=s;return i=s=void 0,g=F,f=t.apply(W,se),f}function A(F,se){return setTimeout(F,se)}function M(F){clearTimeout(F)}function D(F){return g=F,d=A(E,r),y?k(F):f}function O(F){let se=F-p,W=F-g,J=r-se;return x?Math.min(J,a-W):J}function L(F){let se=F-p,W=F-g;return p===void 0||se>=r||se<0||x&&W>=a}function E(){let F=Date.now();if(L(F))return N(F);d=A(E,O(F))}function N(F){return d=void 0,w&&i?k(F):(i=s=void 0,f)}function B(){d!==void 0&&M(d),g=0,i=p=s=d=void 0}function I(){return d===void 0?f:N(Date.now())}function R(){return d!==void 0}function j(...F){let se=Date.now(),W=L(se);if(i=F,s=this,p=se,W){if(d===void 0)return D(p);if(x)return d=A(E,r),k(p)}return d===void 0&&(d=A(E,r)),f}return j.cancel=B,j.flush=I,j.pending=R,j}var Zp=0,rC=[{view:"badge",when:'view.data != parent.(view or viewRoot).data or "data" in view.config',data:{text:"D"},tooltip:'text:"Data value was changed"'},{view:"badge",when:"view.context != parent.(view or viewRoot).context",data:{text:"C"},tooltip:'text:"Context value was changed"'}];function z3(t){let e=el(t),r=cn(t,e),i=0,s=0,{scrollTop:a,scrollLeft:f,clientWidth:d,clientHeight:p}=e,g=a+i,y=f+s,x=f+d,w=a+p,k=a+r.top,A=f+r.left,M=A+r.width,D=a,O=f;(k<g||k>w)&&(D=k-i),A<y?O=A-s:M>x&&(O=Math.max(A,f-(M-x))-s),e?.scrollTo(O,D)}function iC(){Zp=0}function oC(t,{selectTreeViewLeaf:e,detailsSidebarLeafExpanded:r}){return{view:"tree",when:"#.selectedView",data:"$[0]",className:"sidebar",limitLines:!1,itemConfig:{collapsible:"=not viewRoot",expanded:i=>i.viewRoot||r.has(i),onToggle:(i,s,a)=>i?r.add(a):r.delete(a)},item:{view:"switch",content:[{when:"viewRoot",content:{view:"block",className:"view-root",content:"text:viewRoot.name"}},{when:"$ = #.selectedView",content:[{view:"block",className:[i=>i.view?.skipped?"skipped":!1,"selected"],content:'text:view.config.view or "#root" | is string ?: "\u0192n"',postRender(i){requestAnimationFrame(()=>{t.querySelector(".sidebar").scrollTop=Zp,z3(i)})}},...rC]},{content:[{view:"link",className:i=>i.view?.skipped?"skipped":!1,data:'{ text: view.config.view or "#root" | is string ?: "\u0192n", href: false, view, self: $ }',onClick(i,s){Zp=t.querySelector(".sidebar")?.scrollTop||0,e(s.self)}},...rC]}]}}}var sC={view:"block",className:["content","props-config"],data:"#.view | view or viewRoot",content:[{view:"block",className:"content-section skip",when:"skipped",content:'block{ content: "badge:{ text: skipped }" }'},{view:"block",className:"content-section render",when:"config.view is not string",content:'source:{ content: config.view + "", syntax: "js" }'},{view:"block",when:"props != undefined",className:"content-section props",content:{view:"struct",expanded:2,data:"props"}},{view:"block",className:"content-section config",content:[{view:"struct",expanded:1,data:"config"},{view:"tree",data:(t,e)=>e.host.view.getViewConfigTransitionTree(t.config).deps,whenData:!0,expanded:3,children:"deps",item:{view:"struct",expanded:1,data:"value"}}]}]};function R3(t){t=t.replace(/^(?:\s*[\n]+)+?([ \t]*)/,"$1").trimRight(),t=t.replace(/\n[ \t]+\n/g,`

`);let e=t.split(/\n+/),r=+(t.match(/^\s/)===null),i=1e3;for(var s=r;s<e.length;s++){let a=e[s].match(/^\s*/);if(a[0].length<i&&(i=a[0].length),i==0)break}return i>0&&(t=t.replace(new RegExp("(^|\\n) {"+i+"}","g"),"$1")),t}var aC={view:"list",className:"data-flow-transitions",limit:1,when:".[view]",data:`
        [null]    // to show empty list on first render
        + .[view] // filter viewRoot
        .(
            $parent;
            $parentName: parent.view.config.view;
            $queryData: view | inputDataIndex != undefined ? inputData[inputDataIndex] : inputData;

            view | [
                ...'data' in config ? { inputData: $queryData, transition: config.data, name: config.view, view: $, $parent } : [],
                ...inputDataIndex != undefined ? { inputData, transition: \`$[\${inputDataIndex}]\`, name: \`\${$parentName} \u2192 \${config.view}\`, view: $, $parent } : []
            ]
        )
    `,whenData:"size() > 1",itemConfig:{when:!0},item:[{view:"block",className:"root-data",when:"inputData = ..parent.viewRoot[].data",content:'badge:"Root data"'},{view:"struct",data:"inputData"},{view:"block",className:"data-flow-transition",content:[{view:"switch",content:[{when:"transition is (string or undefined)",content:{view:"context",data(t){return{content:R3(t.transition),refs:[]}},content:{view:"source",data:`{
                                    ...,
                                    syntax: "jora",
                                    lineNum: false
                                }`}}},{content:{view:"struct",data:"transition"}}]},{view:"block",className:"view-name",content:"text:name"}]}]},lC={view:"block",className:"content-section data",data:"#.view",content:[{view:"context",data:"..parent",content:aC},{view:"context",content:{...aC,limit:!1}},{view:"block",className:"root-data",when:"view or viewRoot | data = ([@] + @..parent).viewRoot[].data",content:'badge:"Root data"'},{view:"struct",expanded:1,data:"view or viewRoot | data"}]};function F3(t,e){if(t===null)return!0;for(let r of["top","left","width","height"])if(t[r]!==e[r])return!0;return!1}var eg=t=>{let e=!1,r=null,i=null,s=null,a=null,f,d=new Set,p=new Map,g=new Map,y=U("div","cancel-hint view-alert view-alert-warning"),x=U("div",{class:"discovery-view-inspector-overlay",onclick:()=>O(i&&!s?i:null)},[y]),w=Dr(()=>{if(!e||s!==null)return;let I=t.view.getViewTree([N.el]),R=new Set([...g.keys()]);(function F(se,W){for(let J of se){if(!J.node||!J.view&&!J.viewRoot){J.children.length&&F(J.children,W);continue}let T=cn(J.node,W),ne=g.get(J.node)||null;ne===null?(ne={el:W.appendChild(U("div",J.viewRoot?"overlay view-root":"overlay")),box:null},J.node.nodeType===1&&(ne.el.style.zIndex=getComputedStyle(J.node).zIndex),J.viewRoot&&J.viewRoot.inspectable!==!1&&(ne.el.dataset.inspectable=!0),g.set(J.node,ne),p.set(ne.el,J)):R.delete(J.node),F3(ne.box,T)&&(ne.el.style.top=`${T.top}px`,ne.el.style.left=`${T.left}px`,ne.el.style.width=`${T.width}px`,ne.el.style.height=`${T.height}px`,ne.box=T),J.children.length&&(J.node.nodeType===1&&(ne.el.style.overflow=getComputedStyle(J.node).overflow!=="visible"?"hidden":"visible"),F(J.children,ne.el))}})(I,x);for(let F of R)g.get(F).el.remove(),g.delete(F);k()},{maxWait:0,wait:50}),k=()=>{let{x:I,y:R}=ri.value;E([...t.dom.container.parentNode.elementsFromPoint(I|0,R|0)||[]].find(j=>p.has(j))||null)},A=I=>{(I.key==="Escape"||I.keyCode===27||I.which===27)&&t.inspectMode.set(!1)},M=()=>{e||(e=!0,document.addEventListener("scroll",w,On),document.addEventListener("keydown",A,!0),ri.subscribe(w),f=setInterval(w,500),t.dom.container.append(x),w())},D=()=>{e&&(e=!1,clearInterval(f),document.removeEventListener("scroll",w,On),document.removeEventListener("keydown",A,!0),ri.unsubscribe(w),B=!1,delete y.dataset.alt,x.remove(),L())},O=I=>{if(s=I||null,I){let{innerWidth:R,innerHeight:j}=window,{left:F,top:se,width:W,height:J}=N.el.getBoundingClientRect();N.el.style.top=`${se}px`,N.el.style.left=`${F}px`,N.el.style.right=`${R-(F+W)}px`,N.el.style.bottom=`${j-(se+J)}px`,N.frozen=!0,requestAnimationFrame(()=>{N.show(),N.freeze()}),delete y.dataset.alt}else B?t.inspectMode.set(!1):(d.clear(),iC(),L(),w())},L=()=>{r&&r.classList.remove("hovered"),r=null,i=null,s=null,N.hide()},E=I=>{if(I===r)return;if(r!==null&&r.classList.remove("hovered"),r=I,I===null){a=setTimeout(L,100);return}I.classList.add("hovered");let R=p.get(I)||null;if(R===null){i=null;return}i!==null&&R.view===i.view||(i=R,clearTimeout(a),N.show())},N=new t.view.Popup({className:"discovery-inspect-details-popup",position:"pointer",hideIfEventOutside:!1,hideOnResize:!1,render(I){let R=s||i,j=[],F=R;for(;F!==null&&(F.view||F.viewRoot);)F!==R&&s!==null&&d.add(F),j.unshift(F),F=F.parent;return t.view.render(I,{view:"context",modifiers:[oC(I,{selectTreeViewLeaf:O,detailsSidebarLeafExpanded:d})],content:{view:"context",modifiers:{view:"block",className:"toolbar",content:[{view:"toggle-group",className:"stack-view-chain",name:"view",data:".({ value: $ })",value:"=$[-1].value",toggleConfig:{className:[se=>se.value.viewRoot?"view-root":!1,se=>se.value.view&&se.value.view.skipped?"skipped":!1],content:['text:value | viewRoot.name or view.config.view | is string ?: "\u0192n"']}},{view:"button",when:s!==null,content:'text:"Close inspector"',onClick(){t.inspectMode.set(!1)}}]},content:[sC,{view:"block",className:["content","data-context"],content:[lC,{view:"block",className:"content-section context",data:"$[-1] | view or viewRoot",content:{view:"struct",expanded:1,data:"context"}}]}]}},j,{selectedView:s,host:t})}});t.action.define("startInspect",M),t.action.define("stopInspect",D),t.inspectMode.subscribeSync(I=>I?M():D());let B=!1};var cu={};Ae(cu,{alerts:()=>hS,autoLink:()=>pS,badges:()=>mS,block:()=>$C,button:()=>cC,checkbox:()=>hC,checkboxList:()=>fC,column:()=>GC,columns:()=>VC,contentFilter:()=>gC,context:()=>O1,dropdown:()=>vC,editors:()=>WC,expand:()=>YC,headers:()=>ES,hstack:()=>XC,html:()=>DS,image:()=>OS,imagePreview:()=>IS,indicator:()=>qS,input:()=>xC,link:()=>RS,listItem:()=>JC,lists:()=>ZC,markdown:()=>FS,menu:()=>CC,menuItem:()=>AC,navButton:()=>LC,pageHeader:()=>tS,popup:()=>cS,progressbar:()=>MC,section:()=>fS,select:()=>NC,signature:()=>_1,source:()=>x1,struct:()=>wA,switch:()=>I1,tab:()=>BC,table:()=>CA,tableCell:()=>AA,tableRow:()=>SA,tabs:()=>PC,text:()=>C1,textMatch:()=>E1,textNumeric:()=>D1,tocSection:()=>dS,toggle:()=>qC,toggleGroup:()=>zC,tree:()=>EA,treeItem:()=>MA});var tl=(t,e)=>({demo:{view:t,onClick:Function('return () => alert("Hello world!")')(),data:{text:"Button"}},examples:[{title:"Variations",demo:e.map(r=>`${r}:{ text: "${r}" }`)},{title:"Disabled state",demo:e.map(r=>({view:r,disabled:!0,data:{text:r}}))},{title:"Button as a link",demo:{view:"button",data:{text:"Click me",href:"#url",external:!0}}}]});function cC(t){function e(r,i,s,a){let{content:f,disabled:d=!1,onClick:p}=i,{text:g="",href:y,external:x}=s||{};if(r.classList.add("view-button"),t.query(d,s,a)?r.disabled=!0:typeof p=="function"?(r.addEventListener("click",()=>p(r,s,a)),r.classList.add("onclick")):y&&r.addEventListener("click",()=>U("a",{href:y,target:x?"_blank":""}).click()),f)return t.view.render(r,f,s,a);r.textContent=g}t.view.define("button",e,{tag:"button",usage:tl}),t.view.define("button-primary",e,{tag:"button",usage:tl}),t.view.define("button-danger",e,{tag:"button",usage:tl}),t.view.define("button-warning",e,{tag:"button",usage:tl})}var uC={demo:{view:"checkbox-list",checkbox:{content:"text"},data:["one","two","three"]}};function fC(t){t.view.define("checkbox-list",function(e,r,i,s){let{name:a="filter",checkbox:f,checkboxValue:d="$",emptyText:p,limit:g,onChange:y,onInit:x}=r,w=new Set;if(p!==!1&&p!==""&&e.setAttribute("emptyText",p||"Empty list"),!Array.isArray(i)&&i&&(i=[i]),Array.isArray(i))return t.view.renderList(e,this.composeConfig({view:"checkbox",...f,onInit:(k,A,M,D)=>{k&&w.add(t.query(d,M,D))},onChange:(k,A,M,D)=>{let O=w.size,L=t.query(d,M,D);k?w.add(L):w.delete(L),O!==w.size&&typeof y=="function"&&y([...w],a)}}),i,s,0,t.view.listLimit(g,25)).then(()=>{typeof x=="function"&&x([...w],a)})},{usage:uC})}var dC={demo:{view:"checkbox",content:'text:"checkbox caption"'},examples:[{title:"Checked state",beforeDemo:"Checked state is set up with `checked` property. Its value can be a query",demo:[{view:"checkbox",checked:!0,content:'text:"should be checked"'},{view:"checkbox",checked:"1 > 5",content:`text:"shouldn't be checked"`},{view:"checkbox",checked:"1 < 5",content:'text:"should be checked"'}]},{title:"Readonly checkbox",demo:{view:"checkbox",readonly:!0,content:'text:"checkbox caption"'}},{title:"On change",demo:{view:"checkbox",onChange:new Function("return (value, name, data, context) => alert(`Changed to ${value}!`)")(),content:'text:"click me!"'}}]};function hC(t){function e(r,i,s,a,f,d){if(r===null)return;let p=f?{...a,[f]:d.checked}:a;return r.innerHTML="",t.view.render(r,i,s,p)}t.view.define("checkbox",function(r,i,s,a){let{name:f,checked:d,readonly:p,content:g,onInit:y,onChange:x}=i,w=r.appendChild(U("input")),k=g?r.appendChild(U("span","view-checkbox__label")):null;return w.type="checkbox",w.checked=d!==void 0?t.queryBool(d,s,a):!!a[f],w.readOnly=p,w.addEventListener("click",A=>{p&&A.preventDefault()}),w.addEventListener("change",()=>{typeof x=="function"&&(x(w.checked,f,s,a),e(k,g,s,a,f,w))}),typeof y=="function"&&y(w.checked,f,s,a),e(k,g,s,a,f,w)},{tag:"label",usage:dC})}var pC={demo:{view:"content-filter",data:["foo","bar","baz"],content:{view:"list",data:".[$ ~= #.filter]"}},examples:[{title:"Using with text-match",demo:{view:"content-filter",data:[{name:"foo"},{name:"bar"},{name:"baz"}],name:"customName",content:{view:"list",data:".[name ~= #.customName]",item:"text-match:{ text: name, match: #.customName }"}}}]};function gC(t){t.view.define("content-filter",function(e,r,i,s){let{name:a="filter",type:f="regexp",placeholder:d,content:p,onInit:g,onChange:y}=r;return t.view.render(e,{view:"context",modifiers:{view:"input",name:a,type:f,placeholder:d||"Filter"},content:{view:"block",className:"content",content:p,onInit:g,onChange:y}},i,s)},{usage:pC})}var mC={demo:{view:"context",modifiers:{view:"dropdown",name:"demo",value:{foo:"two",bar:"hello"},resetValue:{foo:"one",bar:""},caption:"text:`${#.demo.foo} / ${#.demo.bar}`",content:[{view:"select",name:"foo",data:["one","two","three","four"]},{view:"input",name:"bar"}]},content:[{view:"block",content:'text:"Modified context (see values in \\"demo\\" section):"'},{view:"struct",expanded:1,data:"#"}]}};var{hasOwnProperty:yC}=Object.prototype;function _3(t,e){if(!t||!e||typeof t!="object"||typeof e!="object")return t===e;for(let r in t)if(yC.call(t,r)&&t[r]!==e[r])return!1;for(let r in e)if(yC.call(e,r)&&t[r]!==e[r])return!1;return!0}function vC(t){t.view.define("dropdown",function(e,r,i,s){function a(I,R){return typeof M=="function"?M(I,R):_3(I,R)}function f(){return N.innerHTML="",t.view.render(N,k||"text",i,{...s,[g||"__self"]:L})}function d(I){L=I,typeof O=="function"&&O(L,g,i,s),E.hide(),f()}function p(I,R){if(B){let j={changed:!a(I,R)};B.innerHTML="",t.view.render(B,[{view:"button-primary",disabled:"=not changed",content:'text:"Apply"',onClick(F,se,W){d(W)}},{view:"button",when:()=>y&&!a(y,L),content:'text:"Reset"',onClick(){d(y)}},{view:"button",disabled:"=not changed",content:'text:"Cancel"',onClick(){E.hide()}}],j,R)}}let{name:g,resetValue:y,value:x,placeholder:w,caption:k,content:A,compare:M,onInit:D,onChange:O}=r,L="value"in r?x:s[g],E=null,N=e.appendChild(document.createElement("div")),B;return w&&(e.dataset.placeholder=w),e.tabIndex=0,e.addEventListener("click",()=>{E===null&&(E=new t.view.Popup({className:"view-dropdown-popup"}));let I={...L},R;E.toggle(e,j=>t.view.render(j,[{view:"block",className:"content",content:t.view.composeConfig(A,{onInit(F,se){I[se]=F},onChange(F,se){I[se]=F,p(R,I)}})},{view:"block",className:"confirm",postRender(F){B=F}}],i,{...s,...L}).then(()=>{R={...I},p(R,I)}))}),N.className="view-dropdown__caption",typeof D=="function"&&D(L,g,i,s),f()},{usage:mC})}function j3(t,e){try{return new RegExp("((?:"+t+")+)",e)}catch{}return new RegExp("((?:"+t.replace(/[\[\]\(\)\?\+\*\{\}\\]/g,"\\$&")+")+)",e)}function nl(t,e="i"){let r=j3(t,e);return r.rawSource=t,r}var bC=new Function("return (value) => alert(`Changed to ${value}!`)")(),wC={examples:[{title:"Input with value",demo:{view:"input",value:'"value"'}},{title:"Input with placeholder",demo:{view:"input",placeholder:"placeholder"}},{title:"Input type number with min and max",demo:{view:"input",htmlType:"number",htmlMin:10,htmlMax:20}},{title:"Input with onChange",demo:{view:"input",onChange:bC}},{title:"Input with onChange debounced",demo:{view:"input",onChange:bC,debounce:300}}]};function xC(t){let e={regexp:r=>r?nl(r):null,text:r=>r};t.view.define("input",function(r,i,s,a){let{name:f,value:d,type:p="text",placeholder:g,onInit:y,onChange:x,htmlType:w="text",htmlMin:k,htmlMax:A,debounce:M}=i,D=e[p]||e.text,O=r.appendChild(document.createElement("input")),L=d?t.query(d,s,a):a[f];typeof L!="string"&&(L=""),O.type=w,O.value=L,O.placeholder=[g||"",D!==e.text?"("+p+")":""].filter(Boolean).join(" "),typeof k<"u"&&(O.min=k),A&&(O.max=A),O.addEventListener("input",Dr(()=>{let E=O.value.trim();L!==E&&(L=E,typeof x=="function"&&x(D(E),f,s,a))},M)),typeof y=="function"&&y(D(O.value.trim()),f,s,a)},{usage:wC})}var H3=new Function("return (value) => alert(`Changed to ${value.text}!`)")(),kC={demo:{view:"menu",data:[{text:"one",href:"#"},{text:"two",href:"#"},{text:"three",href:"#"}]},examples:[{title:"With limit",demo:{view:"menu",data:[{text:"one",href:"#"},{text:"two",href:"#"},{text:"three",href:"#"}],limit:2}},{title:"With custom item",demo:{view:"menu",data:[{text:"one",href:"#"},{text:"two",href:"#"},{text:"three",href:"#"}],item:"h1:text"}},{title:"On chage handler",demo:{view:"menu",onChange:H3,data:[{text:"one",href:"#"},{text:"two",href:"#"},{text:"three",href:"#"}]}}]};function CC(t){t.view.define("menu",function(e,r,i,s){let{name:a="filter",item:f,itemConfig:d,limit:p,emptyText:g,onClick:y,onInit:x,onChange:w}=r;if(g!==!1&&g!==""&&e.setAttribute("emptyText",g||"No items"),Array.isArray(i)){let k=this.composeConfig({view:"menu-item",content:f,onClick:typeof y=="function"?y:typeof w=="function"?A=>w(A,a):void 0},d);return t.view.renderList(e,k,i,s,0,t.view.listLimit(p,25)).then(()=>{typeof x=="function"&&x(t.query(".[selected].pick()",i,s),a)})}},{usage:kC})}var SC={demo:{view:"menu",data:[{text:"one",href:"#"},{text:"two",href:"#"},{text:"three",href:"#"}]},examples:[{title:"Preselected item",demo:{view:"menu",data:[{text:"one",href:"#"},{text:"two",href:"#",selected:!0},{text:"three",href:"#"}]}},{title:"Disabled item",demo:{view:"menu",data:[{text:"one",href:"#"},{text:"two",href:"#",disabled:!0},{text:"three",href:"#"}]}},{title:"External links",demo:{view:"menu",data:[{text:"one",external:!0,href:"https://github.com/discoveryjs/discovery"},{text:"two",external:!0,href:"https://github.com/discoveryjs/discovery"},{text:"three",external:!0,href:"https://github.com/discoveryjs/discovery"}]}}]};function AC(t){t.view.define("menu-item",function(e,r,i,s){let{content:a,onClick:f}=r,{text:d,selected:p=!1,disabled:g=!1,href:y,external:x}=i||{};if(g?e.classList.add("disabled"):typeof f=="function"?(e.addEventListener("click",()=>f(i,s)),e.classList.add("onclick")):y&&(e.href=y,e.target=x?"_blank":""),p&&e.classList.add("selected"),a)return t.view.render(e,a,i,s);e.textContent=typeof i=="string"?i:d||"Untitled item"},{tag:"a",usage:SC})}var W3=()=>alert("changed!"),TC={demo:{view:"nav-button",data:{text:"I am nav button"}},examples:[{title:"With href",demo:{view:"nav-button",data:{text:"I am nav button",href:"#"}}},{title:"External link",demo:{view:"nav-button",data:{text:"I am nav button",external:!0,href:"https://github.com/discoveryjs/discovery"}}},{title:"On click handler",demo:{view:"nav-button",data:{text:"I am nav button"},onClick:W3}}]};function LC(t){t.view.define("nav-button",function(e,r,i,s){let{name:a,content:f,disabled:d=!1,onClick:p}=r,{text:g="",href:y,external:x}=i||{};if(a&&(e.dataset.name=a),t.query(d,i,s)?e.classList.add("disabled"):typeof p=="function"?(e.addEventListener("click",w=>p(e,i,s,w)),e.classList.add("onclick")):y&&(e.href=y,e.target=x?"_blank":""),f)return t.view.render(e,f,i,s);e.textContent=g},{tag:"a",usage:TC})}var EC={demo:{view:"progress",progress:.5,content:'text:"Loading..."'},examples:[{title:"With no label (content)",demo:{view:"progress",progress:.25}},{title:"Custom color",demo:{view:"progress",progress:.85,color:"#bdab77",content:'text:"Yellow progress"'}}]};function MC(t){t.view.define("progress",function(e,r,i,s){let{content:a,progress:f,color:d}=r,p=e.appendChild(U("div",{class:"progress",style:`--progress: ${Math.max(0,Math.min(1,Number(f)))};--color: ${d||"unset"};`}));if(a){let g=e.insertBefore(U("div",{class:"content"}),p);return t.view.render(g,a,i,s)}},{usage:EC})}var U3=new Function("return (value) => alert(`Changed to ${value}!`)")(),DC={demo:{view:"select",data:["one","two","three","four"]},examples:[{title:"Select with value",demo:{view:"select",value:'"three"',data:["one","two","three","four"]}},{title:"Select with reset option",demo:{view:"select",resetItem:!0,value:'"three"',data:["one","two","three","four"]}},{title:"Select with placeholder",demo:{view:"select",placeholder:"placeholder",data:["one","two","three","four"]}},{title:"Select with onChange",demo:{view:"select",onChange:U3,data:["one","two","three","four"]}},{title:"Select with custom options",demo:{view:"select",item:"h1:text",data:["one","two","three","four"]}}]};function NC(t){let e="text-match:{ text, match: #.filter }",r="{ value: $, text: #.selectVariantTextQuery.query($, #) }",i=new t.view.Popup({className:"view-select-popup"});t.view.define("select",function(s,a,f,d){function p(){if(s.innerHTML="",I!==void 0)return t.view.render(s,t.view.composeConfig({view:"menu-item",data:r,content:D},O),I,R)}let{name:g,value:y,text:x="$",placeholder:w,limit:k,minItemsFilter:A=10,resetItem:M=!1,item:D=e,itemConfig:O,beforeItems:L,afterItems:E,onInit:N,onChange:B}=a,I=y?t.query(y,f,d):d[g],R={...d,selectMinItemsFilter:A,selectCurrentValue:I,selectVariantTextQuery:x,selectResetItem:M?[{value:void 0,text:"",...M,resetItem:!0}]:[]},j=[];return L&&j.push(t.view.composeConfig(L,{onInit:N,onChange:B})),j.push({view:"context",data:`.(${r})`,modifiers:{view:"input",when:"size() >= #.selectMinItemsFilter",type:"regexp",name:"filter",className:"view-select__filter",placeholder:"Filter"},content:{view:"menu",className:"view-select__variants",data:"#.selectResetItem + .[no #.filter or text~=#.filter]",limit:k,itemConfig:t.view.composeConfig({className:[F=>F.resetItem?"reset-item":"",F=>F.value===I?"selected":""]},O),item:D,onClick(F){i.hide(),I!==F.value&&(I=F.value,R={...R,selectCurrentValue:I},p(),typeof B=="function"&&B(F.value,g,F,d))}}}),E&&j.push(t.view.composeConfig(E,{onInit:N,onChange:B})),w&&(s.dataset.placeholder=w),s.tabIndex=0,s.addEventListener("click",()=>{i.toggle(s,F=>t.view.render(F,j,f,R).then(()=>(F.querySelector(".view-select__filter input")||{focus(){}}).focus()))}),typeof N=="function"&&N(I,g,f,d),p()},{usage:DC})}var OC={demo:{view:"tabs",name:"tabs",tabs:[{value:"one",text:"One"},{value:"two",text:"Two"},{value:"three",text:"Three"}],content:{view:"switch",content:[{when:'#.tabs="one"',content:'text:"One"'},{when:'#.tabs="two"',content:'text:"Two"'},{when:'#.tabs="three"',content:'text:"Three"'}]}},examples:[{title:"With before and after content",demo:{view:"tabs",name:"example",tabs:[{value:"one",text:"One"},{value:"two",text:"Two"},{value:"three",text:"Three"}],beforeTabs:'text:"<Content before tabs>"',afterTabs:'text:"<Content after tabs>"',content:'text:"Selected: " + #.example'}},{title:"On change handler",demo:{view:"tabs",name:"example",tabs:[{value:"one",text:"One"},{value:"two",text:"Two"},{value:"three",text:"Three"}],onChange:new Function('return (value) => alert("changed to " + value)')(),content:'text:"Selected: " + #.example'}}]};function PC(t){t.view.define("tabs",function(e,r,i,s){async function a(B){let I=L?y:g;if(E===B)return;let R=d||p||f?{...s,[x]:B}:null;E=B,L=!0,Array.isArray(w)&&(A.innerHTML="",d&&(D.innerHTML="",await t.view.render(D,d,i,R),A.appendChild(D)),await Promise.all(w.map(j=>t.view.render(A,t.view.composeConfig(j,{active:j.value===E}),i,s))),p&&(O.innerHTML="",await t.view.render(O,p,i,R),A.appendChild(O))),f&&(M.innerHTML="",await t.view.render(M,f,i,R)),typeof I=="function"&&I(E,x,i,s)}let{content:f,beforeTabs:d,afterTabs:p,onInit:g,onChange:y}=r,{name:x,tabs:w,tabConfig:k}=r,A=e.appendChild(document.createElement("div")),M=null,D=null,O=null,L=!1,E=NaN,N="value"in r?r.value:x in s?s[x]:void 0;return w=t.query(w,i,s),k=t.view.composeConfig({view:"tab",onClick:a},k),A.className="view-tabs-buttons",d&&(D=document.createElement("div"),D.className="view-tabs-buttons-before"),p&&(O=document.createElement("div"),O.className="view-tabs-buttons-after"),f&&(M=e.appendChild(document.createElement("div")),M.className="view-tabs-content"),typeof x!="string"&&(x="filter"),Array.isArray(w)?w=w.map(B=>{let I=typeof B;return(I==="string"||I==="number"||I==="boolean")&&(B={value:B}),(N===void 0||B.active)&&(N=B.value),t.view.composeConfig(k,B)}):w=[],a(N)},{usage:OC})}var tg=()=>alert("clicked!"),IC={demo:{view:"tabs",name:"tabs",tabs:[{value:"one",text:"One"},{value:"two",text:"Two"},{value:"three",text:"Three"}],content:{view:"switch",content:[{when:'#.tabs="one"',content:'text:"One"'},{when:'#.tabs="two"',content:'text:"Two"'},{when:'#.tabs="three"',content:'text:"Three"'}]}},examples:[{title:"Active & disabled tab",demo:{view:"tabs",name:"tabs",tabs:[{value:"one",text:"One"},{value:"two",text:"Two",active:!0},{value:"three",text:"Three",disabled:!0}],content:{view:"switch",content:[{when:'#.tabs="one"',content:'text:"One"'},{when:'#.tabs="two"',content:'text:"Two"'},{when:'#.tabs="three"',content:'text:"Three"'}]}}},{title:"On click handler",demo:{view:"tabs",name:"tabs",tabs:[{value:"one",text:"One",onClick:tg},{value:"two",text:"Two",onClick:tg},{value:"three",text:"Three",onClick:tg}],content:{view:"switch",content:[{when:'#.tabs="one"',content:'text:"One"'},{when:'#.tabs="two"',content:'text:"Two"'},{when:'#.tabs="three"',content:'text:"Three"'}]}}}]};function BC(t){t.view.define("tab",function(e,r,i,s){let{content:a,active:f=!1,disabled:d=!1,onClick:p,value:g,text:y=String(g).replace(/^./,x=>x.toUpperCase())}=r;if(t.query(d,i,s)?e.classList.add("disabled"):typeof p=="function"&&(e.addEventListener("click",()=>p(g)),e.classList.add("onclick")),f&&e.classList.add("active"),a)return t.view.render(e,a,i,s);e.textContent=y},{usage:IC})}var Gc={demo:{view:"context",modifiers:{view:"toggle-group",name:"toggleValue",data:[{value:"one",text:"One"},{value:"two",text:"Two"},{value:"three",text:"Three"}]},content:{view:"switch",content:[{when:'#.toggleValue="one"',content:'text:"One"'},{when:'#.toggleValue="two"',content:'text:"Two"'},{when:'#.toggleValue="three"',content:'text:"Three"'}]}},examples:[{title:"With before and after content",demo:{view:"toggle-group",data:[{value:"one",text:"One"},{value:"two",text:"Two"},{value:"three",text:"Three"}],beforeToggles:'text:"<Content before toggles>"',afterToggles:'text:"<Content after toggles>"'}},{title:"On change handler",demo:{view:"toggle-group",name:"example",onChange:new Function('return (value) => alert("changed to " + value)')(),data:[{value:"one",text:"One"},{value:"two",text:"Two"},{value:"three",text:"Three"}]}}]};function qC(t){t.view.define("toggle",function(e,r,i,s){let{content:a,disabled:f=!1,onToggle:d,value:p,text:g=String(p).replace(/^./,x=>x.toUpperCase())}=r,{checked:y=!1}=r;if(f?e.classList.add("disabled"):typeof d=="function"&&(e.addEventListener("click",()=>{y=!y,d(y,p)}),e.classList.add("onclick")),y&&e.classList.add("checked"),a)return t.view.render(e,a,i,s);e.textContent=g},{usage:Gc})}function zC(t){t.view.define("toggle-group",function(e,r,i,s){async function a(L,E){let N=M?g:p;D!==E&&(D=E,M=!0,Array.isArray(w)&&(e.innerHTML="",f&&(k.innerHTML="",await t.view.render(k,f,i,{...s,[y]:E}),e.appendChild(k)),d&&(A.innerHTML="",await t.view.render(A,d,i,{...s,[y]:E}),e.appendChild(A)),await Promise.all(w.map((B,I)=>t.view.render(e,t.view.composeConfig(B,{checked:B.value===D}),i[I],s)))),typeof N=="function"&&N(D,y,i,s))}let{beforeToggles:f,afterToggles:d,onInit:p,onChange:g}=r,{name:y,toggleConfig:x}=r,w=[],k=null,A=null,M=!1,D=NaN,O="value"in r?r.value:y in s?s[y]:void 0;return x=t.view.composeConfig({view:"toggle",onToggle:a},x),f&&(k=document.createElement("div"),k.className="view-toggle-group-before"),d&&(A=document.createElement("div"),A.className="view-toggle-group-after"),typeof y!="string"&&(y="filter"),Array.isArray(i)&&(w=i.map(L=>{let E=typeof L;return(E==="string"||E==="number"||E==="boolean")&&(L={value:L}),(O===void 0||L.active)&&(O=L.value),t.view.composeConfig(x,L)})),a(!0,O)},{usage:Gc})}var ng={};Ae(ng,{escapeHtml:()=>nt,numDelim:()=>nn});function nt(t){return t.replace(/&/g,"&amp;").replace(/"/g,"&quot;").replace(/</g,"&lt;").replace(/>/g,"&gt;")}function nn(t,e=!0){let r=e&&typeof t!="number"?nt(String(t)):String(t);return r.length>3?r.replace(/\.\d+(eE[-+]?\d+)?|\B(?=(\d{3})+(\D|$))/g,i=>i||'<span class="num-delim"></span>'):r}var rg={};Ae(rg,{ContentRect:()=>Ei});var $3=typeof ResizeObserver=="function",Ei=class extends tn{constructor(){super(),this.el=null,$3&&(this.observer=new ResizeObserver(e=>{for(let r of e)this.set(r.contentRect)}))}observe(e){e=e||null,this.observer&&this.el!==e&&(this.el!==null&&this.observer.unobserve(this.el),e!==null&&this.observer.observe(e)),this.el=e}};var Ho=gn(fr(),1);var sg=gn(fr(),1);function ag(t){let e=new Set(["has","in","no","not","and","or","is","asc","ascN","ascA","ascAN","ascNA","desc","descN","descA","descAN","descNA"]),r=sg.default.getMode(t,{name:"javascript",json:!0});return{...r,indent(i,s){return i.indented+t.indentUnit*(i.lastType==="{"&&s.trim()[0]!=="}"||i.lastType==="("&&s.trim()[0]!==")"||i.lastType==="["&&s.trim()[0]!=="]")},token(i,s){let a=i.peek();if(a==="#"||a==="@")return r.token(new sg.default.StringStream("$",4,i.lineOracle),s),i.pos++,"variable";let f=r.token(i,s),d=i.string.slice(i.start,i.pos);if(i.string[i.start-1]!=="."){if(s.isAssertionContext){if((f==="variable"||f==="atom")&&s.isAssertionParen===0&&d!=="not")return"type";d==="("?s.isAssertionParen++:d===")"&&(s.isAssertionParen>0&&s.isAssertionParen--,s.isAssertionParen===0&&(s.isAssertionContext=!1))}if(e.has(d))return d==="is"&&(s.isAssertionContext=!0,s.isAssertionParen=0),"keyword"}if(s.isAssertionContext){if(f==="variable"||f==="atom"||f==="def"||d==="function")return"type";s.isAssertionParen===0&&(f||/\S/.test(d))&&(s.isAssertionContext=!1)}return f}}}var RC=gn(fr(),1);function FC(t,e){let r=typeof e.isDiscoveryViewDefined=="function"?e.isDiscoveryViewDefined:()=>{},i=RC.default.getMode(t,{name:"javascript",json:!0});return{...i,indent(s,a){return s.indented+t.indentUnit*(s.lastType==="{"&&a.trim()[0]!=="}"||s.lastType==="("&&a.trim()[0]!==")"||s.lastType==="["&&a.trim()[0]!=="]")},token:function(s,a){if(a.suspendTokens){let{pos:p,token:g}=a.suspendTokens.shift();return s.pos=p,a.suspendTokens.length===0&&(a.suspendTokens=null),g}let f=s.pos,d=i.token(s,a);if(d==="string"){let p=s.pos,[,g]=s.string.slice(f+1,p-1).match(/^(.+?)([:{]|$)/)||[];r(g)&&(s.pos=f+1,a.suspendTokens=[{pos:f+1+g.length,token:"string discovery-view-name"},{pos:p,token:d}])}return d}}}var d$=gn(lg(),1);var un=gn(fr(),1);var G3="discovery-view-editor-hints-popup",V3="discovery-view-editor-hint",cg="active",K3=window.requestAnimationFrame||(t=>setTimeout(t,1e3/60)),Y3=window.cancelAnimationFrame||clearTimeout;un.default.commands.autocomplete=un.default.showHint;un.default.defineOption("showHintOptions",null);un.default.defineExtension("showHint",function(t){t={closeOnUnfocus:!0,container:null,...this.options.showHintOptions,...t},this.state.completionActive&&this.state.completionActive.close(),!(this.listSelections().length>1)&&(this.somethingSelected()||typeof t.hint=="function"&&(this.state.completionActive=new ug(this,t),this.state.completionActive.update(!0),un.default.signal(this,"startCompletion",this)))});var ug=class{constructor(e,r){if(this.cm=e,this.options=r,this.widget=null,this.debounce=0,this.tick=0,this.startPos=this.cm.getCursor("start"),this.startLen=this.cm.getLine(this.startPos.line).length-this.cm.getSelection().length,e.on("cursorActivity",this.activityFunc=()=>this.cursorActivity()),r.closeOnUnfocus){let i;this.onFocus=()=>clearTimeout(i),this.onBlur=()=>i=setTimeout(()=>this.close(),100),e.on("focus",this.onFocus),e.on("blur",this.onBlur)}}close(){this.active()&&(this.cm.state.completionActive=null,this.tick=null,this.cm.off("cursorActivity",this.activityFunc),this.options.closeOnUnfocus&&(this.cm.off("blur",this.onBlur),this.cm.off("focus",this.onFocus)),this.widget&&(this.data&&un.default.signal(this.data,"close"),this.widget.close()),un.default.signal(this.cm,"endCompletion",this.cm))}active(){return this.cm.state.completionActive===this}pick(e,r){let i=e.list[r];this.cm.state.completionEnabled=!1,i.hint?i.hint(this.cm,e,i):this.cm.replaceRange(HC(i),i.from||e.from,i.to||e.to,"complete"),un.default.signal(e,"pick",i),this.close()}cursorActivity(){this.debounce&&(Y3(this.debounce),this.debounce=0);let e=this.cm.getCursor(),r=this.cm.getLine(e.line);e.line!=this.startPos.line||r.length-e.ch!=this.startLen-this.startPos.ch||e.ch<this.startPos.ch||this.cm.somethingSelected()?this.close():(this.debounce=K3(()=>this.update()),this.widget&&this.widget.disable())}update(e){if(this.tick===null)return;let r=++this.tick;Promise.resolve(this.options.hint(this.cm,this.options)).then(i=>{this.tick==r&&this.finishUpdate(i,e)})}finishUpdate(e){this.data&&un.default.signal(this.data,"update");let r=this.widget&&this.widget.picked;this.widget&&this.widget.close(),this.data=e,e&&e.list.length&&(r&&e.list.length==1?this.pick(e,0):(this.widget=new fg(this,e),un.default.signal(e,"shown")))}};function HC(t){return typeof t=="string"?t:t.text}function Q3(t,e){for(;e&&e.parentNode!==t;)e=e.parentNode;return e}var fg=class{constructor(e,r){let i=e.cm,s=this.hintsEl=document.createElement("ul"),a=[G3,e.cm.options.theme].filter(Boolean),f=e.options.container||document.body;this.rootEls=new Set([f.getRootNode()]),this.completion=e,this.data=r,this.picked=!1,this.selectedHint=r.selectedHint||0,s.style.visibility="hidden",s.classList.add(...a),f.appendChild(s),this.items=r.list.map((d,p)=>{let g=s.appendChild(document.createElement("li"));return g.className=V3,p===this.selectedHint&&g.classList.add(cg),d.render?d.render(g,r,d):g.appendChild(document.createTextNode(d.displayText||HC(d))),g}),i.addKeyMap(this.keyMap={Up:()=>this.changeActive(this.selectedHint-1),Down:()=>this.changeActive(this.selectedHint+1),Enter:()=>this.pick(),Tab:()=>this.pick(),Esc:()=>{i.state.completionEnabled=!1,e.close()}}),this.updatePosSize(),this.onScroll=()=>this.updatePosSize();for(let d of this.rootEls)d.addEventListener("scroll",this.onScroll,On);un.default.on(s,"mousedown",d=>{let p=Q3(s,d.target),g=this.items.indexOf(p);g!==-1&&(this.close(),this.selectedHint=g,this.pick(),setTimeout(()=>i.focus(),1))}),un.default.signal(r,"select",r.list[this.selectedHint],this.items[this.selectedHint])}close(){if(this.completion.widget===this){this.completion.widget=null,this.completion.cm.removeKeyMap(this.keyMap),this.hintsEl.remove();for(let e of this.rootEls)e.removeEventListener("scroll",this.onScroll,On)}}disable(){this.completion.cm.removeKeyMap(this.keyMap),this.keyMap={Enter:()=>this.picked=!0},this.completion.cm.addKeyMap(this.keyMap)}pick(){this.completion.pick(this.data,this.selectedHint)}changeActive(e,r){e>=this.items.length?e=r?this.items.length-1:0:e<0&&(e=r?0:this.items.length-1);let i=this.items[this.selectedHint],s=this.items[this.selectedHint=e];s!==i&&(i&&i.classList.remove(cg),s.classList.add(cg),s.offsetTop<this.hintsEl.scrollTop?this.hintsEl.scrollTop=s.offsetTop-3:s.offsetTop+s.offsetHeight>this.hintsEl.scrollTop+this.hintsEl.clientHeight&&(this.hintsEl.scrollTop=s.offsetTop+s.offsetHeight-this.hintsEl.clientHeight+3),un.default.signal(this.data,"select",this.data.list[this.selectedHint],s))}getCursorCoords(){let{completion:e,hintsEl:r}=this,i=e.cm,s=Za(r),a=i.cursorCoords(null,"local"),f=cn(i.display.wrapper,s);return{top:f.top+a.top+5,left:f.left+a.left+9,bottom:f.top+a.bottom+5,right:f.left+a.right+9}}updatePosSize(){let{hintsEl:i}=this,s=this.getCursorCoords(),{clientWidth:a,clientHeight:f}=el(i);i.style.left="0px",i.style.top="0px";let{width:d,height:p}=i.getBoundingClientRect(),g=f-s.bottom,y=s.top;if(g<p&&y>g){let k=Math.min(p,y-6-1);i.style.top=`${s.top-1-k-6}px`,i.style.maxHeight=`${k}px`}else i.style.top=`${s.bottom+1}px`,i.style.maxHeight=`${g-1-6}px`;let x=a-s.right,w=s.left;x<d&&w>x?(i.style.left=`${s.left+1-Math.min(d,w-6)}px`,i.style.maxWidth=`${w-6}px`):(i.style.left=`${s.right}px`,i.style.maxWidth=`${x-6}px`),i.style.visibility="visible"}};function X3(t,e,{entry:{type:r,text:i,value:s}}){let a=i[0],f=i[i.length-1],d=a==='"'||a==="'"?1:0,p=f==='"'||f==="'"?1:0,g=i.toLowerCase().substring(d,i.length-p),y=g?s.toLowerCase().indexOf(g,s[0]==='"'||s[0]==="'"?1:0):-1;y!==-1&&(s=nt(s.substring(0,y))+'<span class="match">'+nt(s.substr(y,g.length))+"</span>"+nt(s.substr(y+g.length))),t.classList.add("type-"+r),t.appendChild(U("span","name",s))}var Vc=class extends Qn{static CodeMirror=Ho.default;constructor({hint:e,mode:r}){super(),this.el=document.createElement("div"),this.el.className="discovery-view-editor";let i=this,s=(0,Ho.default)(this.el,{extraKeys:{"Alt-Space":"autocomplete"},mode:r||"javascript",theme:"neo",indentUnit:0,showHintOptions:{hint:e,get container(){return i.container}}});s.on("change",()=>this.emit("change",s.getValue())),typeof e=="function"&&(s.on("cursorActivity",f=>{f.state.completionEnabled&&f.state.focused&&f.showHint()}),s.on("focus",f=>{f.getValue()===""&&(f.state.completionEnabled=!0),f.state.completionEnabled&&!f.state.completionActive&&f.showHint()}),s.on("change",(f,d)=>{d.origin!=="complete"&&(s.state.completionEnabled=!0)})),this.cm=s;let a=new Ei;a.subscribe(()=>s.refresh()),a.observe(s.display.wrapper)}getValue(){return this.cm.getValue()}setValue(e){requestAnimationFrame(()=>this.cm.refresh()),typeof e=="string"&&this.getValue()!==e&&this.cm.setValue(e||"")}focus(){this.cm.focus()}},dg=class extends Vc{constructor(e){super({mode:"discovery-query",hint:r=>{let i=r.getCursor(),s=e(r.getValue(),r.doc.indexFromPos(i),this.queryData,this.queryContext);if(s)return{list:s.slice(0,50).map(a=>({entry:a,text:a.value,render:X3,from:r.posFromIndex(a.from),to:r.posFromIndex(a.to)}))}}}),this.inputPanelEl=U("div","discovery-view-editor__input-panel"),this.outputPanelEl=U("div","discovery-view-editor__output-panel"),this.el.append(this.inputPanelEl,this.outputPanelEl)}setValue(e,r,i){let s=typeof e=="string"&&this.getValue()!==e,a=this.queryData!==r||this.queryContext!==i;this.queryData=r,this.queryContext=i,super.setValue(e),a&&!s&&this.cm.state.completionEnabled&&this.cm.state.focused&&this.cm.showHint()}},hg=class extends Vc{constructor(){super({mode:{name:"discovery-view",isDiscoveryViewDefined:e=>this.isViewDefined(e)}})}};Ho.default.defineMode("jora",ag);Ho.default.defineMode("discovery-query",ag);Ho.default.defineMode("discovery-view",FC);function WC(t){Object.assign(t.view,{QueryEditor:class extends dg{get container(){return t.dom.container}},ViewEditor:class extends hg{isViewDefined(e){return t.view.isDefined(e)}}})}var UC={beforeDemo:['md:"A block has no its own look. It\'s using for wrapping some content with a `className` (btw `className` is a common property for any view when appropriate)"'],demo:{view:"block",className:"foo",content:['text:"Content inside block"']}};function $C(t){t.view.define("block",function(e,r,i,s){let{content:a=[],onInit:f,onChange:d}=r,p=typeof f!="function"&&typeof d!="function"?a:this.composeConfig(a,{onInit:f,onChange:d});return t.view.render(e,p,i,s)},{usage:UC})}var Kc={demo:{view:"columns",data:["one","two","three","four"],column:"text"}};function GC(t){t.view.define("column",function(e,r,i,s){let{content:a=[]}=r;return t.view.render(e,a,i,s)},{usage:Kc})}function VC(t){t.view.define("columns",function(r,i,s,a){let{column:f,columnConfig:d,emptyText:p,limit:g}=i;if(p!==!1&&p!==""&&r.setAttribute("emptyText",p||"Empty"),!Array.isArray(s)&&s&&(s=[s]),Array.isArray(s))return t.view.renderList(r,this.composeConfig({view:"column",content:f},d),s,a,0,t.view.listLimit(g,25))},{usage:Kc})}var KC={demo:{view:"expand",header:'text:"Expand me!"',content:'text:"Content"'}};function YC(t){t.view.define("expand",function(e,r,i,s){function a(){if(e.classList.toggle("expanded",f),f)return w=U("div","content"),t.view.render(w,p,i,s).then(()=>e.appendChild(w));w!==null&&(w.remove(),w=null)}let{expanded:f,header:d,content:p,onToggle:g}=r,y=e.appendChild(U("div","header")),x=y.appendChild(U("div","header-content")),w=null;return f=t.queryBool(f,i,s),y.appendChild(U("div","trigger")),y.addEventListener("click",()=>{f=!f,a(),typeof g=="function"&&g(f)}),Promise.all([t.view.render(x,d||'text:"\xA0"',i,s),a()])},{usage:KC})}var QC={demo:{view:"hstack",content:['button:{text:"First button"}','button-primary:{text:"Second button"}']}};function XC(t){t.view.define("hstack",function(e,r,i,s){let{content:a=[]}=r;return t.view.render(e,a,i,s)},{usage:QC})}function JC(t){t.view.define("list-item",function(e,r,i,s){let{content:a="text"}=r;return t.view.render(e,a,i,s)},{tag:"li"})}var Wo=(t,e)=>({demo:{view:t,data:["one","two","three","four"]},examples:[{title:"Variations",demo:{view:"context",data:["foo","bar","baz"],content:e.map(r=>[`header{ content: 'md:${JSON.stringify('`view: \\"'+r+'\\"`')}' }`,r])}},{title:"Configure item's content",demo:[{view:t,data:["one","two","three","four"],item:['text:"<item> "',{view:"link",data:'{ href: "#" + $ }'}]}]},{title:"Configure item's config",demo:{view:t,data:["one","two","three","four"],itemConfig:{className:"special"},item:{view:"text",data:'"prefix-" + $'}}}]});function ZC(t){function e(r,i,s,a){let{item:f,itemConfig:d,limit:p,emptyText:g}=i;if(g!==!1&&g!==""&&r.setAttribute("emptyText",g||"Empty list"),!Array.isArray(s)&&s&&(s=[s]),Array.isArray(s))return t.view.renderList(r,this.composeConfig({view:"list-item",content:f},d),s,a,0,t.view.listLimit(p,25))}t.view.define("list",e,{usage:Wo}),t.view.define("inline-list",e,{usage:Wo}),t.view.define("comma-list",e,{usage:Wo}),t.view.define("ol",e,{tag:"ol",usage:Wo}),t.view.define("ul",e,{tag:"ul",usage:Wo})}var eS=t=>({beforeDemo:['md:"A special view to be used as the first view in the body of the page. This view stays in place as the page scrolls (although it may move slightly to the top of the page at the start of the scroll), so that the most relevant information and important action elements can remain accessible despite page scrolling."'],demoFixed:100,demo:`${t}:"That's a \\"${t}\\""`,examples:[{title:"Prelude",demoFixed:150,highlightProps:["prelude"],demo:{view:t,prelude:['badge:{ text: "demo" }','badge:{ text: "demo", prefix: "prelude", postfix: "postfix" }'],content:'h1:"Header"'}}]});function tS(t){t.view.define("page-header",function(r,i,s,a){let{prelude:f,content:d,onInit:p,onChange:g}=i,y=r.appendChild(U("div","view-page-header__prelude")),x=r.appendChild(U("div","view-page-header__content")),w=k=>typeof p!="function"&&typeof g!="function"?k:this.composeConfig(k,{onInit:p,onChange:g});return Promise.all([t.view.render(y,w(f||[]),s,a),t.view.render(x,w(d||"text"),s,a)])},{usage:eS})}var Pn=[],gg=new Set,nS=[!1,"popup-hover","trigger-click"],J3=300,Z3={position:"trigger",positionMode:"safe",pointerOffsetX:3,pointerOffsetY:3,showDelay:!1,hoverTriggers:null,hoverPin:!1,hideIfEventOutside:!0,hideOnResize:!0,render:void 0};function pg(t,e){return t.el.contains(e)?t:t.relatedPopups.reduce((r,i)=>r||pg(i,e),null)}function rS(t){return t?t.getRootNode({composed:!0})===document:!0}function Yc(t){Pn.slice().forEach(e=>e.hideIfEventOutside(t))}function eH(){Pn.slice().forEach(t=>t.hideOnTriggerHasLeftDocument())}function iS(t){Pn.slice().forEach(e=>e.hideOnResize(t))}function lS(t,e){return typeof t=="function"&&(t=t(e)),typeof t=="number"?isFinite(t)?t:0:typeof t=="boolean"&&t?J3:0}function Qc(t){clearTimeout(t.showDelayTimer),t.showDelayTimer=null,t.showDelayArgs=null,gg.delete(t)}function oS(t,e,r){clearTimeout(t.showDelayTimer),t.showDelayTimer=setTimeout(()=>t.show(e,r,!0),lS(t.showDelay,e)),t.showDelayArgs=[e,r],gg.add(t)}function sS(t,e){t.lastChild!==e&&t.appendChild(e)}function aS(t,e=0){return Number.isFinite(t)?t:e}function cS(t){let e=[],r=new Set,i=null,s=null,a=()=>{i===null&&(i=[t.addHostElEventListener("mouseenter",({target:f})=>{if(f!==document)for(let d of e){let p=pg(d,f),g=p?p.el:f.closest(d.hoverTriggers);g&&(d.hideTimer=clearTimeout(d.hideTimer),g!==d.lastHoverTriggerEl&&((!p||!p.hoverPinned)&&(d.lastHoverTriggerEl=g),p||(d.hoverPinned=!1,d.el.classList.remove("pinned"),d.show(g))))}},On),t.addHostElEventListener("mouseleave",({target:f})=>{for(let d of e)d.lastHoverTriggerEl===f&&(Qc(d),d.lastHoverTriggerEl=null,d.hideTimer=setTimeout(d.hide,100))},On),t.addGlobalEventListener("scroll",f=>{s=setTimeout(()=>Yc(f),0)},!0),t.addHostElEventListener("scroll",f=>{clearTimeout(s),Yc(f)}),t.addGlobalEventListener("click",f=>{s=setTimeout(()=>Yc(f),0)},!0),t.addHostElEventListener("click",f=>{clearTimeout(s),Yc(f),setTimeout(eH,50);for(let d of e)d.hoverPin==="trigger-click"&&d.lastHoverTriggerEl&&d.lastTriggerEl.contains(f.target)&&(d.lastHoverTriggerEl=null,d.hoverPinned=!0,d.el.classList.add("pinned"),f.stopPropagation())},!0)])};ri.subscribe(()=>{for(let f of Pn)f.position==="pointer"&&!f.hoverPinned&&!f.frozen&&!r.has(f)&&f.updatePosition();for(let f of gg)oS(f,...f.showDelayArgs)}),t.inspectMode.subscribe(f=>f?Pn.forEach(d=>r.add(d)):r.clear()),t.view.Popup=class{constructor(d){d={...Z3,...d},this.el=document.createElement("div"),this.el.classList.add("discovery-view-popup"),this.showDelayTimer=null,this.showDelayArgs=null,this.showDelay=d.showDelay,this.hideTimer=null,this.hide=this.hide.bind(this),this.lastTriggerEl=null,this.lastHoverTriggerEl=null,this.hoverPinned=!1,this.frozen=!1,this.render=d.render,this.position=d.position,this.positionMode=d.positionMode,this.pointerOffsetX=aS(d.pointerOffsetX),this.pointerOffsetY=aS(d.pointerOffsetY),this.hoverTriggers=d.hoverTriggers,this.hoverPin=d.hoverPin,this.hideIfEventOutsideDisabled=!d.hideIfEventOutside,this.hideOnResizeDisabled=!d.hideOnResize,d.className&&this.el.classList.add(d.className),nS.includes(d.hoverPin)||(t.log("warn",`Bad value for \`Popup#options.hoverPin\` (should be ${nS.join(", ")}):`,d.hoverPin),this.hoverPin=!1),this.hoverTriggers&&(this.el.classList.add("show-on-hover"),this.el.dataset.pinMode=this.hoverPin||"none",e.push(this),a())}get relatedPopups(){return Pn.filter(d=>this.el.contains(d.lastTriggerEl))}get visible(){return Pn.includes(this)}toggle(...d){this.visible?this.hide():this.show(...d)}async show(d,p=this.render,g=!1){if(!this.visible&&!g&&lS(this.showDelay,d)>0){oS(this,d,p);return}Qc(this),r.delete(this),t.view.setViewRoot(this.el,"popup",{config:p});let y=t.dom.container;if(this.hideTimer=clearTimeout(this.hideTimer),this.relatedPopups.forEach(x=>x.hide()),this.el.classList.toggle("inspect",t.inspectMode.value),this.lastTriggerEl&&this.lastTriggerEl.classList.remove("discovery-view-popup-active"),d&&d.classList.add("discovery-view-popup-active"),this.lastTriggerEl=d||null,this.visible||(Pn.push(this),Pn.length===1&&window.addEventListener("resize",iS)),typeof p=="function"){this.el.innerHTML="";let x=Symbol();if(this.lastRenderMarker=x,requestAnimationFrame(()=>{this.lastRenderMarker===x&&(sS(y,this.el),this.updatePosition())}),await p(this.el,d,this.hide),this.lastRenderMarker!==x)return;this.lastRenderMarker=null}sS(y,this.el),this.updatePosition()}updatePosition(){let d=this.position==="pointer";if(!this.visible||(d?this.frozen:!this.lastTriggerEl))return;let p=t.dom.container,g=Za(p.firstChild),y=Qp(window,g),{x,y:w}=ri.value,{pointerOffsetX:k,pointerOffsetY:A}=this,M=d?{left:parseInt(x)-k,right:parseInt(x)+k,top:parseInt(w)-A,bottom:parseInt(w)+A}:cn(this.lastTriggerEl,p),D=d?M.left:M.right,O=d?M.right:M.left,L=M.top-y.top-3,E=y.bottom-M.bottom-3,N=D-y.left-3,B=y.right-O-3,I=B>=N,R=E>=L;if(R||(this.el.style.maxHeight=L+"px",this.el.style.top="auto",this.el.style.bottom=y.bottom-M.top+"px",this.el.dataset.vTo="top"),I||(this.el.style.left="auto",this.el.style.right=y.right-D+"px",this.el.style.maxWidth=N+"px",this.el.dataset.hTo="left"),this.positionMode==="natural"&&(!I||!R)){let{height:j,width:F}=cn(this.el);R=j<=E,I=F<=B}R&&(this.el.style.maxHeight=E+"px",this.el.style.top=M.bottom-y.top+"px",this.el.style.bottom="auto",this.el.dataset.vTo="bottom"),I&&(this.el.style.left=O-y.left+"px",this.el.style.right="auto",this.el.style.maxWidth=B+"px",this.el.dataset.hTo="right"),this.relatedPopups.forEach(j=>j.updatePosition())}freeze(){this.frozen=!0,this.el.classList.add("frozen")}unfreeze(){this.frozen=!1,this.el.classList.remove("frozen"),this.updatePosition()}hide(){this.hideTimer=clearTimeout(this.hideTimer),this.lastRenderMarker=null,Qc(this),this.visible&&!r.has(this)&&(this.relatedPopups.forEach(d=>d.hide()),Pn.splice(Pn.indexOf(this),1),this.el.remove(),this.unfreeze(),this.lastTriggerEl&&(this.lastTriggerEl.classList.remove("discovery-view-popup-active"),this.lastTriggerEl=null),Pn.length===0&&window.removeEventListener("resize",iS))}hideIfEventOutside({target:d}){this.hideIfEventOutsideDisabled||r.has(this)||this.lastTriggerEl&&this.lastTriggerEl.contains(d)||pg(this,d)||this.hide()}hideOnTriggerHasLeftDocument(){(!rS(this.lastHoverTriggerEl)||!rS(this.lastTriggerEl))&&this.hide()}hideOnResize(){this.hideOnResizeDisabled||r.has(this)||this.hide()}destroy(){r.delete(this),Qc(this);let d=e.indexOf(this);d!==-1&&e.splice(d,1),this.hide(),this.el=null,this.lastTriggerEl=null,this.lastHoverTriggerEl=null}}}var uS={demo:{view:"section",header:'text:"I am section"',content:['text:"content"']}};function fS(t){t.view.define("section",function(e,r,i,s){let{header:a,content:f}=r;return t.view.render(e,[{view:"header",content:a},f],i,s)},{usage:uS})}function dS(t){t.view.define("toc-section",function(e,r,i,s){let{header:a,content:f}=r;return t.view.render(e,[{view:"block",className:"header",content:a},{view:"block",className:"content",content:f}],i,s)},{tag:"section"})}var Uo=(t,e)=>({demo:{view:t,data:'"Alert"'},examples:[{title:"Variations",demo:e.map(r=>`${r}:"${r}"`)},{title:"Complex content",demo:{view:t,content:['h3:"Some header"','text:"Hello world!"']}}]});function hS(t){function e(r,i,s,a){let{content:f="text"}=i;return r.classList.add("view-alert"),t.view.render(r,f,s,a)}t.view.define("alert",e,{usage:Uo}),t.view.define("alert-primary",e,{usage:Uo}),t.view.define("alert-success",e,{usage:Uo}),t.view.define("alert-danger",e,{usage:Uo}),t.view.define("alert-warning",e,{usage:Uo})}function pS(t){t.view.define("auto-link",function(e,r,i,s){let{content:a,fallback:f,href:d}=r;if(!i)return;let p=t.resolveValueLinks(i),y=p?(typeof d=="function"?d:x=>x)(p[0].href,i,s):null;return y?t.view.render(e,{view:"link",content:a},{...p[0],href:y},s):t.view.render(e,f||a||"text",i,s)},{tag:!1})}var mg=(t,e)=>({demo:{view:t,data:JSON.stringify(t)},examples:[{title:"Variations",demo:e.map(r=>`${r}:"${r}"`)},{title:"Custom colors",beforeDemo:{view:"md",source:["Data properties to setup a custom colors:","* `color` \u2013 default background color","* `textColor` \u2013 default text color","* `darkColor` \u2013 background color in dark mode","* `textColor` \u2013 text color in dark mode"].join(`
`)},demo:{view:t,data:{text:"Colored badge",color:"rgba(237, 177, 9, 0.35)",textColor:"orange",darkColor:"#ffff00",darkTextColor:"black"}}},{title:"As a link",demo:{view:t,data:{text:"Link to something",href:"#",external:!0}}},{title:"Prefix and postfix",demo:{view:t,data:{prefix:"prefix",text:"link",postfix:"postfix"}}},{title:"With a hint",demo:{view:t,data:{text:"text",hint:"hint"}}}]});function gS(t,e,r){if(!r)return;let i=t.appendChild(document.createElement("span"));i.className=e,i.textContent=r}function mS(t){let e=t.queryFn(`is not array? | {
        color,
        textColor,
        darkColor,
        darkTextColor,
        text: is (string or number or boolean) ?: text,
        content: #.content,
        href,
        external,
        prefix,
        postfix,
        hint
    } | entries().({
        key,
        value: #[key] != undefined ? #[key] : value
    }).fromEntries()`);function r(i,s,a,f){let{color:d,textColor:p,darkColor:g,darkTextColor:y,text:x,content:w,href:k,external:A,prefix:M,postfix:D,hint:O}=e(a,s),L;return d&&i.style.setProperty("--discovery-view-badge-color",d),g&&i.style.setProperty("--discovery-view-badge-dark-color",g),p&&i.style.setProperty("--discovery-view-badge-text-color",p),y&&i.style.setProperty("--discovery-view-badge-dark-text-color",y),k&&(i.href=k),A&&(i.target="_blank"),O&&(i.title=O),gS(i,"prefix",M),w?L=this.render(i,w,a,f):i.append(document.createTextNode(x)),gS(i,"postfix",D),L}t.view.define("badge",r,{tag:"a",usage:mg}),t.view.define("pill-badge",r,{tag:"a",usage:mg})}function CS(){return{async:!1,baseUrl:null,breaks:!1,extensions:null,gfm:!0,headerIds:!0,headerPrefix:"",highlight:null,hooks:null,langPrefix:"language-",mangle:!0,pedantic:!1,renderer:null,sanitize:!1,sanitizer:null,silent:!1,smartypants:!1,tokenizer:null,walkTokens:null,xhtml:!1}}var Ni=CS();function tH(t){Ni=t}var SS=/[&<>"']/,nH=new RegExp(SS.source,"g"),AS=/[<>"']|&(?!(#\d{1,7}|#[Xx][a-fA-F0-9]{1,6}|\w+);)/,rH=new RegExp(AS.source,"g"),iH={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},yS=t=>iH[t];function Ht(t,e){if(e){if(SS.test(t))return t.replace(nH,yS)}else if(AS.test(t))return t.replace(rH,yS);return t}var oH=/&(#(?:\d+)|(?:#x[0-9A-Fa-f]+)|(?:\w+));?/ig;function TS(t){return t.replace(oH,(e,r)=>(r=r.toLowerCase(),r==="colon"?":":r.charAt(0)==="#"?r.charAt(1)==="x"?String.fromCharCode(parseInt(r.substring(2),16)):String.fromCharCode(+r.substring(1)):""))}var sH=/(^|[^\[])\^/g;function Xe(t,e){t=typeof t=="string"?t:t.source,e=e||"";let r={replace:(i,s)=>(s=s.source||s,s=s.replace(sH,"$1"),t=t.replace(i,s),r),getRegex:()=>new RegExp(t,e)};return r}var aH=/[^\w:]/g,lH=/^$|^[a-z][a-z0-9+.-]*:|^[?#]/i;function vS(t,e,r){if(t){let i;try{i=decodeURIComponent(TS(r)).replace(aH,"").toLowerCase()}catch{return null}if(i.indexOf("javascript:")===0||i.indexOf("vbscript:")===0||i.indexOf("data:")===0)return null}e&&!lH.test(r)&&(r=dH(e,r));try{r=encodeURI(r).replace(/%25/g,"%")}catch{return null}return r}var Xc={},cH=/^[^:]+:\/*[^/]*$/,uH=/^([^:]+:)[\s\S]*$/,fH=/^([^:]+:\/*[^/]*)[\s\S]*$/;function dH(t,e){Xc[" "+t]||(cH.test(t)?Xc[" "+t]=t+"/":Xc[" "+t]=Jc(t,"/",!0)),t=Xc[" "+t];let r=t.indexOf(":")===-1;return e.substring(0,2)==="//"?r?e:t.replace(uH,"$1")+e:e.charAt(0)==="/"?r?e:t.replace(fH,"$1")+e:t+e}var Zc={exec:function(){}};function bS(t,e){let r=t.replace(/\|/g,(a,f,d)=>{let p=!1,g=f;for(;--g>=0&&d[g]==="\\";)p=!p;return p?"|":" |"}),i=r.split(/ \|/),s=0;if(i[0].trim()||i.shift(),i.length>0&&!i[i.length-1].trim()&&i.pop(),i.length>e)i.splice(e);else for(;i.length<e;)i.push("");for(;s<i.length;s++)i[s]=i[s].trim().replace(/\\\|/g,"|");return i}function Jc(t,e,r){let i=t.length;if(i===0)return"";let s=0;for(;s<i;){let a=t.charAt(i-s-1);if(a===e&&!r)s++;else if(a!==e&&r)s++;else break}return t.slice(0,i-s)}function hH(t,e){if(t.indexOf(e[1])===-1)return-1;let r=t.length,i=0,s=0;for(;s<r;s++)if(t[s]==="\\")s++;else if(t[s]===e[0])i++;else if(t[s]===e[1]&&(i--,i<0))return s;return-1}function pH(t){t&&t.sanitize&&!t.silent&&console.warn("marked(): sanitize and sanitizer parameters are deprecated since version 0.7.0, should not be used and will be removed in the future. Read more here: https://marked.js.org/#/USING_ADVANCED.md#options")}function wS(t,e){if(e<1)return"";let r="";for(;e>1;)e&1&&(r+=t),e>>=1,t+=t;return r+t}function xS(t,e,r,i){let s=e.href,a=e.title?Ht(e.title):null,f=t[1].replace(/\\([\[\]])/g,"$1");if(t[0].charAt(0)!=="!"){i.state.inLink=!0;let d={type:"link",raw:r,href:s,title:a,text:f,tokens:i.inlineTokens(f)};return i.state.inLink=!1,d}return{type:"image",raw:r,href:s,title:a,text:Ht(f)}}function gH(t,e){let r=t.match(/^(\s+)(?:```)/);if(r===null)return e;let i=r[1];return e.split(`
`).map(s=>{let a=s.match(/^\s+/);if(a===null)return s;let[f]=a;return f.length>=i.length?s.slice(i.length):s}).join(`
`)}var rl=class{constructor(e){this.options=e||Ni}space(e){let r=this.rules.block.newline.exec(e);if(r&&r[0].length>0)return{type:"space",raw:r[0]}}code(e){let r=this.rules.block.code.exec(e);if(r){let i=r[0].replace(/^ {1,4}/gm,"");return{type:"code",raw:r[0],codeBlockStyle:"indented",text:this.options.pedantic?i:Jc(i,`
`)}}}fences(e){let r=this.rules.block.fences.exec(e);if(r){let i=r[0],s=gH(i,r[3]||"");return{type:"code",raw:i,lang:r[2]?r[2].trim().replace(this.rules.inline._escapes,"$1"):r[2],text:s}}}heading(e){let r=this.rules.block.heading.exec(e);if(r){let i=r[2].trim();if(/#$/.test(i)){let s=Jc(i,"#");(this.options.pedantic||!s||/ $/.test(s))&&(i=s.trim())}return{type:"heading",raw:r[0],depth:r[1].length,text:i,tokens:this.lexer.inline(i)}}}hr(e){let r=this.rules.block.hr.exec(e);if(r)return{type:"hr",raw:r[0]}}blockquote(e){let r=this.rules.block.blockquote.exec(e);if(r){let i=r[0].replace(/^ *>[ \t]?/gm,""),s=this.lexer.state.top;this.lexer.state.top=!0;let a=this.lexer.blockTokens(i);return this.lexer.state.top=s,{type:"blockquote",raw:r[0],tokens:a,text:i}}}list(e){let r=this.rules.block.list.exec(e);if(r){let i,s,a,f,d,p,g,y,x,w,k,A,M=r[1].trim(),D=M.length>1,O={type:"list",raw:"",ordered:D,start:D?+M.slice(0,-1):"",loose:!1,items:[]};M=D?`\\d{1,9}\\${M.slice(-1)}`:`\\${M}`,this.options.pedantic&&(M=D?M:"[*+-]");let L=new RegExp(`^( {0,3}${M})((?:[	 ][^\\n]*)?(?:\\n|$))`);for(;e&&(A=!1,!(!(r=L.exec(e))||this.rules.block.hr.test(e)));){if(i=r[0],e=e.substring(i.length),y=r[2].split(`
`,1)[0].replace(/^\t+/,N=>" ".repeat(3*N.length)),x=e.split(`
`,1)[0],this.options.pedantic?(f=2,k=y.trimLeft()):(f=r[2].search(/[^ ]/),f=f>4?1:f,k=y.slice(f),f+=r[1].length),p=!1,!y&&/^ *$/.test(x)&&(i+=x+`
`,e=e.substring(x.length+1),A=!0),!A){let N=new RegExp(`^ {0,${Math.min(3,f-1)}}(?:[*+-]|\\d{1,9}[.)])((?:[ 	][^\\n]*)?(?:\\n|$))`),B=new RegExp(`^ {0,${Math.min(3,f-1)}}((?:- *){3,}|(?:_ *){3,}|(?:\\* *){3,})(?:\\n+|$)`),I=new RegExp(`^ {0,${Math.min(3,f-1)}}(?:\`\`\`|~~~)`),R=new RegExp(`^ {0,${Math.min(3,f-1)}}#`);for(;e&&(w=e.split(`
`,1)[0],x=w,this.options.pedantic&&(x=x.replace(/^ {1,4}(?=( {4})*[^ ])/g,"  ")),!(I.test(x)||R.test(x)||N.test(x)||B.test(e)));){if(x.search(/[^ ]/)>=f||!x.trim())k+=`
`+x.slice(f);else{if(p||y.search(/[^ ]/)>=4||I.test(y)||R.test(y)||B.test(y))break;k+=`
`+x}!p&&!x.trim()&&(p=!0),i+=w+`
`,e=e.substring(w.length+1),y=x.slice(f)}}O.loose||(g?O.loose=!0:/\n *\n *$/.test(i)&&(g=!0)),this.options.gfm&&(s=/^\[[ xX]\] /.exec(k),s&&(a=s[0]!=="[ ] ",k=k.replace(/^\[[ xX]\] +/,""))),O.items.push({type:"list_item",raw:i,task:!!s,checked:a,loose:!1,text:k}),O.raw+=i}O.items[O.items.length-1].raw=i.trimRight(),O.items[O.items.length-1].text=k.trimRight(),O.raw=O.raw.trimRight();let E=O.items.length;for(d=0;d<E;d++)if(this.lexer.state.top=!1,O.items[d].tokens=this.lexer.blockTokens(O.items[d].text,[]),!O.loose){let N=O.items[d].tokens.filter(I=>I.type==="space"),B=N.length>0&&N.some(I=>/\n.*\n/.test(I.raw));O.loose=B}if(O.loose)for(d=0;d<E;d++)O.items[d].loose=!0;return O}}html(e){let r=this.rules.block.html.exec(e);if(r){let i={type:"html",raw:r[0],pre:!this.options.sanitizer&&(r[1]==="pre"||r[1]==="script"||r[1]==="style"),text:r[0]};if(this.options.sanitize){let s=this.options.sanitizer?this.options.sanitizer(r[0]):Ht(r[0]);i.type="paragraph",i.text=s,i.tokens=this.lexer.inline(s)}return i}}def(e){let r=this.rules.block.def.exec(e);if(r){let i=r[1].toLowerCase().replace(/\s+/g," "),s=r[2]?r[2].replace(/^<(.*)>$/,"$1").replace(this.rules.inline._escapes,"$1"):"",a=r[3]?r[3].substring(1,r[3].length-1).replace(this.rules.inline._escapes,"$1"):r[3];return{type:"def",tag:i,raw:r[0],href:s,title:a}}}table(e){let r=this.rules.block.table.exec(e);if(r){let i={type:"table",header:bS(r[1]).map(s=>({text:s})),align:r[2].replace(/^ *|\| *$/g,"").split(/ *\| */),rows:r[3]&&r[3].trim()?r[3].replace(/\n[ \t]*$/,"").split(`
`):[]};if(i.header.length===i.align.length){i.raw=r[0];let s=i.align.length,a,f,d,p;for(a=0;a<s;a++)/^ *-+: *$/.test(i.align[a])?i.align[a]="right":/^ *:-+: *$/.test(i.align[a])?i.align[a]="center":/^ *:-+ *$/.test(i.align[a])?i.align[a]="left":i.align[a]=null;for(s=i.rows.length,a=0;a<s;a++)i.rows[a]=bS(i.rows[a],i.header.length).map(g=>({text:g}));for(s=i.header.length,f=0;f<s;f++)i.header[f].tokens=this.lexer.inline(i.header[f].text);for(s=i.rows.length,f=0;f<s;f++)for(p=i.rows[f],d=0;d<p.length;d++)p[d].tokens=this.lexer.inline(p[d].text);return i}}}lheading(e){let r=this.rules.block.lheading.exec(e);if(r)return{type:"heading",raw:r[0],depth:r[2].charAt(0)==="="?1:2,text:r[1],tokens:this.lexer.inline(r[1])}}paragraph(e){let r=this.rules.block.paragraph.exec(e);if(r){let i=r[1].charAt(r[1].length-1)===`
`?r[1].slice(0,-1):r[1];return{type:"paragraph",raw:r[0],text:i,tokens:this.lexer.inline(i)}}}text(e){let r=this.rules.block.text.exec(e);if(r)return{type:"text",raw:r[0],text:r[0],tokens:this.lexer.inline(r[0])}}escape(e){let r=this.rules.inline.escape.exec(e);if(r)return{type:"escape",raw:r[0],text:Ht(r[1])}}tag(e){let r=this.rules.inline.tag.exec(e);if(r)return!this.lexer.state.inLink&&/^<a /i.test(r[0])?this.lexer.state.inLink=!0:this.lexer.state.inLink&&/^<\/a>/i.test(r[0])&&(this.lexer.state.inLink=!1),!this.lexer.state.inRawBlock&&/^<(pre|code|kbd|script)(\s|>)/i.test(r[0])?this.lexer.state.inRawBlock=!0:this.lexer.state.inRawBlock&&/^<\/(pre|code|kbd|script)(\s|>)/i.test(r[0])&&(this.lexer.state.inRawBlock=!1),{type:this.options.sanitize?"text":"html",raw:r[0],inLink:this.lexer.state.inLink,inRawBlock:this.lexer.state.inRawBlock,text:this.options.sanitize?this.options.sanitizer?this.options.sanitizer(r[0]):Ht(r[0]):r[0]}}link(e){let r=this.rules.inline.link.exec(e);if(r){let i=r[2].trim();if(!this.options.pedantic&&/^</.test(i)){if(!/>$/.test(i))return;let f=Jc(i.slice(0,-1),"\\");if((i.length-f.length)%2===0)return}else{let f=hH(r[2],"()");if(f>-1){let p=(r[0].indexOf("!")===0?5:4)+r[1].length+f;r[2]=r[2].substring(0,f),r[0]=r[0].substring(0,p).trim(),r[3]=""}}let s=r[2],a="";if(this.options.pedantic){let f=/^([^'"]*[^\s])\s+(['"])(.*)\2/.exec(s);f&&(s=f[1],a=f[3])}else a=r[3]?r[3].slice(1,-1):"";return s=s.trim(),/^</.test(s)&&(this.options.pedantic&&!/>$/.test(i)?s=s.slice(1):s=s.slice(1,-1)),xS(r,{href:s&&s.replace(this.rules.inline._escapes,"$1"),title:a&&a.replace(this.rules.inline._escapes,"$1")},r[0],this.lexer)}}reflink(e,r){let i;if((i=this.rules.inline.reflink.exec(e))||(i=this.rules.inline.nolink.exec(e))){let s=(i[2]||i[1]).replace(/\s+/g," ");if(s=r[s.toLowerCase()],!s){let a=i[0].charAt(0);return{type:"text",raw:a,text:a}}return xS(i,s,i[0],this.lexer)}}emStrong(e,r,i=""){let s=this.rules.inline.emStrong.lDelim.exec(e);if(!s||s[3]&&i.match(/[\p{L}\p{N}]/u))return;let a=s[1]||s[2]||"";if(!a||a&&(i===""||this.rules.inline.punctuation.exec(i))){let f=s[0].length-1,d,p,g=f,y=0,x=s[0][0]==="*"?this.rules.inline.emStrong.rDelimAst:this.rules.inline.emStrong.rDelimUnd;for(x.lastIndex=0,r=r.slice(-1*e.length+f);(s=x.exec(r))!=null;){if(d=s[1]||s[2]||s[3]||s[4]||s[5]||s[6],!d)continue;if(p=d.length,s[3]||s[4]){g+=p;continue}else if((s[5]||s[6])&&f%3&&!((f+p)%3)){y+=p;continue}if(g-=p,g>0)continue;p=Math.min(p,p+g+y);let w=e.slice(0,f+s.index+(s[0].length-d.length)+p);if(Math.min(f,p)%2){let A=w.slice(1,-1);return{type:"em",raw:w,text:A,tokens:this.lexer.inlineTokens(A)}}let k=w.slice(2,-2);return{type:"strong",raw:w,text:k,tokens:this.lexer.inlineTokens(k)}}}}codespan(e){let r=this.rules.inline.code.exec(e);if(r){let i=r[2].replace(/\n/g," "),s=/[^ ]/.test(i),a=/^ /.test(i)&&/ $/.test(i);return s&&a&&(i=i.substring(1,i.length-1)),i=Ht(i,!0),{type:"codespan",raw:r[0],text:i}}}br(e){let r=this.rules.inline.br.exec(e);if(r)return{type:"br",raw:r[0]}}del(e){let r=this.rules.inline.del.exec(e);if(r)return{type:"del",raw:r[0],text:r[2],tokens:this.lexer.inlineTokens(r[2])}}autolink(e,r){let i=this.rules.inline.autolink.exec(e);if(i){let s,a;return i[2]==="@"?(s=Ht(this.options.mangle?r(i[1]):i[1]),a="mailto:"+s):(s=Ht(i[1]),a=s),{type:"link",raw:i[0],text:s,href:a,tokens:[{type:"text",raw:s,text:s}]}}}url(e,r){let i;if(i=this.rules.inline.url.exec(e)){let s,a;if(i[2]==="@")s=Ht(this.options.mangle?r(i[0]):i[0]),a="mailto:"+s;else{let f;do f=i[0],i[0]=this.rules.inline._backpedal.exec(i[0])[0];while(f!==i[0]);s=Ht(i[0]),i[1]==="www."?a="http://"+i[0]:a=i[0]}return{type:"link",raw:i[0],text:s,href:a,tokens:[{type:"text",raw:s,text:s}]}}}inlineText(e,r){let i=this.rules.inline.text.exec(e);if(i){let s;return this.lexer.state.inRawBlock?s=this.options.sanitize?this.options.sanitizer?this.options.sanitizer(i[0]):Ht(i[0]):i[0]:s=Ht(this.options.smartypants?r(i[0]):i[0]),{type:"text",raw:i[0],text:s}}}},Ne={newline:/^(?: *(?:\n|$))+/,code:/^( {4}[^\n]+(?:\n(?: *(?:\n|$))*)?)+/,fences:/^ {0,3}(`{3,}(?=[^`\n]*(?:\n|$))|~{3,})([^\n]*)(?:\n|$)(?:|([\s\S]*?)(?:\n|$))(?: {0,3}\1[~`]* *(?=\n|$)|$)/,hr:/^ {0,3}((?:-[\t ]*){3,}|(?:_[ \t]*){3,}|(?:\*[ \t]*){3,})(?:\n+|$)/,heading:/^ {0,3}(#{1,6})(?=\s|$)(.*)(?:\n+|$)/,blockquote:/^( {0,3}> ?(paragraph|[^\n]*)(?:\n|$))+/,list:/^( {0,3}bull)([ \t][^\n]+?)?(?:\n|$)/,html:"^ {0,3}(?:<(script|pre|style|textarea)[\\s>][\\s\\S]*?(?:</\\1>[^\\n]*\\n+|$)|comment[^\\n]*(\\n+|$)|<\\?[\\s\\S]*?(?:\\?>\\n*|$)|<![A-Z][\\s\\S]*?(?:>\\n*|$)|<!\\[CDATA\\[[\\s\\S]*?(?:\\]\\]>\\n*|$)|</?(tag)(?: +|\\n|/?>)[\\s\\S]*?(?:(?:\\n *)+\\n|$)|<(?!script|pre|style|textarea)([a-z][\\w-]*)(?:attribute)*? */?>(?=[ \\t]*(?:\\n|$))[\\s\\S]*?(?:(?:\\n *)+\\n|$)|</(?!script|pre|style|textarea)[a-z][\\w-]*\\s*>(?=[ \\t]*(?:\\n|$))[\\s\\S]*?(?:(?:\\n *)+\\n|$))",def:/^ {0,3}\[(label)\]: *(?:\n *)?([^<\s][^\s]*|<.*?>)(?:(?: +(?:\n *)?| *\n *)(title))? *(?:\n+|$)/,table:Zc,lheading:/^((?:.|\n(?!\n))+?)\n {0,3}(=+|-+) *(?:\n+|$)/,_paragraph:/^([^\n]+(?:\n(?!hr|heading|lheading|blockquote|fences|list|html|table| +\n)[^\n]+)*)/,text:/^[^\n]+/};Ne._label=/(?!\s*\])(?:\\.|[^\[\]\\])+/;Ne._title=/(?:"(?:\\"?|[^"\\])*"|'[^'\n]*(?:\n[^'\n]+)*\n?'|\([^()]*\))/;Ne.def=Xe(Ne.def).replace("label",Ne._label).replace("title",Ne._title).getRegex();Ne.bullet=/(?:[*+-]|\d{1,9}[.)])/;Ne.listItemStart=Xe(/^( *)(bull) */).replace("bull",Ne.bullet).getRegex();Ne.list=Xe(Ne.list).replace(/bull/g,Ne.bullet).replace("hr","\\n+(?=\\1?(?:(?:- *){3,}|(?:_ *){3,}|(?:\\* *){3,})(?:\\n+|$))").replace("def","\\n+(?="+Ne.def.source+")").getRegex();Ne._tag="address|article|aside|base|basefont|blockquote|body|caption|center|col|colgroup|dd|details|dialog|dir|div|dl|dt|fieldset|figcaption|figure|footer|form|frame|frameset|h[1-6]|head|header|hr|html|iframe|legend|li|link|main|menu|menuitem|meta|nav|noframes|ol|optgroup|option|p|param|section|source|summary|table|tbody|td|tfoot|th|thead|title|tr|track|ul";Ne._comment=/<!--(?!-?>)[\s\S]*?(?:-->|$)/;Ne.html=Xe(Ne.html,"i").replace("comment",Ne._comment).replace("tag",Ne._tag).replace("attribute",/ +[a-zA-Z:_][\w.:-]*(?: *= *"[^"\n]*"| *= *'[^'\n]*'| *= *[^\s"'=<>`]+)?/).getRegex();Ne.paragraph=Xe(Ne._paragraph).replace("hr",Ne.hr).replace("heading"," {0,3}#{1,6} ").replace("|lheading","").replace("|table","").replace("blockquote"," {0,3}>").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",Ne._tag).getRegex();Ne.blockquote=Xe(Ne.blockquote).replace("paragraph",Ne.paragraph).getRegex();Ne.normal={...Ne};Ne.gfm={...Ne.normal,table:"^ *([^\\n ].*\\|.*)\\n {0,3}(?:\\| *)?(:?-+:? *(?:\\| *:?-+:? *)*)(?:\\| *)?(?:\\n((?:(?! *\\n|hr|heading|blockquote|code|fences|list|html).*(?:\\n|$))*)\\n*|$)"};Ne.gfm.table=Xe(Ne.gfm.table).replace("hr",Ne.hr).replace("heading"," {0,3}#{1,6} ").replace("blockquote"," {0,3}>").replace("code"," {4}[^\\n]").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",Ne._tag).getRegex();Ne.gfm.paragraph=Xe(Ne._paragraph).replace("hr",Ne.hr).replace("heading"," {0,3}#{1,6} ").replace("|lheading","").replace("table",Ne.gfm.table).replace("blockquote"," {0,3}>").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",Ne._tag).getRegex();Ne.pedantic={...Ne.normal,html:Xe(`^ *(?:comment *(?:\\n|\\s*$)|<(tag)[\\s\\S]+?</\\1> *(?:\\n{2,}|\\s*$)|<tag(?:"[^"]*"|'[^']*'|\\s[^'"/>\\s]*)*?/?> *(?:\\n{2,}|\\s*$))`).replace("comment",Ne._comment).replace(/tag/g,"(?!(?:a|em|strong|small|s|cite|q|dfn|abbr|data|time|code|var|samp|kbd|sub|sup|i|b|u|mark|ruby|rt|rp|bdi|bdo|span|br|wbr|ins|del|img)\\b)\\w+(?!:|[^\\w\\s@]*@)\\b").getRegex(),def:/^ *\[([^\]]+)\]: *<?([^\s>]+)>?(?: +(["(][^\n]+[")]))? *(?:\n+|$)/,heading:/^(#{1,6})(.*)(?:\n+|$)/,fences:Zc,lheading:/^(.+?)\n {0,3}(=+|-+) *(?:\n+|$)/,paragraph:Xe(Ne.normal._paragraph).replace("hr",Ne.hr).replace("heading",` *#{1,6} *[^
]`).replace("lheading",Ne.lheading).replace("blockquote"," {0,3}>").replace("|fences","").replace("|list","").replace("|html","").getRegex()};var xe={escape:/^\\([!"#$%&'()*+,\-./:;<=>?@\[\]\\^_`{|}~])/,autolink:/^<(scheme:[^\s\x00-\x1f<>]*|email)>/,url:Zc,tag:"^comment|^</[a-zA-Z][\\w:-]*\\s*>|^<[a-zA-Z][\\w-]*(?:attribute)*?\\s*/?>|^<\\?[\\s\\S]*?\\?>|^<![a-zA-Z]+\\s[\\s\\S]*?>|^<!\\[CDATA\\[[\\s\\S]*?\\]\\]>",link:/^!?\[(label)\]\(\s*(href)(?:\s+(title))?\s*\)/,reflink:/^!?\[(label)\]\[(ref)\]/,nolink:/^!?\[(ref)\](?:\[\])?/,reflinkSearch:"reflink|nolink(?!\\()",emStrong:{lDelim:/^(?:\*+(?:([punct_])|[^\s*]))|^_+(?:([punct*])|([^\s_]))/,rDelimAst:/^(?:[^_*\\]|\\.)*?\_\_(?:[^_*\\]|\\.)*?\*(?:[^_*\\]|\\.)*?(?=\_\_)|(?:[^*\\]|\\.)+(?=[^*])|[punct_](\*+)(?=[\s]|$)|(?:[^punct*_\s\\]|\\.)(\*+)(?=[punct_\s]|$)|[punct_\s](\*+)(?=[^punct*_\s])|[\s](\*+)(?=[punct_])|[punct_](\*+)(?=[punct_])|(?:[^punct*_\s\\]|\\.)(\*+)(?=[^punct*_\s])/,rDelimUnd:/^(?:[^_*\\]|\\.)*?\*\*(?:[^_*\\]|\\.)*?\_(?:[^_*\\]|\\.)*?(?=\*\*)|(?:[^_\\]|\\.)+(?=[^_])|[punct*](\_+)(?=[\s]|$)|(?:[^punct*_\s\\]|\\.)(\_+)(?=[punct*\s]|$)|[punct*\s](\_+)(?=[^punct*_\s])|[\s](\_+)(?=[punct*])|[punct*](\_+)(?=[punct*])/},code:/^(`+)([^`]|[^`][\s\S]*?[^`])\1(?!`)/,br:/^( {2,}|\\)\n(?!\s*$)/,del:Zc,text:/^(`+|[^`])(?:(?= {2,}\n)|[\s\S]*?(?:(?=[\\<!\[`*_]|\b_|$)|[^ ](?= {2,}\n)))/,punctuation:/^([\spunctuation])/};xe._punctuation="!\"#$%&'()+\\-.,/:;<=>?@\\[\\]`^{|}~";xe.punctuation=Xe(xe.punctuation).replace(/punctuation/g,xe._punctuation).getRegex();xe.blockSkip=/\[[^\]]*?\]\([^\)]*?\)|`[^`]*?`|<[^>]*?>/g;xe.escapedEmSt=/(?:^|[^\\])(?:\\\\)*\\[*_]/g;xe._comment=Xe(Ne._comment).replace("(?:-->|$)","-->").getRegex();xe.emStrong.lDelim=Xe(xe.emStrong.lDelim).replace(/punct/g,xe._punctuation).getRegex();xe.emStrong.rDelimAst=Xe(xe.emStrong.rDelimAst,"g").replace(/punct/g,xe._punctuation).getRegex();xe.emStrong.rDelimUnd=Xe(xe.emStrong.rDelimUnd,"g").replace(/punct/g,xe._punctuation).getRegex();xe._escapes=/\\([!"#$%&'()*+,\-./:;<=>?@\[\]\\^_`{|}~])/g;xe._scheme=/[a-zA-Z][a-zA-Z0-9+.-]{1,31}/;xe._email=/[a-zA-Z0-9.!#$%&'*+/=?^_`{|}~-]+(@)[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)+(?![-_])/;xe.autolink=Xe(xe.autolink).replace("scheme",xe._scheme).replace("email",xe._email).getRegex();xe._attribute=/\s+[a-zA-Z:_][\w.:-]*(?:\s*=\s*"[^"]*"|\s*=\s*'[^']*'|\s*=\s*[^\s"'=<>`]+)?/;xe.tag=Xe(xe.tag).replace("comment",xe._comment).replace("attribute",xe._attribute).getRegex();xe._label=/(?:\[(?:\\.|[^\[\]\\])*\]|\\.|`[^`]*`|[^\[\]\\`])*?/;xe._href=/<(?:\\.|[^\n<>\\])+>|[^\s\x00-\x1f]*/;xe._title=/"(?:\\"?|[^"\\])*"|'(?:\\'?|[^'\\])*'|\((?:\\\)?|[^)\\])*\)/;xe.link=Xe(xe.link).replace("label",xe._label).replace("href",xe._href).replace("title",xe._title).getRegex();xe.reflink=Xe(xe.reflink).replace("label",xe._label).replace("ref",Ne._label).getRegex();xe.nolink=Xe(xe.nolink).replace("ref",Ne._label).getRegex();xe.reflinkSearch=Xe(xe.reflinkSearch,"g").replace("reflink",xe.reflink).replace("nolink",xe.nolink).getRegex();xe.normal={...xe};xe.pedantic={...xe.normal,strong:{start:/^__|\*\*/,middle:/^__(?=\S)([\s\S]*?\S)__(?!_)|^\*\*(?=\S)([\s\S]*?\S)\*\*(?!\*)/,endAst:/\*\*(?!\*)/g,endUnd:/__(?!_)/g},em:{start:/^_|\*/,middle:/^()\*(?=\S)([\s\S]*?\S)\*(?!\*)|^_(?=\S)([\s\S]*?\S)_(?!_)/,endAst:/\*(?!\*)/g,endUnd:/_(?!_)/g},link:Xe(/^!?\[(label)\]\((.*?)\)/).replace("label",xe._label).getRegex(),reflink:Xe(/^!?\[(label)\]\s*\[([^\]]*)\]/).replace("label",xe._label).getRegex()};xe.gfm={...xe.normal,escape:Xe(xe.escape).replace("])","~|])").getRegex(),_extended_email:/[A-Za-z0-9._+-]+(@)[a-zA-Z0-9-_]+(?:\.[a-zA-Z0-9-_]*[a-zA-Z0-9])+(?![-_])/,url:/^((?:ftp|https?):\/\/|www\.)(?:[a-zA-Z0-9\-]+\.?)+[^\s<]*|^email/,_backpedal:/(?:[^?!.,:;*_'"~()&]+|\([^)]*\)|&(?![a-zA-Z0-9]+;$)|[?!.,:;*_'"~)]+(?!$))+/,del:/^(~~?)(?=[^\s~])([\s\S]*?[^\s~])\1(?=[^~]|$)/,text:/^([`~]+|[^`~])(?:(?= {2,}\n)|(?=[a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-]+@)|[\s\S]*?(?:(?=[\\<!\[`*~_]|\b_|https?:\/\/|ftp:\/\/|www\.|$)|[^ ](?= {2,}\n)|[^a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-](?=[a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-]+@)))/};xe.gfm.url=Xe(xe.gfm.url,"i").replace("email",xe.gfm._extended_email).getRegex();xe.breaks={...xe.gfm,br:Xe(xe.br).replace("{2,}","*").getRegex(),text:Xe(xe.gfm.text).replace("\\b_","\\b_| {2,}\\n").replace(/\{2,\}/g,"*").getRegex()};function mH(t){return t.replace(/---/g,"\u2014").replace(/--/g,"\u2013").replace(/(^|[-\u2014/(\[{"\s])'/g,"$1\u2018").replace(/'/g,"\u2019").replace(/(^|[-\u2014/(\[{\u2018\s])"/g,"$1\u201C").replace(/"/g,"\u201D").replace(/\.{3}/g,"\u2026")}function kS(t){let e="",r,i,s=t.length;for(r=0;r<s;r++)i=t.charCodeAt(r),Math.random()>.5&&(i="x"+i.toString(16)),e+="&#"+i+";";return e}var Mi=class t{constructor(e){this.tokens=[],this.tokens.links=Object.create(null),this.options=e||Ni,this.options.tokenizer=this.options.tokenizer||new rl,this.tokenizer=this.options.tokenizer,this.tokenizer.options=this.options,this.tokenizer.lexer=this,this.inlineQueue=[],this.state={inLink:!1,inRawBlock:!1,top:!0};let r={block:Ne.normal,inline:xe.normal};this.options.pedantic?(r.block=Ne.pedantic,r.inline=xe.pedantic):this.options.gfm&&(r.block=Ne.gfm,this.options.breaks?r.inline=xe.breaks:r.inline=xe.gfm),this.tokenizer.rules=r}static get rules(){return{block:Ne,inline:xe}}static lex(e,r){return new t(r).lex(e)}static lexInline(e,r){return new t(r).inlineTokens(e)}lex(e){e=e.replace(/\r\n|\r/g,`
`),this.blockTokens(e,this.tokens);let r;for(;r=this.inlineQueue.shift();)this.inlineTokens(r.src,r.tokens);return this.tokens}blockTokens(e,r=[]){this.options.pedantic?e=e.replace(/\t/g,"    ").replace(/^ +$/gm,""):e=e.replace(/^( *)(\t+)/gm,(d,p,g)=>p+"    ".repeat(g.length));let i,s,a,f;for(;e;)if(!(this.options.extensions&&this.options.extensions.block&&this.options.extensions.block.some(d=>(i=d.call({lexer:this},e,r))?(e=e.substring(i.raw.length),r.push(i),!0):!1))){if(i=this.tokenizer.space(e)){e=e.substring(i.raw.length),i.raw.length===1&&r.length>0?r[r.length-1].raw+=`
`:r.push(i);continue}if(i=this.tokenizer.code(e)){e=e.substring(i.raw.length),s=r[r.length-1],s&&(s.type==="paragraph"||s.type==="text")?(s.raw+=`
`+i.raw,s.text+=`
`+i.text,this.inlineQueue[this.inlineQueue.length-1].src=s.text):r.push(i);continue}if(i=this.tokenizer.fences(e)){e=e.substring(i.raw.length),r.push(i);continue}if(i=this.tokenizer.heading(e)){e=e.substring(i.raw.length),r.push(i);continue}if(i=this.tokenizer.hr(e)){e=e.substring(i.raw.length),r.push(i);continue}if(i=this.tokenizer.blockquote(e)){e=e.substring(i.raw.length),r.push(i);continue}if(i=this.tokenizer.list(e)){e=e.substring(i.raw.length),r.push(i);continue}if(i=this.tokenizer.html(e)){e=e.substring(i.raw.length),r.push(i);continue}if(i=this.tokenizer.def(e)){e=e.substring(i.raw.length),s=r[r.length-1],s&&(s.type==="paragraph"||s.type==="text")?(s.raw+=`
`+i.raw,s.text+=`
`+i.raw,this.inlineQueue[this.inlineQueue.length-1].src=s.text):this.tokens.links[i.tag]||(this.tokens.links[i.tag]={href:i.href,title:i.title});continue}if(i=this.tokenizer.table(e)){e=e.substring(i.raw.length),r.push(i);continue}if(i=this.tokenizer.lheading(e)){e=e.substring(i.raw.length),r.push(i);continue}if(a=e,this.options.extensions&&this.options.extensions.startBlock){let d=1/0,p=e.slice(1),g;this.options.extensions.startBlock.forEach(function(y){g=y.call({lexer:this},p),typeof g=="number"&&g>=0&&(d=Math.min(d,g))}),d<1/0&&d>=0&&(a=e.substring(0,d+1))}if(this.state.top&&(i=this.tokenizer.paragraph(a))){s=r[r.length-1],f&&s.type==="paragraph"?(s.raw+=`
`+i.raw,s.text+=`
`+i.text,this.inlineQueue.pop(),this.inlineQueue[this.inlineQueue.length-1].src=s.text):r.push(i),f=a.length!==e.length,e=e.substring(i.raw.length);continue}if(i=this.tokenizer.text(e)){e=e.substring(i.raw.length),s=r[r.length-1],s&&s.type==="text"?(s.raw+=`
`+i.raw,s.text+=`
`+i.text,this.inlineQueue.pop(),this.inlineQueue[this.inlineQueue.length-1].src=s.text):r.push(i);continue}if(e){let d="Infinite loop on byte: "+e.charCodeAt(0);if(this.options.silent){console.error(d);break}else throw new Error(d)}}return this.state.top=!0,r}inline(e,r=[]){return this.inlineQueue.push({src:e,tokens:r}),r}inlineTokens(e,r=[]){let i,s,a,f=e,d,p,g;if(this.tokens.links){let y=Object.keys(this.tokens.links);if(y.length>0)for(;(d=this.tokenizer.rules.inline.reflinkSearch.exec(f))!=null;)y.includes(d[0].slice(d[0].lastIndexOf("[")+1,-1))&&(f=f.slice(0,d.index)+"["+wS("a",d[0].length-2)+"]"+f.slice(this.tokenizer.rules.inline.reflinkSearch.lastIndex))}for(;(d=this.tokenizer.rules.inline.blockSkip.exec(f))!=null;)f=f.slice(0,d.index)+"["+wS("a",d[0].length-2)+"]"+f.slice(this.tokenizer.rules.inline.blockSkip.lastIndex);for(;(d=this.tokenizer.rules.inline.escapedEmSt.exec(f))!=null;)f=f.slice(0,d.index+d[0].length-2)+"++"+f.slice(this.tokenizer.rules.inline.escapedEmSt.lastIndex),this.tokenizer.rules.inline.escapedEmSt.lastIndex--;for(;e;)if(p||(g=""),p=!1,!(this.options.extensions&&this.options.extensions.inline&&this.options.extensions.inline.some(y=>(i=y.call({lexer:this},e,r))?(e=e.substring(i.raw.length),r.push(i),!0):!1))){if(i=this.tokenizer.escape(e)){e=e.substring(i.raw.length),r.push(i);continue}if(i=this.tokenizer.tag(e)){e=e.substring(i.raw.length),s=r[r.length-1],s&&i.type==="text"&&s.type==="text"?(s.raw+=i.raw,s.text+=i.text):r.push(i);continue}if(i=this.tokenizer.link(e)){e=e.substring(i.raw.length),r.push(i);continue}if(i=this.tokenizer.reflink(e,this.tokens.links)){e=e.substring(i.raw.length),s=r[r.length-1],s&&i.type==="text"&&s.type==="text"?(s.raw+=i.raw,s.text+=i.text):r.push(i);continue}if(i=this.tokenizer.emStrong(e,f,g)){e=e.substring(i.raw.length),r.push(i);continue}if(i=this.tokenizer.codespan(e)){e=e.substring(i.raw.length),r.push(i);continue}if(i=this.tokenizer.br(e)){e=e.substring(i.raw.length),r.push(i);continue}if(i=this.tokenizer.del(e)){e=e.substring(i.raw.length),r.push(i);continue}if(i=this.tokenizer.autolink(e,kS)){e=e.substring(i.raw.length),r.push(i);continue}if(!this.state.inLink&&(i=this.tokenizer.url(e,kS))){e=e.substring(i.raw.length),r.push(i);continue}if(a=e,this.options.extensions&&this.options.extensions.startInline){let y=1/0,x=e.slice(1),w;this.options.extensions.startInline.forEach(function(k){w=k.call({lexer:this},x),typeof w=="number"&&w>=0&&(y=Math.min(y,w))}),y<1/0&&y>=0&&(a=e.substring(0,y+1))}if(i=this.tokenizer.inlineText(a,mH)){e=e.substring(i.raw.length),i.raw.slice(-1)!=="_"&&(g=i.raw.slice(-1)),p=!0,s=r[r.length-1],s&&s.type==="text"?(s.raw+=i.raw,s.text+=i.text):r.push(i);continue}if(e){let y="Infinite loop on byte: "+e.charCodeAt(0);if(this.options.silent){console.error(y);break}else throw new Error(y)}}return r}},il=class{constructor(e){this.options=e||Ni}code(e,r,i){let s=(r||"").match(/\S*/)[0];if(this.options.highlight){let a=this.options.highlight(e,s);a!=null&&a!==e&&(i=!0,e=a)}return e=e.replace(/\n$/,"")+`
`,s?'<pre><code class="'+this.options.langPrefix+Ht(s)+'">'+(i?e:Ht(e,!0))+`</code></pre>
`:"<pre><code>"+(i?e:Ht(e,!0))+`</code></pre>
`}blockquote(e){return`<blockquote>
${e}</blockquote>
`}html(e){return e}heading(e,r,i,s){if(this.options.headerIds){let a=this.options.headerPrefix+s.slug(i);return`<h${r} id="${a}">${e}</h${r}>
`}return`<h${r}>${e}</h${r}>
`}hr(){return this.options.xhtml?`<hr/>
`:`<hr>
`}list(e,r,i){let s=r?"ol":"ul",a=r&&i!==1?' start="'+i+'"':"";return"<"+s+a+`>
`+e+"</"+s+`>
`}listitem(e){return`<li>${e}</li>
`}checkbox(e){return"<input "+(e?'checked="" ':"")+'disabled="" type="checkbox"'+(this.options.xhtml?" /":"")+"> "}paragraph(e){return`<p>${e}</p>
`}table(e,r){return r&&(r=`<tbody>${r}</tbody>`),`<table>
<thead>
`+e+`</thead>
`+r+`</table>
`}tablerow(e){return`<tr>
${e}</tr>
`}tablecell(e,r){let i=r.header?"th":"td";return(r.align?`<${i} align="${r.align}">`:`<${i}>`)+e+`</${i}>
`}strong(e){return`<strong>${e}</strong>`}em(e){return`<em>${e}</em>`}codespan(e){return`<code>${e}</code>`}br(){return this.options.xhtml?"<br/>":"<br>"}del(e){return`<del>${e}</del>`}link(e,r,i){if(e=vS(this.options.sanitize,this.options.baseUrl,e),e===null)return i;let s='<a href="'+e+'"';return r&&(s+=' title="'+r+'"'),s+=">"+i+"</a>",s}image(e,r,i){if(e=vS(this.options.sanitize,this.options.baseUrl,e),e===null)return i;let s=`<img src="${e}" alt="${i}"`;return r&&(s+=` title="${r}"`),s+=this.options.xhtml?"/>":">",s}text(e){return e}},eu=class{strong(e){return e}em(e){return e}codespan(e){return e}del(e){return e}html(e){return e}text(e){return e}link(e,r,i){return""+i}image(e,r,i){return""+i}br(){return""}},$o=class{constructor(){this.seen={}}serialize(e){return e.toLowerCase().trim().replace(/<[!\/a-z].*?>/ig,"").replace(/[\u2000-\u206F\u2E00-\u2E7F\\'!"#$%&()*+,./:;<=>?@[\]^`{|}~]/g,"").replace(/\s/g,"-")}getNextSafeSlug(e,r){let i=e,s=0;if(this.seen.hasOwnProperty(i)){s=this.seen[e];do s++,i=e+"-"+s;while(this.seen.hasOwnProperty(i))}return r||(this.seen[e]=s,this.seen[i]=0),i}slug(e,r={}){let i=this.serialize(e);return this.getNextSafeSlug(i,r.dryrun)}},Di=class t{constructor(e){this.options=e||Ni,this.options.renderer=this.options.renderer||new il,this.renderer=this.options.renderer,this.renderer.options=this.options,this.textRenderer=new eu,this.slugger=new $o}static parse(e,r){return new t(r).parse(e)}static parseInline(e,r){return new t(r).parseInline(e)}parse(e,r=!0){let i="",s,a,f,d,p,g,y,x,w,k,A,M,D,O,L,E,N,B,I,R=e.length;for(s=0;s<R;s++){if(k=e[s],this.options.extensions&&this.options.extensions.renderers&&this.options.extensions.renderers[k.type]&&(I=this.options.extensions.renderers[k.type].call({parser:this},k),I!==!1||!["space","hr","heading","code","table","blockquote","list","html","paragraph","text"].includes(k.type))){i+=I||"";continue}switch(k.type){case"space":continue;case"hr":{i+=this.renderer.hr();continue}case"heading":{i+=this.renderer.heading(this.parseInline(k.tokens),k.depth,TS(this.parseInline(k.tokens,this.textRenderer)),this.slugger);continue}case"code":{i+=this.renderer.code(k.text,k.lang,k.escaped);continue}case"table":{for(x="",y="",d=k.header.length,a=0;a<d;a++)y+=this.renderer.tablecell(this.parseInline(k.header[a].tokens),{header:!0,align:k.align[a]});for(x+=this.renderer.tablerow(y),w="",d=k.rows.length,a=0;a<d;a++){for(g=k.rows[a],y="",p=g.length,f=0;f<p;f++)y+=this.renderer.tablecell(this.parseInline(g[f].tokens),{header:!1,align:k.align[f]});w+=this.renderer.tablerow(y)}i+=this.renderer.table(x,w);continue}case"blockquote":{w=this.parse(k.tokens),i+=this.renderer.blockquote(w);continue}case"list":{for(A=k.ordered,M=k.start,D=k.loose,d=k.items.length,w="",a=0;a<d;a++)L=k.items[a],E=L.checked,N=L.task,O="",L.task&&(B=this.renderer.checkbox(E),D?L.tokens.length>0&&L.tokens[0].type==="paragraph"?(L.tokens[0].text=B+" "+L.tokens[0].text,L.tokens[0].tokens&&L.tokens[0].tokens.length>0&&L.tokens[0].tokens[0].type==="text"&&(L.tokens[0].tokens[0].text=B+" "+L.tokens[0].tokens[0].text)):L.tokens.unshift({type:"text",text:B}):O+=B),O+=this.parse(L.tokens,D),w+=this.renderer.listitem(O,N,E);i+=this.renderer.list(w,A,M);continue}case"html":{i+=this.renderer.html(k.text);continue}case"paragraph":{i+=this.renderer.paragraph(this.parseInline(k.tokens));continue}case"text":{for(w=k.tokens?this.parseInline(k.tokens):k.text;s+1<R&&e[s+1].type==="text";)k=e[++s],w+=`
`+(k.tokens?this.parseInline(k.tokens):k.text);i+=r?this.renderer.paragraph(w):w;continue}default:{let j='Token with "'+k.type+'" type was not found.';if(this.options.silent){console.error(j);return}else throw new Error(j)}}}return i}parseInline(e,r){r=r||this.renderer;let i="",s,a,f,d=e.length;for(s=0;s<d;s++){if(a=e[s],this.options.extensions&&this.options.extensions.renderers&&this.options.extensions.renderers[a.type]&&(f=this.options.extensions.renderers[a.type].call({parser:this},a),f!==!1||!["escape","html","link","image","strong","em","codespan","br","del","text"].includes(a.type))){i+=f||"";continue}switch(a.type){case"escape":{i+=r.text(a.text);break}case"html":{i+=r.html(a.text);break}case"link":{i+=r.link(a.href,a.title,this.parseInline(a.tokens,r));break}case"image":{i+=r.image(a.href,a.title,a.text);break}case"strong":{i+=r.strong(this.parseInline(a.tokens,r));break}case"em":{i+=r.em(this.parseInline(a.tokens,r));break}case"codespan":{i+=r.codespan(a.text);break}case"br":{i+=r.br();break}case"del":{i+=r.del(this.parseInline(a.tokens,r));break}case"text":{i+=r.text(a.text);break}default:{let p='Token with "'+a.type+'" type was not found.';if(this.options.silent){console.error(p);return}else throw new Error(p)}}}return i}},ol=class{constructor(e){this.options=e||Ni}static passThroughHooks=new Set(["preprocess","postprocess"]);preprocess(e){return e}postprocess(e){return e}};function yH(t,e,r){return i=>{if(i.message+=`
Please report this to https://github.com/markedjs/marked.`,t){let s="<p>An error occurred:</p><pre>"+Ht(i.message+"",!0)+"</pre>";if(e)return Promise.resolve(s);if(r){r(null,s);return}return s}if(e)return Promise.reject(i);if(r){r(i);return}throw i}}function LS(t,e){return(r,i,s)=>{typeof i=="function"&&(s=i,i=null);let a={...i};i={...De.defaults,...a};let f=yH(i.silent,i.async,s);if(typeof r>"u"||r===null)return f(new Error("marked(): input parameter is undefined or null"));if(typeof r!="string")return f(new Error("marked(): input parameter is of type "+Object.prototype.toString.call(r)+", string expected"));if(pH(i),i.hooks&&(i.hooks.options=i),s){let d=i.highlight,p;try{i.hooks&&(r=i.hooks.preprocess(r)),p=t(r,i)}catch(x){return f(x)}let g=function(x){let w;if(!x)try{i.walkTokens&&De.walkTokens(p,i.walkTokens),w=e(p,i),i.hooks&&(w=i.hooks.postprocess(w))}catch(k){x=k}return i.highlight=d,x?f(x):s(null,w)};if(!d||d.length<3||(delete i.highlight,!p.length))return g();let y=0;De.walkTokens(p,function(x){x.type==="code"&&(y++,setTimeout(()=>{d(x.text,x.lang,function(w,k){if(w)return g(w);k!=null&&k!==x.text&&(x.text=k,x.escaped=!0),y--,y===0&&g()})},0))}),y===0&&g();return}if(i.async)return Promise.resolve(i.hooks?i.hooks.preprocess(r):r).then(d=>t(d,i)).then(d=>i.walkTokens?Promise.all(De.walkTokens(d,i.walkTokens)).then(()=>d):d).then(d=>e(d,i)).then(d=>i.hooks?i.hooks.postprocess(d):d).catch(f);try{i.hooks&&(r=i.hooks.preprocess(r));let d=t(r,i);i.walkTokens&&De.walkTokens(d,i.walkTokens);let p=e(d,i);return i.hooks&&(p=i.hooks.postprocess(p)),p}catch(d){return f(d)}}}function De(t,e,r){return LS(Mi.lex,Di.parse)(t,e,r)}De.options=De.setOptions=function(t){return De.defaults={...De.defaults,...t},tH(De.defaults),De};De.getDefaults=CS;De.defaults=Ni;De.use=function(...t){let e=De.defaults.extensions||{renderers:{},childTokens:{}};t.forEach(r=>{let i={...r};if(i.async=De.defaults.async||i.async||!1,r.extensions&&(r.extensions.forEach(s=>{if(!s.name)throw new Error("extension name required");if(s.renderer){let a=e.renderers[s.name];a?e.renderers[s.name]=function(...f){let d=s.renderer.apply(this,f);return d===!1&&(d=a.apply(this,f)),d}:e.renderers[s.name]=s.renderer}if(s.tokenizer){if(!s.level||s.level!=="block"&&s.level!=="inline")throw new Error("extension level must be 'block' or 'inline'");e[s.level]?e[s.level].unshift(s.tokenizer):e[s.level]=[s.tokenizer],s.start&&(s.level==="block"?e.startBlock?e.startBlock.push(s.start):e.startBlock=[s.start]:s.level==="inline"&&(e.startInline?e.startInline.push(s.start):e.startInline=[s.start]))}s.childTokens&&(e.childTokens[s.name]=s.childTokens)}),i.extensions=e),r.renderer){let s=De.defaults.renderer||new il;for(let a in r.renderer){let f=s[a];s[a]=(...d)=>{let p=r.renderer[a].apply(s,d);return p===!1&&(p=f.apply(s,d)),p}}i.renderer=s}if(r.tokenizer){let s=De.defaults.tokenizer||new rl;for(let a in r.tokenizer){let f=s[a];s[a]=(...d)=>{let p=r.tokenizer[a].apply(s,d);return p===!1&&(p=f.apply(s,d)),p}}i.tokenizer=s}if(r.hooks){let s=De.defaults.hooks||new ol;for(let a in r.hooks){let f=s[a];ol.passThroughHooks.has(a)?s[a]=d=>{if(De.defaults.async)return Promise.resolve(r.hooks[a].call(s,d)).then(g=>f.call(s,g));let p=r.hooks[a].call(s,d);return f.call(s,p)}:s[a]=(...d)=>{let p=r.hooks[a].apply(s,d);return p===!1&&(p=f.apply(s,d)),p}}i.hooks=s}if(r.walkTokens){let s=De.defaults.walkTokens;i.walkTokens=function(a){let f=[];return f.push(r.walkTokens.call(this,a)),s&&(f=f.concat(s.call(this,a))),f}}De.setOptions(i)})};De.walkTokens=function(t,e){let r=[];for(let i of t)switch(r=r.concat(e.call(De,i)),i.type){case"table":{for(let s of i.header)r=r.concat(De.walkTokens(s.tokens,e));for(let s of i.rows)for(let a of s)r=r.concat(De.walkTokens(a.tokens,e));break}case"list":{r=r.concat(De.walkTokens(i.items,e));break}default:De.defaults.extensions&&De.defaults.extensions.childTokens&&De.defaults.extensions.childTokens[i.type]?De.defaults.extensions.childTokens[i.type].forEach(function(s){r=r.concat(De.walkTokens(i[s],e))}):i.tokens&&(r=r.concat(De.walkTokens(i.tokens,e)))}return r};De.parseInline=LS(Mi.lexInline,Di.parseInline);De.Parser=Di;De.parser=Di.parse;De.Renderer=il;De.TextRenderer=eu;De.Lexer=Mi;De.lexer=Mi.lex;De.Tokenizer=rl;De.Slugger=$o;De.Hooks=ol;De.parse=De;var n7=De.options,r7=De.setOptions,i7=De.use,o7=De.walkTokens,s7=De.parseInline;var a7=Di.parse,l7=Mi.lex;var Oi=(t,e)=>({demo:`${t}:"Header \\"${t}\\""`,examples:[{title:"Variations",view:e.map(r=>`${r}:"Header \\"${r}\\""`)},{title:"Complex content",demo:{view:t,content:['text:"Text "','link:{ text: "Link" }']}},{title:"Using anchor",demo:[{view:t,anchor:"foo",content:'text:"Explicit value for an anchor"'},{view:t,anchor:!0,content:'text:"Auto generated anchor based on text content of header"'}]}]});function ES(t){let e=new $o;function r(i,s,a,f){let{content:d,anchor:p=!1}=s;i.classList.add("view-header");let g=t.view.render(i,d||"text",a,f);return p&&g.then(()=>{let y=e.slug(p===!0?i.textContent:String(p),{dryrun:!0}),x=t.encodePageHash(t.pageId,t.pageRef,{...t.pageParams,"!anchor":y});i.prepend(U("a",{class:"view-header__anchor",id:`!anchor:${y}`,href:x}))}),g}t.view.define("header",r,{tag:"h4",usage:Oi}),t.view.define("h1",r,{tag:"h1",usage:Oi}),t.view.define("h2",r,{tag:"h2",usage:Oi}),t.view.define("h3",r,{tag:"h3",usage:Oi}),t.view.define("h4",r,{tag:"h4",usage:Oi}),t.view.define("h5",r,{tag:"h5",usage:Oi})}var MS={demo:{view:"html",data:'"<h1>I am inner HTML</h1>"'}};function DS(t){let e=document.createElement("div");t.view.define("html",function(r,i,s){e.innerHTML=s,r.append(...e.childNodes)},{tag:null,usage:MS})}var yg="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCAxMjggMTI4Ij4KICAgIDxyZWN0IHg9IjY1LjYiIHk9IjI0LjYiIHRyYW5zZm9ybT0ibWF0cml4KDAuOTM5NyAtMC4zNDIgMC4zNDIgMC45Mzk3IC05Ljk0MjYgMzEuODI4KSIgZmlsbD0iI0ZGRkZGRiIgd2lkdGg9IjM5LjMiIGhlaWdodD0iMzkiPjwvcmVjdD4KICAgIDxyZWN0IHg9IjcwLjYiIHk9IjUyLjciIHRyYW5zZm9ybT0ibWF0cml4KC0wLjkzOTcgMC4zNDIgLTAuMzQyIC0wLjkzOTcgMTk0Ljc4NTIgODEuMTIwNCkiIGZpbGw9IiNDN0Q3RTIiIHdpZHRoPSIzOS4zIiBoZWlnaHQ9IjEwIj48L3JlY3Q+CiAgICA8cGF0aCBmaWxsPSIjOThCRUQ4IiBkPSJNMTExLjUsNTQuNmwtMS4xLDEuMUw5Ny4xLDE5LjFsMS41LDAuMmM4LDAuOSwxNC43LDYuMiwxNy40LDEzLjdsMCwwQzExOC44LDQwLjQsMTE3LDQ4LjgsMTExLjUsNTQuNnoiPjwvcGF0aD4KICAgIDxwYXRoIGZpbGw9IiM0NTRCNTQiIGQ9Ik03My41LDcyLjJjLTEuMiwwLTIuNC0wLjgtMi44LTJMNTcuMywzMy41Yy0wLjMtMC43LTAuMi0xLjYsMC4xLTIuM2MwLjMtMC43LDAuOS0xLjMsMS43LTEuNmwzNi45LTEzLjRjMS42LTAuNiwzLjMsMC4yLDMuOCwxLjhsMTMuMywzNi42YzAuMywwLjcsMC4yLDEuNi0wLjEsMi4zYy0wLjMsMC43LTAuOSwxLjMtMS43LDEuNkw3NC41LDcyQzc0LjIsNzIuMSw3My44LDcyLjIsNzMuNSw3Mi4yek02NCwzNC4zbDExLjMsMzFsMzEuMy0xMS40bC0xMS4zLTMxTDY0LDM0LjN6Ij48L3BhdGg+CiAgICA8cmVjdCB4PSIzNSIgeT0iNDYuNyIgdHJhbnNmb3JtPSJtYXRyaXgoMC45Mzk3IC0wLjM0MiAwLjM0MiAwLjkzOTcgLTE2LjIwMTEgMjAuOTg4KSIgZmlsbD0iI0ZGRkZGRiIgd2lkdGg9IjMyLjgiIGhlaWdodD0iMTkuNSI+PC9yZWN0PgogICAgPHJlY3QgeD0iMzcuMyIgeT0iNTkuOCIgdHJhbnNmb3JtPSJtYXRyaXgoLTAuOTM5NyAwLjM0MiAtMC4zNDIgLTAuOTM5NyAxMjUuNjc2MyAxMDMuMzk0NikiIGZpbGw9IiNDN0Q3RTIiIHdpZHRoPSIzMi44IiBoZWlnaHQ9IjYiPjwvcmVjdD4KICAgIDxwYXRoIGZpbGw9IiM0NTRCNTQiIGQ9Ik0zOS40LDc0LjJjLTAuNCwwLTAuOS0wLjEtMS4zLTAuM2MtMC43LTAuMy0xLjMtMC45LTEuNi0xLjdsLTYuNy0xOC4zYy0wLjMtMC43LTAuMi0xLjYsMC4xLTIuM2MwLjMtMC43LDAuOS0xLjMsMS43LTEuNmwzMC44LTExLjJjMC43LTAuMywxLjYtMC4yLDIuMywwLjFjMC43LDAuMywxLjMsMC45LDEuNiwxLjdMNzMsNTljMC42LDEuNi0wLjIsMy4zLTEuOCwzLjhMNDAuNCw3NEM0MCw3NC4xLDM5LjcsNzQuMiwzOS40LDc0LjJ6IE0zNi41LDU0LjdsNC42LDEyLjdsMjUuMi05LjJsLTQuNi0xMi43TDM2LjUsNTQuN3oiPjwvcGF0aD4KICAgIDxwYXRoIGZpbGw9IiM0NTRCNTQiIGQ9Ik03MCwxMTguOWMtMS4yLDAtMi40LTAuNy0yLjgtMS45bC0xNC0zNy4ybC04LjQsMy4xbC0xNy4yLDM0LjRjLTAuNywxLjUtMi41LDIuMS00LDEuM2MtMS41LTAuNy0yLjEtMi41LTEuMy00TDQwLDc5YzAuMy0wLjcsMC45LTEuMiwxLjctMS41TDU0LDczLjFjMS41LTAuNiwzLjMsMC4yLDMuOCwxLjhsMTUsNDBjMC42LDEuNi0wLjIsMy4zLTEuOCwzLjlDNzAuNywxMTguOCw3MC40LDExOC45LDcwLDExOC45eiI+PC9wYXRoPgogICAgPHBhdGggZmlsbD0iIzQ1NEI1NCIgZD0iTTEzLjYsODAuMWMtMS4yLDAtMi40LTAuOC0yLjgtMkw2LjMsNjUuOWMtMC42LTEuNiwwLjItMy4zLDEuOC0zLjhjMS42LTAuNiwzLjMsMC4yLDMuOCwxLjhsNC40LDEyLjJjMC42LDEuNi0wLjIsMy4zLTEuOCwzLjhDMTQuMyw4MC4xLDE0LDgwLjEsMTMuNiw4MC4xeiI+PC9wYXRoPgogICAgPHBhdGggZmlsbD0iIzQ1NEI1NCIgZD0iTTEzLjIsNzMuM2MtMS4yLDAtMi40LTAuOC0yLjgtMmMtMC42LTEuNiwwLjItMy4zLDEuOC0zLjhMMzUsNTkuMmMxLjYtMC42LDMuMywwLjIsMy44LDEuOGMwLjYsMS42LTAuMiwzLjMtMS44LDMuOGwtMjIuOCw4LjNDMTMuOSw3My4zLDEzLjYsNzMuMywxMy4yLDczLjN6Ij48L3BhdGg+Cjwvc3ZnPgo=",NS={demo:{view:"image",src:yg,height:100},examples:[{title:"Src is not defined",demo:"image"},{title:"Bad url",demo:'image{ src: "<bad url>" }'}]};function OS(t){t.view.define("image",function(e,r){Object.assign(e,r),e.onerror=()=>e.classList.add("error"),e.onload=()=>e.classList.add("loaded")},{tag:"img",usage:NS})}var PS={beforeDemo:['md:"The same as `image` view but with "'],demo:{view:"image-preview",src:yg,height:100},examples:[{title:"Src is not defined",demo:"image-preview"},{title:"Bad url",demo:'image-preview{ src: "<bad url>" }'}]};function IS(t){t.view.define("image-preview",function(e,r,i,s){this.render(e,{view:"image",...r},i,s)},{usage:PS})}var BS={demo:{view:"indicator",data:{label:"Label",value:"1234"}},examples:[{title:"Indicator as link",demo:{view:"indicator",data:{label:"Label",value:"4321",href:"#"}}}]};function qS(t){t.view.define("indicator",function(e,r,i,s){let{value:a,label:f}=r,{href:d}=i||{},p=document.createElement("div"),g=document.createElement("div");return p.className="value",g.className="label",d&&(e.href=d),Promise.all([t.view.render(p,a||"text:value",i,s),t.view.render(g,f||"text:label",i,s)]).then(()=>e.append(p,g))},{tag:"a",usage:BS})}var zS={demo:{view:"link",data:{text:"I am link",href:"#"}},examples:[{title:"Link opened in new tab",demo:{view:"link",data:{text:"Discovery github",href:"https://github.com/discoveryjs/discovery",external:!0}}}]};function RS(t){t.view.define("link",function(e,r,i,s){let{content:a,onClick:f}=r,{href:d,text:p,external:g}=i||{};if(typeof i=="string"&&(d=p=i),p===void 0&&d?p=d:d===void 0&&p&&(d=p),d&&(e.href=d),g&&e.setAttribute("target","_blank"),typeof f=="function"&&(e.classList.add("onclick"),e.addEventListener("click",y=>{y.preventDefault(),f(e,i,s)})),a)return t.view.render(e,a,i,s);e.textContent=p},{tag:"a",usage:zS})}var vg={demo:{view:"markdown",source:`# Markdown example

> NOTE: The \`markdown\` view is based on [marked](https://github.com/markedjs/marked) package

Markdown is good because:
* You'll get **formatted** *text* with _no tags_
* It's much simpler than \`HTML\`

\`\`\`html
<b>bold</b><i>italic</i>
\`\`\`
[Read more](https://guides.github.com/features/mastering-markdown/)`},examples:[{title:"Inline config",demo:'markdown{ source: "**Hello** `world`!" }'},{title:"Shorthand syntax",beforeDemo:['md:"You can use `md` as an alias for `markdown` with a string as data. That\'s a **shortest** definition for a marked text"'],demo:'md:"**Hello** `world`!"'},{title:"Array of strings as a source",beforeDemo:['md:"Array of strings might be passed as a value for `source` property which is useful for a long sources\\n> NOTE: This doesn\'t work a source passed via data"'],demo:{view:"markdown",source:["Array","of","`strings`"]}},{title:"Interpolation",beforeDemo:['md:"Interpolation can be used almost anywhere in a markdown to embed the result of a jora query into resulting HTML. Just place a jora query between `{{`{{`}}` and `{{`}`+`}`}}`:"'],demo:{view:"md",source:["Simple evaluation: 2 + 2 = `{{ 2 + 2 }}`","","Markdown view has {{ viewDef.examples.size() }} examples"]}},{title:"Disable anchors for headers",highlightProps:["anchors"],beforeDemo:"Hover a header to see a chain icon on the left side of header when anchors are enabled:",demo:[{view:"markdown",source:"## header with default settings"},{view:"markdown",anchors:!1,source:"## header with disabled anchor"}]},{title:"Sections prelude and postlude",highlightProps:["sectionPrelude","sectionPostlude"],demo:{view:"markdown",sectionPrelude:"struct",sectionPostlude:{view:"link",data:'{ href: "#top", text: "Scroll to top \u2191" }'},source:`Some text

## Header level 2

Some text

### Header level 3

Some text

## Header level 2

Some text`}},{title:"Additional action buttons for code blocks",highlightProps:["codeActionButtons"],beforeDemo:['md:"Use `codeActionButtons` to add additional buttons to code blocks. The option is the same as `actionButtons` for `source` view."'],demo:{view:"markdown",codeActionButtons:[{view:"button",content:'text:"Say \\"Hello world\\""',onClick:new Function('return () => alert("Hello world!")')()}],source:'```js\nconsole.log("Hello world")\n```'}},{title:"Configuration for code blocks",highlightProps:["codeConfig"],beforeDemo:['md:"Use `codeConfig` to specify any settings for code blocks available for `source` view."'],demo:{view:"markdown",codeConfig:{prelude:{view:"block",content:["badge:syntax",'text:"Length: " + content.size()']},postlude:"struct:{ data: $, context: # }"},source:`# Header 1

\`\`\`js
console.log("Hello world")
\`\`\`

## Header 2

text

## Header 3



\`\`\`jora
foo.bar.baz
\`\`\``}},{title:"Showcase",demo:{view:"markdown",source:`
# Header
## Header
### Header
#### Header
##### Header
* One
* Two
    * Three

4. Four
5. Five
    6. Six
- [{{ true }}] Task 1
- [x] Task 2

Interpolation in text: 2 + 2 = \`{{ 2 + 2 }}\`, or in attribute: [link](#dummy-link/{{"exam" + "ple"}} "{{ "example" + " title" }}")

Paragraph **bold** __bold__ *italic* _italic_ ~line-through~ \`code\` [link](#href)

>Blockquote
> > Line 2

\`\`\`js
var some = "code";
\`\`\`

foo | bar
----|-----
1 | A
2 | C
3 | E
`.trim().split(/\n/)}}]};var bg=class extends De.Renderer{heading(e,r,i,s){let{discovery:a,anchors:f}=this.options,d=s.slug(i),p="";if(f){let g=a.encodePageHash(a.pageId,a.pageRef,{...a.pageParams,"!anchor":d});p=`<a class="view-header__anchor" id="!anchor:${nt(d)}" href="${g}"></a>`}return`<h${r} class="view-header view-h${r}" data-slug="${d}">${p}${e}</h${r}>
`}link(e,r,i){if(e===null)return i;let s='<a class="view-link" href="'+nt(e)+'"';return r&&(s+=' title="'+nt(r)+'"'),e.startsWith("#")||(s+=' target="_blank"'),s+=">"+i+"</a>",s}checkbox(e){return'<label class="view-checkbox"><input type="checkbox" disabled'+(e?" checked":"")+"/></label> "}list(e,r,i){let s=r?"ol":"ul",a=r&&i!==1?` start="${i}"`:"";return`<${s} class="view-${s}"${a}>
`+e+`
</${s}>
`}listitem(e){return'<li class="view-list-item">'+e+`</li>
`}table(e,r){return`<table class="view-table">
<thead>
`+e.replace(/ class="view-table-row"/g,"")+`</thead>
`+(r?"<tbody>"+r+"</tbody>":"")+`</table>
`}tablerow(e){return`<tr class="view-table-row">
`+e+`</tr>
`}tablecell(e,r){let i=r.header?"th":"td";return`<${i} class="view-table-cell"${r.align?` align="${r.align}"`:""}>`+e+`</${i}>
`}};De.setOptions({smartLists:!0,langPrefix:"discovery-markdown-",renderer:new bg});function FS(t){let e={discovery:t};function r(a,f){return a.replace(/{{(\d+)}}/gs,(d,p)=>f[p])}function i(a,f){for(let d of a.childNodes)switch(d.nodeType){case document.ELEMENT_NODE:if(!d.classList.contains("view-source")){i(d,f);for(let p of d.attributes)p.nodeValue=r(p.nodeValue,f)}break;case document.TEXT_NODE:d.nodeValue=r(d.nodeValue,f);break}}function s(a,f,d,p){let{source:g,anchors:y=!0,sectionPrelude:x,sectionPostlude:w,codeConfig:k}=f,A=new Map,M=typeof d=="string"?d:g||"";return Array.isArray(M)&&(M=M.join(`
`)),M=M.replace(/{{(.+?)}}/gs,(D,O)=>(O=O.trim(),A.has(O)||A.set(O,A.size),`{{${A.get(O)}}}`)),a.classList.add("view-markdown"),new Promise(D=>{De(M,{...e,anchors:y},(O,L)=>{let E=[];if(a.innerHTML=L,A.size>0){let I=new Array(A.size);for(let[R,j]of A.entries())try{I[j]=t.query(R,d,p)}catch(F){t.log("error","Interpolation query error in markdown:",F)}i(a,I)}let N=new Map,B={after:I=>a.prepend(I)};if(k||x||w){let{firstElementChild:I}=a,R={next:null,data:{sectionIdx:0,slug:null,text:null,href:null}};N.set(B,R);for(let j of[...a.querySelectorAll(":scope > :is(h1, h2, h3, h4, h5, h6)")]){j===I&&(N.delete(B),B=j,R=null);let F=j.querySelector(':scope > a[id^="!anchor:"]'),se={next:null,data:{sectionIdx:N.size,slug:j.dataset.slug,text:j.textContent.trim(),href:F?.hash}};N.set(j,se),R&&(R.next=j),R=se}}for(let I of[...a.querySelectorAll("pre > code")]){let R=document.createDocumentFragment(),j=I.textContent.replace(/\n$/,""),F=(I.className.match(/discovery-markdown-(\S+)/)||[])[1],se=N.get(B),W=I.parentNode;for(;W!==null&&W!==a;){if(N.has(W)){se=N.get(W);break}W=W.previousSibling||W.parentNode}E.push(this.render(R,typeof k=="object"?{view:"source",...k}:k||"source",{syntax:F,content:j},{...p,section:se?.data}).then(()=>I.parentNode.replaceWith(R)))}if(x||w){let I=(R,j,F)=>{let se=document.createDocumentFragment();E.push(this.render(se,R,d,{...p,section:j.data}).then(()=>F(se)))};for(let[R,j]of N)x&&I(x,j,F=>R.after(F)),w&&I(w,j,F=>j.next?j.next.before(F):a.append(F))}Promise.all(E).then(D)})})}t.view.define("markdown",s,{usage:vg}),t.view.define("md",s,{usage:vg})}var w1=gn(f1(),1),Bi=gn(fr(),1),Z7=gn(lg(),1),eG=gn(p1(),1),tG=gn(y1(),1);var iu=U("div",{style:["position: fixed","overflow: hidden","font-size: 1px","width: 1px","height: 1px","top: 0","left: 0","white-space: pre"].join(";")},["text"]);function MH(t){document.body.append(iu);try{let e=window.getSelection(),r=document.createRange();iu.firstChild.nodeValue=t,r.selectNodeContents(iu),e.removeAllRanges(),e.addRange(r),document.execCommand("copy")}finally{iu.remove()}}async function Wt(t){try{if(navigator.clipboard){let e=await navigator.permissions.query({name:"clipboard-write"});if(e.state==="granted"||e.state==="prompt")return navigator.clipboard.writeText(t)}}catch{}MH(t)}var Go=gn(fr(),1);var Ii='let name = "world";\n\nconsole.log(`Hello, ${name}!`);',DH=new Function("return num => num + 5")();function NH(){let t=new Set,e=new Map,r=i=>{let s=Go.default.resolveMode(i),a=[...e.keys()].find(f=>Ka(f,s));return a||(e.set(s,{name:new Set,mime:new Set}),s)};for(let[i,s]of Object.entries(Go.default.modeToMime)){let a=e.get(r(s));a.mime.add(s),a.name.add(i),t.add(i)}for(let[i,s]of Object.entries(Go.default.mimeModes)){let a=e.get(r(i));a.mime.add(i),typeof s=="string"&&(a.name.add(s),t.add(s))}for(let[i]of Object.entries(Go.default.modes))if(!t.has(i)){let s=Go.default.modes[i];e.has(s)||e.set(s,{name:new Set,mime:[]}),e.get(s).name.add(i)}return[...e.values()].map(i=>({name:[...i.name],mime:[...i.mime]}))}var v1={demo:{view:"source",data:{syntax:"js",content:Ii}},examples:[{title:"Supported syntaxes",beforeDemo:['md:"Following values (for both `name` and `mime`) are supported for `syntax` option:"','html:"<br>"',{view:"table",data:NH,cols:{name:{content:"comma-list:name"},mime:{content:"comma-list:mime"}}},'html:"<br>"',"md:\"More syntaxes may be added via `import 'codemirror/mode/[name]/[name]';`\""],source:!1},{title:"Custom line numbers",highlightProps:["lineNum"],demo:{view:"source",data:{content:Ii,syntax:"js",lineNum:DH}}},{title:"Hide line numbers",highlightProps:["lineNum"],beforeDemo:['md:"Pass falsy value to `lineNum` option to hide line numbers:"'],demo:{view:"source",data:{content:Ii,syntax:"js",lineNum:!1}}},{title:"Additional action buttons",highlightProps:["actionButtons"],demo:{view:"source",actionButtons:[{view:"button",content:'text:"Say \\"Hello world\\""',onClick:new Function('return () => alert("Hello world!")')()}],data:{content:Ii,syntax:"js"}}},{title:"Prelude and postlude slots",highlightProps:["prelude","postlude"],demo:{view:"source",prelude:['text:"Prelude:"',"struct:{ data: $, context: # }"],postlude:['text:"Postlude:"',"struct:{ data: $, context: # }"],data:{content:Ii,syntax:"js"}}},{title:"Highlight ranges",highlightProps:["refs"],demo:{view:"source",data:{syntax:"js",content:Ii,refs:[{range:[4,8]},{range:[21,28],type:"link",href:"#example",tooltip:{position:"trigger",content:['text:"Link to "',"text:href"]}}]}}},{title:"Max content size for syntax highlight",highlightProps:["maxSourceSizeToHighlight"],beforeDemo:['md:"By default a syntax highlighing is not appling to a source longer than 250Kb. Option `maxSourceSizeToHighlight` is using to change max size of source to be syntax highlighted."'],demo:{view:"source",data:{content:Ii,syntax:"js",maxSourceSizeToHighlight:4}}}]};var OH=250*1024;Bi.default.modeToMime={js:"application/javascript",ts:"application/typescript",typescript:"application/typescript",json:"application/json",html:"text/html",css:"text/css",scss:"text/x-scss",less:"text/x-less"};function PH(t,e){let r=Bi.default.getMode(Bi.default.defaults,{name:Bi.default.modeToMime[t]||t,isDiscoveryViewDefined:i=>e.view.isDefined(i)});return(i,s)=>{let a=Bi.default.startState(r),f=i.split(/(\n|\r\n?)/),d=0;for(let p=0;p<f.length;p++){if(p%2===0){let g=new Bi.default.StringStream(f[p],4,{lookAhead:y=>f[p+y],baseToken:function(){}});for(;!g.eol();){let y=r.token(g,a);y&&s(d+g.start,d+g.pos,y),g.start=g.pos}}d+=f[p].length}}}function IH(t,e){let r=t&&t.className,i=[e,Array.isArray(r)?r.join(" "):typeof r=="string"?r:!1].filter(Boolean).join(" ");return i?` class="${i}"`:""}function b1(t){return`${IH(t,"spotlight")}${t.marker?` data-marker="${t.marker}"`:""}${typeof t.tooltipId=="number"?` data-tooltip-id="${t.tooltipId}"`:""}`}var BH={html:{open({data:t}){switch(t.type){case"link":return`<a href="${t.href}"${b1(t)}>`;case"spotlight":return`<span${b1(t)}>`}},close({data:t}){switch(t.type){case"link":return"</a>";case"spotlight":return"</span>"}}}};function x1(t){t.view.define("source",function(e,r,i,s){let a=e.appendChild(U("div","view-source__prelude")),f=e.appendChild(U("div","view-source__content")),d=e.appendChild(U("div","view-source__postlude")),p=new Map,g=[],{mime:y,binary:x,size:w,maxSourceSizeToHighlight:k=OH,syntax:A,lineNum:M=!0,content:D,refs:O}=i;if(typeof D=="string")if(D.length<k&&g.push([PH(A||y,t),{html:{open({data:L}){return'<span class="token '+L+'">'},close(){return"</span>"}}}]),Array.isArray(O)&&g.push([(L,E)=>O.forEach(N=>{if(N.range){let B;N.tooltip&&p.set(B=p.size,N),E(N.range[0],N.range[1],{type:"spotlight",...N,tooltipId:B})}}),BH]),x)f.innerHTML="Binary content"+(typeof w=="number"?" ("+w+" bytes)":"");else{let L=typeof M=="function"?M:B=>B+1,E=M?'<div class="view-source__lines">'+D.split(/\r\n?|\n/g).map((B,I)=>"<span>"+L(I)+"</span>").join("")+"</div>":"";f.innerHTML=E+`<div class="view-source__source">${(0,w1.default)(g,"html")(D)}</div>`;let N=U("div","view-source__action-buttons");t.view.render(N,[r.actionButtons,{view:"button",className:"copy",async onClick(B){clearTimeout(B.copiedTimer),await Wt(D),B.classList.add("copied"),B.copiedTimer=setTimeout(()=>B.classList.remove("copied"),1250)}}],i,s),f.prepend(N);for(let B of f.querySelectorAll(":scope [data-tooltip-id]")){let I=p.get(Number(B.dataset.tooltipId));delete B.dataset.tooltipId,this.tooltip(B,I.tooltip,I,s)}r.prelude&&t.view.render(a,r.prelude,i,s),r.postlude&&t.view.render(d,r.postlude,i,s)}},{usage:v1,tag:"pre"})}var k1={demo:{view:"text",data:'"Hello world!"'},examples:[{title:"Shorthand usage",view:'text:"Hello world!"'}]};function C1(t){t.view.define("text",function(e,r,i){e.appendChild(document.createTextNode(String(i)))},{tag:!1,usage:k1})}var Lg={};Ae(Lg,{has:()=>qH,matchAll:()=>Tg});var Ag={};Ae(Ag,{isArray:()=>Xn,isRegExp:()=>ou,isSet:()=>ii});var{toString:S1}=Object.prototype;function Xn(t){return Array.isArray(t)||ArrayBuffer.isView(t)}function ii(t){return S1.call(t)==="[object Set]"}function ou(t){return S1.call(t)==="[object RegExp]"}function A1(t,e,r){let i=t.slice(r).search(e);return i!==-1?{offset:r+i,length:RegExp.lastMatch.length}:null}function T1(t,e,r){let i=t.indexOf(e,r);return i!==-1?{offset:i,length:e.length}:null}function qH(t,e,r){return ou(e)?r&&!e.ignoreCase?new RegExp(e,e.flags+"i").test(t):e.test(t):typeof e=="string"?r?String(t).toLowerCase().indexOf(e.toLowerCase()):String(t).indexOf(e)!==-1:!1}function Tg(t,e,r,i,s){let a=ou(e)?A1:typeof e=="string"?T1:null,f=String(t);if(s)switch(a){case A1:e.ignoreCase||(e=new RegExp(e,e.flags+"i"));break;case T1:f=f.toLowerCase(),e=e.toLowerCase();break}if(a===null){r(t);return}let d=0;do{let p=a(f,e,d);if(p===null||p.length===0&&p.offset===d){r(d>0?t.slice(d):t);break}p.length!==0&&(p.offset!==d&&r(t.slice(d,p.offset)),i(t.substr(p.offset,p.length))),d=p.offset+p.length}while(d!==t.length)}var L1={demo:{view:"text-match",data:{text:"I am matched text or a text with matches!",match:/match/}},examples:[{title:"Raw string as match",demo:{view:"text-match",data:{text:"I am matched text or a text with matches!",match:"match"}}},{title:"Using with a link",demo:{view:"link",data:{href:"#"},content:'text-match:{ text: "Test link", match: /\\w+/i }'}},{title:"Various configurations",demo:{view:"table",cols:[{header:"text-match",content:"text-match"},{header:"Config",content:"struct"}],data:[null,{},{},{match:"test"},{match:"Test"},{match:"test",ignoreCase:!0},{match:"Test",ignoreCase:!0},{match:/test/},{match:/test/g},{match:/test/i},{match:/test/,ignoreCase:!0},{match:/test/g,ignoreCase:!0}].map((t,e)=>e>1?{text:"test Test",...t}:t)}}]};var zH=U("span","view-text-match");function E1(t){t.view.define("text-match",function(e,r,i){let{text:s,match:a,ignoreCase:f=!1}=i||{};Tg(String(s),a,d=>e.appendChild(qt(d)),d=>e.appendChild(zH.cloneNode()).appendChild(qt(d)),f)},{tag:!1,usage:L1})}var M1={demo:{view:"text-numeric",data:'"Like a `text` view but adds a thousands separator to integer part of numbers, e.g. 12345678 or 12345.67890"'},examples:[{title:"Shorthand usage",view:"text-numeric:1234567"}]};function D1(t){t.view.define("text-numeric",function(e,r,i){e.innerHTML=nn(i)},{tag:"span",usage:M1})}var N1={demo:{view:"context",data:{name:"text",demo:123},content:["text:name","table"]},examples:[{title:"Using with modifiers",demo:{view:"context",modifiers:['h2:"Modifiers"',{view:"input",name:"inputValue"},{view:"select",name:"selectValue",data:["foo","bar","baz"]}],content:['h2:"Values"',"struct:#"]}}]};function O1(t){t.view.define("context",function(e,r,i,s){function a(){let L=g.previousSibling;for(;L&&L!==p;)L=L.previousSibling,L.nextSibling.remove();let E=y=document.createDocumentFragment();return t.view.render(E,k,i,d).then(()=>{E===y&&(t.view.adoptFragment(E,p),p.after(E))})}function f(L,E){E&&(!hasOwnProperty.call(d,E)||d[E]!==L)&&(d={...d,[E]:L},x?(a(),A&&typeof D=="function"&&D(L,E)):typeof M=="function"&&M(L,E))}let d=s,p=null,g=null,y=null,x=!1,{modifiers:w=[],content:k=[]}=r,{proxy:A,onInit:M,onChange:D}=r;Array.isArray(w)||(w=[w]);let O=t.view.render(e,this.composeConfig(w,{onInit:f,onChange:f}),i,s);return p=e.appendChild(document.createComment('{ view: "context" } content start')),g=e.appendChild(document.createComment('{ view: "context" } content end')),A&&(M||D)&&(k=this.composeConfig(k,{onInit:M,onChange:D})),O.then(()=>(x=!0,a()))},{tag:!1,usage:N1})}var P1={demo:{view:"switch",data:{enabled:!0},content:[{when:"not enabled",content:'text:"I am disabled"'},{when:"enabled",content:'text:"I am enabled"'}]},examples:[{title:"Using with tabs",demo:{view:"context",modifiers:{view:"tabs",tabs:["foo","bar","baz"],name:"section"},content:{view:"switch",content:[{when:'#.section="foo"',content:'text:"FOO!"'},{when:'#.section="bar"',content:'text:"BAR!!"'},{content:'text:"When no other conditions are met"'}]}}}]};function I1(t){t.view.define("switch",function(e,r,i,s){let{content:a}=r,f='alert-warning:"No case choosen"';if(Array.isArray(a))for(let d=0;d<a.length;d++){let p=a[d];if(p&&t.queryBool(p.when||!0,i,s)){f="data"in p?{view:"context",data:p.data,content:p.content}:p.content;break}}return t.view.render(e,f,i,s)},{tag:!1,usage:P1})}function Eg(t,e,r){for(let i in t){if(!hasOwnProperty.call(t,i))continue;if(!e){r.properties=null;break}let s;r.dictMode?(s=r.dictMode,s.count++,s.keys.add(i)):r.properties.has(i)?(s=r.properties.get(i),s.count++):(s={count:1,map:Object.create(null)},r.properties.set(i,s)),Vo(t[i],e-1,s.map)}}function Vo(t,e,r=Object.create(null)){let i=t===null?"null":Xn(t)?"array":ii(t)?"set":typeof t;switch(i){default:i in r||(r[i]=new Map),r[i].set(t,(r[i].get(t)||0)+1);break;case"object":"object"in r||(r.object=new Map,r.object.count=0,r.object.properties=new Map,r.object.dictMode=null,r.object.sortKeys=!1),r.object.count++,r.object.has(t)?r.object.set(t,r.object.get(t)+1):(r.object.set(t,1),Eg(t,e,r.object));break;case"array":"array"in r||(r.array=new Map,r.array.count=0,r.array.map=Object.create(null)),r.array.count++,r.array.set(t,(r.array.get(t)||0)+1);for(let s=0;s<t.length;s++)Vo(t[s],e,r.array.map);break;case"set":"set"in r||(r.set=new Map,r.set.count++,r.set.map=Object.create(null)),r.set.count++,r.set.set(t,(r.set.get(t)||0)+1);for(let s of t)Vo(s,e,r.set.map);break}return r}var su=["rgba(83,211,75,0.75)","rgba(241,235,44,0.75)","rgba(244,152,99,0.75)","rgba(148,99,244,0.75)","rgba(44,132,241,0.75)","rgba(233,117,117,0.75)","rgba(85,187,155,0.75)","rgba(151,147,99,0.75)","rgba(216,107,196,0.75)","rgba(108,204,227,0.75)","rgba(164,164,164,0.75)"],sl=["null","undefined","string","number","bigint","boolean","symbol","function","array","set","object"];function Ko(t,e,r,i=[],s=""){Object.keys(e).sort((a,f)=>sl.indexOf(a)-sl.indexOf(f)).forEach((a,f)=>{switch(f>0&&t.appendChild(qt(" | ")),a){default:{let d=t.appendChild(U("span","type",a));r.set(d,{type:"type",path:i,stat:e,name:a});break}case"object":{let d=e[a],{properties:p,dictMode:g,sortKeys:y}=d;if(p===null){r.set(t.appendChild(U("span","expand","{\u2026}")),{type:"expand",path:i,map:e[a],offset:s});break}if(p.size===0){t.appendChild(U("span","object","{}"));break}let x=d.size,w=g?[["[key]",g]]:[...p.entries()],k=s+"    ",A=t.appendChild(U("span","object",["{",U("span",{"data-action":"collapse"})]));p.size>1&&(A.appendChild(U("span",{title:"Toggle dictionary mode (collapse all the values in a single signature)","data-action":"dict-mode","data-enabled":g!==null})),w.some(([M],D)=>D!==0&&M<w[D-1][0])&&A.appendChild(U("span",{title:"Toggle keys sorting","data-action":"sort-keys","data-enabled":y}))),r.set(A,{type:"shape",path:i,map:e[a],offset:s}),x>1&&(A.appendChild(U("span","count")).dataset.value=String(x)),y&&w.sort(([M],[D])=>M<D?-1:M>D?1:0);for(let[M,{count:D,map:O}]of w){let L=U("span","property",[M]);r.set(L,{type:"property",path:i,stat:e,name:M,map:O}),A.appendChild(qt(`
${k}`)),A.appendChild(L),D!==x&&g===null&&L.appendChild(U("span","optional","?")),A.appendChild(qt(": ")),Ko(A,O,r,i.concat(g?"*":M),k),A.appendChild(qt(";"))}A.lastChild.nodeValue===";"&&A.appendChild(qt(`
${s}`)),A.appendChild(qt("}"));break}case"array":t.appendChild(qt("[")),Ko(t,e[a].map,r,i,s),t.appendChild(qt("]"));break;case"set":t.appendChild(qt("Set(")),Ko(t,e[a].map,r,i,s),t.appendChild(qt(")"));break}})}function Yo(t,e){return t.toFixed(e).replace(/\.?0+$/,"")}function B1(t){let e=Math.cos(2*Math.PI*t),r=Math.sin(2*Math.PI*t);return[e,r]}function q1(t){let e=0;return['<svg viewBox="-1 -1 2 2" class="pie">',...t.map(r=>{let[i,s]=B1(e),[a,f]=B1(e+=r.percent),d=r.percent>.5?1:0;return`<path d="${[`M ${i} ${s}`,`A 1 1 0 ${d} 1 ${a} ${f}`,"L 0 0"].join(" ")}" fill="${r.color}"/>`}),"</svg>"].join(`
`)}function RH(t){let e=0;for(let r in t)t[r].forEach(i=>e+=i);return e}function FH(t){let e=Object.create(null);for(let r in t)e[r]=0,t[r].forEach(i=>e[r]+=i);return e}function z1(t,e,r){let{count:i,map:s}=e.stat.object.dictMode||e.stat.object.properties.get(e.name),a=(e.stat.object.dictMode||e.stat.object).count,f={name:e.name,path:e.path,total:a,count:i,percent:Yo(100*i/a,1)+"%"};r.view.render(t,[{view:"block",when:"path",className:"path",data:d=>r.pathToQuery(d.path),content:"text:$"},{view:"h1",className:"property",content:["text:name",{view:"html",when:"count != total",data:`"<span class=\\"usage-stat optional\\">" + (
                        "(in <span class=\\"num\\">" + count + "</span> of <span class=\\"num\\">" + total + "</span> objects, <span class=\\"num\\">" + percent + "</span>)"
                    ) + "</span>"`}]}],f),R1(t,{map:s,count:i},r)}function R1(t,{map:e,count:r},i){let s=FH(e),a=[],f=sl.filter(d=>d in e);Object.entries(s).sort(([,d],[,p])=>d-p).reverse().forEach(([d,p],g)=>{a.push({name:nt(d),count:p,percent:p/r,percent100:Yo(100*p/r,1),color:su[g]})}),i.view.render(t,{view:"block",when:"typeStat.size() > 1",data:"typeStat",className:"pie-stat",content:[{view:"block",content:{view:"html",data:q1}},{view:"block",content:['html:"<span class=\\"list-header\\">Types usage:</span>"',{view:"list",item:`html:
                            "<span class=\\"dot\\" style=\\"--size: 10px; background-color: " + color + "\\"></span> " +
                            "<span class=\\"caption\\">" + name + "</span>" +
                            "<span class=\\"times\\"> \xD7 " + count + " (" + percent100 + "%)</span>"
                        `}]}]},a),f.forEach(d=>Mg(t,{name:d,stat:e},i))}function Mg(t,e,r){let i=e.stat[e.name],s=RH(e.stat),a=[],f;switch(e.name){case"number":{let d=[],p=0,g=0,y=0,x=1/0,w=-1/0;i.forEach((k,A)=>{d.push({count:k,value:A}),p+=A*k,g+=k,k>1&&y++,A<x&&(x=A),A>w&&(w=A)}),f={type:e.name,count:g,distinct:i.size,duplicated:y,min:x,max:w,sum:p,avg:Yo(p/g,3),values:d.sort((k,A)=>A.count-k.count||k.value-A.value)},f.distinct>1&&a.push({view:"block",className:"overview-stat",content:`html:
                        "range: (min) <span class=\\"num\\">" + min + "</span> ... " +
                        "<span class=\\"num\\">" + max + "</span> (max), " +
                        "avg: <span class=\\"num\\">" + avg + "</span>"
                    `});break}default:{let d=[],p=0,g=0;i.forEach((y,x)=>{d.push({count:y,value:x}),p+=y,y>1&&g++}),f={type:e.name,count:p,distinct:i.size,duplicated:g,values:e.name==="object"||e.name==="array"||e.name==="set"?d.sort((y,x)=>x.count-y.count):d.sort((y,x)=>x.count-y.count||y.value>x.value||-(y.value<x.value))};break}}if(e.name!=="undefined"&&e.name!=="null"){if(a.unshift({view:"block",className:"overview-stat",content:['html:"<span class=\\"num\\">" + count + "</span> " + (count > 1 ? "values, " : "value")',{view:"switch",when:"count > 1",content:[{when:"distinct = 1",content:'text:"a single unique value:"'},{when:"distinct = count",content:'text:"all unique, no duplicates"'},{content:['html:"<span class=\\"num\\">" + distinct + "</span> unique, "','html:duplicated = distinct ? "all occur more than once" : "<span class=\\"num\\">" + duplicated + "</span> occur more than once"']}]}]}),f.values.length>1&&f.duplicated&&e.name!=="object"&&e.name!=="set"&&e.name!=="array"){let d=[],p=f.values.length===10?10:Math.min(9,f.values.length),g=0;for(let y=0;y<p;y++){let{count:x,value:w}=f.values[y];g+=x,d.push({name:nt(String(w)),count:x,percent:x/f.count,percent100:Yo(100*x/f.count,1),color:su[y]})}if(d.length){let y=f.count-g;y>0&&d.push({name:"...",count:y,percent:y/f.count,percent100:Yo(100*y/f.count,1),color:su[d.length]}),a.push({view:"block",className:"pie-stat",data:d,content:[{view:"block",content:{view:"html",data:q1}},{view:"block",content:['html:"<span class=\\"list-header\\">Dominators:</span>"',{view:"list",item:`html:
                                        "<span class=\\"dot\\" style=\\"--size: 10px; background-color: " + color + "\\"></span> " +
                                        "<span class=\\"caption\\" title=\\"" + name + "\\">" + name + "</span>" +
                                        "<span class=\\"times\\"> \xD7 " + count + " (" + percent100 + "%)</span>"
                                    `}]}]})}}f.values.length>1?(e.name==="number"||e.name==="string")&&a.push({view:"content-filter",name:"filter",content:{view:"menu",data:"values.[no #.filter or value~=#.filter].sort(=>value)",item:[{view:"block",className:"caption",content:"text-match:{ text: value, match: #.filter }"},{view:"block",when:"count > 1",className:"count",content:'text:" \xD7 " + count'}]}}):(e.name==="number"||e.name==="string"||e.name==="boolean")&&a.push({view:"struct",data:"values.pick().value"}),e.name==="object"&&a.push({view:"list",className:"struct-list",data:"values",item:["struct:value",{view:"block",when:"count > 1",className:"count",content:'text:" \xD7 " + count'}]}),(e.name==="array"||e.name==="set")&&Object.keys(i.map).length&&a.push({view:"block",className:e.name==="array"?"array-types":"set-types",content:d=>R1(d,i,r)})}r.view.render(t,[{view:"block",when:"path",className:"path",data:d=>r.pathToQuery(d.path),content:"text"},{view:"h1",className:"type",content:["text:name",`html:"<span class=\\"usage-stat\\">" + (
                    count = total
                        ? "only this type is used"
                        : "used in <span class=\\"num\\">" + count + "</span> of <span class=\\"num\\">" + total + "</span> cases (<span class=\\"num\\">" + percent + "</span>)"
                ) + "</span>"`]},...a],{...f,name:e.name,path:e.path,total:s,percent:Yo(100*f.count/s,1)+"%"},{})}var F1={beforeDemo:['md:"The `signature` view is used to output a type definition for current data using TypeScript like style:"'],demo:{view:"signature",expanded:!0}};function _1(t){let e=new WeakMap,r=({target:i})=>{let s="expand",a=i.closest(`
            .view-signature .expand,
            .view-signature [data-action]
        `);if(!a)return;a.dataset.action&&(s=a.dataset.action,a=a.parentNode);let f=e.get(a);if(f){let{path:d,map:p,offset:g}=f,y=document.createDocumentFragment();switch(s){case"sort-keys":p.sortKeys=!p.sortKeys;break;case"dict-mode":if(p.dictMode)p.dictMode=null;else{let x=p.dictMode={keys:new Set,count:0,map:Object.create(null)};p.forEach((w,k)=>{for(let A in k)hasOwnProperty.call(k,A)&&(x.keys.add(A),x.count++,Vo(k[A],1,x.map))})}break;default:p.properties===null?(p.properties=new Map,p.forEach((x,w)=>Eg(w,1,p))):p.properties=null}Ko(y,{object:p},e,d,g),a.replaceWith(y)}};t.addHostElEventListener("click",r,!1),new t.view.Popup({className:"signature-details",hoverPin:"trigger-click",hoverTriggers:`
            .view-signature .property,
            .view-signature .type
        `,render:function(i,s){let a=e.get(s);switch(a.type){case"property":return z1(i,a,t);case"type":return Mg(i,a,t)}}}),t.view.define("signature",function(i,s,a){let{expanded:f,path:d}=s,p=Vo(a,f),g=Array.isArray(d)?d:void 0;Ko(i,p,e,g)},{usage:F1})}var j1=(t,e,r,i,s,a,f)=>({target:d})=>{let p="expand",g=d.closest(`
        .view-struct.struct-expand,
        .view-struct .struct-expand-value,
        .view-struct .struct-action-button
    `);if(g)switch(g.dataset.action&&(p=g.dataset.action),p){case"expand":g.classList.contains("struct-expand")&&(g=g.lastChild),t(g,0),r(),g.parentNode.classList.add("struct-expanded-value"),s.has(g.parentNode)&&g.parentNode.classList.remove("struct-expand");break;case"collapse":g=g.parentNode,e(g),r(),g.parentNode.classList.remove("struct-expanded-value"),g.classList.remove("view-as-table"),s.has(g.parentNode)&&g.parentNode.classList.add("struct-expand");break;case"show-signature":f.show(g);break;case"value-actions":a.show(g);break;case"toggle-sort-keys":t(g.parentNode,0,g.parentNode.classList.toggle("sort-keys")),r();break;case"toggle-string-mode":g=g.parentNode;let y=g.querySelector(".string-text").firstChild;y.nodeValue=g.classList.toggle("string-value-as-text")?JSON.parse(`"${y.nodeValue}"`):JSON.stringify(y.nodeValue).slice(1,-1);break;case"toggle-view-as-table":if(g=g.parentNode,g.classList.toggle("view-as-table"))i(g);else{let w=g.querySelector(":scope > .view-table");w&&w.remove()}break}};var Ig={};Ae(Ig,{jsonStringifyAsJavaScript:()=>oi,jsonStringifyInfo:()=>au});var oA=gn(rA(),1),{stringifyInfo:au}=oA.default;function g4(t,e,r){let i=String(t),[s,a]=i.match(/^(?:\S+\s+)?(\S+)\(/)||[];if(s!=="function"&&s!=="function*"&&a===r.trim().slice(0,-1)&&(r=""),i.indexOf(`
`)===-1)return r+i;let f=i.split(/\n/),d=f[f.length-1].match(/^\s*/)[0].length,p=new RegExp("^\\s{0,"+d+"}");return r+f.map((g,y)=>y&&g.length?g.replace(p,e):g).join(`
`)}function m4(t,e,r){return typeof t=="function"?g4(t,e,r):t instanceof Date?`${r}new Date("${t.toISOString()}")`:r+String(t)}var{toString:iA}=Object.prototype,y4=new Set(["[object Function]","[object RegExp]","[object Date]"]);function oi(t,e,r=4){let i=[];return String(JSON.stringify(t,e||function(a,f){return typeof f=="string"&&iA.call(this[a])==="[object Date]"&&(f=this[a]),f!==null&&y4.has(iA.call(f))?(i.push(f),"{{{__placeholder__}}}"):f},r)).replace(/"((?:\\.|[^"])*)"(:?)/g,(a,f,d)=>d&&/^[a-z$_][a-z$_\d]*$/i.test(f)?f+d:`'${f.replace(/\\"/g,'"').replace(/'/g,"\\'")}'`+d).replace(/(^|\n)([ \t]*)(.*?)([a-zA-Z$_][a-zA-Z0-9$_]+:\s*)?'{{{__placeholder__}}}'/g,(a,f,d,p,g)=>f+d+p+m4(i.shift(),d,g))}function sA(t){return t?", "+nn(t)+" bytes":""}function aA(t,e,r){return new t.view.Popup({className:"view-struct-actions-popup",render:(i,s,a)=>{let f=s.parentNode,d=e.get(f),p=[];if(typeof d=="string")p=[{text:"Copy as quoted string",action:()=>Wt(JSON.stringify(d))},{text:"Copy as unquoted string",action:()=>Wt(JSON.stringify(d).slice(1,-1))},{text:"Copy a value (unescaped)",action:()=>Wt(d)}];else{let g=t.pathToQuery(r(f)),y=1024*1024*1024,x=!1,w=!1,k=0,A=0;try{let{minLength:M,circular:D}=au(d);k=M,D.length?w="Converting circular structure to JSON":k>y?w="Resulting JSON is over 1 Gb":(A=au(d,null,4).minLength,A>y&&(x="Resulting JSON is over 1 Gb"))}catch(M){w=/Maximum call stack size|too much recursion/i.test(M.message)?"Too much nested structure":M.message}w&&(w="Can't be copied: "+w,x||(x=w)),g&&p.push({text:"Copy path:",notes:nt(g),action:()=>Wt(g)}),p.push({text:"Copy as JSON",notes:`(formatted${sA(A)})`,error:x,disabled:!!x,action:()=>Wt(JSON.stringify(d,null,4))}),p.push({text:"Copy as JSON",notes:`(compact${w?"":sA(k)})`,error:w,disabled:!!w,action:()=>Wt(JSON.stringify(d))})}t.view.render(i,{view:"menu",onClick(g){a(),g.action()},item:["html:text",{view:"block",when:"notes",className:"notes",content:"html:notes"},{view:"block",when:"error",className:"error",content:"text:error"}]},p)}})}var v4=/^(?:https?:)?\/\/(?:[a-z0-9\-]+(?:\.[a-z0-9\-]+)+|\d+(?:\.\d+){3})(?:\:\d+)?(?:\/\S*?)?$/i,b4=Object.prototype.toString;function Nr(t,e){return`<span class="${t}">${e}</span>`}function lu(t){return Nr("more",`\u2026${nn(t)} more\u2026`)}function qi(t,e,r){switch(typeof t){case"boolean":case"undefined":return Nr("keyword",t);case"number":case"bigint":return Nr("number",nn(t));case"symbol":return Nr("symbol",String(t));case"function":return"\u0192n";case"string":{let i=e?r.maxCompactStringLength:r.maxStringLength,s=t.length>i+r.allowedExcessStringLength,a=s?nt(JSON.stringify(t.slice(0,i)).slice(1,-1)):nt(JSON.stringify(t).slice(1,-1)),f=s?lu(t.length-i):"";return Nr("string",!e&&(t[0]==="h"||t[0]==="/")&&v4.test(t)?`"<a href="${nt(t)}" target="_blank">${a}</a>${f}"`:`"${a}${f}"`)}case"object":{if(t===null)return Nr("keyword","null");if(Xn(t)){let f=r.limitCollapsed===!1||r.limitCollapsed>t.length?t.length:r.limitCollapsed,d=Array.from({length:f},(p,g)=>qi(t[g],!0,r));return t.length>f&&d.push(`${lu(t.length-f)} `),`[${d.join(", ")}]`}switch(b4.call(t)){case"[object Set]":{let f=r.limitCollapsed===!1||r.limitCollapsed>t.size?t.size:r.limitCollapsed,d=t.values(),p=Array.from({length:f},()=>qi(d.next().value,!0,r));return t.size>f&&p.push(`${lu(t.size-f)} `),`[${p.join(", ")}]`}case"[object Date]":return Nr("date",t);case"[object RegExp]":return Nr("regexp",t)}if(e&&r.limitCompactObjectEntries===0){for(let f in t)if(hasOwnProperty.call(t,f))return"{\u2026}";return"{}"}let i=e?r.limitCompactObjectEntries===!1?1/0:r.limitCompactObjectEntries:r.limitCollapsed===!1?1/0:r.limitCollapsed,s=[],a=0;for(let f in t)if(hasOwnProperty.call(t,f)){if(a<i){let d=nt(f.length>r.maxCompactPropertyLength?f.slice(0,r.maxCompactPropertyLength)+"\u2026":f);s.push(`${Nr("property",d)}: ${qi(t[f],!0,r)}`)}a++}return a>i&&s.push(lu(a-i)),s.length?`{ ${s.join(", ")} }`:"{}"}default:return`unknown type "${typeof t}"`}}var w4=["none","default","badge"];function Bg(t){let e=Date.now()+8,r=0;for(;r<t.length&&!(Date.now()>e);r++){let{el:i,config:s,renderer:a,data:f,context:d}=t[r],{place:p="after",className:g,text:y=typeof s!="object"?String(s):"",icon:x,href:w,external:k,tooltip:A}=s,M=w4.includes(s.style)?s.style:p==="before"?"none":"default",D=y!=="",O=["value-annotation","style-"+M,p==="before"?"before":"after",D?"has-text":"",g||""].join(" "),L=U(w?"a":"span",{class:O,href:typeof w=="string"?w:void 0,target:k?"_blank":void 0});if(D&&(/\d{4}/.test(y)?L.innerHTML=nn(y):L.append(y)),x&&(L.classList.add("icon"),/^[a-z_$][a-z0-9_$-]*$/i.test(x)?L.classList.add("icon-"+x):L.style.setProperty("--annotation-image",`url("${x}")`)),A&&a.tooltip(L,A,f,{...d,config:s}),p==="before")i.before(L);else{let E=i.parentNode;i.annotationsEl||(i.annotationsEl=U("span","value-annotations"),E.classList.contains("struct-expanded-value")?i.querySelector(":scope > .value-size, :scope > .string-length").after(i.annotationsEl):E.append(i.annotationsEl)),i.annotationsEl.append(L)}}t.splice(0,r)}var lA={level_1:{level_2_1:{level_3_1:{level_4_1:{}},level_3_2:2,level_3_3:3,level_3_4:4,level_3_5:5,level_3_6:6},level_2_2:[{foo:1,bar:2},{foo:3}],level_2_3:3,level_2_4:4,level_2_5:5,level_2_6:6},level_1_2:2,level_1_3:3,level_1_4:4,level_1_5:5,level_1_6:6,level_1_7:7},cA={beforeDemo:['md:"View to display the structure of any value. This is the simplest yet powerful way to enable data exploration."'],demo:{view:"struct",data:{foo:"bar",baz:[1,2,3]}},examples:[{title:"Default expanded depth",highlightProps:["expanded"],beforeDemo:['md:"By default `struct` view is collapsed in one line. The `expanded` option is using to specify an initial expanded depth. A value for the option can be a boolean (`false` \u2192 `0`, `true` \u2192 `1`) or a positive number."'],demoData:lA,demo:['badge:"Default (expanded option is not used)"',{view:"struct"},'badge:"expanded = true"',{view:"struct",expanded:!0},'badge:"expanded = 2"',{view:"struct",expanded:2}]},{title:"Annotations",highlightProps:["annotations"],beforeDemo:[{view:"md",source:["Clarity of data can be improved by adding annotations. An annotation is special marker before or after a value which displaying for expanded objects and arrays only.","Any number of annotations can be applied to a single value.","","Annotations are adding with `annotations` option which should contain an array of strings (jora queries) and functions to compute an annotation config. An annotation config is an object with following fields:","```ts","type AnnotationConfig = {",'   place?: "before" | "after"; // the placement of an annotation, "after" is by default','   style?: "none" | "badge" | "default"; // appereance of annotation, "default" is by default',"   className?: string;         // a class to add to an annotation element","   text?: any;                 // text content of an annotation element","   icon?: string;              // name of icon or url to an image","   href?: string;              // annotation is a link and that's an URL","   external?: boolean;         // open a link in new tab, make sence when `href` is specified only","   tooltip?: TooltipConfig;    // configuration for a tooltip, the same as for any view","}","```","",'An annotation is not displayed (not rendered) when computed annotation config is a falsy value. Any other value (truthy, but not an object) is used as value for `text` option, i.e. `"example"` is the same as `{ text: "example" }`.',"","In addition to a string or function, an object can be used as an element of `annotations` array","* `query` \u2013 a string (jora query) or a function to compute an annotation config","* `debug` (optional) - when truthy a debug information is output to the console; when value is a string, it's used in debug message"]}],demoData:{items:[{id:1,value:"example"},{id:2,value:"bar"},{id:3,value:"baz"}],"annotation styles":["none","default","badge"]},demo:{view:"struct",expanded:3,annotations:['#.key = "items" ? { place: "before", style: "badge", text: "view as table", tooltip: "table" } : null',`$ ~= /az/ and "Value has 'az' substring!"`,'$ in ["none", "default", "badge"] and { style: $, place: "before", text: $ + " before" }','$ in ["none", "default", "badge"] and { style: $, text: $ + " after" }']}},{title:"Limit number of array elements and object entries",beforeDemo:{view:"md",source:["The following options define the maximum number of elements in array or entries in object:","* `limit` (default: `50`) \u2013 max number of elements/entries for expanded array/object","* `limitCollapsed` (default: `4`) \u2013 max of elements/entries for collapsed array/object","* `limitCompactObjectEntries` (default: `0`) \u2013 max number of entries in a object which appears in a collapsed array or object","","> Use `false` for any of these options to disable a limitation"]},highlightProps:["limit","limitCollapsed","limitCompactObjectEntries"],demoData:lA,demo:{view:"struct",limit:4,limitCollapsed:1,expanded:2}},{title:"Maximum length for strings",beforeDemo:{view:"md",source:["The following options define the maximum string length in various cases:","* `maxStringLength` (default: `150`) \u2013 max string length when a host value is expanded","* `maxCompactStringLength` (default: `40`) \u2013 max of string length when a host value is collapsed",'* `allowedExcessStringLength` (default: `10`) \u2013 allowed excess in length before a string will be cut and \\"N more\\" label will be added',"* `maxPropertyLength` (default: `Infinity`) \u2013 max of property name length","* `maxCompactPropertyLength` (default: `35`) \u2013 max of property name length in collapsed objects","","> Expand and collapse `level2` branch to see difference in a value presentation"]},highlightProps:["maxStringLength","maxCompactStringLength","allowedExcessStringLength","maxPropertyLength","maxCompactPropertyLength"],demo:{view:"struct",maxStringLength:30,maxCompactStringLength:10,allowedExcessStringLength:5,maxPropertyLength:30,maxCompactPropertyLength:15,expanded:1},demoData:{stringsInExpandedObject:"Quite a long string value Quite a long string value",string_34_chars:"String with 34 chars length demo x",string_35_chars:"String with 35 chars length demo xx",string_36_chars:"String with 36 chars length demo xxx",very_very_very_very_very_very_very_very_very_very_long_property_name:"a property name should be truncated due to settings, but will not be by default",level2:{stringsInCollapsedObject:"Quite a long string value Quite a long string value",string_14_chars:"Short string x",string_15_chars:"Short string xx",string_16_chars:"Short string xxx"}}}]};var In={get collapse(){return U("span",{class:"struct-action-button struct-collapse-value","data-action":"collapse"})},get signature(){return U("span",{class:"struct-action-button show-signature","data-action":"show-signature"})},get actions(){return U("span",{class:"struct-action-button",title:"Value actions","data-action":"value-actions"})},get stringMode(){return U("span",{class:"struct-action-button",title:"Toggle string show mode","data-action":"toggle-string-mode"})},get viewAsTable(){return U("span",{class:"struct-action-button",title:"Toggle view as table","data-action":"toggle-view-as-table"})},get sortKeys(){return U("span",{class:"struct-action-button",title:"Toggle key sorting","data-action":"toggle-sort-keys"})}},uA=Li('"',In.collapse,In.actions,In.stringMode,U("span","string-length"),U("span","string-text-wrapper",[U("span","string-text")]),'"'),fA=Li("[",In.collapse,In.signature,In.actions,In.viewAsTable,U("span","value-size"),"]"),dA=Li("{",In.collapse,In.signature,In.actions,In.viewAsTable,In.sortKeys,U("span","value-size"),"}"),hA=U("div","entry-line"),pA=U("span","value"),gA=U("span","label",["\xA0\xA0\xA0\xA0",U("span","property"),":\xA0"]);function mA(t,e,r){return new t.view.Popup({className:"view-struct-signature-popup",hoverPin:"popup-hover",hoverTriggers:".view-struct .show-signature",showDelay:50,render:function(i,s){let a=s.parentNode,f=e.get(a);i.classList.add("computing"),setTimeout(()=>{t.view.render(i,{view:"signature",expanded:2,path:r(a)},f).then(()=>i.classList.remove("computing"))},16)}})}var x4=Object.prototype.hasOwnProperty,k4=Object.prototype.toString,yA=50,C4=4,S4=0,A4=150,T4=40,L4=10,E4=1/0,M4=35;function ll(t,e){return typeof t=="number"&&isFinite(t)&&t>=1?parseInt(t,10):e}function vA(t,e){if(typeof t=="string")return t.length>e.maxStringLength||/[\r\n\f\t]/.test(t);if(Xn(t))return t.length>0;if(typeof t=="object"&&t!==null)switch(k4.call(t)){case"[object Set]":return t.size>0;case"[object Object]":for(let r in t)if(x4.call(t,r))return!0}return!1}function qg(t,e){t.appendChild(document.createTextNode(e))}function bA(t,e,r){e>1&&(t.lastElementChild.innerHTML=nn(e)+" "+r)}function D4(t,e,r){e.length<2||e.every(([s],a)=>a===0||s>e[a-1][0])?t.querySelector('[data-action="toggle-sort-keys"]').remove():r&&e.sort(([s],[a])=>s<a?-1:s>a?1:0)}function N4(t,e,r){let i=gA.cloneNode(!0),s=e.length>r?e.slice(0,r)+"\u2026":e;qg(i.firstElementChild,s),t.appendChild(i)}function wA(t){function e(E){let N=w.get(E),B=y.get(E);E.classList.add("struct-expand-value"),E.innerHTML=qi(B,!1,N),E.annotationsEl&&E.parentNode.append(E.annotationsEl)}function r(E,N,B){let I=y.get(E);if(E.classList.remove("struct-expand-value"),typeof I=="string"){let R=uA.cloneNode(!0),j=R.lastChild.previousSibling,F=j.previousSibling,se=JSON.stringify(I);qg(j.firstChild,se.slice(1,-1)),F.innerHTML=`length: ${nn(se.length)} chars`,E.replaceChildren(R),d(E,F)}else if(Xn(I)||ii(I)){let R=x.get(E),j=w.get(E),F=typeof I.size=="number"?I.size:I.length;E.replaceChildren(fA.cloneNode(!0)),bA(E,F,"elements"),d(E,E.lastElementChild),s(E,E.lastChild,I.values(),F,(se,W,J)=>{i(se,W,N,j,Object.freeze({parent:R,host:I,key:J,index:J}))},0,j.limit)}else{let R=x.get(E),j=w.get(E),F=Object.entries(I);E.replaceChildren(dA.cloneNode(!0)),bA(E,F.length,"entries"),d(E,E.lastElementChild),D4(E,F,B),s(E,E.lastChild,F.values(),F.length,(se,[W,J],T)=>{N4(se,W,j.maxPropertyLength),i(se,J,N,j,Object.freeze({parent:R,host:I,key:W,index:T}))},0,j.limit)}}function i(E,N,B,I,R){let j=vA(N,I),F=pA.cloneNode(!0);y.set(F,N),x.set(F,R),w.set(F,I),j&&typeof N!="string"&&B?(E.classList.add("struct-expanded-value"),r(F,B-1)):(j&&F.classList.add("struct-expand-value"),F.innerHTML=qi(N,!1,I)),p(F,N,I,R),E.appendChild(F)}function s(E,N,B,I,R,j=0,F=yA){F===!1&&(F=1/0);let se=document.createDocumentFragment(),W=I-1,J=0;for(;J<F;J++,j++){let{done:T,value:ne}=B.next();if(T)break;let ee=hA.cloneNode(!0);R(ee,ne,j),j!==W&&qg(ee,","),se.appendChild(ee)}E.insertBefore(se,N),t.view.maybeMoreButtons(E,N,I,j,F,(T,ne)=>s(E,N,B,I,R,T,ne))}function a(E){let N=w.get(E),B=y.get(E);!Xn(B)&&!ii(B)&&(B=Object.entries(B).map(([I,R])=>({"[key]":I,"[value]":R}))),t.view.render(E,"table",B,N.context),E.append(E.lastChild.previousSibling)}function f(E){let N=[],B=x.get(E);for(;B!==null&&B.parent!==null;)N.unshift(B.key),B=B.parent;return N}function d(E,N){E.annotationsEl&&N.after(E.annotationsEl)}function p(E,N,B,I){if(B.annotations.length){for(let R of B.annotations)try{let{query:j,debug:F}=R,se={...I,context:B.context},W=t.query(j,N,se);F&&t.log("info",`Compute struct view annotation${typeof F=="string"?` "${F}"`:""}:`,{data:N,context:se,query:j,queryResult:W}),W&&A.push(W.tooltip?{el:E,config:W,renderer:B.renderer,data:N,context:se}:{el:E,config:W})}catch(j){t.log("error",j)}g()}}function g(){M===null&&A.length&&(M=Promise.resolve().then(()=>{M=null,Bg(A),A.length&&g()}))}let y=new WeakMap,x=new WeakMap,w=new WeakMap,k=new WeakSet,A=[],M=null,D=aA(t,y,f),O=mA(t,y,f),L=j1(r,e,g,a,k,D,O);return t.addHostElEventListener("click",L,!1),t.view.define("struct",function(E,N,B,I){let{annotations:R,expanded:j,limit:F,limitCollapsed:se,limitCompactObjectEntries:W,maxStringLength:J,maxCompactStringLength:T,allowedExcessStringLength:ne,maxPropertyLength:ee,maxCompactPropertyLength:be}=N,Re=R?(t.annotations||[]).concat(R.map(mt=>typeof mt=="string"||typeof mt=="function"?{query:mt}:mt)):t.annotations,Ve={renderer:this,context:I,annotations:Re,limit:t.view.listLimit(F,yA),limitCollapsed:t.view.listLimit(se,C4),limitCompactObjectEntries:t.view.listLimit(W,S4),maxStringLength:ll(J,A4),maxCompactStringLength:ll(T,T4),allowedExcessStringLength:ll(ne,L4),maxPropertyLength:ll(ee,E4),maxCompactPropertyLength:ll(be,M4)};k.add(E),i(E,B,j,Ve,{parent:null,host:{"":B},key:"",index:0}),g(),!j&&vA(B,Ve)&&E.classList.add("struct-expand")},{usage:cA}),()=>{document.removeEventListener("click",L,!1)}}var xA={demo:{view:"table",data:[{foo:1,bar:"bar",baz:"zab"},{foo:2,baz:"xyz"},{foo:3,bar:"qux",baz:"baz"},{foo:4,bar:"aaa",baz:"abc"}]},examples:[{title:"Columns setup",demo:{view:"table",cols:[{header:"Header Col 1",data:"col1",content:'text:"prefix-" + $'},{header:"Header Col 3",data:"col3",content:'text:$ + "-suffix"'}],data:[{col1:"foo",col2:"bar",col3:"baz"},{col1:"qux",col2:"oof",col3:"zab"}]}}]};var Qo=Object.hasOwnProperty;function zg(t){return{header:t,view:"table-cell",data:e=>e[t],sorting:`$[${JSON.stringify(t)}] ascN`}}function O4(t,e,r){let i="",s="";if("data"in t&&t.data!==void 0)switch(typeof t.data){case"string":s=`(${t.data})`;break;case"function":i="$dataQuery;",s="$dataQuery(#)";break;default:i="$dataQuery;",s="$dataQuery"}if(typeof t.content=="string"){let a=t.content.indexOf(":"),f=t.content.slice(0,a);if(a===-1||!e.view.has(f))return;let d=t.content.slice(a+1);d&&(s=s?`(${s} | ${d})`:`(${d})`)}return s?e.query(`${i} ${s} ascN`,{dataQuery:t.data},r):!1}function P4(t,e){return typeof e=="string"&&(e={content:e}),Qo.call(e,"content")||Qo.call(e,"data")?{header:t,view:"table-cell",...e}:{...zg(t),...e}}function kA(t,e,r){if(typeof r!="function")return!1;let i=0;try{for(let s=1;s<e.length;s++){let a=Math.sign(r(e[s-1],e[s]));if(a){if(i&&a!==i)return!1;i=a}}}catch(s){return t.log("error","Error on column order detection in table view",s),0}return-i}function CA(t){let e="is (null or not object or regexp)",r=t.queryFn(e);t.view.define("table",function(i,s,a,f){let{cols:d,rowConfig:p,limit:g,scalarCol:y=!1}=s,x;ii(a)&&(a=[...a]),Xn(a)||(a=a?[a]:[]);let w=i.appendChild(U("thead")).appendChild(U("tr")),k=[],A=i.appendChild(U("tbody")),M=i.appendChild(U("tbody")),D=M.appendChild(U("tr")).appendChild(U("td")),O=L=>{A.innerHTML="",D.innerHTML="";for(let E of k){let N=kA(t,L,E.sorting);E.el.classList.toggle("asc",N===1),E.el.classList.toggle("desc",N===-1)}return t.view.renderList(A,x,L,{...f,cols:d},0,t.view.listLimit(g,25),D).then(()=>M.hidden=!D.firstChild)};if(Array.isArray(d))d=d.map((L,E)=>typeof L=="string"?zg(L):{header:"col"+E,view:"table-cell",...L});else{let L=new Set,E=d&&typeof d=="object"?d:{};d=[];for(let N of a)if(r(N))y=!0;else for(let B of Object.keys(N))L.add(B);for(let N of Object.keys(E))E[N]?L.add(N):L.delete(N);for(let N of L)d.push(Qo.call(E,N)?P4(N,E[N]):zg(N))}y&&d.unshift({header:"[value]",view:"table-cell",sorting:"$ ascN",scalarAsStruct:!0,colSpan:`=${e} ? #.cols.size() : 1`}),d=d.filter(L=>!Qo.call(L,"when")||t.queryBool(L.when,a,f));for(let L of d){if(Qo.call(L,"whenData")&&L.whenData!==void 0){let{whenData:R,content:j}=L;L.whenData=void 0,L.content=(F,se)=>t.queryBool(R,F,se)?{content:j}:void 0}let E=w.appendChild(U("th")),N={el:E};k.push(N),E.textContent=L.header;let B=Qo.call(L,"sorting")?t.query(L.sorting,null,f):O4(L,t,f),I=typeof B=="function"?kA(t,a,B):0;I!==0?(L.sorting=B,N.sorting=B,E.classList.add("sortable"),E.addEventListener("click",()=>{E.classList.contains("asc")?O(a.slice().sort((R,j)=>-B(R,j))):E.classList.contains("desc")&&!I?O(a):O(a.slice().sort(B))})):L.sorting=!1}return D.colSpan=d.length,x=this.composeConfig({view:"table-row",cols:`=${e} ? [#.cols[]] : #.cols`},p),O(a)},{tag:"table",usage:xA})}function SA(t){t.view.define("table-row",function(e,r,i,s){let{cols:a}=r;if(Array.isArray(a))return Promise.all(a.map((f,d)=>t.view.render(e,f,i,{...s,colIndex:d})))},{tag:"tr"})}var I4={view:"struct",expanded:1},B4=Object.hasOwnProperty;function q4(t,e,r){if(Array.isArray(e)){t.classList.add("number"),t.textContent=e.length||"";return}if(r){t.classList.add("complex");for(let i in e)if(B4.call(e,i)){t.textContent="{\u2026}";return}t.textContent="{}";return}if(e!==void 0){if(typeof e=="number"){let i=String(e);t.classList.add("number"),i.length>3?t.innerHTML=nn(i,!1):t.textContent=i;return}t.textContent=String(e)}}function AA(t){t.view.define("table-cell",function(e,r,i,s){let{content:a,details:f,colSpan:d,scalarAsStruct:p}=r,g=i!==null&&(Array.isArray(i)?i.length>0:typeof i=="object")&&!(i instanceof RegExp);if(typeof d=="number"&&d>1&&(e.colSpan=d),typeof a=="function"){if(a=a(i,s),!a)return;a=a.content}if((f||!a&&g)&&(e.classList.add("details"),e.addEventListener("click",y=>{let x=y.target;if(x===e){let w=x.parentNode,k=w.parentNode,A=Array.from(k.querySelectorAll(".view-table-cell.details-expanded")).find(D=>D.parentNode.parentNode===k),M=null;if(A){let D=A.parentNode;if(A.classList.remove("details-expanded"),A===e){w.parentNode.removeChild(w.nextSibling);return}D!==w?D.parentNode.removeChild(D.nextSibling):(M=w.nextSibling.firstChild,M.innerHTML="")}M===null&&(M=w.parentNode.insertBefore(document.createElement("tr"),w.nextSibling).appendChild(document.createElement("td")),M.parentNode.className="view-table-cell-details-row",M.className="view-cell-details-content",M.colSpan=1e3),e.classList.add("details-expanded"),t.view.render(M,f||I4,i,s)}})),p&&!a&&!g&&(a="struct"),a)return t.view.render(e,a,i,s);q4(e,i,g)},{tag:"td"})}var z4=()=>alert("toggled!"),TA=([t,...e],r="")=>{let i=[];for(let s=0;s<t;s++){let a=r+"."+(s+1);i.push({title:a,children:e.length?TA(e,a):null})}return i},LA={demo:{view:"tree",item:"text:text",data:{text:"Root",children:[{text:"Child"},{text:"Another child",children:[{text:"Lvl 2 child"},{text:"Lvl 2 child"}]}]}},examples:[{title:"Expanded tree",highlightProps:["expanded"],demo:{view:"tree",item:"text:text",expanded:999},demoData:{text:"Root",children:[{text:"Child"},{text:"Another child",children:[{text:"Lvl 2 child"},{text:"Lvl 2 child"}]}]}},{title:"With empty text",highlightProps:["emptyText"],demo:{view:"tree",emptyText:"This tree is empty",data:null}},{title:"With toggle handler",highlightProps:["onToggle"],demo:{view:"tree",item:"text:text",onToggle:z4},demoData:{text:"Root",children:[{text:"Child"},{text:"Another child",children:[{text:"Lvl 2 child"},{text:"Lvl 2 child"}]}]}},{title:"limitLines",highlightProps:["limitLines"],demoData:TA([5,3,3]),demo:{view:"tree",item:"text:title",limitLines:7}}]};function EA(t){function e(i,s,a,f,d,p){return p===!1&&(p=a.length),i.classList.add("incomplete"),a.slice(d,d+p).reduce((g,y)=>g.then(()=>{let{container:x,itemConfig:w}=s;return t.view.render(x,t.view.composeConfig(w,{expanded:y.expanded,last:y.last,hasChildren:y.hasChildren,children:y.children}),y.data,f).then(()=>{if(y.expanded&&y.hasChildren){let k=x.lastChild.querySelector(".view-tree-leaf-children");k.classList.add("incomplete"),s={container:k,itemConfig:t.view.composeConfig(w,w.itemConfig),prev:s}}else for(;y.shift--;)s.container.classList.remove("incomplete"),s=s.prev})}),Promise.resolve()).then(()=>t.view.maybeMoreButtons(i,null,a.length,d+p,p,(g,y)=>e(i,s,a,f,g,y))||i.classList.remove("incomplete"))}function r(i,s,a,f){function d(y,x,w,k=0){y.forEach((A,M,D)=>{let O=t.query(w.children,A,s),L=Array.isArray(O)&&O.length>0,E=M===D.length-1,N=g.has(A)?0:typeof x=="function"?x(A,s):x;g.add(A),p.push({data:A,expanded:N,last:E,hasChildren:L,children:N?null:w.children,shift:E&&(!N||!L)?k+1:0}),L&&N&&d(O,typeof x=="number"?x-1:x,t.view.composeConfig(w,w.itemConfig),E?k+1:0)})}let p=[],g=new Set;return d(i,f,a),p}t.view.define("tree",function(s,a,f,d){let{children:p="children",item:g="text",itemConfig:y,collapsible:x,emptyText:w,onToggle:k}=a,{expanded:A,limit:M,limitLines:D=!0}=a;if(w!==!1&&w!==""&&s.setAttribute("emptyText",w||"Empty tree"),!Array.isArray(f)&&f&&(f=[f]),Array.isArray(f)){if(M=t.view.listLimit(M,25),D=t.view.listLimit(D,25),A=typeof A=="function"?A:t.view.listLimit(A,1),D){let O=r(f,d,this.composeConfig({children:p},y),A),L={container:s,itemConfig:this.composeConfig({view:"tree-leaf",itemConfig:y,content:g,collapsible:x,onToggle:k},y)};return e(s,L,O,d,0,D)}return this.renderList(s,this.composeConfig({view:"tree-leaf",itemConfig:y,content:g,collapsible:x,expanded:A,children:p,limit:M,onToggle:k},y),f,d,0,M)}},{tag:"ul",usage:LA})}function MA(t){let e=new WeakMap,r=({target:i})=>{let s=i.closest(".view-tree-leaf-toggle");if(s){let a=e.get(s),f=!s.parentNode.classList.toggle("collapsed");typeof a.render=="function"&&a.render(),typeof a.onToggle=="function"&&a.onToggle(f,s.parentNode,a.data,a.context)}};t.addHostElEventListener("click",r,!1),t.view.define("tree-leaf",async function(i,s,a,f){let{expanded:d,content:p="text",itemConfig:g,collapsible:y=!0,last:x,hasChildren:w,children:k,limit:A,onToggle:M}=s,D=i.appendChild(U("span","view-tree-leaf-toggle")),O=i.appendChild(U("span","view-tree-leaf-content")),L=null,E=w;if(x&&i.classList.add("last"),y||i.classList.add("non-collapsible"),await this.render(O,p,a,f),k&&(L=t.query(k,a,f),E=Array.isArray(L)&&L.length>0),E){let N=i.appendChild(U("ul","view-tree-leaf-children")),B={data:a,context:f,onToggle:M,render:null},I=(R,j)=>{typeof j=="number"&&j--,this.renderList(N,this.composeConfig({view:"tree-leaf",expanded:j,itemConfig:g,content:p,collapsible:y,children:k,limit:A,onToggle:M},g),R,f,0,this.listLimit(A,25))};i.classList.add("has-children"),e.set(D,B),(typeof d=="function"?d(a,f):d)?L&&await I(L,d):(i.classList.add("collapsed"),L&&(B.render=()=>{B.render=null,I(L,d||1)}))}},{tag:"li"})}var mu={};Ae(mu,{default:()=>DA,discover:()=>UA,notFound:()=>NA,viewsShowcase:()=>$A});function DA(t){t.page.define("default",{view:"switch",content:[{when:"not #.datasets",content:[{view:"h1",className:"no-data-loaded",content:'text:"Discovery.js"'},{view:"markdown",when:"#.meta.description",source:"=#.meta.description"},'html:"<br>"',"preset/upload"]},{content:['page-header{ content: "h1:#.name" }',{view:"struct",expanded:1}]}]})}function NA(t){t.page.define("not-found",['alert-warning:"Page `" + name + "` not found"'])}var fu={};Ae(fu,{decode:()=>Jo,encode:()=>Xo});var si=[],ul="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=".split(""),uu=ul.reduce(function(t,e,r){return t[e]=r,t},{});for(cl=0;cl<255;cl++)si[cl]=String.fromCharCode(cl);var cl;function R4(t){let e="";for(let r=0;r<t.length;r++){let i=t.charCodeAt(r);i<128?e+=si[i]:i<2048?e+=si[i>>6|192]+si[i&63|128]:e+=si[i>>12|224]+si[i>>6&63|128]+si[i&63|128]}return e}function F4(t){t=R4(t);let e=new Array(t.length);for(let r=0;r<t.length;r++)e[r]=t.charCodeAt(r);return e}function _4(t){let e="";for(let r=0;r<t.length;){let i=t.charCodeAt(r++);if(i<128)e+=String.fromCharCode(i);else{let s=t.charCodeAt(r++);if(i&32){let a=t.charCodeAt(r++);e+=String.fromCharCode((i&15)<<12|(s&63)<<6|a&63)}else e+=String.fromCharCode((i&31)<<6|s&63)}}return e}function j4(t){return _4(t.map(function(e){return si[e]}).join(""))}function Xo(t){let e="";Array.isArray(t)||(t=F4(t));for(let r=0;r<t.length;){let i=t[r++],s=t[r++],a=t[r++],f=i>>2,d=(i&3)<<4|s>>4,p=(s&15)<<2|a>>6,g=a&63;s==null?p=g=64:a==null&&(g=64),e+=ul[f]+ul[d]+ul[p]+ul[g]}return e}function Jo(t){let e=[],r,i,s,a;t=t.replace(/[^a-zA-Z0-9\+\/]/g,"");for(let f=0;f<t.length;){r=uu[t.charAt(f++)],i=uu[t.charAt(f++)],s=uu[t.charAt(f++)],a=uu[t.charAt(f++)];let d=r<<2|i>>4,p=(i&15)<<4|s>>2,g=(s&3)<<6|a;e.push(d,p,g)}return(s==null||s==64)&&e.pop(),(a==null||a==64)&&e.pop(),j4(e)}function Rg(t,e){return typeof t=="string"?t:e||""}var PA=["query","graph","view","title","dzen","noedit"],H4=["q","graph","v","title","dzen","noedit"];function IA(t){let{query:e,graph:r,view:i,title:s,dzen:a,noedit:f,...d}=typeof t=="string"?{query:t}:t,p=[];return a&&p.push(["dzen"]),f&&p.push(["noedit"]),s&&p.push(["title",s]),e&&p.push(["q",Xo(e)]),r&&p.push(["graph",Xo(JSON.stringify(r))]),typeof i=="string"&&p.push(i?["v",Xo(i)]:["v"]),Object.keys(d||{}).sort().forEach(g=>{PA.includes(g)||p.push([g,g.endsWith("-b64")&&typeof d[g]=="string"?Xo(d[g]):d[g]])}),p}function BA(t){let e=Object.fromEntries(t),r={title:e.title||"",query:Jo(Rg(e.q,"")),graph:JSON.parse(Jo(Rg(e.graph,""))||"null"),view:"v"in e?Jo(Rg(e.v,"")):void 0,dzen:"dzen"in e,noedit:"noedit"in e};return Object.keys(e).forEach(i=>{H4.includes(i)||(r[i]=i.endsWith("-b64")&&typeof e[i]=="string"?Jo(e[i]):e[i])}),r}function W4(t){return Object.fromEntries(Object.entries(t).filter(([e])=>!PA.includes(e)))}function OA(t,e,r){for(let i of Object.keys(t))if(i!==r&&t[i]!==e[i])return!1;for(let i of Object.keys(e))if(i!==r&&t[i]!==e[i])return!1;return!0}function du(t,e={}){let r={...t,params:W4(t.params)};return!OA(e,r,"params")||!OA(e.params,r.params)?r:e}function U4(t){return t.replace(/\\/g,"\\\\").replace(/\t/g,"\\t").replace(/\r/g,"\\r").replace(/\n/g,"\\n").replace(/'/g,"\\'")}function $4(t){let{title:e,query:r,view:i}=t,s={title:e,query:r,view:i};return`{
${Object.keys(s).reduce((a,f)=>a.concat(s[f]?`    ${f}: '${U4(s[f])}'`:[]),[]).join(`,
`)}
}`}function G4(t){if(t&&(typeof t=="number"||typeof t=="string")){let e=new Date(t);return isNaN(e)?null:e}return t instanceof Date?t:null}function qA(t){let e=G4(t);return e?e.toISOString().replace(/^(\d{4})-(\d{2})-(\d{2})T([\d:]+).*/,"$3/$2/$1 $4 UTC"):null}function zA(t,e){let r,i,s,a,f=new t.view.Popup({render:(y,x,w)=>t.view.render(y,{view:"menu",data:[{text:"Copy page permalink",disabled:!t.action.has("permalink"),action:async()=>Wt(await t.action.call("permalink",t.pageHash))},{text:"Copy page hash",action:()=>Wt(t.pageHash)},{text:"Copy page as JSON",action:()=>Wt($4(t.pageParams))}],onClick(k){w(),k.action()}})}),d=U("div","discovery-actions",[a=U("button",{class:"edit-mode discovery-hidden-in-dzen",title:"Toggle edit mode",onclick:({target:y})=>{y.blur(),e({noedit:!t.pageParams.noedit})}}),U("button",{class:"share",title:"Sharing",onclick:({target:y})=>{y.blur(),f.show(y)}}),U("button",{class:"toggle-fullscreen",title:"Toggle full page mode",onclick:({target:y})=>{y.blur(),e({dzen:!t.pageParams.dzen})}})]),p=y=>{y.parentNode.dataset.title=y.value||y.placeholder},g=U("div","discovery-header",[U("div",{class:"discovery-header-text","data-title":"\xA0"},[r=U("input",{class:"discovery-hidden-in-dzen",placeholder:"Untitled discovery",oninput:({target:y})=>{p(y)},onchange:({target:y})=>{p(y),e({title:y.value},!0)},onkeypress:y=>{(y.charCode===13||y.keyCode===13)&&y.target.blur()}}),U("span","timestamp",[i=U("span",null,"&nbsp;"),s=U("span")])])]);return{el:[d,g],render(y,x){let{title:w,noedit:k}=x.params,A=qA(x.datasets?.[0]?.resource?.createdAt);r.value=w,p(r),a.classList.toggle("disabled",k),i.innerText=A?"Data collected at "+A+" | ":"",s.innerText="Rendered at "+qA(new Date)}}}function RA(t,e,r){return t.length?`${t.length} ${t.length===1?e:r}`:"empty"}function Fg(t){return Array.isArray(t)?`Array (${RA(t,"element","elements")})`:t&&typeof t=="object"?`Object (${RA(Object.keys(t),"entry","entries")})`:`Scalar (${t===null?"null":typeof t})`}function _g(t,e){let r=document.createElementNS("http://www.w3.org/2000/svg",t);if(e)for(let[i,s]of Object.entries(e))r.setAttribute(i,s);return r}function V4(t,e,r){function i(){return t.appendChild(U("div","query-graph-box"))}function s(f,d,p,g){Array.isArray(g)||(g=[]),f||(f=i());let y=g.length===1,x=g.length>1,w=f.appendChild(U("div",{"data-path":p.join(" "),class:`query-graph-node${y?" target":x?" current":""}`}));if(r.view.attachTooltip(w,{className:"query-graph-tooltip",content:y?'badge:"Current query"':{view:"source",data:d.query?{syntax:"jora",content:d.query||"",lineNum:!1}:{content:"<empty query>",lineNum:!1}}}),Array.isArray(d.children))for(let k=0;k<d.children.length;k++){let A=s(f.nextSibling,d.children[k],p.concat(k),g[1]===k?g.slice(1):[]);a.push([w,A])}return w}let a=[];for(let f=0;f<e.children.length;f++)s(t.firstChild,e.children[f],[f],e.current[0]===f?e.current:[]);requestAnimationFrame(()=>{let f=t.appendChild(_g("svg"));for(let[d,p]of a){let g=cn(d,f),y=cn(p,f),x=g.right-2,w=g.top+g.height/2,k=y.left+2,A=y.top+y.height/2,M=(k-x)/3;f.append(w===A?_g("line",{stroke:"#888",x1:x,y1:w,x2:k,y2:A}):_g("path",{stroke:"#888",fill:"none",d:`M ${x} ${w} C ${x+2*M} ${w} ${k-2*M} ${A} ${k} ${A}`}))}})}function K4(t){Array.isArray(t.current)||(t.current=[]),t.current.length===0&&t.current.push(0),Array.isArray(t.children)||(t.children=[]),t.children.length===0&&t.children.push({})}function hu(t,e){let r=[t],i=t;for(let s=0;s<e.length;s++)i=i.children[e[s]],r.push(i);return r}function FA(t,e){let r=!1,i=NaN,s=!1,a=NaN,f,d,p=null,g,y=null,x=null,w=[],k={},A,M=(te,le,ae,fe)=>t.querySuggestions(te,le,ae,fe),D=new t.view.QueryEditor(M).on("change",te=>A.checked&&e({query:te},!0)),O=t.getQueryEngineInfo(),L=U("div","query-graph-actions"),E=U("div","buttons"),N=U("div","query-input"),B=U("div","query-input-details"),I=U("div","data-query-result"),R=U("div","data-query-result-details"),j=U("div","query-graph"),F=U("div","query-path"),se=U("div","form query-editor-form",[j,F,U("div","query-editor",[D.el])]);D.inputPanelEl.append(L,N,B,U("a",{class:"view-link query-engine",href:O.link,target:"_blank"},[`${O.name} ${O.version||""}`])),D.outputPanelEl.append(I,E,R);let W=te=>({position:"trigger",className:"hint-tooltip",showDelay:!0,content:{view:"context",data:{text:te},content:"text:text"}});t.view.render(L,[{view:"button",className:"subquery",tooltip:W("Create a new query for a result of current one"),onClick(){J(({nextGraph:te,last:le})=>(Array.isArray(le.children)||(le.children=[]),le.query=f,le.view=d,te.current.push(le.children.push({})-1),{query:"",view:void 0,graph:te}))}},{view:"button",className:"stash",tooltip:W("Stash current query and create a new empty query for current parent"),onClick(){J(({nextGraph:te,last:le,preLast:ae})=>(le.query=f,le.view=d,te.current[te.current.length-1]=ae.children.push({})-1,{query:"",view:void 0,graph:te}))}},{view:"button",className:"clone",tooltip:W("Clone current query"),onClick(){J(({nextGraph:te,last:le,preLast:ae})=>(le.query=f,le.view=d,te.current[te.current.length-1]=ae.children.push({})-1,{graph:te}))}},{view:"button",className:"delete",tooltip:W("Delete current query and all the descendants"),onClick(){J(({nextGraph:te,last:le,preLast:ae})=>{let fe=ae.children.indexOf(le),we=ae.query;if(ae.children.splice(fe,1),ae.children.length===0&&(ae.children=void 0),te.current.pop(),te.current.length===0){let ge=Math.max(0,Math.min(fe-1,(te.children?.length||0)-1));te.current.push(ge),we=te.children?.[ge]?.query}return{query:we,graph:te}})}}]),E.append(U("label","view-checkbox",[A=U("input",{class:"live-update",type:"checkbox",checked:!0,onchange:te=>{te.target.checked&&e({query:D.getValue()},!0)}}),U("span","view-checkbox__label","process on input")])),t.view.render(E,{view:"button-primary",content:'text:"Process"',onClick:()=>{w=w.slice(0,p.current.length-1),e({query:D.getValue()},!0),t.scheduleRender("page")}}),F.addEventListener("click",te=>{let le=[...F.children].indexOf(te.target.closest(".query-path > *"));le!==-1&&J(({nextGraph:ae,currentPath:fe,last:we})=>{we.query=f,ae.current=ae.current.slice(0,le+1),e({query:fe[le+1].query,graph:ae})})}),j.addEventListener("click",te=>{let le=te.target.dataset.path;typeof le=="string"&&le!==p.current.join(" ")&&J(({nextGraph:ae,last:fe})=>{let we=le.split(" ").map(Number),ge=hu(ae,we),he=ge[ge.length-1],ye=he.query,rt=he.view;return he.query=void 0,he.view=void 0,fe.query=f,fe.view=d,ae.current=we,{query:ye,view:rt,graph:ae}})});function J(te){let le=JSON.parse(JSON.stringify(p)),ae=hu(le,le.current),fe=ae[ae.length-1],we=ae[ae.length-2],ge=te({nextGraph:le,currentPath:ae,last:fe,preLast:we});e(ge),setTimeout(()=>{D.focus(),D.cm.setCursor(D.cm.lineCount(),0)},0)}function T(te){let le=setTimeout(te,16);return()=>clearTimeout(le)}function ne(te){N.innerHTML="",N.append(U("div",{class:"query-input-data",onclick(){r=r==="data"?!1:"data",ee(te)}},[U("span",{class:"query-input-variable","data-name":"input"},["@"]),te.state==="awaiting"?"Computing...":te.state==="canceled"?"Not available (undefined)":Fg(te.data)]),U("div",{class:"query-input-context",onclick(){r=r==="context"?!1:"context",ee(te)}},[U("span",{class:"query-input-variable","data-name":"context"},["#"]),te.state==="awaiting"?"Computing...":te.state==="canceled"?"Not available (undefined)":Fg(te.context)])),ee(te)}function ee(te){if(D.inputPanelEl.classList.toggle("details-expanded",r),N.dataset.details=r,r){let le=te.state!=="awaiting"&&te.state!=="canceled"?te[r]:NaN;le!==i&&(i=le,te.state==="awaiting"?B.textContent="Computing...":te.state==="canceled"?B.textContent="Not available because one of ancestor queries failed":(B.innerHTML="",t.view.render(B,[{view:"struct",expanded:1}],i)))}else i=NaN,B.innerHTML=""}function be(te,le,ae){ae||(ae=le,le=null);let fe=[U("span","query-output-message",Array.isArray(ae)?ae:[ae])];le&&fe.unshift(U("span","query-output-prelude",[le])),I.replaceChildren(U("div",{class:"query-result-data"+(te.state==="failed"?" error":""),onclick(){s=!s,Ve(te)}},fe))}function Re(te){switch(y&&(y.clear(),y=null),te.state){case"canceled":{D.setValue(te.query),be(te,"Result","Not available");break}case"awaiting":{D.setValue(te.query),be(te,"Avaiting...");break}case"computing":{D.setValue(te.query,te.data,te.context),be(te,"Computing...");break}case"successful":{D.setValue(te.query,te.data,te.context),be(te,"Result",[Fg(te.computed),` in ${parseInt(te.duration,10)}ms`]);break}case"failed":{let{error:le}=te,ae=le.details&&le.details.loc,fe=D.cm.doc;if(ae){let[we,ge]=le.details.loc.range;y=le.details.token==="EOF"||we===ge||te.query[we]===`
`?fe.setBookmark(fe.posFromIndex(we),{widget:U("span","discovery-editor-error"," ")}):fe.markText(fe.posFromIndex(we),fe.posFromIndex(ge),{className:"discovery-editor-error"})}D.setValue(te.query,te.data,te.context),be(te,"Error",[le.message.split(/\n/)[0].replace(/^(Parse error|Bad input).+/s,"Parse error")]);break}}Ve(te)}function Ve(te){if(D.outputPanelEl.classList.toggle("details-expanded",s),s){let le=te.state!=="awaiting"&&te.state!=="canceled"&&te.state!=="computing"?te.error||te.computed:NaN;if(le!==a)switch(a=le,te.state){case"awaiting":R.innerHTML='<div class="state-message">Awaiting for all of ancestor queries done<div>';break;case"canceled":R.innerHTML='<div class="state-message">Not available because one of ancestor queries failed<div>';break;case"failed":R.innerHTML='<div class="discovery-error query-error">'+nt(te.error.message)+"</div>";break;case"successful":R.innerHTML="",t.view.render(R,{view:"struct",expanded:1},a);break}}else a=NaN,R.innerHTML=""}function mt(te){let le=te.path.join(" "),ae=j.querySelector(`[data-path="${le}"]`);ae&&(ae.dataset.state=te.state),w[p.current.length-1]===te&&(ne(te),Re(te))}function Cn(te,le,ae,fe){x&&(x.cancel(),x.computation.state="canceled",x=null);let we=!1;if(fe)for(let ge=te;ge<p.current.length;ge++){let he=w[ge];he.state!=="computing"&&mt(he)}for(let ge=te;ge<p.current.length;ge++){let he=w[ge],ye=ge===p.current.length-1;if(he.state==="awaiting"&&(he.state="computing"),he.state==="failed"?we=!0:we&&(he.state="canceled"),he.state!=="computing"){if(le=he.computed,ae=he.context,mt(he),ye)return Promise.resolve(he);continue}return new Promise((rt,zt)=>{he.data=le,he.context=ae,mt(he),x={computation:he,cancel:T(()=>{let bt=Date.now();x=null;try{he.computed=t.query(he.query,he.data,he.context),he.state="successful"}catch(yt){he.error=yt,he.state="failed"}he.duration=Date.now()-bt,Cn(ge,le,ae).then(rt,zt)})}})}}function Lt(te,le){let ae=hu(p,p.current).slice(1),fe=-1,we=null;for(let ge=0;ge<p.current.length;ge++){let he=ae[ge],ye=w[ge]||{},zt=ge===p.current.length-1?f:he.query,bt=p.current.slice(0,ge+1);if(fe===-1&&ye.query===zt&&ye.data===te&&ye.context===le&&String(ye.path)===String(bt)){te=ye.computed,we=ye.error;continue}let yt=w[ge]={state:"awaiting",path:p.current.slice(0,ge+1),query:zt,data:void 0,context:void 0,computed:void 0,error:null,duration:0};if(we){yt.state="canceled";continue}if(fe===-1){fe=ge,yt.state="computing",yt.data=te,yt.context=le;continue}}return fe!==-1?w.slice(fe,p.current.length):[]}return{el:se,perform(te,le){let ae=du(le,g),fe=le.params.query,we=le.params.view,ge={...le.params.graph||k};K4(ge),j.innerHTML="",V4(j,ge,t),F.innerHTML="";for(let he of hu(ge,ge.current).slice(1,-1))F.append(U("div","query",he.query||""));return p=ge,g=ae,f=fe,d=we,Lt(te,ae),Cn(0,te,ae,!0)}}}function pu(t){return!!(t&&t.nodeType===Node.TEXT_NODE)}function jg(t,e=`
`){let r="";for(let i of t.childNodes)!pu(i)&&i.previousSibling&&!pu(i.previousSibling)&&(r+=e),r+=Y4(i,e);return r}function Y4(t,e=`
`){switch(t.nodeType){case Node.ELEMENT_NODE:let[r,i=""]=t.cloneNode().outerHTML.split(/(?=<\/[^>]+>$)/);return r+(t.firstChild&&!pu(t.firstChild)?e+"  ":"")+jg(t,e+"  ")+(t.lastChild&&!pu(t.lastChild)?e:"")+i;case Node.TEXT_NODE:return t.nodeValue;case Node.COMMENT_NODE:return"<!--"+t.nodeValue+"-->";case Node.DOCUMENT_FRAGMENT_NODE:return jg(t,e)}return""}function _A(t,e){let r=[],i=[...Array.isArray(t.highlight)?t.highlight:t.highlight?[t.highlight]:[]];Array.isArray(t.highlightProps)&&i.push(`(")?(?:${t.highlightProps.join("|")})\\1(?=:)`);for(let s of i){let a=new RegExp(s,"gm"),f;for(;f=a.exec(e);)r.push({range:[f.index,f.index+f[0].length]})}return r}function gu(t){let e={view:"context",modifiers:[{view:"switch",when:"beforeDemo",content:[{when:({beforeDemo:r})=>typeof r=="string",content:'html:"<p>" + beforeDemo + "</p>"'},{content:{view:"render",config:"beforeDemo",context:"{ __demoContext: true, ...(viewDef | { name, group, options }) }"}}]},{view:"block",when:"demo or view",className:"usage-render",postRender:(r,{onInit:i},{demoFixed:s})=>{s&&(r.classList.add("demo-fixed"),r.style.height=s+"px"),i(r,"root")},content:{view:"render",config:"demo or view",data:"demoData",context:"{ __demoContext: true, ...(viewDef | { name, group, options }) }"}},{view:"switch",when:"afterDemo",content:[{when:({afterDemo:r})=>typeof r=="string",content:'html:"<p>" + afterDemo + "</p>"'},{content:{view:"render",config:"afterDemo",context:"{ __demoContext: true, ...(viewDef | { name, group, options }) }"}}]}],content:{view:"tabs",when:"source != false",className:"usage-sources",name:"code",tabs:[{value:"config",text:"Config (JS)"},{value:"config-json",text:"Config (JSON)"},{value:"html",text:"Rendered HTML"}],content:{view:"switch",content:[{when:'#.code="config"',content:[{view:"expand",when:'"demoData" in $',header:'text:"Input data"',content:{view:"struct",expanded:2,data:"demoData"}},{view:"source",className:"first-tab",data:r=>{let i=oi(r.demo||r.view);return{syntax:"discovery-view",content:i,refs:_A(r,i)}}}]},{when:'#.code="config-json"',content:[{view:"expand",when:'"demoData" in $',header:'text:"Input data"',content:{view:"struct",expanded:2,data:"demoData"}},{view:"source",data:r=>{let i=JSON.stringify(r.demo||r.view,null,4);return{syntax:"json",content:i,refs:_A(r,i)}}}]},{when:'#.code="html"',content:{view:"source",data:(r,i)=>({syntax:"html",content:jg(i.root)})}}]}}};return{view:"block",className:"discovery-view-usage",data({name:r,options:i},s){let a=[...t.view.values].filter(f=>f.options.usage===i.usage).map(f=>f.name);return a.includes(r)||a.unshift(r),s.viewDef={demo:{view:r,data:'"'+r+'"'},...typeof i.usage=="function"?i.usage(r,a):Array.isArray(i.usage)?{examples:i.usage}:i.usage,name:r,group:a,options:i}},content:["h1:name",e,{view:"list",data:"examples",whenData:!0,itemConfig:{className:"usage-section"},item:["h2{ anchor: true, data: title }",e]}]}}var jA=`{
    view: 'struct',
    expanded: 1
}`,HA=[{name:"Table",content:oi({view:"table"})},{name:"Auto-link list",content:oi({view:"ol",item:"auto-link"})},{name:"Signature",content:oi({view:"signature",expanded:2})}];function Q4(t,e,r){return U("div",{class:"discovery-editor-tab",onclick:()=>r({view:e})},t||"Untitled preset")}function WA(t,e){let r={},i=Array.isArray(t.options.viewPresets)?HA.concat(t.options.viewPresets):HA,s,a,f,d,p,g,y=new t.view.ViewEditor(t).on("change",A=>g.checked&&e({view:A},!0)),x=U("div","buttons"),w=U("div","form view-editor-form",[U("div","view-editor-form-header",[U("div","discovery-editor-tabs view-mode",p=["Default","Custom"].map(A=>U("div",{class:"discovery-editor-tab","data-mode":A.toLowerCase(),onclick:()=>e({view:A==="Default"?void 0:jA},!0)},A))),U("div","discovery-editor-tabs presets",i.map(({name:A,content:M})=>Q4(A,M,e))),U("div","view-editor-form-header-links",'<a href="#views-showcase" class="view-link">Views showcase</a>')]),s=U("div",{class:"view-editor-form-content",hidden:!0},[U("button",{class:"view-button formatting",title:"Prettify (input should be a JSON)",onclick(){y.focus();try{let A=y.getValue().trim(),M=new Function("return 0,"+A)();e({view:oi(M)})}catch(A){t.log("error","View editor prettify failed:",A)}}}),y.el,U("div","editor-toolbar",[a=U("div","view-expand",[U("div",{class:"header",onclick:()=>{a.classList.toggle("expanded"),d.classList.toggle("visible")}},[f=U("div","header-content"),U("div","trigger")]),d=U("div","view-editor-view-list")]),U("label","view-checkbox",[g=U("input",{class:"live-update",type:"checkbox",checked:!0,onchange:A=>{A.target.checked&&e({view:y.getValue()},!0)}}),U("span","view-checkbox__label","build on input")]),x])])]);t.view.render(x,{view:"button-primary",content:'text:"Build"',onClick:()=>{r={},e({view:y.getValue()},!0),t.scheduleRender("page")}}),new t.view.Popup({className:"view-editor-view-list-hint",hoverTriggers:".view-editor-view-list .item.with-usage",render:function(A,M){t.view.render(A,gu(t),t.view.get(M.textContent),{})}}),f.textContent=`Available ${[...t.view.entries].filter(([,A])=>A.options.usage).length} views`;let k=()=>d.innerHTML='<a href="#views-showcase" class="view-link">Views showcase</a><br><br>'+[...t.view.entries].sort().map(([A,M])=>`<div><a class="item view-link${M.options.usage?" with-usage":""}" ${M.options.usage?'href="#views-showcase:'+A+'"':""}>${A}</a></div>`).join("");return k(),t.view.on("define",Dr(k,100)),{el:w,render(A,M,D){let O=du(M,r.context),L=typeof M.params.view=="string"?"custom":"default",E=M.params.view,N=null;if(y.setValue(E),s.hidden=L!=="custom",p.forEach(B=>B.classList.toggle("active",B.dataset.mode===L)),!E&&L==="default"&&(E=jA),r.view!==E||r.data!==A||r.context!==O){D.innerHTML="";try{N=Function("return "+(E?"0,"+E:"null"))(),t.view.render(D,N,A,O)}catch(B){t.view.render(D,I=>{I.className="discovery-error render-error",I.innerHTML=nt(String(B))+"<br>(see details in console)",t.log("error",B)})}r={data:A,context:O,view:E}}}}}function UA(t){function e(a,f){return t.setPageParams({...t.pageParams,...a},f)}function r(){if(i!==null)return i;let a=zA(t,e),f=FA(t,e),d=WA(t,e),p=U("div",{class:"discovery-editor discovery-hidden-in-dzen",hidden:!0},[f.el,d.el]),g=U("div","discovery-content"),y=[...a.el,p,g];return i={header:a,queryEditor:f,viewEditor:d,discoverEditorEl:p,discoverContentEl:g,layout:y}}let i=null,s=null;t.page.define("discovery",function(a,f,d){let{header:p,queryEditor:g,viewEditor:y,discoverEditorEl:x,discoverContentEl:w}=r();x.hidden=d.params.noedit,p.render(f,d);let k=s={};g.perform(f,d).then(A=>{if(s===k){if(A.error){y.el.hidden=!0,w.hidden=!0;return}y.el.hidden=!1,w.hidden=!1,y.render(A.computed,d,w)}})},{reuseEl:!0,init(a){r().layout.forEach(f=>a.appendChild(f))},encodeParams:IA,decodeParams:BA})}var X4=`
## Working with views

In Discovery.js, a presentation is set up as a tree of views.
There are several ways to define a view, each suitable for different cases.
The primary notation is an object, and all other notations are converted to it.
The only required property is \`view\`, which defines the view's name. Any other properties are optional.

\`\`\`discovery-view
{
    view: "view-name"
}
\`\`\`

The following properties are supported by any view:

- \`when\`: Controls view rendering (should it be rendered or not) before input data is transformed (\`data\` is applied).
- \`data\`: Transforms input data for the view and its nested views.
- \`whenData\`: Controls view rendering after input data is transformed.
- \`className\`: Adds class name(s) to the root element of the view if any.
- \`postRender\`: A function to be invoked after view rendering but before placing it in the destination place in the DOM.
- \`tooltip\`: Sets up a tooltip to show on view hovering; can be applied for views with a container only.

The order of evaluation during view rendering:

\`\`\`js
                          input data | output data (the result of "data" evaluation if any)
                                     |
render start ---> [when] --> [data] -|-> [whenData] --> [postRender] --> [className] --> render finish
                                     |
\`\`\`

When the \`data\` property is specified, it changes the flow's data according to the following rules:

- A string: Treated as a query whose result is used as the output data.
- A function like \`fn(data, context)\`: The result of the function invocation is used as the output data.
- Any other value is used as the output data.

> Note: Only \`when\` and \`data\` properties receive input data; any other functions and queries receive the result of the \`data\` property evaluation. When \`data\` is not specified, all queries and functions receive the same input data.

Properties \`when\` and \`whenData\` can take:

- A string: Treated as a query.
- \`true\`: Treated as an empty query, which means that the data itself is examined with no transformation.
- \`undefined\`: Same as when not specified; just render (ignore the property).
- A function like \`fn(data, context)\`.
- Any other value is used as is.

Regardless of how the value is obtained, it is coerced to a boolean.
Please note that Jora rules are used, which means that empty arrays and objects with no own keys are falsy (truthy in JavaScript).
The view is only rendered if the resulting value is truthy.

## Queries for properties

In some cases, it is necessary to compute the value of a property based on the data.
To do this, you can use a string value for a property that starts with \`=\`.
This means that everything after the \`=\` is a query that will take output data and produce a value for the property.
Other values are passed to the view render as is, without any changes.

For example, limit the number of items rendered at once only if there are more than 12 items:

\`\`\`discovery-view
{
    view: 'list',
    limit: '=size() <= 12 ? false : 10'
}
\`\`\`

> Note: In those rare cases when you need to pass a property a string that starts with \`=\`, you can use a query like \`"=some string"\`, e.g., \`{ view: 'example', prop: '="=string="' }\`.

## Shorthand notations

| Shorthand notation | Expands into... |
| --- | --- |
| \`'name'\` | \`{ view: 'name' }\`
| \`'name:<query>'\` | \`{ view: 'name', data: '<query>' }\`
| \`'name{ foo: size() / 2, bar: "qux" }'\` | \`{ view: 'name', foo: '=size() / 2', bar: 'qux' }\`

## List of views

If you need to specify a list of views, you must use an array.
An array with view definitions can be passed anywhere a view is accepted as a value.

\`\`\`discovery-view
[
    {
        view: 'list',
        item: [
            'text:name',
            { view: 'badge', data: 'something.size()' }
        ]
    },
    'table{ limit: 10 }'
]
\`\`\`

## Tooltip

A canonical form for a tooltip setup is an object with fields (all are optional, defaults provided below):

\`\`\`js
{
    className: 'string',     // additional class names for tooltip's element
    position: 'pointer',     // 'trigger' or 'pointer'
    positionMode: 'natural', // 'safe' or 'natural'
    pointerOffsetX: 3,       // tooltip offset from the pointer
    pointerOffsetY: 3,       // tooltip offset from the pointer
    showDelay: true,         // true (300ms), false (0ms), a number, or a function which takes a triggerEl and returns showDelay value
    content: 'a view config' // view config for tooltip's content
}
\`\`\`

Instead of such an object, any view notation can be used, i.e., a string, an object with a \`view\` property, an array, or a function:

| Shorthand notation | Expands into... |
| --- | --- |
| \`'name'\` | \`{ content: 'name' }\`
| \`{ view: 'name' }\` | \`{ content: { view: 'name' } }\`
| \`['view', { view: 'name' }]\` | \`{ content: ['view', { view: 'name' }] }\`

The content is rendered into a popup container. When \`className\` is used, it behaves the same as for a view but applies to a popup container.
`;function $A(t){t.page.define("views-showcase",{view:"context",data:()=>[...t.view.values],modifiers:[{view:"block",className:"sidebar",content:{view:"content-filter",content:{view:"menu",name:"view",limit:!1,data:`
                            .[name ~= #.filter]
                            .sort(name asc)
                            .({ ..., disabled: no options.usage })
                        `,item:"text-match:{ text: name, match: #.filter }"}}}],content:{view:"block",className:"content",data:"$[=> name=(#.view.name or #.id)]",content:{view:"switch",content:[{when:"no $ and #.id",content:'alert-warning:"View \\"" + #.id + "\\" not found"'},{when:"no $",content:['h1:"Views showcase"','alert:"\u2190 Select a view to get details"',{view:"markdown",source:X4}]},{content:[{view:"context",postRender:function(e,r,i,s){t.setPageRef(i.name),t.cancelScheduledRender(),s.id=t.pageRef}},gu(t)]}]}}},{sidebar:!1})}function GA(t){t.nav.append({name:"index-page",when:"#.widget | pageId != defaultPageId",data:'{ text: "Index", href: pageLink(#.widget.defaultPageId) }'})}function VA(t){t.nav.append({name:"discovery-page",when:"#.widget | pageId != discoveryPageId",data:'{ text: "Discover", href: pageLink(#.widget.discoveryPageId) }'})}function KA(t){t.nav.append({name:"load-data",when:"#.actions.uploadFile and (#.datasets or (#.widget | pageId != defaultPageId))",content:'text:"Open file\u2026"',onClick:"=#.actions.uploadFile"})}function YA(t){let e=()=>{};t.nav.menu.append({view:"block",className:["toggle-menu-item","dark-mode-switcher"],name:"dark-mode",when:'#.widget | darkmode.mode not in ["disabled", "only"]',postRender:(r,i,s,{widget:a,hide:f})=>{let d;e(),e=a.darkmode.subscribe((p,g)=>{let y=g==="auto"?"auto":p;y!==d&&(r.innerHTML="",d=y,a.view.render(r,{view:"toggle-group",beforeToggles:'text:"Color schema"',onChange:x=>{d=x,a.darkmode.set(x),f()},value:y,data:[{value:!1,text:"Light"},{value:!0,text:"Dark"},{value:"auto",text:"Auto"}]},null,{widget:a}))},!0)}})}function QA(t){let r=null,i=0;t.nav.append({name:"inspect",tooltip:{position:"trigger",showDelay:!0,content:'md:"**Enable view inspection**<br>To suspend enabling inspect mode by 3 seconds,<br>click the button with Cmd (\u2318) or Ctrl-key"'},onClick:(s,a,f,d)=>{!t.inspectMode.value&&(d.metaKey||d.ctrlKey)?(r===null&&(i=0,r=setTimeout(function p(){i--,i===0?(r=null,delete s.dataset.suspendSeconds,t.inspectMode.set(!0)):(r=setTimeout(p,1e3),s.dataset.suspendSeconds=i)},1e3)),i+=3,s.dataset.suspendSeconds=i):r!==null?(clearTimeout(r),r=null,delete s.dataset.suspendSeconds):(t.view.tooltip?.hide(),t.inspectMode.set(!t.inspectMode.value))}})}function Wg(t,e){let r=[],i=(s,a,f)=>{switch(a){case"after":a=r.findIndex(d=>d.name===f),a===-1?a=r.length:a++;break;case"before":a=r.findIndex(d=>d.name===f),a===-1&&(a=r.length);break;default:(a===void 0||isNaN(a)||!isFinite(a))&&(a=r.length)}r.splice(Math.max(0,Math.min(r.length,a)),0,t.view.composeConfig(e,s))};return Object.assign(r,{insert:i,prepend(s){i(s,0)},append(s){i(s)},before(s,a){i(a,"before",s)},after(s,a){i(a,"after",s)},replace(s,a){let f=r.findIndex(d=>d.name===s);f!==-1?r[f]=a:i(a)},remove(s){let a=r.findIndex(f=>f.name===s);if(a!==-1)return r.splice(a,1)[0]}})}var yu=class{constructor(e){let r=U("div","powered-by-discoveryjs",["powered by ",U("a",{class:"view-link",href:"https://github.com/discoveryjs/discovery",target:"_blank"},"Discovery.js"),` ${Rh}`]);this.host=e,this.popup=null,this.data=null,this.context=null,this.primary=Wg(e,"nav-button"),this.secondary=Wg(e,"nav-button"),this.menu=Wg(e,"menu-item"),this.config=[this.secondary,{view:"nav-button",name:"burger",data:()=>{let i=Li();return this.host.view.render(i,this.menu,this.host.data,{...this.context,hide:()=>this.popup&&this.popup.hide()}).then(()=>[...i.childNodes].filter(s=>s.nodeType===1||s.nodeType===3))},whenData:!0,onClick:(i,s)=>{this.popup||(this.popup=new this.host.view.Popup({className:"discovery-nav-popup"}),this.popup.el.addEventListener("click",({target:a})=>{a.closest("a[href]")&&setTimeout(()=>this.popup.hide(),50)},!0)),this.popup.toggle(i,a=>a.append(...s,r))}},this.primary],Object.assign(this,this.secondary),this.contentRect=new Ei,this.contentRect.subscribe(({width:i,height:s})=>{let{container:a}=e.dom;a&&(a.style.setProperty("--discovery-nav-width",i+"px"),a.style.setProperty("--discovery-nav-height",s+"px"))})}render(e,r,i){this.contentRect.observe(e),e&&(this.data=r,this.context={...i,widget:this.host},this.host.view.setViewRoot(e,"nav",{config:this.config,data:this.data,context:this.context}),e.innerHTML="",this.host.view.render(e,this.config,this.data,this.context))}};var Zo=new Map,Ug=null;function J4(){Ug=null;for(let[t,e]of Zo.entries())console.groupCollapsed(`${t} (${e.length})`),e.forEach(r=>console.warn(...r)),console.groupEnd();Zo.clear()}function Z4(t,...e){Ug===null&&Zo.size===0&&(Ug=setTimeout(J4,1)),Zo.has(t)?Zo.get(t).push(e):Zo.set(t,[e])}function ZA(t,e,r){switch(typeof e){case"function":return e;case"string":return Object.assign(i=>i&&Object.hasOwnProperty.call(i,e)?i[e]:void 0,{getterFromString:`object[${JSON.stringify(e)}]`});default:throw new Error(`[Discovery] Bad type "${typeof key}" for ${r} in object marker "${t}" config (must be a string or a function)`)}}function XA(t,e,r,i){return e&&hasOwnProperty.call(e,r)?ZA(t,e[r],`"${r}" option`):i}function JA(t,e,r){return(Array.isArray(e[r])?e[r]:[]).map(i=>ZA(t,i,`"${r}" option`))}function eW(t){let{name:e,indexRefs:r,lookupRefs:i,page:s,getRef:a,getTitle:f}=t;s&&(a!==null?r.unshift(a):console.warn(`Option "ref" for "${e}" marker must be specified when "page" options is defined ("page" option ignored)`)),r.length>0&&i.unshift(k=>k);let d=new Set,p=new Map,g=new Map,y=new WeakMap;return{page:a!==null?s:null,mark:k=>{if(k===null||typeof k!="object"){console.warn(`Invalid value used for "${e}" marker (should be an object)`);return}d.add(k);for(let A of r){let M=A(k),D=M===null?"null":typeof M;if(D==="object"||D==="string"||D==="number"){if(!p.has(M)){p.set(M,k);continue}p.get(M)!==k&&Z4(`The same reference value used for different objects for "${e}" marker`,`Reference value "${M}"`,{refGetter:A.getterFromString||A,ref:M,currentObject:p.get(M),newObject:k})}}},lookup:k=>{let A=k===null?"null":typeof k;if(A!=="object"&&A!=="string"&&A!=="number")return null;if(g.has(k))return g.get(k);if(y.has(k))return y.get(k);let M=null,D=null;if(d.has(k))D=k;else for(let O of i){let L=O(k);if(p.has(L)){D=p.get(L);break}}if(D!==null){if(g.has(D))M=g.get(D);else{let O=a!==null?a(D):null;M=Object.freeze({type:e,object:D,ref:O,title:f(D),href:s!==null&&O!==null?`#${encodeURIComponent(s)}:${encodeURIComponent(O)}`:null}),g.set(D,M)}k!==D&&(typeof k!="object"?g.set(k,M):y.set(k,M))}return M}}}var fl=class extends kn{define(e,r){if(this.isDefined(e)){console.error(`[Discovery] Object marker "${e}" is already defined, new definition ignored`);return}r=r||{};let i=JA(e,r,"refs"),s=JA(e,r,"lookupRefs"),a=typeof r.page=="string"?r.page:null,f=XA(e,r,"ref",null),d=XA(e,r,"title",f||(()=>null));return super.define(e,eW({name:e,indexRefs:i,lookupRefs:s,page:a,getRef:f,getTitle:d}))}lookup(e,r){if(r)return this.get(r)?.lookup(e);for(let{lookup:i}of this.values){let s=i(e);if(s!==null)return s}return null}lookupAll(e){let r=[];for(let{lookup:i}of this.values){let s=i(e);s!==null&&r.push(s)}return r}};function $g(t){let e=new fl,r=[],i=[],s={rejectData(k,A){throw Object.assign(new Error(k),{renderContent:A})},defineObjectMarker:d,lookupObjectMarker:p,lookupObjectMarkerAll:g,resolveValueLinks:x,addValueAnnotation:y,addQueryHelpers(k){f=Mr.setup({methods:a={...a,...k}})},query(k,...A){return t.queryFn.call({queryFnFromString:f},k)(...A)}},a={query:(...k)=>t.query(...k),pageLink:(k,A,M)=>t.encodePageHash(A,k,M),marker:p,markerAll:g,callAction:w,actionHandler:(k,...A)=>t.action.has(k)?()=>w(k,...A):void 0},f=Mr.setup({methods:a});return Object.assign(k=>Object.assign(k,{objectMarkers:e,linkResolvers:r,resolveValueLinks:x,annotations:i,queryFnFromString:f}),{methods:s});function d(k,A){let M=!!A?.annotateScalars,{page:D,mark:O,lookup:L}=e.define(k,A)||{};if(!L)return()=>{};if(D!==null){if(!t.page.isDefined(A.page)){t.log("error",`Page reference "${A.page}" doesn't exist`);return}r.push(E=>{let N=L(E);if(N!==null)return{type:D,text:N.title,href:N.href,entity:N.object}})}return y((E,N)=>{let B=M||typeof E=="object"&&E!==null?L(E):null;if(B!==null&&B.object!==N.host)return{place:"before",style:"badge",text:k,href:B.href}}),O}function p(k,A){return e.lookup(k,A)}function g(k){return e.lookupAll(k)}function y(k,A=!1){typeof A=="boolean"&&(A={debug:A}),i.push({query:k,...A})}function x(k){let A=[],M=typeof k;if(k&&(M==="object"||M==="string"))for(let D of r){let O=D(k);O&&A.push(O)}return A.length?A:null}function w(k,...A){let M=null;typeof A[A.length-1]=="function"&&(M=A.pop());let D=t.action.call(k,...A);return D&&M&&typeof D.then=="function"?D.then(M):M?M(D):D}}var eT=new WeakMap,tT=["variable","property","value","method"],tW=(t,e)=>tT.indexOf(t.type)-tT.indexOf(e.type),nW=t=>{let e=t.toLowerCase();return r=>r!==t&&(typeof r=="string"?r:String(r)).toLowerCase().indexOf(e)!==-1};function rW(t,e){return typeof t!="string"?String(t):(t=JSON.stringify(t),e[0]!=="'"?t:`'${t.slice(1,-1).replace(/\\.|'/g,r=>r==='\\"'?'"':r==="'"?"\\'":r)}'`)}function iW(t,e,r){if(e===r)return!0;let i=t.stat(e)||[],s=t.stat(r)||[];if(i.length!==s.length)return!1;for(let a=0;a<i.length;a++){let f=i[a],d=s[a];for(let p of Object.keys(f))if(f[p]!==d[p])return!1}return!0}function nT(t,e,r,i,s){try{let a=eT.get(t);if(!a||a.query!==e||a.data!==i||a.context!==s){let d={tolerant:!0,stat:!0};eT.set(t,a={query:e,data:i,context:s,offset:-1,suggestions:null,api:null}),a.api=t.queryFnFromString(e,d)(i,s)}if(a.api===null)return null;if(a.offset!==-1&&iW(a.api,a.offset,r))return a.suggestions;let f=a.api.suggestion(a.offset=r,{sort:!0,filter:nW,limit:50});if(f){a.suggestions=[];for(let d of f.sort(tW))a.suggestions.push(...d.suggestions.map(p=>({type:d.type,from:d.from,to:d.to,text:d.text,value:d.type==="value"?rW(p,d.text):p})))}else a.suggestions=null;return a.suggestions}catch(a){t.log({level:"error",message:"Error while attempting to retrieve suggestions for the query",collapsed:a});return}}var rT=new WeakMap,es=new WeakMap,vu=["silent","error","warn","info","perf","debug"],Gg="[Discovery]",oW=new Proxy({},{get:()=>()=>{}}),sW=t=>t,aW=t=>Object.fromEntries(t);function Vg(t,e,r){r?t.dataset[e]=r:delete t.dataset[e]}function lW(t,e,r,i){let s=t.page.get(e);return s&&Object.hasOwnProperty.call(s.options,r)?s.options[r]:i}function iT(t,e,r,i){let s=lW(t,e,r,i);return typeof s=="function"?s:i}var ts=class extends Qn{constructor(e={}){super(),this.options=e||{};let{logLevel:r,logger:i=console,darkmode:s="disabled",darkmodePersistent:a=!1,defaultPage:f,defaultPageId:d,discoveryPageId:p,reportToDiscoveryRedirect:g=!0,extensions:y,inspector:x=!1}=this.options;this.logger=i||oW,this.logLevel=vu.includes(r)?r:"perf",this.darkmode=new $c(s,a),this.inspectMode=new tn(!1),this.initDom(),this.action=new Ya,this.action.on("define",()=>{this.context&&(this.scheduleRender("sidebar"),this.scheduleRender("page"))}).on("revoke",()=>{this.context&&(this.scheduleRender("sidebar"),this.scheduleRender("page"))}),this.view=new Xa(this),this.nav=new yu(this),this.preset=new Ja(this.view),this.page=new Qa(this).on("define",w=>{if(this.pageId===w&&this.pageHash!=="#"){let k=this.pageHash;this.pageHash="#",this.setPageHash(k),this.cancelScheduledRender()}}),es.set(this,new Set),this.datasets=[],this.encodings=jc(e.encodings),this.data=void 0,this.context=void 0,this.prepare=w=>w,this.defaultPageId=d||"default",this.discoveryPageId=p||"discovery",this.reportToDiscoveryRedirect=!!g,this.pageId=this.defaultPageId,this.pageRef=null,this.pageParams={},this.pageHash=this.encodePageHash(this.pageId,this.pageRef,this.pageParams),this.apply($g(this)),this.apply(cu),this.apply(mu),y&&this.apply(y),f&&this.page.define(this.defaultPageId,f),x&&this.apply(eg),this.nav.render(this.dom.nav,this.data,this.getRenderContext()),this.setContainer(this.options.container)}apply(e){Array.isArray(e)?e.forEach(r=>this.apply(r)):typeof e=="function"?e.call(null,this):e&&this.apply(Object.values(e))}log(e,...r){let{level:i,lazy:s,message:a,collapsed:f}=e&&typeof e=="object"?e:{level:e},d=vu.indexOf(i);if(d>0&&d<=vu.indexOf(this.logLevel)){let p=i==="perf"?"log":i;if(f){this.logger.groupCollapsed(`${Gg} ${a||r?.[0]}`);let g=typeof f=="function"?f():f;for(let y of Array.isArray(g)?g:[g])this.logger[p](...Array.isArray(y)?y:[y]);this.logger.groupEnd()}else this.logger[p](Gg,...typeof s=="function"?s():r)}else d===-1&&this.logger.error(`${Gg} Bad log level "${i}", supported: ${vu.slice(1).join(", ")}`)}setPrepare(e){if(typeof e!="function")throw new Error("An argument should be a function");this.prepare=e}setData(e,r={},i){i=i||{};let s=Date.now(),a=$g(this),f=()=>{if(rT.get(this)!==d)throw new Error("Prevented by another setData()")},d=Promise.resolve().then(()=>(f(),this.prepare(e,a.methods)||e)).then(p=>{f(),this.datasets=[{...i.dataset,data:p}],this.data=p,this.context=r,this.apply(a),this.emit("data"),this.log("perf",`Data prepared in ${Date.now()-s}ms`)});return rT.set(this,d),(!("render"in i)||i.render)&&d.then(()=>{this.scheduleRender("sidebar"),this.scheduleRender("page")}),d}async setDataProgress(e,r,i){let{dataset:s,progressbar:a}=i||{};this.emit("startSetData",(...f)=>a?.subscribeSync(...f)),await a?.setState({stage:"prepare"}),await this.setData(e,r,{dataset:s,render:!1}),await a?.setState({stage:"initui"}),this.scheduleRender("sidebar"),this.scheduleRender("page"),await Promise.all([this.dom.wrapper.parentNode?this.dom.ready:!0,es.get(this).timer]),await a?.finish()}unloadData(){this.hasDatasets()&&(this.datasets=[],this.data=void 0,this.context=void 0,this.scheduleRender("sidebar"),this.scheduleRender("page"),this.emit("unloadData"))}hasDatasets(){return this.datasets.length!==0}resolveValueLinks(){return null}queryFn(e){switch(typeof e){case"function":return e;case"string":return this.queryFnFromString(e)}}query(e,r,i){switch(typeof e){case"function":return e(r,i);case"string":return this.queryFn(e)(r,i);default:return e}}queryBool(...e){return Mr.buildin.bool(this.query(...e))}queryToConfig(e,r){let{ast:i}=Mr.syntax.parse(r),s={view:e};if(i.type!=="Block")throw new SyntaxError('[Discovery] Widget#queryToConfig(): query root must be a "Block"');if(i.body.type!=="Object")throw new SyntaxError('[Discovery] Widget#queryToConfig(): query root must return an "Object"');for(let a of i.body.properties){if(a.type!=="ObjectEntry")throw new SyntaxError('[Discovery] Widget#queryToConfig(): unsupported object entry type "'+a.type+'"');let f,d=a.value;switch(a.key.type){case"Literal":f=a.key.value;break;case"Identifier":f=a.key.name,d||=a.key;break;case"Reference":f=a.key.name.name,d||=a.key;break;default:throw new SyntaxError('[Discovery] Widget#queryToConfig(): unsupported object key type "'+a.key.type+'"')}if(f==="view"||f==="postRender")throw new SyntaxError('[Discovery] Widget#queryToConfig(): set a value for "'+f+'" property in shorthand notation is prohibited');f==="when"||f==="data"||f==="whenData"?s[f]=d.type==="Literal"&&typeof d.value!="string"?d.value:Mr.syntax.stringify(d):s[f]=d.type==="Literal"&&(typeof d.value!="string"||d.value[0]!=="=")?d.value:"="+Mr.syntax.stringify(d)}return s}querySuggestions(e,r,i,s){return nT(this,e,r,i,s)}pathToQuery(e){return e.map((r,i)=>r==="*"?i===0?"values()":".values()":typeof r=="number"||!/^[a-zA-Z_][a-zA-Z_$0-9]*$/.test(r)?i===0?`$[${JSON.stringify(r)}]`:`[${JSON.stringify(r)}]`:i===0?r:"."+r).join("")}getQueryEngineInfo(){return{name:"jora",version:Mr.version,link:"https://discoveryjs.github.io/jora/#article:jora-syntax"}}initDom(){let e=U("div","discovery init"),r=e.attachShadow({mode:"open"}),i=Va(r,this.options.styles),s=r.appendChild(U("div"));this.dom={},this.dom.ready=Promise.all([i]),this.dom.wrapper=e,this.dom.root=r,this.dom.container=s,s.classList.add("discovery-root","discovery"),s.append(this.dom.nav=U("div","discovery-nav discovery-hidden-in-dzen"),this.dom.sidebar=U("nav","discovery-sidebar discovery-hidden-in-dzen"),this.dom.content=U("main","discovery-content",[this.dom.pageContent=U("article")])),r.addEventListener("click",a=>{let f=a.target.closest("a");!f||f.getAttribute("target")||f.origin!==location.origin||f.pathname!==location.pathname||(a.preventDefault(),f.classList.contains("ignore-href")||this.setPageHash(f.hash))},!0),this.dom.detachDarkMode=this.darkmode.subscribe(a=>s.classList.toggle("discovery-root-darkmode",a),!0),this.dom.ready.then(()=>{getComputedStyle(this.dom.wrapper).opacity,this.dom.wrapper.classList.remove("init")})}setContainer(e){e instanceof Node?e.append(this.dom.wrapper):this.dom.wrapper.remove()}disposeDom(){typeof this.dom.detachDarkMode=="function"&&(this.dom.detachDarkMode(),this.dom.detachDarkMode=null),this.dom.container.remove(),this.dom=null}addGlobalEventListener(e,r,i){return document.addEventListener(e,r,i),()=>document.removeEventListener(e,r,i)}addHostElEventListener(e,r,i){let s=this.dom.container;return s.addEventListener(e,r,i),()=>s.removeEventListener(e,r,i)}scheduleRender(e){let r=es.get(this);if(!r.has(e)&&(r.add(e),!r.timer))return r.timer=Promise.resolve().then(async()=>{for(let i of r)switch(i){case"sidebar":await this.renderSidebar();break;case"page":await this.renderPage();break}r.timer=null}),r.timer}cancelScheduledRender(e){let r=es.get(this);r&&(e?r.delete(e):r.clear())}getRenderContext(){return{page:this.pageId,id:this.pageRef,params:this.pageParams,actions:this.action.actionMap,datasets:this.datasets,data:this.data,...this.context}}renderSidebar(){if(es.get(this).delete("sidebar"),this.hasDatasets()&&this.view.isDefined("sidebar")){let e=Date.now(),r=this.data,i=this.getRenderContext();return this.view.setViewRoot(this.dom.sidebar,"sidebar",{data:r,context:i}),this.dom.sidebar.innerHTML="",this.view.render(this.dom.sidebar,"sidebar",r,i).finally(()=>this.log("perf",`Sidebar rendered in ${Date.now()-e}ms`))}}encodePageHash(e,r,i){let a=iT(this,e,"encodeParams",sW)(i||{});return a&&typeof a!="string"&&(Array.isArray(a)||(a=Object.entries(a)),a=a.map(f=>f.map(encodeURIComponent).join("=")).join("&")),`#${e!==this.defaultPageId?encodeURIComponent(e):""}${typeof r=="string"&&r||typeof r=="number"?":"+encodeURIComponent(r):""}${a?"&"+a:""}`}decodePageHash(e){let r=(e.indexOf("&")+1||e.length+1)-1,[i,s]=e.substring(e[0]==="#"?1:0,r).split(":").map(decodeURIComponent),a=iT(this,i||this.defaultPageId,"decodeParams",aW),f=e.substr(r+1).split("&").filter(Boolean).map(d=>{let p=d.indexOf("=");return p!==-1?[decodeURIComponent(d.slice(0,p)),decodeURIComponent(d.slice(p+1))]:[decodeURIComponent(d),!0]});return{pageId:i||this.defaultPageId,pageRef:s,pageParams:a(f)}}setPage(e,r,i,s=!1){return this.setPageHash(this.encodePageHash(e||this.defaultPageId,r,i),s)}setPageRef(e,r=!1){return this.setPage(this.pageId,e,this.pageParams,r)}setPageParams(e,r=!1){return this.setPage(this.pageId,this.pageRef,e,r)}setPageHash(e,r=!1){let{pageId:i,pageRef:s,pageParams:a}=this.decodePageHash(e);return this.reportToDiscoveryRedirect&&i==="report"&&setTimeout(()=>this.pageId==="report"&&this.setPage("discovery",this.pageRef,this.pageParams,!0)),(this.pageId!==i||this.pageRef!==s||!Rp(this.pageParams,a))&&(this.pageId=i,this.pageRef=s,this.pageParams=a,this.scheduleRender("page"),e!==this.pageHash)?(this.pageHash=e,this.emit("pageHashChange",r),!0):!1}renderPage(){es.get(this).delete("page");let e=this.data,r=this.getRenderContext(),{pageEl:i,renderState:s,config:a}=this.page.render(this.dom.pageContent,this.pageId,e,r);return this.view.setViewRoot(i,"Page: "+this.pageId,{inspectable:!1,config:a,data:e,context:r}),this.dom.pageContent=i,this.nav.render(this.dom.nav,e,r),Vg(this.dom.container,"page",this.pageId),Vg(this.dom.container,"dzen",!!this.pageParams.dzen),Vg(this.dom.container,"compact",!!this.options.compact),s.then(()=>{if(this.pageParams["!anchor"]){let f=i.querySelector("#"+CSS.escape("!anchor:"+this.pageParams["!anchor"]));if(f){let d=i.querySelector(".view-page-header");f.style.scrollMargin=d?d.offsetHeight+"px":"",f.scrollIntoView(!0)}}}),s}};var Kg=Object.assign(sT(),{setup:sT}),oT=t=>/^\./.test(t);function sT(t){return t=t||!0,function(e){let r=t.accept?String(t.accept):"application/json,application/jsonxl,.json,.jsonxl",i=!!(t.dragdrop||t.dragdrop===void 0),s=r.split(",");i&&(e.dom.container.addEventListener("drop",a=>{e.loadDataFromEvent(a)},!0),e.dom.container.addEventListener("dragover",a=>{a.stopPropagation(),a.preventDefault()},!0)),e.preset.define("upload",[{view:"button-primary",onClick:"=#.actions.uploadFile",content:'text:`Open file ${#.actions.uploadFile.fileExtensions | $ ? "(" + join(", ") + ")" : ""}`'},{view:"context",when:"#.actions.uploadFile.dragdrop",content:['html:"<span style=\\"color: #888; padding: 0 1ex\\"> or </span>"','text:"drop a file on the page"']}]),e.action.define("unloadData",()=>{e.unloadData()}),e.action.define("uploadFile",Object.assign(()=>{U("input",{type:"file",accept:r,onchange:a=>e.loadDataFromEvent(a)}).click()},{fileExtensions:s.filter(a=>oT(a)),mimeTypes:s.filter(a=>!oT(a)),dragdrop:i}))}}function Yg(){return[parseInt(performance.timeOrigin,10).toString(16),parseInt(1e4*performance.now(),10).toString(16),String(Math.random().toString(16).slice(2))].join("-")}var im={};Ae(im,{createLoadDataState:()=>hl,dataFromStream:()=>BT,dataSource:()=>qW,extractResourceMetadata:()=>rm,getReadableStreamFromSource:()=>KW,loadDataFromEvent:()=>Cu,loadDataFromFile:()=>pl,loadDataFromPush:()=>Au,loadDataFromStream:()=>is,loadDataFromUrl:()=>Su,syncLoaderWithProgressbar:()=>nm});var Qg=typeof new Blob().stream=="function"?t=>t.stream():cW();function cW(){try{return new ReadableStream({type:"bytes"}),uW}catch{try{return new ReadableStream({}),fW}catch{try{return new Response(new Blob).body.getReader(),dW}catch{}}}return hW}function aT(t){return typeof t.arrayBuffer=="function"?t.arrayBuffer():new Promise((e,r)=>{let i=new FileReader;i.readAsArrayBuffer(t),i.onload=i.onerror=({type:s})=>{i.onload=i.onerror=null,s==="load"?e(i.result||i):r(new Error("Failed to read the blob/file"))}})}function uW(t){let e=0;return new ReadableStream({type:"bytes",autoAllocateChunkSize:512*1024,pull(r){let i=r.byobRequest.view,s=t.slice(e,e+i.byteLength);return aT(s).then(a=>{let f=new Uint8Array(a),d=f.byteLength;e+=d,i.set(f),r.byobRequest.respond(d),e>=t.size&&r.close()})}})}function fW(t){let e=0;return new ReadableStream({pull(r){let i=t.slice(e,e+524288);return aT(i).then(s=>{e+=s.byteLength,r.enqueue(new Uint8Array(s)),e==t.size&&r.close()})}})}function dW(t){return new Response(t).body}function hW(){throw new Error("Blob#stream() is not supported and no fallback can be applied, include https://github.com/MattiasBuelens/web-streams-polyfill")}var lT=gn(Pg(),1),Xg=Object.freeze({name:"json",test:()=>!0,streaming:!0,decode:t=>(0,lT.default)(()=>t)});var pW=new Uint8Array([0,0,74,83,79,78,88,76]),cT=9,gW=268435455,mW=4294967295,pT=1,bu=2,ns=4,dl=8,rs=16,wu=32,xu=64,zi=128,gT=0,mT=1,yT=2,vT=3,bT=4,wT=5,xT=6,yW=7,kT=8,CT=9,ST=10,AT=11,TT=12,vW=31,zY=~vW,LT=224,RY=~LT,ET=7936,FY=~ET,MT=0,Zg=1,bW=2,wW=3,xW=4,kW=5,DT=6,NT=7,CW=8,uT=16,fT=32,_Y=~rs,dT=bu|wu|xu,SW=new Uint8Array(256),OT=new Uint8Array(8).map((t,e)=>(SW[1<<e]=e,1<<e)),PT=new Uint8Array(256).map((t,e)=>{for(let r=0;r<8;r++)t+=e>>r&1;return t}),jY=Object.fromEntries(Object.entries({TYPE_UNDEF:pT,TYPE_TRUE:wu,TYPE_FALSE:xu,TYPE_NULL:bu,TYPE_NUMBER:ns,TYPE_STRING:dl,TYPE_OBJECT:rs,TYPE_ARRAY:zi}).map(([t,e])=>[e,t])),HY=Object.fromEntries(Object.entries({UINT_8:gT,UINT_16:mT,UINT_24:yT,UINT_32:vT,UINT_32_VAR:bT,INT_8:kT,INT_16:CT,INT_24:ST,INT_32:AT,INT_32_VAR:TT,FLOAT_32:wT,FLOAT_64:xT,DECIMAL:yW}).map(([t,e])=>[e,t])),Jg=new Uint8Array(32),AW=class{constructor(t){this.view=new DataView(t.buffer,t.byteOffset,t.byteLength),this.bytes=t,this.pos=0}readBytes(t){return this.bytes.subarray(this.pos,this.pos+=t)}readTypeIndex(t,e,r){let i=0,s=0;for(;e>0;)e&1&&(Jg[i++]=s),s++,e>>=1;let a=new Uint8Array(t),f=32-Math.clz32(i-1),d=(1<<f)-1,p=this.readBytes(Math.ceil(f*t/8)),g=0,y=0,x=0;for(let w=0;w<t;w++)y<f&&(x|=p[g]<<y,y+=8,g++),a[w]=r?OT[Jg[x&d]]:Jg[x&d],x>>=f,y-=f;return a}readVlq(){let t=this.view.getUint8(this.pos);if(!(t&1))t=t>>1,this.pos+=1;else if(!(t&2))t=this.view.getUint8(this.pos+1)<<6|t>>2,this.pos+=2;else if(!(t&4))t=this.view.getUint16(this.pos+1,!0)<<5|t>>3,this.pos+=3;else{let e=this.view.getUint32(this.pos,!0);t=e>>>3&gW,this.pos+=4,e>>>31&&(t+=this.readUintVar()*(1<<28))}return t}readUintVar(){let t=this.view.getUint8(this.pos++),e=t&127,r=128;for(;t&128;)t=this.view.getUint8(this.pos++),e+=(t&127)*r,r*=128;return e}readIntVar(){let t=this.readUintVar();return t&1?-(t-1)/2:t<=mW?t>>>1:t/2}readUint8(){let t=this.view.getUint8(this.pos);return this.pos++,t}readInt8(){let t=this.view.getInt8(this.pos);return this.pos++,t}readUint16(){let t=this.view.getUint16(this.pos,!0);return this.pos+=2,t}readInt16(){let t=this.view.getInt16(this.pos,!0);return this.pos+=2,t}readUint24(){let t=this.view.getUint16(this.pos,!0)|this.view.getUint8(this.pos+2)<<16;return this.pos+=3,t}readInt24(){let t=this.view.getUint16(this.pos,!0),e=this.view.getUint8(this.pos+2),r=e&128?-(16777215-(t|e<<16)+1):t|e<<16;return this.pos+=3,r}readUint32(){let t=this.view.getUint32(this.pos,!0);return this.pos+=4,t}readInt32(){let t=this.view.getInt32(this.pos,!0);return this.pos+=4,t}readFloat32(){let t=this.view.getFloat32(this.pos);return this.pos+=4,t}readFloat64(){let t=this.view.getFloat64(this.pos);return this.pos+=8,t}};function em(t,e){switch(e){case gT:return t.readUint8();case mT:return t.readUint16();case yT:return t.readUint24();case vT:return t.readUint32();case bT:return t.readUintVar();case kT:return t.readInt8();case CT:return t.readInt16();case ST:return t.readInt24();case AT:return t.readInt32();case TT:return t.readIntVar();case wT:return t.readFloat32();case xT:return t.readFloat64()}}function TW(t){let e=t.readUint8();switch(e&15){case MT:case Zg:case DT:case NT:e|=t.readUint8()<<8;break}return e}function dr(t,e=t.readVlq()){let r=TW(t);return tm(t,r,e)}function tm(t,e,r,i=new Array(r)){let s=e&15,a=e&48,f=r,d=0,p=0;switch(a){case uT:{d=i[0]=t.readIntVar(),f--,p=1;break}case fT:{d=t.readIntVar();break}}switch(s){case bW:{for(let g=0;g<f;g++)i[p+g]=t.readVlq();break}case wW:{for(let g=0;g<f;g++)i[p+g]=t.readIntVar();break}case xW:{let g=t.readBytes(Math.ceil(f/2));for(let y=0,x=0;y<f;y++)x=y&1?x>>4:g[y>>1],i[p+y]=x&8?t.readVlq()*8+(x&7):x&7;break}case kW:{let g=t.readBytes(Math.ceil(f/2));for(let y=0,x=0;y<f;y++){x=y&1?x>>4:g[y>>1];let w=x&4?-1:1;i[p+y]=x&8?w*(t.readVlq()*4+(x&3)):w*(x&3)}break}case DT:{let g=e>>8,y=(1<<g)-1,x=t.readBytes(Math.ceil(f*g/8)),w=0,k=0,A=0;for(let M=0;M<f;M++){for(;k<g;)A|=x[w]<<k,k+=8,w++;i[p+M]=A&y,A>>=g,k-=g}break}case NT:{let g=e>>8,y=(1<<g)-1,x=t.readBytes(Math.ceil(f*g/8)),w=0,k=0,A=0;for(let M=0;M<f;M++){for(;k<g;)A|=x[w]<<k,k+=8,w++;i[p+M]=A&1?-((A&y)>>1):(A&y)>>1,A>>=g,k-=g}break}case CW:{let g=i[0]=t.readIntVar(),y=t.readIntVar();for(let x=1;x<r;x++)g=i[x]=g+y;break}case MT:case Zg:{let g=s===Zg,y=e>>8,x=g?e&ET|y&LT:y;if(PT[y]>1){let w=t.readTypeIndex(f,x);for(let k=0;k<f;k++)i[p+k]=em(t,w[k])}else{let w=31-Math.clz32(x);for(let k=0;k<f;k++)i[p+k]=em(t,w)}break}default:throw new Error(`Unknown numeric array encoding method: ${s}`)}switch(a){case uT:{i[0]=d;for(let g=1;g<r;g++)i[g]+=i[g-1];break}case fT:{for(let g=0;g<r;g++)i[g]+=d;break}}return i}var LW=new TextDecoder("utf8",{ignoreBOM:!0});function EW(t){if(t.readBytes(8).some((i,s)=>i!==pW[s]))throw new Error("Bad magic number");let e=t.readUint16();if(e!==cT)throw new Error(`Unsupported jsonxl version "${e}", expected "${cT}"`);let r=t.readUint16();return{version:e,flags:r}}function MW(t){let e=LW.decode(t.readBytes(t.readVlq())),r=dr(t),i=dr(t),s=dr(t),a=dr(t),f=new Array(r),d=0;for(let p=0,g=0,y=0,x=0,w="";p<r.length;p++){let k=r[p],A=e.slice(g,g+=k>>2);k&2&&(A=w.slice(0,i[y++])+A),k&1&&(A=A+w.slice(-s[x++])),f[p]=A,w=A}return{readStrings(p,g){return a.slice(p,g).map(y=>f[y])},readString(){return f[a[d++]]}}}function DW(t){let e=dr(t),r=0;return function(){return e[r++]}}function NW(t){let e=dr(t),r=dr(t),i=0;return function(){return e[r[i++]]}}function OW(t,e){let r=t.readVlq(),i=t.readVlq();if(r===0)return()=>null;let s=i?e(-i):[],a=new Array(r);for(let f=0;f<r;f++)a[f]={dict:dr(t),refs:dr(t),index:0};return function(f){let d=a[f],p=d.refs[d.index++],g=d.dict[p];return g===0?null:{key:s[g>>8],type:g&255}}}function hT(t,e){let r=0;for(let i=0;i<t.length;i++)t[i]===e&&r++;return r}function IT(t){function e(w={}){let k=0,A;for(;A=y(k++);)w[A.key]=s(A.type);return w}function r(w=p()){if(w===0)return[];let k=g(),A=k>>16,M=k&65535,D=A&1,O=A>>5&1,L=A>>9&1,E=A>>1&255|(A&1)<<4,N=new Array(w),B=PT[E]>1?a.readTypeIndex(w,E,!0):null;if(E&dT)if(B===null)N.fill(i(E));else for(let I=0;I<w;I++)B[I]&dT&&(N[I]=i(B[I]));if(E&dl)for(let I=0;I<w;I++)(B===null||B[I]===dl)&&(N[I]=d());if(E&ns)if(E===ns)tm(a,M,w,N);else{let I=hT(B,ns),R=tm(a,M,I);for(let j=0,F=0;j<w;j++)B[j]===ns&&(N[j]=R[F++])}if(E&zi)if(L){let I=E===zi?w:hT(B,zi),R=dr(a,I),j=r();for(let F=0,se=0,W=0;F<w;F++)(B===null||B[F]===zi)&&(N[F]=j.slice(W,W+=R[se++]))}else for(let I=0;I<w;I++)(B===null||B[I]===zi)&&(N[I]=r());if(E&rs){let I=E===rs?N:[];for(let R=0,j=0;R<w;R++)(B===null||B[R]===rs)&&(N[R]=I[j++]={});if(O){let R=a.readVlq(),j=new Array(R);for(let F=0;F<R;F++)j[F]=d();for(let F=0;F<R;F++){let se=j[F],W=r(I.length);for(let J=0;J<I.length;J++)W[J]!==void 0&&(I[J][se]=W[J])}}if(D)for(let R=0;R<I.length;R++)e(I[R])}return N}function i(w){switch(w){default:return;case bu:return null;case dl:return d();case wu:return!0;case xu:return!1}}function s(w){switch(OT[w&7]){case pT:return;case bu:return null;case dl:return d();case ns:return em(a,w>>3);case rs:return e();case wu:return!0;case xu:return!1;case zi:return r()}}let a=new AW(t);EW(a);let{readStrings:f,readString:d}=MW(a),p=DW(a),g=NW(a),y=OW(a,f),x=s(a.readUint8());if(a.pos!==t.byteLength)throw new Error("End of input not reached");return x}var PW=[0,0,74,83,79,78,88,76];function IW(t){return PW.every((e,r)=>e===t[r])}var ku=Object.freeze({name:"jsonxl/snapshot9",test:IW,streaming:!1,decode:IT});var qW={stream:is,event:Cu,file:pl,url:Su,push:Au};function zW(t){return t!==null&&typeof t=="object"}function RW(t){try{return new URL(t,location.origin).origin===location.origin}catch{return!1}}function FW(t){return t.ok}function _W(t){return t.headers.get("x-file-encoded-size")||t.headers.get("content-length")}function jW(t){return t.headers.get("x-file-size")||(RW(t.url)&&!t.headers.get("content-encoding")?t.headers.get("content-length"):void 0)}function HW(t){return t.headers.get("x-file-created-at")||t.headers.get("last-modified")}function WW(t){let e=t?Object.keys(t):[],r=["name","createdAt","elapsedTime","data"];return!(e.length!==4||e.some(i=>!r.includes(i)))}function UW(t,e,r,{encoding:i,size:s}){if(WW(t)){let{data:M,...D}=t;t=M,e={...e,createdAt:M.createdAt},r=D}let a=t,f=r||{},{type:d,name:p,encoding:g,size:y,encodedSize:x,createdAt:w,...k}=e;return{resource:{type:d||"unknown",name:p||"unknown",encoding:i,size:s,...x?{encodedSize:x}:null,createdAt:new Date(Date.parse(w)||Date.now()),...k},meta:f,data:a}}async function $W(t){let e=[],r=0;for await(let a of t)e.push(a),r+=a.byteLength;let i=new Uint8Array(r),s=0;for(let a of e)i.set(a,s),s+=a.length;return i}function BT(t,e,r,i){let a=t.getReader(),f=Date.now(),d=[...jc(e),ku,Xg],p="unknown",g=0,y=async function*(x){for(;;){let{value:w,done:k}=x||await a.read();if(x=void 0,k){await i({done:!0,elapsed:Date.now()-f,units:"bytes",completed:g,total:r});break}for(let A=0;A<w.length;A+=1048576){let M=A===0&&w.length-A<1048576?w:w.slice(A,A+1048576);g+=M.length,yield M,await i({done:!1,elapsed:Date.now()-f,units:"bytes",completed:g,total:r})}}};return a.read().then(x=>{for(let{name:w,test:k,streaming:A,decode:M}of d)if(k(x.value,x.done))return p=w,A?M(y(x)):$W(y(x)).then(M);throw new Error("No matched encoding found for the payload")}).finally(()=>a.releaseLock()).then(x=>({data:x,encoding:p,size:g}))}async function GW(t,e){let r=async(i,s)=>(await e.asyncSet({stage:i}),await s());try{let i=new Date,{method:s,stream:a,resource:f,options:d,data:p}=await r("request",t),g=new Date,y=f?.size,{validateData:x,encodings:w}=d||{},{data:k,encoding:A,size:M}=p?{data:p}:await r("receive",()=>BT(a,w,Number(y)||0,I=>e.asyncSet({stage:"receive",progress:I}))),D=new Date;typeof x=="function"&&x(E);let O=new Date;await e.asyncSet({stage:"received"});let L=new Date,{data:E,resource:N,meta:B}=UW(k,f,null,{size:M,encoding:A});return{loadMethod:s,resource:N,meta:B,data:E,timing:{time:L-i,start:i,end:L,requestTime:g-i,requestStart:i,requestEnd:g,responseTime:D-g,responseStart:g,responseEnd:D,validateTime:O-D,validationStart:D,validationEnd:O}}}catch(i){throw console.error("[Discovery] Error loading data:",i),await e.asyncSet({stage:"error",error:i}),i}}function hl(t,e){let r=new tn;return{state:r,result:GW(t,r),...e}}function is(t,e){return hl(()=>({method:"stream",stream:t,resource:e?.resource,options:e}))}function pl(t,e){let r=rm(t);return hl(()=>({method:"file",stream:Qg(t),resource:e?.resource||r,options:e}),{title:"Load data from file: "+(r.name||"unknown")})}function Cu(t,e){let r=t.dataTransfer||t.target,i=r&&r.files&&r.files[0];if(t.stopPropagation(),t.preventDefault(),!i)throw new Error("Can't extract a file from an event object");return pl(i,e)}function Su(t,e){return e=e||{},hl(async()=>{let r=await fetch(t,e.fetch),i=rm(r,e);if(i)return{method:"fetch",stream:r.body,resource:e.resource||i,options:e};let s=r.headers.get("content-type")||"",a=await r.text();if(s.toLowerCase().startsWith("application/json"))try{let f=JSON.parse(a);a=f.error||f}catch{}throw a=new Error(a),a.stack=null,a},{title:`Load data from url: ${t}`})}function Au(t){let e,r=new ReadableStream({start(f){e=f},cancel(){e=null}}),i,s,a=new Promise(f=>{i=d=>f({method:"push",stream:r,resource:(s=d)||t.resource,options:t})||(i=()=>{})});return t=t||{},hl(()=>a,{start(f){i(f)},push(f){i(),e.enqueue(f)},finish(f){e.close(),e=null,isFinite(f)&&s&&(s.encodedSize=Number(f))}})}function nm({result:t,state:e},r){return new Promise((i,s)=>e.subscribeSync(({stage:a,progress:f,error:d},p)=>{if(d){p(),s(d);return}return a==="received"&&(p(),i(t)),r.setState({stage:a,progress:f})}))}function rm(t,e){if(t instanceof Response){let r=e?.isResponseOk||FW,i=e?.getContentSize||jW,s=e?.getContentEncodedSize||_W,a=e?.getContentSize||HW;if(r(t))return{type:"url",name:t.url,size:Number(i(t))||null,encodedSize:Number(s(t)),createdAt:a(t)}}if(t instanceof File)return{type:"file",name:t.name,size:t.size,createdAt:t.lastModified};if(t instanceof Blob)return{size:t.size};if(ArrayBuffer.isView(t))return{size:t.byteLength};if(typeof t=="string")return{size:t.length}}function VW(t){if(typeof t=="string"||DataView.isView(t))return function*(){yield new TextEncoder().encode(t)};if(!(Array.isArray(t)&&t.some(e=>typeof e!="string"))&&zW(t)){if(Symbol.asyncIterator in t)return t[Symbol.asyncIterator];if(Symbol.iterator in t)return t[Symbol.iterator]}}function KW(t){return t instanceof ReadableStream?t:t instanceof Response?t.body:t instanceof Blob?Qg(t):new ReadableStream({start(){let e=VW(t);if(!e)throw new Error("Bad value type (can't convert to a generator)");this.iterator=e()},async pull(e){let{value:r,done:i}=await this.iterator.next();i?(this.iterator=null,e.close()):e.enqueue(r)},cancel(){this.iterator=null}})}var gl=Object.assign(FT(),{setup:FT}),qT=()=>{},zT=["primary","secondary","menu"],YW=new Map([["insert",0],["prepend",0],["append",0],["before",1],["after",1],["replace",1],["remove"]]);function RT({mode:t,value:e}){return t==="auto"?"auto":e?"dark":"light"}function FT(t){return t=t||{},function(e){let r=null,i=qT,s=()=>{r?.finish(),r=null},a=t.hostId||Yg(),f=window.parent,d=new Map,p=(w,k=null)=>{f.postMessage({from:"discoveryjs-app",id:a,type:w,payload:k},"*")},g=w=>{i=()=>{w!==null&&(i=qT,w())}},y=w=>{(typeof e.trackLoadDataProgress=="function"?e.trackLoadDataProgress(w):w.result.then(A=>e.setData(A.data,null,{dataset:A}))).catch(()=>{})},x=w=>{let{id:k,type:A,payload:M}=w.data||{};if(k===a)switch(A){case"defineAction":{let D=M;e.action.define(D,(...O)=>new Promise((L,E)=>{let N=Yg();d.set(N,{resolve:L,reject:E}),setTimeout(()=>{d.delete(N),E(new Error("Timeout"))},3e4),p("action",{callId:N,name:D,args:O})}));break}case"actionResult":{let{callId:D,value:O,error:L}=M;if(!d.has(D)){e.log("error",`[Discovery.js] Unknown action call id "${D}"`);break}let{resolve:E,reject:N}=d.get(D);L?N(L):E(O);break}case"setPageHash":{let{replace:D,hash:O}=M||{};e.setPageHash(O||"",D||!1);break}case"setPage":{let{replace:D,id:O,ref:L,params:E}=M||{};e.setPage(O,L,E,D);break}case"setPageRef":{let{replace:D,ref:O}=M||{};e.setPageRef(O,D);break}case"setPageParams":{let{replace:D,params:O}=M||{};e.setPageParams(O,D);break}case"setDarkmode":{let D=M,O=["auto","light","dark"];if(!O.includes(D)){e.log("warn",`Wrong value for darkmode "${D}", supported values: ${O.map(L=>JSON.stringify(L)).join(", ")}`);break}e.darkmode.set(D==="auto"?"auto":D==="dark");break}case"setRouterPreventLocationUpdate":{e.routerPreventLocationUpdate=!!M;break}case"changeNavButtons":{let{section:D="primary",action:O="append",name:L,position:E,commands:N,config:B}=M||{};if(!zT.includes(D)){e.log("warn",`Wrong value for nav button place "${D}", supported values: ${zT.map(j=>JSON.stringify(j)).join(", ")}`);break}let I=N||{},R=JSON.parse(JSON.stringify(B),(j,F)=>I.includes(F)?()=>p("navMethod",F):F);switch(O){case"insert":e.nav[D].insert(R,E,L);break;case"prepend":case"append":e.nav[D][O](R);break;case"before":case"after":case"replace":e.nav[D][O](L,R);break;case"remove":e.nav[D].remove(L);break;default:e.log("warn",`Wrong value for nav button action "${O}", supported values: ${YW.map(j=>JSON.stringify(j)).join(", ")}`)}break}case"unloadData":{s(),e.unloadData();break}case"dataStream":{let{stream:D,resource:O}=M;s(),y(is(D,{resource:O}));break}case"startChunkedDataUpload":{let{acceptToken:D,resource:O}=M;s(),r=Object.assign(Au({resource:O}),{acceptToken:D}),y(r);break}case"cancelChunkedDataUpload":{let{acceptToken:D,error:O}=M;r?.acceptToken===D&&s(O)}case"dataChunk":{let{acceptToken:D,value:O,done:L}=M;if(r===null){e.log("warn","Loading data is not inited");break}if(r.acceptToken!==D){e.log("warn","Bad accept token");break}O&&r.push(O),L&&s();break}default:e.log("warn",`Got a post-message addressed to discovery app but with unknown "${A}" type`)}};f!==window&&(e.on("pageHashChange",w=>p("pageHashChanged",{replace:w,hash:e.pageHash||"#",id:e.pageId,ref:e.pageRef,params:e.pageParams})),e.on("startLoadData",w=>{i(),g(w(k=>p("loadingState",k)))}),e.on("startSetData",w=>{i(),g(w(k=>p("loadingState",k)))}),e.on("unloadData",()=>{i(),p("unloadData")}),e.on("data",()=>{p("data")}),e.darkmode.subscribe((w,k)=>p("darkmodeChanged",{mode:k,value:RT({mode:k,value:w})})),t.postponeMessages&&Promise.resolve().then(()=>{for(let w of t.postponeMessages)x({data:w})}),addEventListener("message",x,!1),addEventListener("unload",()=>p("destroy"),!1),p("ready",{page:{hash:e.pageHash||"#",id:e.pageId,ref:e.pageRef,params:e.pageParams},darkmode:{mode:e.darkmode.mode,value:RT(e.darkmode)}}))}}function om(t){t.setPageHash(location.hash),t.cancelScheduledRender(),t.action.define("permalink",e=>new URL(e,location).href),window.addEventListener("hashchange",()=>t.setPageHash(location.hash),!1),t.on("pageHashChange",function(e){let r=t.pageHash||"#";t.routerPreventLocationUpdate||r==="#"&&!location.hash||(e?location.replace(r):location.hash=r)})}var sm={request:{value:0,title:"Awaiting data"},receive:{value:.1,title:"Receiving data"},received:{value:.9,title:"Await app ready"},prepare:{value:.925,title:"Processing data (prepare)"},initui:{value:.975,title:"Rendering UI"},done:{value:1,title:"Done!"},error:{value:1,title:"Error!"}};Object.values(sm).forEach((t,e,r)=>{t.duration=(e!==r.length-1?r[e+1].value:0)-t.value});var _T=t=>t|0,jT=t=>typeof t=="function"?t:()=>{},QW=async()=>{if(await new Promise(t=>setTimeout(t,1)),!document.hidden)return Promise.race([new Promise(requestAnimationFrame),new Promise(t=>setTimeout(t,8))])};function XW(t,e){let{value:r,title:i,duration:s}=sm[t],a=0,f=null;if(e){let{done:d,elapsed:p,units:g,completed:y,total:x}=e;x?(a=d?1:y/x,f=g==="bytes"?Math.round(a*100)+"%":`${y}/${x}`):(a=d?1:.1+Math.min(.9,p/2e4),f=g==="bytes"?(y/(1024*1024)).toFixed(1)+"MB":y)}return{stageTitle:i,progressValue:r+a*s,progressText:f,title:f?`${i} (${f})...`:t!=="done"?`${i}...`:i}}var Ri=class extends tn{constructor({onTiming:e,onFinish:r,delay:i,domReady:s}){super({stage:null,progress:null,error:null}),this.finished=!1,this.awaitRepaint=null,this.lastStage="created",this.lastStageStart=null,this.timings=[],this.onTiming=jT(e),this.onFinish=jT(r),this.appearanceDelay=i===!0?200:Number(i)||0,this.domReady=s||Promise.resolve(),this.el=U("div","view-progress init",[U("div","title"),U("div","progress")])}recordTiming(e,r,i=performance.now()){let s={stage:e,title:sm[e].title,duration:_T(i-r)};this.timings.push(s),this.onTiming(s)}async setState(e){let{stage:r,progress:i,error:s}=e;if(this.finished)return;if(s){this.set("stage"in e?{stage:r,progress:i,error:s}:{...this.value,error:s}),this.finish(s);return}this.set(e);let a=r!==this.lastStage,f=performance.now();this.lastStage==="created"&&(this.startTime=f,this.domReady.then(()=>{let g=Math.max(0,this.appearanceDelay-_T(performance.now()-f));g&&this.el.style.setProperty("--appearance-delay",`${g}ms`),getComputedStyle(this.el).opacity,this.el.classList.remove("init")})),a&&(this.lastStageStart!==null&&this.recordTiming(this.lastStage,this.lastStageStart,f),this.lastStage=r,this.lastStageStart=f,this.awaitRepaint=f);let{title:d,progressValue:p}=XW(r,i);this.el.querySelector(".title").textContent=d,this.el.style.setProperty("--progress",p),(a||f-this.awaitRepaint>65&&f-this.lastStageStart>200)&&(await QW(),this.awaitRepaint=performance.now())}finish(e){this.finished||(this.finished=!0,this.lastStageStart!==null&&this.recordTiming(this.lastStage,this.lastStageStart),this.recordTiming(e?"error":"done",this.startTime),this.onFinish(this.timings),this.set({stage:"done"}))}dispose(){this.finish(),this.el.remove()}};var os=(t,e)=>t!==void 0?t:e,Tu=(t,e)=>({...e,encodings:Array.isArray(e?.encodings)?[...e.encodings,...t.encodings]:t.encodings}),ss=class extends ts{constructor(e={}){let r=e.extensions?[e.extensions]:[];r.push(YA),os(e.router,!0)&&r.push(om),e.mode!=="modelfree"&&(r.push(GA),r.push(VA)),os(e.upload,!1)&&(r.push(Kg.setup(e.upload)),r.push(KA)),os(e.embed,!1)&&r.push(gl),os(e.inspector,!0)&&r.push(QA),super({container:document.body,...e,extensions:r,darkmode:os(e.darkmode,"auto"),darkmodePersistent:os(e.darkmodePersistent,!0)}),this.mode=this.options.mode}setLoadingState(e,{error:r,progressbar:i}={}){let s=this.dom.loadingOverlay;switch(e){case"init":{if(s.classList.remove("error","done"),i.el.parentNode)return;s.innerHTML="",s.append(i.el),s.classList.add("init"),requestAnimationFrame(()=>s.classList.remove("init"));break}case"success":{s.classList.add("done");break}case"error":{s.classList.add("error"),s.innerHTML="",this.view.render(s,[{view:"block",className:"action-buttons",content:[{view:"preset/upload",when:this.preset.isDefined("upload")}]},r.renderContent||{view:"alert-danger",content:[{view:"h3",content:['badge:"Error"',{view:"text",when:"stage",data:"`[${stage}] `"},"text:errorText"]},'text:"(see details in the console)"']}],{stage:i?.lastStage,errorText:r.message||String(r),errorStack:(r.stack||"").replace(/^Error:\s*(\S+Error:)/,"$1")},{actions:this.action.actionMap}).then(()=>{this.log("error",r),i?.setState({error:r})});break}}}async setDataProgress(e,r,i){let s=i?.dataset,a=i?.progressbar||this.progressbar({title:"Set data"});try{this.setLoadingState("init",{progressbar:a}),await super.setDataProgress(e,r,{dataset:s,progressbar:a}),this.setLoadingState("success")}catch(f){this.setLoadingState("error",{error:f,progressbar:a})}}progressbar(e){return new Ri({delay:200,domReady:this.dom.ready,onFinish:r=>this.log({level:"perf",message:`${e.title||"Load data"} (${r[r.length-1].duration}ms)`,collapsed:()=>r.map(i=>`${i.title}: ${i.duration}ms`)}),...e})}trackLoadDataProgress(e){let r=this.progressbar({title:e.title});return this.setLoadingState("init",{progressbar:r}),this.emit("startLoadData",r.subscribe.bind(r)),nm(e,r).then(i=>this.setDataProgress(i.data,null,{dataset:i,progressbar:r}),i=>this.setLoadingState("error",{error:i,progressbar:r})),e.result}loadDataFromStream(e,r){return this.trackLoadDataProgress(is(e,Tu(this,typeof r=="number"?{size:r}:r)))}loadDataFromEvent(e,r){return this.options.mode==="modelfree"&&this.defaultPageId!==this.discoveryPageId&&(this._defaultPageId=this.defaultPageId,this.defaultPageId=this.discoveryPageId,this.setPageHash(this.pageHash,!0),this.cancelScheduledRender()),this.trackLoadDataProgress(Cu(e,Tu(this,r)))}loadDataFromFile(e,r){return this.trackLoadDataProgress(pl(e,Tu(this,r)))}loadDataFromUrl(e,r){return this.trackLoadDataProgress(Su(e,Tu(this,r)))}unloadData(){this.hasDatasets()&&this.options.mode==="modelfree"&&this._defaultPageId!==this.defaultPageId&&(this.defaultPageId=this._defaultPageId,this.setPageHash(this.pageHash,!0),this.cancelScheduledRender()),super.unloadData()}initDom(){super.initDom(),this.dom.container.append(this.dom.loadingOverlay=U("div","loading-overlay done"))}renderPage(){return document.title=this.getRenderContext().name||document.title,super.renderPage()}};var lm={};Ae(lm,{applyContainerStyles:()=>e5,rollbackContainerStyles:()=>t5});var JW={"font-family":"Tahoma, Verdana, Arial, sans-serif","font-size":"16px","line-height":"1.6","-webkit-text-size-adjust":"none","text-size-adjust":"none","background-color":"var(--discovery-background-color, white)",color:"var(--discovery-color, black)","transition-property":"background-color, color","transition-duration":".25s","transition-timing-function":"ease-in"},ZW={"--discovery-background-color":"#242424","--discovery-color":"#cccccc"},am=new WeakSet,Fi=new WeakMap;function HT(t,e,r){e in r||(r[e]=[t.style.getPropertyValue(e),t.style.getPropertyPriority(e)])}function e5(t,e){e=e||{},Fi.has(t)||Fi.set(t,Object.create(null));let r=Gk(e.darkmode,e.darkmodePersistent),i=Fi.get(t);for(let[s,a]of Object.entries(JW))(am.has(t)||!/^transition/.test(s))&&(HT(t,s,i),t.style.setProperty(s,a));for(let[s,a]of Object.entries(ZW))HT(t,s,i),r?t.style.setProperty(s,a):t.style.removeProperty(s);return am.add(t),r}function t5(t){if(Fi.has(t)){let e=Fi.get(t);for(let[r,i]of Object.entries(e))t.style.setProperty(r,...i);Fi.delete(Fi),am.delete(t)}}var n5={...lm,base64:fu,...Fp,copyText:Wt,...im,debounce:Dr,...zp,...ng,injectStyles:Va,...Ag,...Ig,...Xp,pattern:Lg,persistent:Hp,...Jp,progressbar:Ri,safeFilterRx:nl,...rg};function zQ(t,e,r,i){let s=t.model,a=new ss({mode:t.mode,styles:t.styles,darkmode:s.darkmode,darkmodePersistent:s.darkmodePersistent,upload:s.upload,inspector:s.inspector,router:s.router,encodings:P0,extensions:[...sk,...s.embed?[gl.setup(r)]:[],O0]});t.mode==="multi"&&a.nav.menu.append({name:"switch-model",onClick:'=$handler:"openModelIndex".actionHandler(href); $hide: #.hide; $handler and => $hide() or $handler()',data:{text:"Switch model",href:t.indexUrl}});let f={model:s};return i?a.setDataProgress(i.data,f,{progressbar:e,dataset:i}):(a.context=f,a.renderPage())}export{zQ as default};
